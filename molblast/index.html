<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Molecular BLAST (MASST) Search - GNPS Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Molecular BLAST (MASST) Search";
    var mkdocs_page_input_path = "molblast.md";
    var mkdocs_page_url = "/molblast/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-8412213-5', 'ccms-ucsd.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> GNPS Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">GNPS Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../isgnpsright/">Is my data compatible with GNPS?</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">Frequently Asked Questions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../superquickstart/">Superquick Start Guide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../quickstart/">Quick Start Guide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../gnpsanalysisoverview/">GNPS Analysis Tools Overview</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../changelog/">Change Log</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../contact/">Contact</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../workshops/">GNPS Workshops</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mass Spec/Computational Background</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../massspecbackground/networkingtheory/">Molecular Networking</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Data Preparation/Upload</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../fileconversion/">Mass Spectrometry File Conversion</a>
                </li>
                <li class="">
                    
    <a class="" href="../fileupload/">GNPS File Upload</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Recommended Data Analysis</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../networking/">Molecular Networking</a>
                </li>
                <li class="">
                    
    <a class="" href="../networkingviews/">Molecular Networking Views</a>
                </li>
                <li class="">
                    
    <a class="" href="../librarysearch/">Spectral Library Search</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Molecular BLAST (MASST) Search</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#overview">Overview</a></li>
    

    <li class="toctree-l3"><a href="#workflow-selection">Workflow Selection</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#manual-workflow-entering">Manual Workflow Entering</a></li>
        
            <li><a class="toctree-l4" href="#from-molecular-networking">From Molecular Networking</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#parameters">Parameters</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#search-options">Search Options</a></li>
        
            <li><a class="toctree-l4" href="#advanced-search-options">Advanced Search Options</a></li>
        
            <li><a class="toctree-l4" href="#advanced-filtering-options">Advanced Filtering Options</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#results">Results</a></li>
    

    <li class="toctree-l3"><a href="#citation">Citation</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../resultviews/">Result Views Navigation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Advanced Data Analysis</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../cytoscape/">Molecular Networking in Cytoscape</a>
                </li>
                <li class="">
                    
    <a class="" href="../dereplicator/">Dereplicator</a>
                </li>
                <li class="">
                    
    <a class="" href="../nap/">Network Annotation Propagation (NAP)</a>
                </li>
                <li class="">
                    
    <a class="" href="../featurebasedmolecularnetworking/">Feature Based Molecular Networking</a>
                </li>
                <li class="">
                    
    <a class="" href="../ms2lda/">MS2LDA and MotifDB Substructure Discovery</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Community/Social Features</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Spectral Libraries</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../browselibraries/">Browsing Reference Spectral Libraries</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../spectrumcuration/">Reference Spectral Library Curation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../batchupload/">Reference Spectral Library Batch Addition</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../downloadlibraries/">Downloading Reference Spectral Libraries</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Datasets</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../datasets/">Dataset Creation/Sharing</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../continuousid/">Continuous Identification</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../moleculeexplorer/">Molecule Explorer</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../user/">User Page</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorial Guides</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tutorials/bacterianetworking/">Molecular Networking - Analog Discovery in Microbial Extracts</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials/americangutmzmine/">Feature Based Molecular Networking - MZmine2 Feature Detection - Microbiome Molecules in Fecal Samples in American Gut Project</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorials/featurebasedgnps/">Feature Based Molecular Networking - GNPS</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Presentation Materials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../logos/">Logos</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">GNPS Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Recommended Data Analysis &raquo;</li>
        
      
    
    <li>Molecular BLAST (MASST) Search</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="overview">Overview</h2>
<p>Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including metadata) as well as search a single MS/MS spectrum against all public spectral libraries.</p>
<h2 id="workflow-selection">Workflow Selection</h2>
<p>To search a single spectrum to see where it occurs in all public GNPS datasets, there are two ways to populate the search.</p>
<h3 id="manual-workflow-entering">Manual Workflow Entering</h3>
<p>From the main <a href="https://gnps.ucsd.edu/ProteoSAFe/static/gnps-splash.jsp">GNPS page</a>, click the <a href="https://gnps.ucsd.edu/ProteoSAFe/index.jsp?params=%7B%22workflow%22:%22SEARCH_SINGLE_SPECTRUM%22,%22library_on_server%22:%22d.speclibs;%22%7D">"Query Spectrum"</a> button.</p>
<p><img alt="analysis" src="../img/singlespectrum/singlespectrum_selection.png" /></p>
<h3 id="from-molecular-networking">From Molecular Networking</h3>
<p>In analyzing your molecular networks, you can click the "Search Spec" button on the <a href="../networkingviews/#view-all-clusters-with-ids">View ALl Clusters With IDs</a> link to pre-populate parent mass and peaks.</p>
<p><img alt="img" src="../img/singlespectrum/searchspecnetworkinglink.png" /></p>
<h2 id="parameters">Parameters</h2>
<p>The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks.</p>
<p>The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an <a href="https://gnps.ucsd.edu/ProteoSAFe/index.jsp?task=fc961b77a34942408a832fd94da7dbd3">demonstration</a> input spectrum.</p>
<p><img alt="img" src="../img/singlespectrum/singlespectrum_input.png" /></p>
<h3 id="search-options">Search Options</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>Parent Mass Tolerance</td>
<td>Parent mass peak tolerance</td>
<td>2.0</td>
</tr>
<tr>
<td>Ion Tolerance</td>
<td>MS2 peak tolerance</td>
<td>0.5</td>
</tr>
<tr>
<td>Score Threshold</td>
<td>Cosine score threshold to make a match</td>
<td>0.5</td>
</tr>
<tr>
<td>Min Matched Peaks</td>
<td>Minimum matched peaks to make a match</td>
<td>6</td>
</tr>
</tbody>
</table>
<h3 id="advanced-search-options">Advanced Search Options</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>Library Class</td>
<td>Minimum Library Class to Consider in Search</td>
<td>Bronze</td>
</tr>
<tr>
<td>Top Hits Per Spectrum</td>
<td>Number of results to return per query spectrum</td>
<td>1</td>
</tr>
<tr>
<td>Search Analogs</td>
<td>Will search data for analogs to library spectra</td>
<td>Don't Search</td>
</tr>
<tr>
<td>Maximum Analog Search Mass Difference</td>
<td>Maximum mass shift between library and putative analog found</td>
<td>100 (Da)</td>
</tr>
</tbody>
</table>
<h3 id="advanced-filtering-options">Advanced Filtering Options</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filter stdDev Intensity</td>
<td>Deprecated</td>
<td>0</td>
<td>Not recommended to change</td>
</tr>
<tr>
<td>Minimum Fragment Ion Intensity</td>
<td>All fragment ions in the MS/MS spectrum below this raw intensity will be deleted.  By default, no filter.</td>
<td>0</td>
<td>Reduce to 0 if your data's raw intensities are very low.</td>
</tr>
<tr>
<td>Filter Precursor Ion Window</td>
<td>All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs.</td>
<td>Filter</td>
<td></td>
</tr>
<tr>
<td>Filter library</td>
<td>Apply peak filters to library</td>
<td>Filter</td>
<td></td>
</tr>
<tr>
<td>Filter peaks in 50Da Window</td>
<td>Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window</td>
<td>Filter</td>
<td>Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.</td>
</tr>
</tbody>
</table>
<h2 id="results">Results</h2>
<p>Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that <a href="../librarysearch/">documentation</a>.</p>
<p>The top scoring match to public GNPS datasets are listed in the "Dataset Matches".</p>
<p><img alt="img" src="../img/singlespectrum/datasetmatches.png" /></p>
<p>The quality of the match can be inspected by clicking the "plotting" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking "View File Matches in Dataset".</p>
<p><img alt="img" src="../img/singlespectrum/datasetfilematches.png" /></p>
<p>This view provides the full file path for all the files from each dataset along with the associated metadata for each file.</p>
<h2 id="citation">Citation</h2>
<p>In preparation. For the time being, please cite the GNPS publication.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../resultviews/" class="btn btn-neutral float-right" title="Result Views Navigation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../librarysearch/" class="btn btn-neutral" title="Spectral Library Search"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../librarysearch/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../resultviews/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
