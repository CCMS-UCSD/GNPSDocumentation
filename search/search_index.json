{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to GNPS Documentation \u00b6 Global Natural Products Social Molecular Networking (GNPS, https://gnps.ucsd.edu/ ) is a web-based mass spectrometry ecosystem that aims to be an open-access knowledge base for community-wide organization and sharing of raw, processed or identified tandem mass (MS/MS) spectrometry data. GNPS aids in identification and discovery throughout the entire life cycle of data; from initial data acquisition/analysis to post publication. As there are many aspects to GNPS, it can be a bit overwhelming. Here is a quick description of main functionalities: Analyze and Annotate \u00b6 Perform molecular networking and spectral library search of LC-MS/MS data utilizing computational tools (See Molecular Networking , Spectral Library Search , etc). Annotate/curate identified MS/MS spectra in open-access GNPS reference spectral libraries. Annotate peptidic natural products in LC-MS/MS data with DEREPLICATOR /VarQuest/DEREPLICATOR+ and RiPPQuest . Propagate in silico annotations in your LC-MS/MS data with Network Annotation Propagation (NAP) . NEW! Perform advanced molecular networking and spectral library search with Feature-Based Molecular Networking . See https://doi.org/10.1101/812404 . NEW! Analyze GC-MS data with GNPS (See GC-MS deconvolution , and GC-MS library search/molecular networks ). NEW! Annotate your LC-MS/MS data with MolNetEnhancer . See https://doi.org/10.1101/654459 . NEW! Search spectral Mass2Motifs in your LC-MS/MS data with MS2LDA . NEW! Give LC-MS/MS spectra biological/environmental context by searching against all public LC-MS/MS datasets ( MASST Search ). See https://doi.org/10.1101/591016 . NEW! Find and co- or re-analyze public LC-MS/MS data via systematic sample information at ReDU . See https://doi.org/10.1101/750471 . Share and Explore \u00b6 Publish entire study datasets with the Mass Spectrometry Interactive Virtual Environment (MassIVE) data repository ( Dataset Submission ). Browse and Reanalyze over 1500 public datasets at GNPS Automatic reanalysis of public datasets with automated reports of new identifications ( Continuous Identification ). Explore identifications of public datasets across entire repository ( Molecule Explorer ). For more detailed information, read on in the documentation, checkout the GNPS publication , and view some tutorial videos . Contribute to GNPS \u00b6 The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute ! See that page for more informations . Citation \u00b6 Recommended Citation Mingxun Wang, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking.\" Nature biotechnology 34, no. 8 (2016): 828. PMID: 27504778 GNPS and MassIVE uptime \u00b6 This is a brief overview of whether our web services are up: here . And a more detailed functional test status page . GNPS Documentation Site Authors \u00b6 We would like to thank the following contributors to the documentation. However, we want to acknowledge that we have moved documentation in 2018 to GitHub from our previous wiki and those contributions are not reflected in these numbers and were broadly subsumed into Ming Wang's contributions. These first additions to the documentation were invaluable and a few of those pioneers were Vanessa Phelan, Laura Sanchez, Laura Pace, Alexey Guruvich, and Don D. Nguyen. Ming Wang (49.7%) lfnothias (19.35%) MelissaESPOSITO (6.77%) alan-jarmusch (4.28%) Ricardo Silva (2.64%) Justin van der Hooft (2.32%) Madeleine Ernst (1.94%) KyobinKang (1.88%) zhz125 (1.43%) irinakoester (1.27%) Deepa Acharya (0.98%) Ivan Protsyuk (0.93%) Daniel Petras (0.92%) tamhdang (0.89%) Anupriya Tripathi (0.79%) mpanitch (0.76%) abauermeister (0.64%) jgauglitz (0.63%) Cynthia Grim (0.54%) Kevin Nguyen (0.39%) jorainer (0.34%) emgentry (0.16%) robinschmid (0.15%) mccall-lab-OU (0.1%) amcaraballor (0.1%) Mabel Gonzalez (0.04%) klj0019 (0.01%) katherinemaloney (0.01%) Allegra A (0.01%)","title":"GNPS Introduction"},{"location":"#welcome-to-gnps-documentation","text":"Global Natural Products Social Molecular Networking (GNPS, https://gnps.ucsd.edu/ ) is a web-based mass spectrometry ecosystem that aims to be an open-access knowledge base for community-wide organization and sharing of raw, processed or identified tandem mass (MS/MS) spectrometry data. GNPS aids in identification and discovery throughout the entire life cycle of data; from initial data acquisition/analysis to post publication. As there are many aspects to GNPS, it can be a bit overwhelming. Here is a quick description of main functionalities:","title":"Welcome to GNPS Documentation"},{"location":"#analyze-and-annotate","text":"Perform molecular networking and spectral library search of LC-MS/MS data utilizing computational tools (See Molecular Networking , Spectral Library Search , etc). Annotate/curate identified MS/MS spectra in open-access GNPS reference spectral libraries. Annotate peptidic natural products in LC-MS/MS data with DEREPLICATOR /VarQuest/DEREPLICATOR+ and RiPPQuest . Propagate in silico annotations in your LC-MS/MS data with Network Annotation Propagation (NAP) . NEW! Perform advanced molecular networking and spectral library search with Feature-Based Molecular Networking . See https://doi.org/10.1101/812404 . NEW! Analyze GC-MS data with GNPS (See GC-MS deconvolution , and GC-MS library search/molecular networks ). NEW! Annotate your LC-MS/MS data with MolNetEnhancer . See https://doi.org/10.1101/654459 . NEW! Search spectral Mass2Motifs in your LC-MS/MS data with MS2LDA . NEW! Give LC-MS/MS spectra biological/environmental context by searching against all public LC-MS/MS datasets ( MASST Search ). See https://doi.org/10.1101/591016 . NEW! Find and co- or re-analyze public LC-MS/MS data via systematic sample information at ReDU . See https://doi.org/10.1101/750471 .","title":"Analyze and Annotate"},{"location":"#share-and-explore","text":"Publish entire study datasets with the Mass Spectrometry Interactive Virtual Environment (MassIVE) data repository ( Dataset Submission ). Browse and Reanalyze over 1500 public datasets at GNPS Automatic reanalysis of public datasets with automated reports of new identifications ( Continuous Identification ). Explore identifications of public datasets across entire repository ( Molecule Explorer ). For more detailed information, read on in the documentation, checkout the GNPS publication , and view some tutorial videos .","title":"Share and Explore"},{"location":"#contribute-to-gnps","text":"The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute ! See that page for more informations .","title":"Contribute to GNPS"},{"location":"#citation","text":"Recommended Citation Mingxun Wang, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking.\" Nature biotechnology 34, no. 8 (2016): 828. PMID: 27504778","title":"Citation"},{"location":"#gnps-and-massive-uptime","text":"This is a brief overview of whether our web services are up: here . And a more detailed functional test status page .","title":"GNPS and MassIVE uptime"},{"location":"#gnps-documentation-site-authors","text":"We would like to thank the following contributors to the documentation. However, we want to acknowledge that we have moved documentation in 2018 to GitHub from our previous wiki and those contributions are not reflected in these numbers and were broadly subsumed into Ming Wang's contributions. These first additions to the documentation were invaluable and a few of those pioneers were Vanessa Phelan, Laura Sanchez, Laura Pace, Alexey Guruvich, and Don D. Nguyen. Ming Wang (49.7%) lfnothias (19.35%) MelissaESPOSITO (6.77%) alan-jarmusch (4.28%) Ricardo Silva (2.64%) Justin van der Hooft (2.32%) Madeleine Ernst (1.94%) KyobinKang (1.88%) zhz125 (1.43%) irinakoester (1.27%) Deepa Acharya (0.98%) Ivan Protsyuk (0.93%) Daniel Petras (0.92%) tamhdang (0.89%) Anupriya Tripathi (0.79%) mpanitch (0.76%) abauermeister (0.64%) jgauglitz (0.63%) Cynthia Grim (0.54%) Kevin Nguyen (0.39%) jorainer (0.34%) emgentry (0.16%) robinschmid (0.15%) mccall-lab-OU (0.1%) amcaraballor (0.1%) Mabel Gonzalez (0.04%) klj0019 (0.01%) katherinemaloney (0.01%) Allegra A (0.01%)","title":"GNPS Documentation Site Authors"},{"location":"ReDU/","text":"Welcome to ReDU (Reanalysis of Data User Interface) \u00b6 Full Documentation - link here \u00b6 \"What is ReDU?\" \u00b6 Finding and reusing data is hard. ReDU aims to make that easier. ReDU is a community-minded approach to find and reuse public data containing tandem MS data at the repository scale. ReDU is the bridge between the Global Natural Product Social Molecular Networking Analysis Platform (GNPS) and MassIVE , a public data repository for mass spectrometry data. The key to making this work is a systemic way of capturing basic information about each file contributed to ReDU ( i.e. sample information aka metadata). Using the sample information, users can select public data for re-analysis in GNPS or provide their own data along with public data to perform co-analysis. Our aim is to empower researchers to put their data in the context of public data as well as explore questions using public data at the repository scale. How do I contribute to ReDU? This is a community effort and everyone is encouraged to participate by submitting their own data and sample information instructions . The sharing of new applications (and code) which use ReDU is highly encouraged. Additional Information \u00b6 Data and Code Availability All data can be downloaded from MassIVE All sample information can be downloaded from the ReDU-MS2 homepage by clicking \"Download Database\". The ReDU identification database is publicly available and accessible via (GNPS) , MSV000084206. Code for ReDU can be found on GitHub - link here Recommended Citation Preprint on bioRxiv - Repository-scale Co- and Re-analysis of Tandem Mass Spectrometry Data . Peer-reviewed Publication - pending Issues and Suggestions See FAQ - link here Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged. Page Contributions \u00b6 alan-jarmusch","title":"Reanalysis of Data User Interface (ReDU)"},{"location":"ReDU/#welcome-to-redu-reanalysis-of-data-user-interface","text":"","title":"Welcome to ReDU (Reanalysis of Data User Interface)"},{"location":"ReDU/#full-documentation-link-here","text":"","title":"Full Documentation - link here"},{"location":"ReDU/#what-is-redu","text":"Finding and reusing data is hard. ReDU aims to make that easier. ReDU is a community-minded approach to find and reuse public data containing tandem MS data at the repository scale. ReDU is the bridge between the Global Natural Product Social Molecular Networking Analysis Platform (GNPS) and MassIVE , a public data repository for mass spectrometry data. The key to making this work is a systemic way of capturing basic information about each file contributed to ReDU ( i.e. sample information aka metadata). Using the sample information, users can select public data for re-analysis in GNPS or provide their own data along with public data to perform co-analysis. Our aim is to empower researchers to put their data in the context of public data as well as explore questions using public data at the repository scale. How do I contribute to ReDU? This is a community effort and everyone is encouraged to participate by submitting their own data and sample information instructions . The sharing of new applications (and code) which use ReDU is highly encouraged.","title":"\"What is ReDU?\""},{"location":"ReDU/#additional-information","text":"Data and Code Availability All data can be downloaded from MassIVE All sample information can be downloaded from the ReDU-MS2 homepage by clicking \"Download Database\". The ReDU identification database is publicly available and accessible via (GNPS) , MSV000084206. Code for ReDU can be found on GitHub - link here Recommended Citation Preprint on bioRxiv - Repository-scale Co- and Re-analysis of Tandem Mass Spectrometry Data . Peer-reviewed Publication - pending Issues and Suggestions See FAQ - link here Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged.","title":"Additional Information"},{"location":"ReDU/#page-contributions","text":"alan-jarmusch","title":"Page Contributions"},{"location":"api/","text":"GNPS API Overview \u00b6 GNPS Library Spectra \u00b6 All Public Library Spectra at GNPS \u00b6 https://gnps-external.ucsd.edu/gnpslibraryjson All Public Library Specta at GNPS with Peaks and Annotation History \u00b6 https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.json Example JSON Format [ { \"spectrum_id\" : \"CCMSLIB00000579358\" , \"source_file\" : \"Training_001.mgf\" , \"task\" : \"03c206430208430c887ca025ea6c3641\" , \"scan\" : \"1\" , \"ms_level\" : \"2\" , \"library_membership\" : \"CASMI\" , \"spectrum_status\" : \"1\" , \"peaks_json\" : \"[[164.033997,32294.500000],[179.057495,129907.101562]]\" , \"splash\" : \"null-null-null-null\" , \"submit_user\" : \"lfnothias\" , \"Compound_Name\" : \"Theophyllin\" , \"Ion_Source\" : \"LC-ESI\" , \"Compound_Source\" : \"Commercial\" , \"Instrument\" : \"Orbitrap\" , \"PI\" : \"CASMI\" , \"Data_Collector\" : \"CASMI2016\" , \"Adduct\" : \"M-H\" , \"Scan\" : \"-1\" , \"Precursor_MZ\" : \"179.057\" , \"ExactMass\" : \"0.0\" , \"Charge\" : \"1\" , \"CAS_Number\" : \"N/A\" , \"Pubmed_ID\" : \"33919\" , \"Smiles\" : \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\" , \"INCHI\" : \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\" , \"INCHI_AUX\" : \"N/A\" , \"Library_Class\" : \"1\" , \"SpectrumID\" : \"CCMSLIB00000579358\" , \"Ion_Mode\" : \" Negative\" , \"create_time\" : \"2016-05-24 18:27:20.0\" , \"task_id\" : \"03c206430208430c887ca025ea6c3641\" , \"user_id\" : \"null\" , \"InChIKey_smiles\" : \"ZFXYFBGIUFBOJW-UHFFFAOYSA-N\" , \"InChIKey_inchi\" : \"None\" , \"Formula_smiles\" : \"C7H8N4O2\" , \"Formula_inchi\" : \"\" , \"url\" : \"https://gnps.ucsd.edu/ProteoSAFe/gnpslibraryspectrum.jsp?SpectrumID=CCMSLIB00000579358\" , \"annotation_history\" : [ { \"Compound_Name\" : \"Theophyllin\" , \"Ion_Source\" : \"LC-ESI\" , \"Compound_Source\" : \"Commercial\" , \"Instrument\" : \"Orbitrap\" , \"PI\" : \"CASMI\" , \"Data_Collector\" : \"CASMI2016\" , \"Adduct\" : \"M-H\" , \"Scan\" : \"-1\" , \"Precursor_MZ\" : \"179.057\" , \"ExactMass\" : \"0.0\" , \"Charge\" : \"1\" , \"CAS_Number\" : \"N/A\" , \"Pubmed_ID\" : \"33919\" , \"Smiles\" : \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\" , \"INCHI\" : \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\" , \"INCHI_AUX\" : \"N/A\" , \"Library_Class\" : \"1\" , \"SpectrumID\" : \"CCMSLIB00000579358\" , \"Ion_Mode\" : \" Negative\" , \"create_time\" : \"2016-05-24 18:27:20.0\" , \"task_id\" : \"03c206430208430c887ca025ea6c3641\" , \"user_id\" : \"lfnothias\" } ] } ] As MGF https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.mgf Example MGF Format BEGIN IONS PEPMASS=407.186 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=LC-ESI-qTof FILENAME=Plate1_1_20_GG1_01_16488.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-SELLECKCHEM-FDA-PART2 NAME=Bortezomib (Velcade) [M+Na] PI=Dorrestein DATACOLLECTOR=Garg_Neha SMILES=C1=CN=CC(=N1)C(N[C@H](C(N[C@H](B(O)O)CC(C)C)=O)CC2=CC=CC=C2)=O INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=negarg LIBRARYQUALITY=1 SPECTRUMID=CCMSLIB00000077995 SCANS=1211 95.886879 236.0 131.058121 188.0 144.823196 204.0 ... 1402.281494 144.0 END IONS As MSP https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.msp Single Library Spectrum \u00b6 https://gnps.ucsd.edu/ProteoSAFe/SpectrumCommentServlet?SpectrumID=<Library Accession> Example GNPS Jobs \u00b6 Job Results API \u00b6 GNPS job results page in JSON format: https://gnps.ucsd.edu/ProteoSAFe/result_json.jsp?task=<task id>&view=<view name> Example Structure Conversion \u00b6 Conversion to Smiles \u00b6 https://gnps-structure.ucsd.edu/smiles?inchi=<inchi string> Example Conversion to InChI \u00b6 https://gnps-structure.ucsd.edu/inchi?smiles=<smiles string> Example Conversion to InChIKey \u00b6 https://gnps-structure.ucsd.edu/inchikey?smiles=<smiles string> Example Conversion to exact mass \u00b6 https://gnps-structure.ucsd.edu/structuremass?smiles=<smiles string> Example Conversion to formula \u00b6 https://gnps-structure.ucsd.edu/formula?smiles=<smiles string> Example Structure Classyfire \u00b6 If you have Smiles https://gnps-structure.ucsd.edu/classyfire?smiles=<smiles string> Example If you have InChI https://gnps-structure.ucsd.edu/classyfire?inchi=<InChI string> Example If you have InChI Key https://gnps-classyfire.ucsd.edu/entities/<InChI Key>.json Example Additionally, in case the inchikey is not classified, you can provide smiles or inchi arguments for us to push to the Wishart servers to classify. Structure Image \u00b6 https://gnps-structure.ucsd.edu/structureimg?smiles=<smiles string> Example ReDU \u00b6 Per File Sample Information Query \u00b6 https://redu.ucsd.edu/filename?query=<File full path in MassIVE> Example GNPS Continuous ID Data \u00b6 If you want to download all public datasets that have been processed by GNPS. You can find a dump of all these files in this dataset MSV000084314 . This includes: Clustered MGFs for each dataset Identifications for clustered spectra Mapping of clusters back to original files and scans Molecular Networks for each dataset Page Contributions \u00b6 Ming Wang","title":"API"},{"location":"api/#gnps-api-overview","text":"","title":"GNPS API Overview"},{"location":"api/#gnps-library-spectra","text":"","title":"GNPS Library Spectra"},{"location":"api/#all-public-library-spectra-at-gnps","text":"https://gnps-external.ucsd.edu/gnpslibraryjson","title":"All Public Library Spectra at GNPS"},{"location":"api/#all-public-library-specta-at-gnps-with-peaks-and-annotation-history","text":"https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.json Example JSON Format [ { \"spectrum_id\" : \"CCMSLIB00000579358\" , \"source_file\" : \"Training_001.mgf\" , \"task\" : \"03c206430208430c887ca025ea6c3641\" , \"scan\" : \"1\" , \"ms_level\" : \"2\" , \"library_membership\" : \"CASMI\" , \"spectrum_status\" : \"1\" , \"peaks_json\" : \"[[164.033997,32294.500000],[179.057495,129907.101562]]\" , \"splash\" : \"null-null-null-null\" , \"submit_user\" : \"lfnothias\" , \"Compound_Name\" : \"Theophyllin\" , \"Ion_Source\" : \"LC-ESI\" , \"Compound_Source\" : \"Commercial\" , \"Instrument\" : \"Orbitrap\" , \"PI\" : \"CASMI\" , \"Data_Collector\" : \"CASMI2016\" , \"Adduct\" : \"M-H\" , \"Scan\" : \"-1\" , \"Precursor_MZ\" : \"179.057\" , \"ExactMass\" : \"0.0\" , \"Charge\" : \"1\" , \"CAS_Number\" : \"N/A\" , \"Pubmed_ID\" : \"33919\" , \"Smiles\" : \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\" , \"INCHI\" : \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\" , \"INCHI_AUX\" : \"N/A\" , \"Library_Class\" : \"1\" , \"SpectrumID\" : \"CCMSLIB00000579358\" , \"Ion_Mode\" : \" Negative\" , \"create_time\" : \"2016-05-24 18:27:20.0\" , \"task_id\" : \"03c206430208430c887ca025ea6c3641\" , \"user_id\" : \"null\" , \"InChIKey_smiles\" : \"ZFXYFBGIUFBOJW-UHFFFAOYSA-N\" , \"InChIKey_inchi\" : \"None\" , \"Formula_smiles\" : \"C7H8N4O2\" , \"Formula_inchi\" : \"\" , \"url\" : \"https://gnps.ucsd.edu/ProteoSAFe/gnpslibraryspectrum.jsp?SpectrumID=CCMSLIB00000579358\" , \"annotation_history\" : [ { \"Compound_Name\" : \"Theophyllin\" , \"Ion_Source\" : \"LC-ESI\" , \"Compound_Source\" : \"Commercial\" , \"Instrument\" : \"Orbitrap\" , \"PI\" : \"CASMI\" , \"Data_Collector\" : \"CASMI2016\" , \"Adduct\" : \"M-H\" , \"Scan\" : \"-1\" , \"Precursor_MZ\" : \"179.057\" , \"ExactMass\" : \"0.0\" , \"Charge\" : \"1\" , \"CAS_Number\" : \"N/A\" , \"Pubmed_ID\" : \"33919\" , \"Smiles\" : \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\" , \"INCHI\" : \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\" , \"INCHI_AUX\" : \"N/A\" , \"Library_Class\" : \"1\" , \"SpectrumID\" : \"CCMSLIB00000579358\" , \"Ion_Mode\" : \" Negative\" , \"create_time\" : \"2016-05-24 18:27:20.0\" , \"task_id\" : \"03c206430208430c887ca025ea6c3641\" , \"user_id\" : \"lfnothias\" } ] } ] As MGF https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.mgf Example MGF Format BEGIN IONS PEPMASS=407.186 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=LC-ESI-qTof FILENAME=Plate1_1_20_GG1_01_16488.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-SELLECKCHEM-FDA-PART2 NAME=Bortezomib (Velcade) [M+Na] PI=Dorrestein DATACOLLECTOR=Garg_Neha SMILES=C1=CN=CC(=N1)C(N[C@H](C(N[C@H](B(O)O)CC(C)C)=O)CC2=CC=CC=C2)=O INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=negarg LIBRARYQUALITY=1 SPECTRUMID=CCMSLIB00000077995 SCANS=1211 95.886879 236.0 131.058121 188.0 144.823196 204.0 ... 1402.281494 144.0 END IONS As MSP https://gnps-external.ucsd.edu/gnpslibrary/ALL_GNPS.msp","title":"All Public Library Specta at GNPS with Peaks and Annotation History"},{"location":"api/#single-library-spectrum","text":"https://gnps.ucsd.edu/ProteoSAFe/SpectrumCommentServlet?SpectrumID=<Library Accession> Example","title":"Single Library Spectrum"},{"location":"api/#gnps-jobs","text":"","title":"GNPS Jobs"},{"location":"api/#job-results-api","text":"GNPS job results page in JSON format: https://gnps.ucsd.edu/ProteoSAFe/result_json.jsp?task=<task id>&view=<view name> Example","title":"Job Results API"},{"location":"api/#structure-conversion","text":"","title":"Structure Conversion"},{"location":"api/#conversion-to-smiles","text":"https://gnps-structure.ucsd.edu/smiles?inchi=<inchi string> Example","title":"Conversion to Smiles"},{"location":"api/#conversion-to-inchi","text":"https://gnps-structure.ucsd.edu/inchi?smiles=<smiles string> Example","title":"Conversion to InChI"},{"location":"api/#conversion-to-inchikey","text":"https://gnps-structure.ucsd.edu/inchikey?smiles=<smiles string> Example","title":"Conversion to InChIKey"},{"location":"api/#conversion-to-exact-mass","text":"https://gnps-structure.ucsd.edu/structuremass?smiles=<smiles string> Example","title":"Conversion to exact mass"},{"location":"api/#conversion-to-formula","text":"https://gnps-structure.ucsd.edu/formula?smiles=<smiles string> Example","title":"Conversion to formula"},{"location":"api/#structure-classyfire","text":"If you have Smiles https://gnps-structure.ucsd.edu/classyfire?smiles=<smiles string> Example If you have InChI https://gnps-structure.ucsd.edu/classyfire?inchi=<InChI string> Example If you have InChI Key https://gnps-classyfire.ucsd.edu/entities/<InChI Key>.json Example Additionally, in case the inchikey is not classified, you can provide smiles or inchi arguments for us to push to the Wishart servers to classify.","title":"Structure Classyfire"},{"location":"api/#structure-image","text":"https://gnps-structure.ucsd.edu/structureimg?smiles=<smiles string> Example","title":"Structure Image"},{"location":"api/#redu","text":"","title":"ReDU"},{"location":"api/#per-file-sample-information-query","text":"https://redu.ucsd.edu/filename?query=<File full path in MassIVE> Example","title":"Per File Sample Information Query"},{"location":"api/#gnps-continuous-id-data","text":"If you want to download all public datasets that have been processed by GNPS. You can find a dump of all these files in this dataset MSV000084314 . This includes: Clustered MGFs for each dataset Identifications for clustered spectra Mapping of clusters back to original files and scans Molecular Networks for each dataset","title":"GNPS Continuous ID Data"},{"location":"api/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"batchupload/","text":"Batch Upload of Annotated Spectra \u00b6 While there is an interface to upload single spectra, users who wish to batch upload many spectra into the libraries might find adding one spectra at a time cumbersome. Here we provide a method to batch upload many spectra. Here is a quick instructional video we have put together: Materials \u00b6 The materials that are required are: Annotation Spread Sheet (This can be produced below manually by selecting scans in the mass spec data, or automatically generated with the MSMS-Chooser workflow - see documentation) Source mzXML/mzML/mgf mass spectra files to pull MS/MS spectra Annotation Spread Sheet \u00b6 To batch upload, this template must be used: Template Spreadsheet Annotation are to be added one spectrum per line. Columns may not be added, or deleted or changed. Each column must have a value. Refer to the table below for default values to enter when not known. Export from this Excel file as a tab separated text file (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings). Batch File Annotation \u00b6 To check the validity of your batch file, check out our batch validator . Field Information \u00b6 The field requirements are the same as on the single spectrum upload form, the other columns can be ignored. FIeld description are listed below. Please note: Only letters, numbers and underscores are allowed in the filenames. Spaces and special characters are NOT allowed. Header Desc. Default Value to Put When Not Known Possible Values Required FILENAME Input Filename (mzXML, mzML, or mgf) REQUIRED only letters, numbers, underscores and periods are allowed Yes SEQ Peptide Sequence *..* Please enter *..* here only No COMPOUND_NAME Compound Common Name REQUIRED Yes MOLECULEMASS Corrected Precursor MZ for Compound 0 Entering 0 means we will attempt to read the mz value from file No INSTRUMENT Mass Analyzer Instrument REQUIRED qTof, QQQ, Ion Trap, Hybrid FT, Orbitrap, ToF Yes IONSOURCE Source of Ions REQUIRED LC-ESI, DI-ESI, EI, APCI, ESI Yes EXTRACTSCAN Spectrum Scan of Spectrum REQUIRED Yes SMILES Smiles Structure N/A No INCHI Inchi Structure N/A No INCHIAUX Inchi Auxiliary Structure N/A No CHARGE Charge of Precursor (0 to pull from the spectrum file) 0 No IONMODE Ionization Mode (Positive/Negative) Positive Positive, Negative Yes PUBMED Pubmed ID where compound or data was published N/A No ACQUISITION Sample source of compound Crude Crude, Lysate, Commercial, Isolated, Other Yes EXACTMASS Compound Exact Mass 0 No DATACOLLECTOR Individual collecting data REQUIRED Yes ADDUCT Adduct of Ion Fragmented in MS2 (M+H, M+2H, etc.) REQUIRED Yes INTEREST N/A N/A No LIBQUALITY Quality of Library (1 for Gold, 2 for Silver, 3 for Bronze) 3 1,2,3 Yes GENUS Genus N/A No SPECIES Species N/A No STRAIN Strain N/A No CASNUMBER Chemical Abstracts Service compound identification number N/A No PI PI overseeing compound acquisition and analysis Required Yes It must be noted that filenames must match exactly to those users are uploading. Filenames must also be unique, and can only contain numbers, letters, hyphens, underscores, and periods. All fields for each row must have some content -- blank fields are unacceptable. Fields other than filename also cannot contain return carriages or tabs. Spectrum Upload \u00b6 Users will need to upload their files into GNPS. To do this please refer to the upload documentation here . Creation/Publication of Spectral Library \u00b6 To actually add the spectra to the libraries, users will Export excel file as a tab separated text file and upload to GNPS (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings) Launch Batch Validator Workflow with all spectrum files and annotation table found here . NOTE: Creating spectral libraries from MGF files is discouragedas it is not a well defined format. If you do insist, you must make sure each MGF start from scan 1 (e.g. SCANS=1 in the file) and are incremented sequentially without any missing scan numbers. Users will then need to contact Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above. A private spectral library will then be created by Morgan. After the contributor may review the library to be made into a public library and will be made public after approval. License \u00b6 All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users. Page Contributions \u00b6 Ming Wang (43.68%), mpanitch (55.17%), klj0019 (1.15%)","title":"Reference Spectral Library Batch Addition"},{"location":"batchupload/#batch-upload-of-annotated-spectra","text":"While there is an interface to upload single spectra, users who wish to batch upload many spectra into the libraries might find adding one spectra at a time cumbersome. Here we provide a method to batch upload many spectra. Here is a quick instructional video we have put together:","title":"Batch Upload of Annotated Spectra"},{"location":"batchupload/#materials","text":"The materials that are required are: Annotation Spread Sheet (This can be produced below manually by selecting scans in the mass spec data, or automatically generated with the MSMS-Chooser workflow - see documentation) Source mzXML/mzML/mgf mass spectra files to pull MS/MS spectra","title":"Materials"},{"location":"batchupload/#annotation-spread-sheet","text":"To batch upload, this template must be used: Template Spreadsheet Annotation are to be added one spectrum per line. Columns may not be added, or deleted or changed. Each column must have a value. Refer to the table below for default values to enter when not known. Export from this Excel file as a tab separated text file (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings).","title":"Annotation Spread Sheet"},{"location":"batchupload/#batch-file-annotation","text":"To check the validity of your batch file, check out our batch validator .","title":"Batch File Annotation"},{"location":"batchupload/#field-information","text":"The field requirements are the same as on the single spectrum upload form, the other columns can be ignored. FIeld description are listed below. Please note: Only letters, numbers and underscores are allowed in the filenames. Spaces and special characters are NOT allowed. Header Desc. Default Value to Put When Not Known Possible Values Required FILENAME Input Filename (mzXML, mzML, or mgf) REQUIRED only letters, numbers, underscores and periods are allowed Yes SEQ Peptide Sequence *..* Please enter *..* here only No COMPOUND_NAME Compound Common Name REQUIRED Yes MOLECULEMASS Corrected Precursor MZ for Compound 0 Entering 0 means we will attempt to read the mz value from file No INSTRUMENT Mass Analyzer Instrument REQUIRED qTof, QQQ, Ion Trap, Hybrid FT, Orbitrap, ToF Yes IONSOURCE Source of Ions REQUIRED LC-ESI, DI-ESI, EI, APCI, ESI Yes EXTRACTSCAN Spectrum Scan of Spectrum REQUIRED Yes SMILES Smiles Structure N/A No INCHI Inchi Structure N/A No INCHIAUX Inchi Auxiliary Structure N/A No CHARGE Charge of Precursor (0 to pull from the spectrum file) 0 No IONMODE Ionization Mode (Positive/Negative) Positive Positive, Negative Yes PUBMED Pubmed ID where compound or data was published N/A No ACQUISITION Sample source of compound Crude Crude, Lysate, Commercial, Isolated, Other Yes EXACTMASS Compound Exact Mass 0 No DATACOLLECTOR Individual collecting data REQUIRED Yes ADDUCT Adduct of Ion Fragmented in MS2 (M+H, M+2H, etc.) REQUIRED Yes INTEREST N/A N/A No LIBQUALITY Quality of Library (1 for Gold, 2 for Silver, 3 for Bronze) 3 1,2,3 Yes GENUS Genus N/A No SPECIES Species N/A No STRAIN Strain N/A No CASNUMBER Chemical Abstracts Service compound identification number N/A No PI PI overseeing compound acquisition and analysis Required Yes It must be noted that filenames must match exactly to those users are uploading. Filenames must also be unique, and can only contain numbers, letters, hyphens, underscores, and periods. All fields for each row must have some content -- blank fields are unacceptable. Fields other than filename also cannot contain return carriages or tabs.","title":"Field Information"},{"location":"batchupload/#spectrum-upload","text":"Users will need to upload their files into GNPS. To do this please refer to the upload documentation here .","title":"Spectrum Upload"},{"location":"batchupload/#creationpublication-of-spectral-library","text":"To actually add the spectra to the libraries, users will Export excel file as a tab separated text file and upload to GNPS (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings) Launch Batch Validator Workflow with all spectrum files and annotation table found here . NOTE: Creating spectral libraries from MGF files is discouragedas it is not a well defined format. If you do insist, you must make sure each MGF start from scan 1 (e.g. SCANS=1 in the file) and are incremented sequentially without any missing scan numbers. Users will then need to contact Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above. A private spectral library will then be created by Morgan. After the contributor may review the library to be made into a public library and will be made public after approval.","title":"Creation/Publication of Spectral Library"},{"location":"batchupload/#license","text":"All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users.","title":"License"},{"location":"batchupload/#page-contributions","text":"Ming Wang (43.68%), mpanitch (55.17%), klj0019 (1.15%)","title":"Page Contributions"},{"location":"browselibraries/","text":"GNPS Community Spectral Libraries \u00b6 The GNPS public spectral libraries can be browsed, explored, and downloaded. The list of all public spectral libraries is listed here . GNPS Community Library \u00b6 There are several spectral libraries available at GNPS. They are either imported from the community (e.g. Massbank ), provided directly to GNPS as a large collection of annotated spectra (e.g. Pesticide Library ), or aggregated from single MS/MS additions from the entire community (e.g. GNPS-Community ). Clicking on a library brings users to a list of all MS/MS spectra that are in that library. The most up to date annotation is listed. Most Recent Contributions \u00b6 At the bottom of the list of all spectral library, the most recent contributions of annotation library spectra are listed in reverse chronological order. These generous contributions from members of the community are just the latest amongst the thousands of MS/MS spectra deposited at GNPS. Library Spectrum List \u00b6 Users will be presented with a list of all spectra in the library. Each line represents a different entry in the library and displays the most recent annotation for that particular spectrum. Users are able to download the update to date version of each particular library by clicking the download icon next to the library header. Individual Spectrum View \u00b6 Users will be presented with a spectrum page that includes at the top an interactive spectrum viewer as well as the most recent spectrum information. Updating Spectrum Annotation \u00b6 In the event that annotations are incomplete or incorrect, users have the option to correct/update annotations of the library spectra. On each library spectrum page there is an update button to update the annotation. Spectrum Annotation History \u00b6 Revision history of the spectrum. Sorted in reverse chronological order, with most recent revisions first. To comment on a specific revision of the annotations, users can click the comment button for each annotation row. To view comments on each annotation, users can click the double down arrow at the left of the row. Using Spectral Libraries in GNPS Analysis \u00b6 The default spectral libraries are located in the speclibs folder in GNPS. Additionally, separate libraries that are not selected by default are located for example: CCMS_SpectralLibraries/GNPS_Propogated_Libraries These are propogated spectral libraries that inherently are less confident but this provides an avenue to give more identifications. License \u00b6 All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users. Page Contributions \u00b6 Ming Wang","title":"Browsing Reference Spectral Libraries"},{"location":"browselibraries/#gnps-community-spectral-libraries","text":"The GNPS public spectral libraries can be browsed, explored, and downloaded. The list of all public spectral libraries is listed here .","title":"GNPS Community Spectral Libraries"},{"location":"browselibraries/#gnps-community-library","text":"There are several spectral libraries available at GNPS. They are either imported from the community (e.g. Massbank ), provided directly to GNPS as a large collection of annotated spectra (e.g. Pesticide Library ), or aggregated from single MS/MS additions from the entire community (e.g. GNPS-Community ). Clicking on a library brings users to a list of all MS/MS spectra that are in that library. The most up to date annotation is listed.","title":"GNPS Community Library"},{"location":"browselibraries/#most-recent-contributions","text":"At the bottom of the list of all spectral library, the most recent contributions of annotation library spectra are listed in reverse chronological order. These generous contributions from members of the community are just the latest amongst the thousands of MS/MS spectra deposited at GNPS.","title":"Most Recent Contributions"},{"location":"browselibraries/#library-spectrum-list","text":"Users will be presented with a list of all spectra in the library. Each line represents a different entry in the library and displays the most recent annotation for that particular spectrum. Users are able to download the update to date version of each particular library by clicking the download icon next to the library header.","title":"Library Spectrum List"},{"location":"browselibraries/#individual-spectrum-view","text":"Users will be presented with a spectrum page that includes at the top an interactive spectrum viewer as well as the most recent spectrum information.","title":"Individual Spectrum View"},{"location":"browselibraries/#updating-spectrum-annotation","text":"In the event that annotations are incomplete or incorrect, users have the option to correct/update annotations of the library spectra. On each library spectrum page there is an update button to update the annotation.","title":"Updating Spectrum Annotation"},{"location":"browselibraries/#spectrum-annotation-history","text":"Revision history of the spectrum. Sorted in reverse chronological order, with most recent revisions first. To comment on a specific revision of the annotations, users can click the comment button for each annotation row. To view comments on each annotation, users can click the double down arrow at the left of the row.","title":"Spectrum Annotation History"},{"location":"browselibraries/#using-spectral-libraries-in-gnps-analysis","text":"The default spectral libraries are located in the speclibs folder in GNPS. Additionally, separate libraries that are not selected by default are located for example: CCMS_SpectralLibraries/GNPS_Propogated_Libraries These are propogated spectral libraries that inherently are less confident but this provides an avenue to give more identifications.","title":"Using Spectral Libraries in GNPS Analysis"},{"location":"browselibraries/#license","text":"All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users.","title":"License"},{"location":"browselibraries/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"changelog/","text":"Change Log of GNPS Documentation \u00b6 All new updates will be posted on the GNPS Github Page ! 10/20/2019 \u00b6 Major documentation update for the Feature-Based Molecular Networking (FBMN) . FBMN supports the mzTab-M format , and Progenesis QI . FBMN provide now supports LC-MS/MS data acquired in MSE mode (MS-DIAL and Progenesis QI) or with Ion Mobility Spectrometry (MS-DIAL, Progenesis QI, and MetaboScape). 5/3/2019 \u00b6 GNPS Workflow Release 3 4/8/2019 \u00b6 Update documentation for DEREPLICATOR tools . Update the index.md . 4/5/2019 \u00b6 New documentation for Feature-Based Molecular Networking (FBMN) . New tools available with the FBMN OpenMS , MS-DIAL , XCMS , and MetaboScape . 3/9/2019 \u00b6 Adding qiime2 qza and emperor output for Feature Based Molecular Networking Adding GraphML output for MS2LDA GNPS Quickstart will do only the fly conversion of Thermo raw files. 2/5/2019 \u00b6 Adding credentials option for GNPS quickstart for classic molecular Networking Adding link to clone deprecated molecular networking to latest version of molecular networking Adding direct re-analysis link for MS2LDA from molecular networking Bug fixes for MS2LDA Adding batch spectra additional validator 12/27/2018 \u00b6 GNPS quickstart support within MZMine2 updated 11/1/2018 \u00b6 Added UniqueFileCount to GraphML in Classic Molecular Networking Added GNPS Cluster Linkouts and GNPS Network Visualizer linkouts to GraphML in Classic Molecular Networking 10/28/2018 \u00b6 Feature based molecular networking is supported in the superquick start page Feature based molecular networking now supports MZMine2, OpenMS, Optimus, MS-DIAL, Metaboscape, and XCMS3 feature finding tools 10/26/2018 \u00b6 Adding UniqueFileSource attribute to GNPS Molecular Networking V2 Workflow (METABOLOMICS-SNETS-V2) 9/5/2018 \u00b6 Mirror plots include mz labels MASST supports dataset metadata display 8/1/2018 \u00b6 New Documentation and Splash Page are available Bug Fixes for Library Search to provide 10X increase in throughput for large datasets MASST is available to report MS/MS spectrum occurrences at a single file level with metadata reported if available 6/27/2018 \u00b6 Updating documentation 6/1/2018 \u00b6 New documentation website. Beta version of Molecular Networking provides stream lined results and cytoscape compliant output.","title":"Change Log"},{"location":"changelog/#change-log-of-gnps-documentation","text":"All new updates will be posted on the GNPS Github Page !","title":"Change Log of GNPS Documentation"},{"location":"changelog/#10202019","text":"Major documentation update for the Feature-Based Molecular Networking (FBMN) . FBMN supports the mzTab-M format , and Progenesis QI . FBMN provide now supports LC-MS/MS data acquired in MSE mode (MS-DIAL and Progenesis QI) or with Ion Mobility Spectrometry (MS-DIAL, Progenesis QI, and MetaboScape).","title":"10/20/2019"},{"location":"changelog/#532019","text":"GNPS Workflow Release 3","title":"5/3/2019"},{"location":"changelog/#482019","text":"Update documentation for DEREPLICATOR tools . Update the index.md .","title":"4/8/2019"},{"location":"changelog/#452019","text":"New documentation for Feature-Based Molecular Networking (FBMN) . New tools available with the FBMN OpenMS , MS-DIAL , XCMS , and MetaboScape .","title":"4/5/2019"},{"location":"changelog/#392019","text":"Adding qiime2 qza and emperor output for Feature Based Molecular Networking Adding GraphML output for MS2LDA GNPS Quickstart will do only the fly conversion of Thermo raw files.","title":"3/9/2019"},{"location":"changelog/#252019","text":"Adding credentials option for GNPS quickstart for classic molecular Networking Adding link to clone deprecated molecular networking to latest version of molecular networking Adding direct re-analysis link for MS2LDA from molecular networking Bug fixes for MS2LDA Adding batch spectra additional validator","title":"2/5/2019"},{"location":"changelog/#12272018","text":"GNPS quickstart support within MZMine2 updated","title":"12/27/2018"},{"location":"changelog/#1112018","text":"Added UniqueFileCount to GraphML in Classic Molecular Networking Added GNPS Cluster Linkouts and GNPS Network Visualizer linkouts to GraphML in Classic Molecular Networking","title":"11/1/2018"},{"location":"changelog/#10282018","text":"Feature based molecular networking is supported in the superquick start page Feature based molecular networking now supports MZMine2, OpenMS, Optimus, MS-DIAL, Metaboscape, and XCMS3 feature finding tools","title":"10/28/2018"},{"location":"changelog/#10262018","text":"Adding UniqueFileSource attribute to GNPS Molecular Networking V2 Workflow (METABOLOMICS-SNETS-V2)","title":"10/26/2018"},{"location":"changelog/#952018","text":"Mirror plots include mz labels MASST supports dataset metadata display","title":"9/5/2018"},{"location":"changelog/#812018","text":"New Documentation and Splash Page are available Bug Fixes for Library Search to provide 10X increase in throughput for large datasets MASST is available to report MS/MS spectrum occurrences at a single file level with metadata reported if available","title":"8/1/2018"},{"location":"changelog/#6272018","text":"Updating documentation","title":"6/27/2018"},{"location":"changelog/#612018","text":"New documentation website. Beta version of Molecular Networking provides stream lined results and cytoscape compliant output.","title":"6/1/2018"},{"location":"chemdir/","text":"Pardon our dust, this is a work in progress... Page Contributions \u00b6 Ming Wang","title":"Chemical Directionality"},{"location":"chemdir/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"contact/","text":"GNPS Workflow Contact information \u00b6 If you have any questions about how to use GNPS please first ask the community at the GNPS forum located here . In the event that there is an issue with the GNPS website, please contact the administrators at ccms-web@cs.ucsd.edu . For more in-depth assistance, we invite you to attend the numerous GNPS workshops we offer at UCSD and at conferences throughout the year. Check out the upcoming workshops . GNPS Office Hours \u00b6 We are hosting online office hours on a bi-weekly basis online with Ming ( miw023@ucsd.edu via Zoom: https://ucsd.zoom.us/j/96785479814 PW: 996451 In office hours we'll cover new and old features of GNPS and most importantly we'll take your personal questions about GNPS, computational mass spectrometry, and any science you want to chat about! Upcoming Office Hour Schedule Date/Time Subjects Covered 2PM PST June 1 GNPS Q and A / Additional Topic TBA 2PM PST June 8 GNPS Q and A / Additional Topic TBA 2PM PST June 15 GNPS Q and A / Additional Topic TBA Please also take the time to RSVP that you're going to attend and what questions you may have so we know who to let in as well as what to expect: Loading\u2026 Page Contributions \u00b6 Ming Wang","title":"Contact/Office Hours"},{"location":"contact/#gnps-workflow-contact-information","text":"If you have any questions about how to use GNPS please first ask the community at the GNPS forum located here . In the event that there is an issue with the GNPS website, please contact the administrators at ccms-web@cs.ucsd.edu . For more in-depth assistance, we invite you to attend the numerous GNPS workshops we offer at UCSD and at conferences throughout the year. Check out the upcoming workshops .","title":"GNPS Workflow Contact information"},{"location":"contact/#gnps-office-hours","text":"We are hosting online office hours on a bi-weekly basis online with Ming ( miw023@ucsd.edu via Zoom: https://ucsd.zoom.us/j/96785479814 PW: 996451 In office hours we'll cover new and old features of GNPS and most importantly we'll take your personal questions about GNPS, computational mass spectrometry, and any science you want to chat about! Upcoming Office Hour Schedule Date/Time Subjects Covered 2PM PST June 1 GNPS Q and A / Additional Topic TBA 2PM PST June 8 GNPS Q and A / Additional Topic TBA 2PM PST June 15 GNPS Q and A / Additional Topic TBA Please also take the time to RSVP that you're going to attend and what questions you may have so we know who to let in as well as what to expect: Loading\u2026","title":"GNPS Office Hours"},{"location":"contact/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"continuousid/","text":"Continuous Identification \u00b6 GNPS' continuous identification aims to bring datasets to life. Traditionally, after manuscript publication, mass spectrometry datasets remain static and are never heard from again, silo'd in data cemeteries. GNPS' approach is different, we aim to Automatically make new discoveries within each dataset Aid future analyses by putting new data in the context of all previously existing datasets GNPS achieves the first goal by periodically reanalyzing each and every public dataset. With ever expanding reference spectral libraries, GNPS makes new identifications within datasets in an automatic fashion, recording this growth in identifications, and reports it back to the community. GNPS achieves the second goal by enabling users to \"BLAST\" MS/MS spectra against the entire GNPS set of datasets (see MASST Search ). Exploring Current Continuous Identifications \u00b6 On each dataset page (See datasets ) the list of all continuous identifcations is listed under the \"Continuous Identification\" section. This list of all analyses shows the growth of identifications over time as well as how the identifications changed over time. For example, the 3D molecular skin cartography dataset (See MSV000078556 ) grew from 94 (April 9, 2014) identifications in the initial continuous identification to 860 (June 1, 2018). Dataset Subscriptions \u00b6 Whenever new identifications are made in a dataset, subscribers are automatically notified via email. To be subscribed to a dataset of interest, click the subscribe button on the dataset page: Continuous Identification Ratings \u00b6 Help us improve Continuous Identification by rating the matches returned on the \"All Identifications Page\". For each identification made, please rate each match according to the following rubric Rating Description 4 stars correct match as context is right (i.e., molecule is known/expected to be in the sample) 3 stars compound class match \u2013 at least part of the structure makes sense to match 2 stars cannot tell \u2013 might be correct from the spectrum match and context but there is not enough information to tell 1 star incorrect: molecule does not make sense in this context Users will be able to both add their own rating, add a comment for their given rating, as well as view the average rating of the identification. Continuous ID Subscription Email \u00b6 This example continuous identification email informs subscribers that the dataset of interest has more IDs in the most recent round of continuous identifications. It will first list the title of the dataset, then the changes in identification counts, and finally direct links to explore the data. Users can go directly to the search results and view the new, different, and deleted identifications as well as go straight to the dataset page itself. Download \u00b6 To download all the information related to continuosu ID, please refer here . Page Contributions \u00b6 Ming Wang","title":"Continuous Identification"},{"location":"continuousid/#continuous-identification","text":"GNPS' continuous identification aims to bring datasets to life. Traditionally, after manuscript publication, mass spectrometry datasets remain static and are never heard from again, silo'd in data cemeteries. GNPS' approach is different, we aim to Automatically make new discoveries within each dataset Aid future analyses by putting new data in the context of all previously existing datasets GNPS achieves the first goal by periodically reanalyzing each and every public dataset. With ever expanding reference spectral libraries, GNPS makes new identifications within datasets in an automatic fashion, recording this growth in identifications, and reports it back to the community. GNPS achieves the second goal by enabling users to \"BLAST\" MS/MS spectra against the entire GNPS set of datasets (see MASST Search ).","title":"Continuous Identification"},{"location":"continuousid/#exploring-current-continuous-identifications","text":"On each dataset page (See datasets ) the list of all continuous identifcations is listed under the \"Continuous Identification\" section. This list of all analyses shows the growth of identifications over time as well as how the identifications changed over time. For example, the 3D molecular skin cartography dataset (See MSV000078556 ) grew from 94 (April 9, 2014) identifications in the initial continuous identification to 860 (June 1, 2018).","title":"Exploring Current Continuous Identifications"},{"location":"continuousid/#dataset-subscriptions","text":"Whenever new identifications are made in a dataset, subscribers are automatically notified via email. To be subscribed to a dataset of interest, click the subscribe button on the dataset page:","title":"Dataset Subscriptions"},{"location":"continuousid/#continuous-identification-ratings","text":"Help us improve Continuous Identification by rating the matches returned on the \"All Identifications Page\". For each identification made, please rate each match according to the following rubric Rating Description 4 stars correct match as context is right (i.e., molecule is known/expected to be in the sample) 3 stars compound class match \u2013 at least part of the structure makes sense to match 2 stars cannot tell \u2013 might be correct from the spectrum match and context but there is not enough information to tell 1 star incorrect: molecule does not make sense in this context Users will be able to both add their own rating, add a comment for their given rating, as well as view the average rating of the identification.","title":"Continuous Identification Ratings"},{"location":"continuousid/#continuous-id-subscription-email","text":"This example continuous identification email informs subscribers that the dataset of interest has more IDs in the most recent round of continuous identifications. It will first list the title of the dataset, then the changes in identification counts, and finally direct links to explore the data. Users can go directly to the search results and view the new, different, and deleted identifications as well as go straight to the dataset page itself.","title":"Continuous ID Subscription Email"},{"location":"continuousid/#download","text":"To download all the information related to continuosu ID, please refer here .","title":"Download"},{"location":"continuousid/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"cytoscape/","text":"Network Visualization in Cytoscape \u00b6 While we do provide in-browser visualization for networks, these are limited to a single component at a time. Using Cytoscape, we can start visualizing the entire molecular network at once. Cytoscape is an open source software platform for visualization and annotation of networks. Cytoscape is available for download from here . The instructions below assume that you have installed Cytoscape 3.6.X. Cytoscape 3.6 Analysis (Quick) \u00b6 To quickly get started with your molecular network in Cytoscape, we have an easy export module from GNPS that previews the molecular network and provides a pre-formatted Cytoscape file. This feature is very much experimental, but from the status page, click the \"Direct Cytoscape Preview/Download\" This will bring you to a new interface where you will see a preview and a download link. To re-style it with our presets, at the bottom we have a few styles already populated. If you would like to suggest a new style, please send us a .cys file and the name of the style you have created within the Cytoscape file for us to add. Cytoscape 3.6 Analysis (Recommended) \u00b6 Downloading Cytoscape Import Files \u00b6 The first step is to download the correct input to import into Cytoscape. From the results page of molecular networking, you will need to download the graphML file for Cytoscape. Unzip the content of the zip file. The content will look like this: Importing Network into Cytoscape \u00b6 Now open Cytoscape 3.6.1. From the Toolbar go to File / Import / Network / File (or cmd + L) and then select the .graphml file in the root of the unzipped job folder. The network has been opened and will look like this. Creating a Cytoscape Style \u00b6 In Cytoscape 3.6.1, create a new Cytoscape style. As shown below, click on \"Create New Style\" and provide a name. Node Styling \u00b6 Node Label to Spectrum Property \u00b6 Within the Node menu, you will be able to apply a label to each of your nodes, you may select the Attribute from the drop down menu to use as a label and then select Passthrough Mapping as the Mapping Type. Typically Parent mass or Precursor mass is selected for node labels of networks generated using GNPS. Visualizing Group Abundances as Pie Charts \u00b6 If you organized your data into cohorts of samples, we can visualize the relative abundance (as measured by spectral counts which is psuedo-quantitative) with pie charts across these groups. Visualizing Structures \u00b6 The Cytoscape plugin ChemViz2 can visualize the chemical structure of GNPS spectral library annotation in the nodes. The ChemViz2 plugin can be be installed in the toolbar Apps /Apps manager / and type \"ChemViz2\" to find and install it. To visualize chemical structures, select the nodes of interest and do right-click, Apps / Cheminformatics tools / Paint structure on selected nodes. Also check out their website . Edge Styling \u00b6 Edge Thickness based on Spectral Similarity \u00b6 To aid in the visualization of individual node relatedness within a cluster, the cosine score is used. This value will determine the thickness of the edge between related nodes. The thicker the edge, the higher the cosine score and therefore the more related the two individual nodes are to each other. Again working within the Style Tab, select the Edge menu. From the Width drop down menu, select Cosine for the Column and Continuous Mapping for the Mapping Type. Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Below is a zoomed in portion of a network demonstrating the use of Cosine score for edge width determination. Page Contributions \u00b6 Ming Wang","title":"Molecular Networking in Cytoscape"},{"location":"cytoscape/#network-visualization-in-cytoscape","text":"While we do provide in-browser visualization for networks, these are limited to a single component at a time. Using Cytoscape, we can start visualizing the entire molecular network at once. Cytoscape is an open source software platform for visualization and annotation of networks. Cytoscape is available for download from here . The instructions below assume that you have installed Cytoscape 3.6.X.","title":"Network Visualization in Cytoscape"},{"location":"cytoscape/#cytoscape-36-analysis-quick","text":"To quickly get started with your molecular network in Cytoscape, we have an easy export module from GNPS that previews the molecular network and provides a pre-formatted Cytoscape file. This feature is very much experimental, but from the status page, click the \"Direct Cytoscape Preview/Download\" This will bring you to a new interface where you will see a preview and a download link. To re-style it with our presets, at the bottom we have a few styles already populated. If you would like to suggest a new style, please send us a .cys file and the name of the style you have created within the Cytoscape file for us to add.","title":"Cytoscape 3.6 Analysis (Quick)"},{"location":"cytoscape/#cytoscape-36-analysis-recommended","text":"","title":"Cytoscape 3.6 Analysis (Recommended)"},{"location":"cytoscape/#downloading-cytoscape-import-files","text":"The first step is to download the correct input to import into Cytoscape. From the results page of molecular networking, you will need to download the graphML file for Cytoscape. Unzip the content of the zip file. The content will look like this:","title":"Downloading Cytoscape Import Files"},{"location":"cytoscape/#importing-network-into-cytoscape","text":"Now open Cytoscape 3.6.1. From the Toolbar go to File / Import / Network / File (or cmd + L) and then select the .graphml file in the root of the unzipped job folder. The network has been opened and will look like this.","title":"Importing Network into Cytoscape"},{"location":"cytoscape/#creating-a-cytoscape-style","text":"In Cytoscape 3.6.1, create a new Cytoscape style. As shown below, click on \"Create New Style\" and provide a name.","title":"Creating a Cytoscape Style"},{"location":"cytoscape/#node-styling","text":"","title":"Node Styling"},{"location":"cytoscape/#node-label-to-spectrum-property","text":"Within the Node menu, you will be able to apply a label to each of your nodes, you may select the Attribute from the drop down menu to use as a label and then select Passthrough Mapping as the Mapping Type. Typically Parent mass or Precursor mass is selected for node labels of networks generated using GNPS.","title":"Node Label to Spectrum Property"},{"location":"cytoscape/#visualizing-group-abundances-as-pie-charts","text":"If you organized your data into cohorts of samples, we can visualize the relative abundance (as measured by spectral counts which is psuedo-quantitative) with pie charts across these groups.","title":"Visualizing Group Abundances as Pie Charts"},{"location":"cytoscape/#visualizing-structures","text":"The Cytoscape plugin ChemViz2 can visualize the chemical structure of GNPS spectral library annotation in the nodes. The ChemViz2 plugin can be be installed in the toolbar Apps /Apps manager / and type \"ChemViz2\" to find and install it. To visualize chemical structures, select the nodes of interest and do right-click, Apps / Cheminformatics tools / Paint structure on selected nodes. Also check out their website .","title":"Visualizing Structures"},{"location":"cytoscape/#edge-styling","text":"","title":"Edge Styling"},{"location":"cytoscape/#edge-thickness-based-on-spectral-similarity","text":"To aid in the visualization of individual node relatedness within a cluster, the cosine score is used. This value will determine the thickness of the edge between related nodes. The thicker the edge, the higher the cosine score and therefore the more related the two individual nodes are to each other. Again working within the Style Tab, select the Edge menu. From the Width drop down menu, select Cosine for the Column and Continuous Mapping for the Mapping Type. Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Below is a zoomed in portion of a network demonstrating the use of Cosine score for edge width determination.","title":"Edge Thickness based on Spectral Similarity"},{"location":"cytoscape/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"datasets/","text":"MassIVE Datasets \u00b6 MassIVE is an online repository for publicly available datasets. MassIVE provides a location for researchers to access datasets that have been made available by others, oftentimes alongside publication. The datasets available remain alive long after publication. At GNPS, users will be able to Browse datasets - Explore all public GNPS datasets Download datasets - Download full dataset for offline processing/reanalysis Re-Analyze datasets - Online reanalysis with GNPS tools. Compare public data to your own Comment on datasets - Make public comments on public datasets to start a community discussion Subscribe to datasets - Subscribe to updates to datasets, e.g. Updated data from submitter, new identifications/analogs by Continuous Identification To enhance the analysis, datasets submitted to MassIVE through GNPS will be periodically searched against the ever growing annotated spectral libraries and new putative identifications within those datasets. Beyond new identifications within a dataset, subscribers will also be made aware of other datasets that exhibit chemical similarities to the subscribed dataset. This allows for users to be connected via their research interest to similar datasets. Submitting GNPS-MassIVE Datasets \u00b6 Here we will describe how to upload data into MassIVE specifically for GNPS. For more detailed information about general MassIVE dataset submission see here . At the GNPS splash screen , users can click this button to create a MassIVE dataset. Login with your GNPS login and hit Submit Data. GNPS Submission specifics \u00b6 The title is the display that users will use primarily to filter datasets. For GNPS datasets, a specific title format is required. GNPS - <Title of Paper or Short Description> The GNPS prefix is required for GNPS datasets. If this is not provided GNPS-MassIVE datasets are not shown to GNPS users. Example Recommended Description \u00b6 Paper title: Molecular networking as a dereplication strategy. Author List: Yang JY, Sanchez LM, Rath CM, Liu X, Boudreau PD, Bruns N, Glukhov E, Wodtke A, de Felicio R, Fenner A, Wong WR, Linington RG, Zhang L, Debonsi HM, Gerwick WH, Dorrestein PC. Citation: J Nat Prod. 2013 Sep 27;76(9):1686-99. doi: 10.1021/np400413s PubMedID: 24025162 Brief description of the data submitted: RAW Files used to generate Figure 4. Bacterial network with a cosine similarity score cutoff of 0.65. This network was generated from direct infusion of extracts or direct Recommendations For Data Collection \u00b6 There are several data collections in MassIVE dataset creation. These were originally created to serve proteomics data, and thus we offer the following recommendations for metabolomics/natural products datasets. Collection Recommended Data Extension Types Raw Spectrum Files Instrument vendor data .d, .raw, .wiff, etc. Peak List Files Open format raw data .mzML, .mzXML Metadata gnps metadata describing your study .tsv Supplementary Files This is other information, that might include cytoscape files, feature finding batch files, feature finding quant, feature finding ms2 mgf files, or basically any supplementary files that are relevant to your data .tsv, .mgf, .xml, etc. Info All other collections are optional and we recommend to generally not provide them unless you specifically desire to and understand their semantics. This can be found here . Making Dataset Public \u00b6 After submitting your dataset to MassIVE, you must explicity make the dataset public, by clicking the make public button: Continuous Identification \u00b6 A unique feature at GNPS is the continuous and automated reanalysis of public datasets. GNPS analyzes these datasets with molecular networking and library to make new identifications as the public community spectral libraries increase due to community contributions. Users may subscribe to datasets to receive email notifications of new identifications made to datasets of interest. Browsing Datasets \u00b6 To browse all public datasets, click the \"Datasets\" link at the top menu bar. This brings users to a list of all public GNPS-MassIVE datasets. Downloading Dataset Contents \u00b6 To download the contents of a dataset, you can reach the FTP url of each dataset by click the FTP link. Reanalyze Datasets \u00b6 Dataset data can be re-analyzed with the tools at GNPS. In order to import the dataset into your own workspace to select files, please refer to this documentation . Social Networking with Datasets \u00b6 Dataset Comments \u00b6 Users may make a comment on a dataset by clicking the \"Comment on Dataset Link\": To browse all comments per dataset, a table is shown Finding Related Datasets \u00b6 Users can find related MassIVE datasets to the current one. Currently relatedness of datasets is determine by the number of shared identified compounds between the two. Users can see a view like this: Page Contributions \u00b6 Ming Wang","title":"Dataset Creation/Sharing"},{"location":"datasets/#massive-datasets","text":"MassIVE is an online repository for publicly available datasets. MassIVE provides a location for researchers to access datasets that have been made available by others, oftentimes alongside publication. The datasets available remain alive long after publication. At GNPS, users will be able to Browse datasets - Explore all public GNPS datasets Download datasets - Download full dataset for offline processing/reanalysis Re-Analyze datasets - Online reanalysis with GNPS tools. Compare public data to your own Comment on datasets - Make public comments on public datasets to start a community discussion Subscribe to datasets - Subscribe to updates to datasets, e.g. Updated data from submitter, new identifications/analogs by Continuous Identification To enhance the analysis, datasets submitted to MassIVE through GNPS will be periodically searched against the ever growing annotated spectral libraries and new putative identifications within those datasets. Beyond new identifications within a dataset, subscribers will also be made aware of other datasets that exhibit chemical similarities to the subscribed dataset. This allows for users to be connected via their research interest to similar datasets.","title":"MassIVE Datasets"},{"location":"datasets/#submitting-gnps-massive-datasets","text":"Here we will describe how to upload data into MassIVE specifically for GNPS. For more detailed information about general MassIVE dataset submission see here . At the GNPS splash screen , users can click this button to create a MassIVE dataset. Login with your GNPS login and hit Submit Data.","title":"Submitting GNPS-MassIVE Datasets"},{"location":"datasets/#gnps-submission-specifics","text":"The title is the display that users will use primarily to filter datasets. For GNPS datasets, a specific title format is required. GNPS - <Title of Paper or Short Description> The GNPS prefix is required for GNPS datasets. If this is not provided GNPS-MassIVE datasets are not shown to GNPS users.","title":"GNPS Submission specifics"},{"location":"datasets/#example-recommended-description","text":"Paper title: Molecular networking as a dereplication strategy. Author List: Yang JY, Sanchez LM, Rath CM, Liu X, Boudreau PD, Bruns N, Glukhov E, Wodtke A, de Felicio R, Fenner A, Wong WR, Linington RG, Zhang L, Debonsi HM, Gerwick WH, Dorrestein PC. Citation: J Nat Prod. 2013 Sep 27;76(9):1686-99. doi: 10.1021/np400413s PubMedID: 24025162 Brief description of the data submitted: RAW Files used to generate Figure 4. Bacterial network with a cosine similarity score cutoff of 0.65. This network was generated from direct infusion of extracts or direct","title":"Example Recommended Description"},{"location":"datasets/#recommendations-for-data-collection","text":"There are several data collections in MassIVE dataset creation. These were originally created to serve proteomics data, and thus we offer the following recommendations for metabolomics/natural products datasets. Collection Recommended Data Extension Types Raw Spectrum Files Instrument vendor data .d, .raw, .wiff, etc. Peak List Files Open format raw data .mzML, .mzXML Metadata gnps metadata describing your study .tsv Supplementary Files This is other information, that might include cytoscape files, feature finding batch files, feature finding quant, feature finding ms2 mgf files, or basically any supplementary files that are relevant to your data .tsv, .mgf, .xml, etc. Info All other collections are optional and we recommend to generally not provide them unless you specifically desire to and understand their semantics. This can be found here .","title":"Recommendations For Data Collection"},{"location":"datasets/#making-dataset-public","text":"After submitting your dataset to MassIVE, you must explicity make the dataset public, by clicking the make public button:","title":"Making Dataset Public"},{"location":"datasets/#continuous-identification","text":"A unique feature at GNPS is the continuous and automated reanalysis of public datasets. GNPS analyzes these datasets with molecular networking and library to make new identifications as the public community spectral libraries increase due to community contributions. Users may subscribe to datasets to receive email notifications of new identifications made to datasets of interest.","title":"Continuous Identification"},{"location":"datasets/#browsing-datasets","text":"To browse all public datasets, click the \"Datasets\" link at the top menu bar. This brings users to a list of all public GNPS-MassIVE datasets.","title":"Browsing Datasets"},{"location":"datasets/#downloading-dataset-contents","text":"To download the contents of a dataset, you can reach the FTP url of each dataset by click the FTP link.","title":"Downloading Dataset Contents"},{"location":"datasets/#reanalyze-datasets","text":"Dataset data can be re-analyzed with the tools at GNPS. In order to import the dataset into your own workspace to select files, please refer to this documentation .","title":"Reanalyze Datasets"},{"location":"datasets/#social-networking-with-datasets","text":"","title":"Social Networking with Datasets"},{"location":"datasets/#dataset-comments","text":"Users may make a comment on a dataset by clicking the \"Comment on Dataset Link\": To browse all comments per dataset, a table is shown","title":"Dataset Comments"},{"location":"datasets/#finding-related-datasets","text":"Users can find related MassIVE datasets to the current one. Currently relatedness of datasets is determine by the number of shared identified compounds between the two. Users can see a view like this:","title":"Finding Related Datasets"},{"location":"datasets/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"dereplicator/","text":"DEREPLICATOR - Insilico Peptidic Natural Products Tools \u00b6 The Insilico Peptidic Natural Products DEREPLICATOR is a bioinformatic tool available on GNPS that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. The introduction of DEREPLICATOR VarQuest made possible to search variants of known peptidic natural products on GNPS. The introduction of DEREPLICATOR+ (PLUS) improved the confidence in the annotation from the DEREPLICATOR, and expanded annotations to non-peptidic natural products on GNPS. These algorithms and software are developed in collaboration of Saint Petersburg State University (Russia), University of California San Diego (CA, USA) and Carnegie Mellon University (PA, USA). Manuscripts and Citations \u00b6 If you used DEREPLICATOR tools, please cite the corresponding manuscripts: DEREPLICATOR: Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology , 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219 . DEREPLICATOR VarQuest : Gurevich, A. et al. Increased diversity of peptidic natural products revealed by modification-tolerant database search of mass spectra. Nature Microbiology 3, 319\u2013327 (2018). https://doi.org/10.1038/s41564-017-0094-2 DEREPLICATOR+ : Mohimani, H. et al. Dereplication of microbial metabolites through database search of mass spectra. Nature Communication 9, 4035 (2018). https://doi.org/10.1038/s41467-018-06082-8 Development \u00b6 The GitHub repository provides latest source code and release. Accessing the DEREPLICATOR tools on GNPS \u00b6 The DEREPLICATOR (VarQuest) , and DEREPLICATOR+ are available on GNPS on the in silico tools page . STEP 1: Go to GNPS \u00b6 Go to http://gnps.ucsd.edu , and create/login to your account. STEP 2: Access DEREPLICATOR \u00b6 Find the \"In Silico Tools\" box and click on \"Browse Tools\". Choose either DEREPLICATOR (VarQuest) or DEREPLICATOR+. STEP 3: SELECT YOUR FILES \u00b6 Select/Import a mass spectrometry file : The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload. After getting done with selecting files, click on Finish Selection. STEP 4: CONFIGURE \u00b6 Configure the parameters for the DEREPLICATOR job : Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used. BASIC OPTIONS: \u00b6 -- Precursor Ion Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Fragment ion Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Search analog (VarQuest) [RECOMMENDED TO USE]: The VarQuest algorithm can search for analogs of known natural products in MS/MS data using Dereplicator. VarQuest is a modification-tolerant database search tool that discovers unexpected modifications in a blind mode. Since the computational space for variable PNP identification is computationally expensive, VarQuest first constructs a set of feasible PSM using a simple scoring approach and further filters out this set using a rigorous scoring method. Using VarQuest will increase the job time. The use of VarQuest analogs option is recommended as it expands the search space, and it reduces the overall run time. ADVANCED OPTIONS: \u00b6 -- PNP database : a choice of two databases Regular/Extended (Extended one is more informative but 2 times larger, i.e. two times slower processing) -- Mimimum number of AA : Dereplicator is able to search for short peptides. This parameter determines what is the minimum number of amino acids, we consider for the compounds that are considered in Dereplicator search. -- Accurate P-values : accurate (but slow) algorithm for P-value computation (MS-DPR), by default raw estimation is used. -- Max charge : Maximum charge allowed. ADVANCED DEREPLICATOR OPTIONS: \u00b6 -- Max Isotopic Shift : When working with molecules with 1000 Da or higher masses, mass spectrometers commonly predict the precursor mass 1 or 2 Da higher than the monoisotopic mass due to the isotopic pattern. Setting Maximum isotopic shift to higher than 0 allows Dereplicator to consider these shifts in the precursor mass. -- Adducts : Dereplicator can search in addition to protonated adducts, sodiated and potassium adducts. ADVANCED VARQUEST OPTIONS: \u00b6 -- Max Allowed Modification Mass : Maximum difference allowed between the precursor ion of an unknown modified peptide and the (dereplicated) known peptide. -- Min Matched Peaks with Known Compound : Minimum number of common peaks between the MS/MS spectrum of an unknown modified peptide and the (dereplicated) known peptide. Select an email. Then click on submit. You will soon get an email with the link to the results when your job is finished. You can also check the status of your job in \"Jobs\" section. STEP 5: VIEW RESULTS \u00b6 See the DEREPLICATOR job status : The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done. The job can be Cloned , for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links. Clic on View Unique Peptides (recommended), to have get the list of annotated molecules. Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum matches. STEP 6: ANALYSE \u00b6 Explore the DEREPLICATOR annotations: Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function. Clic on Show Annotation to see the experimental spectrum and the matching with the fragmentation tree of the Dereplicator database. The experimental MS/MS spectrum can be viewed in the left panel. The blue peaks are fragment ions that matched the fragmentation tree of peptidic natural products in the database. The structure of the molecule is displayed on the right. In the Annotated fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities. Click on a blue peak to highlighted the corresponding fragment on the molecular structure, along with its properties. STEP 7: VALIDATE \u00b6 Validate a DEREPLICATOR annotation : More than 60% of Dereplicator annotations on GNPS Massive datasets (April 2016) were manually curated. Validating a DEREPLICATOR annotation (MSI level 1): \u00b6 A level 1 MSI identification can be achieved of the reference material is available for the compound, by ordering the compound and analyzing it with the same method LC-MS/MS. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time). Annotation with the DEREPLICATOR (MSI level 2 or 3), one must: \u00b6 The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...) The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done MZmine2. The molecular formula must be verified. Sirius can be used for that (only for single-charged compounds). Main fragment ions non-annotated by the DEREPLICATOR should be manually annotated. Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the sample. If genome sequence(s) are available, genome mining can be performed to search potential biogenetic gene clusters. Mapping DEREPLICATOR results on molecular networks \u00b6 Run molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation . Note that the Feature-Based Molecular Network workflow can run the DEREPLICATOR VarQuest automatically (with default parameters only). Download the molecular networks clustered data (.MGF file). Click on Download Clustered Spectra as MGF . Upload the .MGF file, and run a DEREPLICATOR job (see present documentation). Note that alternatively, the .MGF obtained with MZmine can be used (GNPS export module). When the job is completed click on View Unique Peptides . In the View unique Peptide page, download the .TSV annotation file. Click on download with Download button and unzip the file. Open the molecular networks with Cytoscape. See documentation here , and here for Feature-Based Molecular Networking In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above). In the preview window, click on the Scan header to set the meaning to Key . Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported). Change the column header name from SMILES into SMILES_derepl Click on import. Now the attribute table is mapped into the networks. The structure can be viewed with the ChemViz2 plugin . See the Network Annotation Propagation documentation for more details. TO DO \u00b6 Documentation for Dereplicator+ Provide new documentation link on Legacy documentation and GNPS in silico page. Contribute to the Documentation \u00b6 For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\". Page Contributions \u00b6 Ming Wang (9.63%), lfnothias (90.37%)","title":"DEREPLICATOR"},{"location":"dereplicator/#dereplicator-insilico-peptidic-natural-products-tools","text":"The Insilico Peptidic Natural Products DEREPLICATOR is a bioinformatic tool available on GNPS that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. The introduction of DEREPLICATOR VarQuest made possible to search variants of known peptidic natural products on GNPS. The introduction of DEREPLICATOR+ (PLUS) improved the confidence in the annotation from the DEREPLICATOR, and expanded annotations to non-peptidic natural products on GNPS. These algorithms and software are developed in collaboration of Saint Petersburg State University (Russia), University of California San Diego (CA, USA) and Carnegie Mellon University (PA, USA).","title":"DEREPLICATOR - Insilico Peptidic Natural Products Tools"},{"location":"dereplicator/#manuscripts-and-citations","text":"If you used DEREPLICATOR tools, please cite the corresponding manuscripts: DEREPLICATOR: Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology , 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219 . DEREPLICATOR VarQuest : Gurevich, A. et al. Increased diversity of peptidic natural products revealed by modification-tolerant database search of mass spectra. Nature Microbiology 3, 319\u2013327 (2018). https://doi.org/10.1038/s41564-017-0094-2 DEREPLICATOR+ : Mohimani, H. et al. Dereplication of microbial metabolites through database search of mass spectra. Nature Communication 9, 4035 (2018). https://doi.org/10.1038/s41467-018-06082-8","title":"Manuscripts and Citations"},{"location":"dereplicator/#development","text":"The GitHub repository provides latest source code and release.","title":"Development"},{"location":"dereplicator/#accessing-the-dereplicator-tools-on-gnps","text":"The DEREPLICATOR (VarQuest) , and DEREPLICATOR+ are available on GNPS on the in silico tools page .","title":"Accessing the DEREPLICATOR tools on GNPS"},{"location":"dereplicator/#step-1-go-to-gnps","text":"Go to http://gnps.ucsd.edu , and create/login to your account.","title":"STEP 1: Go to GNPS"},{"location":"dereplicator/#step-2-access-dereplicator","text":"Find the \"In Silico Tools\" box and click on \"Browse Tools\". Choose either DEREPLICATOR (VarQuest) or DEREPLICATOR+.","title":"STEP 2: Access DEREPLICATOR"},{"location":"dereplicator/#step-3-select-your-files","text":"Select/Import a mass spectrometry file : The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload. After getting done with selecting files, click on Finish Selection.","title":"STEP 3: SELECT YOUR FILES"},{"location":"dereplicator/#step-4-configure","text":"Configure the parameters for the DEREPLICATOR job : Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.","title":"STEP 4: CONFIGURE"},{"location":"dereplicator/#basic-options","text":"-- Precursor Ion Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Fragment ion Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Search analog (VarQuest) [RECOMMENDED TO USE]: The VarQuest algorithm can search for analogs of known natural products in MS/MS data using Dereplicator. VarQuest is a modification-tolerant database search tool that discovers unexpected modifications in a blind mode. Since the computational space for variable PNP identification is computationally expensive, VarQuest first constructs a set of feasible PSM using a simple scoring approach and further filters out this set using a rigorous scoring method. Using VarQuest will increase the job time. The use of VarQuest analogs option is recommended as it expands the search space, and it reduces the overall run time.","title":"BASIC OPTIONS:"},{"location":"dereplicator/#advanced-options","text":"-- PNP database : a choice of two databases Regular/Extended (Extended one is more informative but 2 times larger, i.e. two times slower processing) -- Mimimum number of AA : Dereplicator is able to search for short peptides. This parameter determines what is the minimum number of amino acids, we consider for the compounds that are considered in Dereplicator search. -- Accurate P-values : accurate (but slow) algorithm for P-value computation (MS-DPR), by default raw estimation is used. -- Max charge : Maximum charge allowed.","title":"ADVANCED OPTIONS:"},{"location":"dereplicator/#advanced-dereplicator-options","text":"-- Max Isotopic Shift : When working with molecules with 1000 Da or higher masses, mass spectrometers commonly predict the precursor mass 1 or 2 Da higher than the monoisotopic mass due to the isotopic pattern. Setting Maximum isotopic shift to higher than 0 allows Dereplicator to consider these shifts in the precursor mass. -- Adducts : Dereplicator can search in addition to protonated adducts, sodiated and potassium adducts.","title":"ADVANCED DEREPLICATOR OPTIONS:"},{"location":"dereplicator/#advanced-varquest-options","text":"-- Max Allowed Modification Mass : Maximum difference allowed between the precursor ion of an unknown modified peptide and the (dereplicated) known peptide. -- Min Matched Peaks with Known Compound : Minimum number of common peaks between the MS/MS spectrum of an unknown modified peptide and the (dereplicated) known peptide. Select an email. Then click on submit. You will soon get an email with the link to the results when your job is finished. You can also check the status of your job in \"Jobs\" section.","title":"ADVANCED VARQUEST OPTIONS:"},{"location":"dereplicator/#step-5-view-results","text":"See the DEREPLICATOR job status : The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done. The job can be Cloned , for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links. Clic on View Unique Peptides (recommended), to have get the list of annotated molecules. Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum matches.","title":"STEP 5: VIEW RESULTS"},{"location":"dereplicator/#step-6-analyse","text":"Explore the DEREPLICATOR annotations: Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function. Clic on Show Annotation to see the experimental spectrum and the matching with the fragmentation tree of the Dereplicator database. The experimental MS/MS spectrum can be viewed in the left panel. The blue peaks are fragment ions that matched the fragmentation tree of peptidic natural products in the database. The structure of the molecule is displayed on the right. In the Annotated fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities. Click on a blue peak to highlighted the corresponding fragment on the molecular structure, along with its properties.","title":"STEP 6: ANALYSE"},{"location":"dereplicator/#step-7-validate","text":"Validate a DEREPLICATOR annotation : More than 60% of Dereplicator annotations on GNPS Massive datasets (April 2016) were manually curated.","title":"STEP 7: VALIDATE"},{"location":"dereplicator/#validating-a-dereplicator-annotation-msi-level-1","text":"A level 1 MSI identification can be achieved of the reference material is available for the compound, by ordering the compound and analyzing it with the same method LC-MS/MS. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time).","title":"Validating a DEREPLICATOR annotation (MSI level 1):"},{"location":"dereplicator/#annotation-with-the-dereplicator-msi-level-2-or-3-one-must","text":"The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...) The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done MZmine2. The molecular formula must be verified. Sirius can be used for that (only for single-charged compounds). Main fragment ions non-annotated by the DEREPLICATOR should be manually annotated. Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the sample. If genome sequence(s) are available, genome mining can be performed to search potential biogenetic gene clusters.","title":"Annotation with the DEREPLICATOR (MSI level 2 or 3), one must:"},{"location":"dereplicator/#mapping-dereplicator-results-on-molecular-networks","text":"Run molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation . Note that the Feature-Based Molecular Network workflow can run the DEREPLICATOR VarQuest automatically (with default parameters only). Download the molecular networks clustered data (.MGF file). Click on Download Clustered Spectra as MGF . Upload the .MGF file, and run a DEREPLICATOR job (see present documentation). Note that alternatively, the .MGF obtained with MZmine can be used (GNPS export module). When the job is completed click on View Unique Peptides . In the View unique Peptide page, download the .TSV annotation file. Click on download with Download button and unzip the file. Open the molecular networks with Cytoscape. See documentation here , and here for Feature-Based Molecular Networking In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above). In the preview window, click on the Scan header to set the meaning to Key . Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported). Change the column header name from SMILES into SMILES_derepl Click on import. Now the attribute table is mapped into the networks. The structure can be viewed with the ChemViz2 plugin . See the Network Annotation Propagation documentation for more details.","title":"Mapping DEREPLICATOR results on molecular networks"},{"location":"dereplicator/#to-do","text":"Documentation for Dereplicator+ Provide new documentation link on Legacy documentation and GNPS in silico page.","title":"TO DO"},{"location":"dereplicator/#contribute-to-the-documentation","text":"For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".","title":"Contribute to the Documentation"},{"location":"dereplicator/#page-contributions","text":"Ming Wang (9.63%), lfnothias (90.37%)","title":"Page Contributions"},{"location":"downloadlibraries/","text":"Downloading GNPS Spectral Libraries \u00b6 Download GNPS Spectral libraries on each of the spectral library pages. Click the download icon to get an MGF version of the spectral library. With a full list that can be found here . MGF Format for GNPS Library Spectrum BEGIN IONS PEPMASS=561.365 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=DI-ESI-LTQ-FT-ICR FILENAME=Desferrioxamine_B_1H_561_3647.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-LIBRARY NAME=Desferrioxamine B M+H PI=Dorrestein DATACOLLECTOR=J Watrous SMILES=N/A INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=jdwatrou TAGS= LIBRARYQUALITY=3 SPECTRUMID=CCMSLIB00000072100 SCANS=1 161.0 2.216415 161.27272 3.386504 165.181824 94.756683 166.272736 38.394264 167.0 0.407026 168.363632 4.767616 169.272736 1.753857 170.363632 3.976861 171.181824 1.136681 172.181824 0.95803 175.090912 0.973687 177.363632 0.904491 181.181824 0.374121 181.454544 1.961724 182.363632 1.306631 183.272736 162.821075 184.272736 3.942838 185.272736 7.338296 186.363632 1.208049 190.181824 1.380652 190.545456 0.753061 191.0 0.477648 END IONS License \u00b6 All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users. Page Contributions \u00b6 Ming Wang","title":"Downloading Reference Spectral Libraries"},{"location":"downloadlibraries/#downloading-gnps-spectral-libraries","text":"Download GNPS Spectral libraries on each of the spectral library pages. Click the download icon to get an MGF version of the spectral library. With a full list that can be found here . MGF Format for GNPS Library Spectrum BEGIN IONS PEPMASS=561.365 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=DI-ESI-LTQ-FT-ICR FILENAME=Desferrioxamine_B_1H_561_3647.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-LIBRARY NAME=Desferrioxamine B M+H PI=Dorrestein DATACOLLECTOR=J Watrous SMILES=N/A INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=jdwatrou TAGS= LIBRARYQUALITY=3 SPECTRUMID=CCMSLIB00000072100 SCANS=1 161.0 2.216415 161.27272 3.386504 165.181824 94.756683 166.272736 38.394264 167.0 0.407026 168.363632 4.767616 169.272736 1.753857 170.363632 3.976861 171.181824 1.136681 172.181824 0.95803 175.090912 0.973687 177.363632 0.904491 181.181824 0.374121 181.454544 1.961724 182.363632 1.306631 183.272736 162.821075 184.272736 3.942838 185.272736 7.338296 186.363632 1.208049 190.181824 1.380652 190.545456 0.753061 191.0 0.477648 END IONS","title":"Downloading GNPS Spectral Libraries"},{"location":"downloadlibraries/#license","text":"All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users.","title":"License"},{"location":"downloadlibraries/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"faq/","text":"Data Privacy \u00b6 Is the data I upload to analyze publicly visible? Data you upload to analyze at GNPS will remain private unless you explicitly make it public. The two ways to make your data public are to create MassIVE datasets that make entire datasets public or add individual annotated MS/MS spectra to GNPS spectral libraries. Will MassIVE datasets that I create be public by default? No, when creating a MassIVE dataset, it is not public by default. On the input form page, you are able to set a password to access the MassIVE dataset. There is a Make Public link to make your dataset open to the public and documentation can be found here here. Such a feature is very useful because users can create a MassIVE dataset prior to publication submission that is private and password protected. The MassIVE dataset link can be provided to reviewers along with the password so to provide better transparency and increase probability of manuscript acceptance. Data Organization \u00b6 How does the MassIVE data differ from the GNPS spectral libraries? MassIVE datasets consist of raw data. GNPS spectral libraries consist of spectra that have been individually assigned an identification. Spectral Libraries \u00b6 How do I get access to the public spectral libraries? They will be shared with you by default and selected automatically when performing an analysis that requires spectral libraries. This is all included in shared user speclibs. If it does not show up, then do the following. On the select input files popup, click on the shared files tab, and enter speclibs as an import share. Can I create my own private spectral libraries? Yes, but it is not recommended and we create these private libraries as a path to making them public. Please contact administrators for further details. Analyzing Data \u00b6 Can I select more than one file at a time for each group in molecular networking? Yes. Within each group you can select multiple files, even folders of spectra. Simply highlight the multiple files/folders you want to select and then add to the appropriate group. What are the advantages and disadvantages of FBMN vs Classical Molecular Networking Feature Based Molecular Networking (FBMN) provides the following advantages: Area under the curve quantification, Isomer resolution, Filtration of MS/MS that come from chromatographic features, Potential inclusion of other types of edges (e.g. IIN) However, the downsides include: Requires feature finding pre-processing (e.g. MZMine2), Less sensitive to consider all MS/MS than classical, More parameters to set Mass Spectrometry Types \u00b6 Does GNPS support data independent acquisition (DIA) data types such as MSe and SWATH? GNPS natively does not support these types of data with large isolation windows. We recommend that these data be preprocessed so that individual molecule fragmentation can be deconvoluted with tool such as DIA-Umpire or Progenesis QI (MSe) and you can find our documentation here . GNPS Account \u00b6 How can I reset my password For now please go ahead and contact our admins via this page . Browser Support \u00b6 What Browsers Does GNPS Support We officially test on the latest Chrome browser. Other browsers, e.g. Firefox, Internet Explorer, Opera, Edge, are not officially supported but likely will not have any issues with GNPS. Page Contributions \u00b6 Ming Wang","title":"Frequently Asked Questions"},{"location":"faq/#data-privacy","text":"Is the data I upload to analyze publicly visible? Data you upload to analyze at GNPS will remain private unless you explicitly make it public. The two ways to make your data public are to create MassIVE datasets that make entire datasets public or add individual annotated MS/MS spectra to GNPS spectral libraries. Will MassIVE datasets that I create be public by default? No, when creating a MassIVE dataset, it is not public by default. On the input form page, you are able to set a password to access the MassIVE dataset. There is a Make Public link to make your dataset open to the public and documentation can be found here here. Such a feature is very useful because users can create a MassIVE dataset prior to publication submission that is private and password protected. The MassIVE dataset link can be provided to reviewers along with the password so to provide better transparency and increase probability of manuscript acceptance.","title":"Data Privacy"},{"location":"faq/#data-organization","text":"How does the MassIVE data differ from the GNPS spectral libraries? MassIVE datasets consist of raw data. GNPS spectral libraries consist of spectra that have been individually assigned an identification.","title":"Data Organization"},{"location":"faq/#spectral-libraries","text":"How do I get access to the public spectral libraries? They will be shared with you by default and selected automatically when performing an analysis that requires spectral libraries. This is all included in shared user speclibs. If it does not show up, then do the following. On the select input files popup, click on the shared files tab, and enter speclibs as an import share. Can I create my own private spectral libraries? Yes, but it is not recommended and we create these private libraries as a path to making them public. Please contact administrators for further details.","title":"Spectral Libraries"},{"location":"faq/#analyzing-data","text":"Can I select more than one file at a time for each group in molecular networking? Yes. Within each group you can select multiple files, even folders of spectra. Simply highlight the multiple files/folders you want to select and then add to the appropriate group. What are the advantages and disadvantages of FBMN vs Classical Molecular Networking Feature Based Molecular Networking (FBMN) provides the following advantages: Area under the curve quantification, Isomer resolution, Filtration of MS/MS that come from chromatographic features, Potential inclusion of other types of edges (e.g. IIN) However, the downsides include: Requires feature finding pre-processing (e.g. MZMine2), Less sensitive to consider all MS/MS than classical, More parameters to set","title":"Analyzing Data"},{"location":"faq/#mass-spectrometry-types","text":"Does GNPS support data independent acquisition (DIA) data types such as MSe and SWATH? GNPS natively does not support these types of data with large isolation windows. We recommend that these data be preprocessed so that individual molecule fragmentation can be deconvoluted with tool such as DIA-Umpire or Progenesis QI (MSe) and you can find our documentation here .","title":"Mass Spectrometry Types"},{"location":"faq/#gnps-account","text":"How can I reset my password For now please go ahead and contact our admins via this page .","title":"GNPS Account"},{"location":"faq/#browser-support","text":"What Browsers Does GNPS Support We officially test on the latest Chrome browser. Other browsers, e.g. Firefox, Internet Explorer, Opera, Edge, are not officially supported but likely will not have any issues with GNPS.","title":"Browser Support"},{"location":"faq/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"fbmn-iin-msdial/","text":"IIN with MS-DIAL \u00b6 Introduction \u00b6 In MS-DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. After the processing the Supplementary Pairs file can be exported and used for IIN. Development and Installation \u00b6 Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL . Citations \u00b6 This work builds on the efforts of our many colleagues, please cite their work: For IIN : Schmid et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). For MS-DIAL 1): Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). For MS-DIAL 2): Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018). Running the FBMN IIN workflow with MS-DIAL \u00b6 The integration of MS-DIAL and IIN is supported since version 4.1 and support for FBMN from version 2.99. After a standard processing data with MS-DIAL, the \u201cAlignment results\u201d can be exported for IIN analysis. Step 1 : Process your non-targeted LC-MS/MS data with MS-DIAL following the FBMN documentation guidelines . Step 2 : After processing your data export the Supplementary Annotation/Pairs files from the \"Alignement results\" using the option \u201cGNPS export\u201d and \u201cExport GNPS edge files\u201d. Step 3 : Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with MS-DIAL For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation . Tutorials \u00b6 See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample. TO DO NOTES \u00b6 Screenshots when new release available Batch file for the export ? Cytoscape documentation Tutorial IIN Acknowledgements \u00b6 This integration was made possible by Hiroshi Tsugawa (Riken). Page Contributions \u00b6 Ming Wang","title":"IIN with MS-DIAL"},{"location":"fbmn-iin-msdial/#iin-with-ms-dial","text":"","title":"IIN with MS-DIAL"},{"location":"fbmn-iin-msdial/#introduction","text":"In MS-DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. After the processing the Supplementary Pairs file can be exported and used for IIN.","title":"Introduction"},{"location":"fbmn-iin-msdial/#development-and-installation","text":"Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL .","title":"Development and Installation"},{"location":"fbmn-iin-msdial/#citations","text":"This work builds on the efforts of our many colleagues, please cite their work: For IIN : Schmid et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). For MS-DIAL 1): Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). For MS-DIAL 2): Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018).","title":"Citations"},{"location":"fbmn-iin-msdial/#running-the-fbmn-iin-workflow-with-ms-dial","text":"The integration of MS-DIAL and IIN is supported since version 4.1 and support for FBMN from version 2.99. After a standard processing data with MS-DIAL, the \u201cAlignment results\u201d can be exported for IIN analysis. Step 1 : Process your non-targeted LC-MS/MS data with MS-DIAL following the FBMN documentation guidelines . Step 2 : After processing your data export the Supplementary Annotation/Pairs files from the \"Alignement results\" using the option \u201cGNPS export\u201d and \u201cExport GNPS edge files\u201d. Step 3 : Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with MS-DIAL For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation .","title":"Running the FBMN IIN workflow with MS-DIAL"},{"location":"fbmn-iin-msdial/#tutorials","text":"See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample.","title":"Tutorials"},{"location":"fbmn-iin-msdial/#to-do-notes","text":"Screenshots when new release available Batch file for the export ? Cytoscape documentation Tutorial IIN","title":"TO DO NOTES"},{"location":"fbmn-iin-msdial/#acknowledgements","text":"This integration was made possible by Hiroshi Tsugawa (Riken).","title":"Acknowledgements"},{"location":"fbmn-iin-msdial/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"fbmn-iin-mzmine/","text":"IIN with MZmine \u00b6 Introduction \u00b6 Ion Identity Network (IIN) is a computational method based on LC-MS peak shape correlation analysis that allows to correlate different ions, including adducts, multimers and in-source fragmentation, that can be formed from the same molecule during the ESI ionization. This is an advanced option one might choose while processing data for Feature Based Molecular Network (FBMN) . The supported tools for IIN are: MZmine, XCMS, and MS-DIAL. You can find more information about IIN in this playlist . Development and Installation \u00b6 For Ion Identity Network with MZmine, download the MZmine software (MZmine-2.37.corr17.7_kai_merge2 version) available here . Data Processing with MZmine for FBMN and IIN \u00b6 The sequence of steps for data processing in MZmine are mostly shared with the data processing steps with MZmine for FBMN (from step 1. data import, to 7. gap filling / 8. normalization), however, before exporting to GNPS, some steps for IIN should be included to obtain edge annotations. The scheme below shows the steps involved in the IIN workflow with MZmine. Processing steps for IIN with MZmine \u00b6 Start the process with FBMN steps \u00b6 Process you data similarly to steps 1 to 7/8 of the FBMN workflow . Perform IIN specific steps \u00b6 Step 9 - metaCorrelate \u00b6 Once the last step of FBMN has been completed, the \"aligned peaklist\" must be selected to continue with IIN. Start by applying the metaCorrelate module, which will be used to search for correlating ions/features in different samples, scan events and MS levels. Go to Menu: Peak list methods > Row grouping > metaCorrelate. Parameters are defined in the pop up window of the module, and information regarding the RT tolerance, mininmum height and noise level should be entered considering the sample set selected and equipment used. Select box \u201cCorrelation grouping\u201d and set the parameters according to what would fit better in the dataset. IMPORTANT: it is not recommended to use less than 5 data points. IMPORTANT: make sure that PEARSON measurement is selected. <-- check it. Click on OK and a new feature list will be generated on the right panel. At this point, the IIN should be built (it will be searching for adducts, in-source fragments and clusters in the dataset). Step 10 - Ion Identity Networking \u00b6 Go to Menu: Peak list methods > Identification > Ion Identity Networks > Ion Identity Networking. [IMPORTANT]: Make sure the aligned peaklist process with the metaCorrelate module is selected. The \u201cCheck\u201d parameter presents three options that can be used to check for adduct identities. The ion identity library can be used to select the adducts of interest and the molecules\u2019 modifications. Click on \u201cReset Positive/Negative\u201d and on \u201cReset Mods\u201d to have access to the list available in MZmine. At this point, the ones more appropriate for each dataset should be selected. In the case that, in addition to the most common adducts ([M+Na]+, [M+K]+, [M+H]+, [2M+H]+, etc), more specific ions are observed in the dataset and are not included in the software\u2019s list, it is possible to create new ones by clicking in \u201cAdd\u2026\u201d and filling the required information. It is also possible to combine adducts to create a new customized one clicking in \u201cCombine\u2026\u201d. In the case of a combination, the adducts present in the list should be added to the right panel, selected and then added again to the previous list. This step can performed multiple times to append annotations from modifications that might be more specific ([M-H2O], [M-CO], etc) with different parameters. Step 11 - Feature export for GNPS: \u00b6 In this step, the 3 files required for running a IIN job on GNPS are going to be exported. It is similar to the exporting step with the FBMN workflow. The three files are: \u00b7 The feature quantification table (.CSV file format), with LC-MS feature intensities; \u00b7 The MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum; \u00b7 The annotation edge file (.CSV file), containing the additional edges annotated by IIN. Go to Menu: Peak list methods > Export/Import > Export for/Submit to GNPS. Note that you can use the \"Submit to GNPS\" option to start automatically a job on GNPS. See the FBMN documentation for more details . Name the filename in .mgf format and choose filter rows only with MS2 data. [IMPORTANT]: The additional steps included in MZmine for IIN are currently note saved when you save your project, therefore, once the data was processed, you have to export and save the files, otherwise after reopening the project in the futur, it will possible to export only the feature quantification table (.CSV file format), and the MS/MS spectral summary (.MGF file). Step 12 - Run the FBMNxIIN job on GNPS \u00b6 If you used the option \"Submit to GNPS\" your job should have been launched automatically on GNPS. If needed, clone the job with different parameters. Alternatively, you can upload your files via FTP and configure an FBMNxIIN job on GNPS . Step 13 - Visualization in Cytoscape \u00b6 The additional edges that IIN identified as adducts and in-source modifications are visualized in Cytoscape. See the the main FBMNxIIN page for more details . Citations \u00b6 This work builds on the efforts of our many colleagues, please cite their work: For IIN : Schmid R., Petras D., Nothias LF, et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Page Contributions \u00b6 Ming Wang","title":"IIN with MZmine2"},{"location":"fbmn-iin-mzmine/#iin-with-mzmine","text":"","title":"IIN with MZmine"},{"location":"fbmn-iin-mzmine/#introduction","text":"Ion Identity Network (IIN) is a computational method based on LC-MS peak shape correlation analysis that allows to correlate different ions, including adducts, multimers and in-source fragmentation, that can be formed from the same molecule during the ESI ionization. This is an advanced option one might choose while processing data for Feature Based Molecular Network (FBMN) . The supported tools for IIN are: MZmine, XCMS, and MS-DIAL. You can find more information about IIN in this playlist .","title":"Introduction"},{"location":"fbmn-iin-mzmine/#development-and-installation","text":"For Ion Identity Network with MZmine, download the MZmine software (MZmine-2.37.corr17.7_kai_merge2 version) available here .","title":"Development and Installation"},{"location":"fbmn-iin-mzmine/#data-processing-with-mzmine-for-fbmn-and-iin","text":"The sequence of steps for data processing in MZmine are mostly shared with the data processing steps with MZmine for FBMN (from step 1. data import, to 7. gap filling / 8. normalization), however, before exporting to GNPS, some steps for IIN should be included to obtain edge annotations. The scheme below shows the steps involved in the IIN workflow with MZmine.","title":"Data Processing with MZmine for FBMN and IIN"},{"location":"fbmn-iin-mzmine/#processing-steps-for-iin-with-mzmine","text":"","title":"Processing steps for IIN with MZmine"},{"location":"fbmn-iin-mzmine/#start-the-process-with-fbmn-steps","text":"Process you data similarly to steps 1 to 7/8 of the FBMN workflow .","title":"Start the process with FBMN steps"},{"location":"fbmn-iin-mzmine/#perform-iin-specific-steps","text":"","title":"Perform IIN specific steps"},{"location":"fbmn-iin-mzmine/#step-9-metacorrelate","text":"Once the last step of FBMN has been completed, the \"aligned peaklist\" must be selected to continue with IIN. Start by applying the metaCorrelate module, which will be used to search for correlating ions/features in different samples, scan events and MS levels. Go to Menu: Peak list methods > Row grouping > metaCorrelate. Parameters are defined in the pop up window of the module, and information regarding the RT tolerance, mininmum height and noise level should be entered considering the sample set selected and equipment used. Select box \u201cCorrelation grouping\u201d and set the parameters according to what would fit better in the dataset. IMPORTANT: it is not recommended to use less than 5 data points. IMPORTANT: make sure that PEARSON measurement is selected. <-- check it. Click on OK and a new feature list will be generated on the right panel. At this point, the IIN should be built (it will be searching for adducts, in-source fragments and clusters in the dataset).","title":"Step 9 - metaCorrelate"},{"location":"fbmn-iin-mzmine/#step-10-ion-identity-networking","text":"Go to Menu: Peak list methods > Identification > Ion Identity Networks > Ion Identity Networking. [IMPORTANT]: Make sure the aligned peaklist process with the metaCorrelate module is selected. The \u201cCheck\u201d parameter presents three options that can be used to check for adduct identities. The ion identity library can be used to select the adducts of interest and the molecules\u2019 modifications. Click on \u201cReset Positive/Negative\u201d and on \u201cReset Mods\u201d to have access to the list available in MZmine. At this point, the ones more appropriate for each dataset should be selected. In the case that, in addition to the most common adducts ([M+Na]+, [M+K]+, [M+H]+, [2M+H]+, etc), more specific ions are observed in the dataset and are not included in the software\u2019s list, it is possible to create new ones by clicking in \u201cAdd\u2026\u201d and filling the required information. It is also possible to combine adducts to create a new customized one clicking in \u201cCombine\u2026\u201d. In the case of a combination, the adducts present in the list should be added to the right panel, selected and then added again to the previous list. This step can performed multiple times to append annotations from modifications that might be more specific ([M-H2O], [M-CO], etc) with different parameters.","title":"Step 10 - Ion Identity Networking"},{"location":"fbmn-iin-mzmine/#step-11-feature-export-for-gnps","text":"In this step, the 3 files required for running a IIN job on GNPS are going to be exported. It is similar to the exporting step with the FBMN workflow. The three files are: \u00b7 The feature quantification table (.CSV file format), with LC-MS feature intensities; \u00b7 The MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum; \u00b7 The annotation edge file (.CSV file), containing the additional edges annotated by IIN. Go to Menu: Peak list methods > Export/Import > Export for/Submit to GNPS. Note that you can use the \"Submit to GNPS\" option to start automatically a job on GNPS. See the FBMN documentation for more details . Name the filename in .mgf format and choose filter rows only with MS2 data. [IMPORTANT]: The additional steps included in MZmine for IIN are currently note saved when you save your project, therefore, once the data was processed, you have to export and save the files, otherwise after reopening the project in the futur, it will possible to export only the feature quantification table (.CSV file format), and the MS/MS spectral summary (.MGF file).","title":"Step 11 - Feature export for GNPS:"},{"location":"fbmn-iin-mzmine/#step-12-run-the-fbmnxiin-job-on-gnps","text":"If you used the option \"Submit to GNPS\" your job should have been launched automatically on GNPS. If needed, clone the job with different parameters. Alternatively, you can upload your files via FTP and configure an FBMNxIIN job on GNPS .","title":"Step 12 - Run the FBMNxIIN job on GNPS"},{"location":"fbmn-iin-mzmine/#step-13-visualization-in-cytoscape","text":"The additional edges that IIN identified as adducts and in-source modifications are visualized in Cytoscape. See the the main FBMNxIIN page for more details .","title":"Step 13 - Visualization in Cytoscape"},{"location":"fbmn-iin-mzmine/#citations","text":"This work builds on the efforts of our many colleagues, please cite their work: For IIN : Schmid R., Petras D., Nothias LF, et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019).","title":"Citations"},{"location":"fbmn-iin-mzmine/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"fbmn-iin-xcms/","text":"IIN with XCMS-CAMERA \u00b6 Introduction \u00b6 The use of XCMS and CAMERA to generate IIN relies on two custom utility functions ( getFeatureAnnotations and getEdgelist ) to extract and export MS1 based feature and edge annotations (i.e. grouping of features to adduct/isotope groups of the same compound). In addition, the utility function formatSpectraForGNPS is also used to export MS2 spectra. Development \u00b6 These custom functions are available in the GitHub repository https://github.com/jorainer/xcms-gnps-tools . Representative R-markdown documents and python scripts are available on http://ccms-ucsd.github.io/GNPSDocumentation/fbmn-iin-xcms . XCMS3 GitHub repository: https://github.com/sneumann/xcms This work builds on the efforts of our many colleagues, please cite their work: Citations \u00b6 For IIN : Schmid et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). For XCMS 1) Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008). For XCMS 2) Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006). For CAMERA 1): Kuhl, C., Tautenhahn, R., B\u00f6ttcher, C., Larson, T. R. & Neumann, S. CAMERA: an integrated strategy for compound spectra extraction and annotation of liquid chromatography/mass spectrometry data sets. Anal. Chem. 84, 283\u2013289 (2012) For CAMERA 2): Treutler, H. & Neumann, S. Prediction, Detection, and Validation of Isotope Clusters in Mass Spectrometry Data . Metabolites 6, (2016) Running the FBMN IIN workflow with XCMS-CAMERA \u00b6 Step 1 : Process your non-targeted LC-MS/MS data with XCMS-CAMERA following the FBMN documentation guidelines . Step 2 : Export the Supplementary Annotations/Pairs: The use of XCMS and CAMERA to generate IIN relies on two custom utility functions: getFeatureAnnotations : extracts and exports MS1 based feature annotation. It contains the adduct/isotope annotations generated by CAMERA. getEdgelist : extracts and exports the Supplementary Pairs file that contains related pairs (i.e. from peak shape correlation analysis, etc) . Note that the utility function formatSpectraForGNPS of the FBMN must also be used to export MS2 spectra as MGF. Step 3 : Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with XCMS-CAMERA For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation . See our tutorial below for detailed example. Tutorials \u00b6 See our FBMN IIN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/ . Acknowledgements \u00b6 This integration was made possible by Johannes Rainer (Eurac Research) and Mar Garcia-Aloy (Eurac Research). Page Contributions \u00b6 Ming Wang","title":"IIN with XCMS"},{"location":"fbmn-iin-xcms/#iin-with-xcms-camera","text":"","title":"IIN with XCMS-CAMERA"},{"location":"fbmn-iin-xcms/#introduction","text":"The use of XCMS and CAMERA to generate IIN relies on two custom utility functions ( getFeatureAnnotations and getEdgelist ) to extract and export MS1 based feature and edge annotations (i.e. grouping of features to adduct/isotope groups of the same compound). In addition, the utility function formatSpectraForGNPS is also used to export MS2 spectra.","title":"Introduction"},{"location":"fbmn-iin-xcms/#development","text":"These custom functions are available in the GitHub repository https://github.com/jorainer/xcms-gnps-tools . Representative R-markdown documents and python scripts are available on http://ccms-ucsd.github.io/GNPSDocumentation/fbmn-iin-xcms . XCMS3 GitHub repository: https://github.com/sneumann/xcms This work builds on the efforts of our many colleagues, please cite their work:","title":"Development"},{"location":"fbmn-iin-xcms/#citations","text":"For IIN : Schmid et al. In preparation. For FBMN : Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). For XCMS 1) Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008). For XCMS 2) Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006). For CAMERA 1): Kuhl, C., Tautenhahn, R., B\u00f6ttcher, C., Larson, T. R. & Neumann, S. CAMERA: an integrated strategy for compound spectra extraction and annotation of liquid chromatography/mass spectrometry data sets. Anal. Chem. 84, 283\u2013289 (2012) For CAMERA 2): Treutler, H. & Neumann, S. Prediction, Detection, and Validation of Isotope Clusters in Mass Spectrometry Data . Metabolites 6, (2016)","title":"Citations"},{"location":"fbmn-iin-xcms/#running-the-fbmn-iin-workflow-with-xcms-camera","text":"Step 1 : Process your non-targeted LC-MS/MS data with XCMS-CAMERA following the FBMN documentation guidelines . Step 2 : Export the Supplementary Annotations/Pairs: The use of XCMS and CAMERA to generate IIN relies on two custom utility functions: getFeatureAnnotations : extracts and exports MS1 based feature annotation. It contains the adduct/isotope annotations generated by CAMERA. getEdgelist : extracts and exports the Supplementary Pairs file that contains related pairs (i.e. from peak shape correlation analysis, etc) . Note that the utility function formatSpectraForGNPS of the FBMN must also be used to export MS2 spectra as MGF. Step 3 : Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with XCMS-CAMERA For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation . See our tutorial below for detailed example.","title":"Running the FBMN IIN workflow with XCMS-CAMERA"},{"location":"fbmn-iin-xcms/#tutorials","text":"See our FBMN IIN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/ .","title":"Tutorials"},{"location":"fbmn-iin-xcms/#acknowledgements","text":"This integration was made possible by Johannes Rainer (Eurac Research) and Mar Garcia-Aloy (Eurac Research).","title":"Acknowledgements"},{"location":"fbmn-iin-xcms/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"fbmn-iin/","text":"Ion Identity Molecular Networking (IIMN) \u00b6 Introduction \u00b6 The Ion Identity Molecular Networking (IIMN) workflow complements the Feature-Based Molecular Networking (FBMN) by grouping MS2 spectra not only through similarity of MS2 spectra, but also of MS2 spectra whose precursor ions fulfill the retention time, peak shape, user-defined parameters. It enables the visualization of patterns of ion species and brings together subnetwork from the same molecule to create an ion identity molecular family. IIN can be performed with MZmine , XCMS-CAMERA , or MS-DIAL . You can find more information about IIN in this playlist and this video from an IIN Workshop. Citations \u00b6 This work builds on the efforts of our many colleagues, please cite their work: For IIMN : Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking in the GNPS Environment bioRxiv 088948 (2020). For FBMN : Nothias, L.F., Petras D., Schmid R, et al. Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M., Carver J, Phelan V.V., et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). And the tools you used to process your data. Running the IIMN workflow \u00b6 The Ion Identity Networking workflow is run throught the FBMN workflow by providing Supplementary Annotation/Pairs files in the \"Advanced Extras\" panel of the standard FBMN workflow interface . Alternatively, the quickstart interface for FBMN can also be used: Note that multiple Supplementary Pairs files can specified. Their content will be added. Generating Supplementary Pairs \u00b6 The Supplementary Annotations/Pairs files can be generated with the following software: MZmine : See the documentation XCMS-CAMERA : See the documentation MS-DIAL : See the documentation Alternatively, the results of other software could be used as long as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file. Supplementary pairs \u00b6 The Supplementary Pairs is a .CSV format file (coma separated), and must contains the following columns: Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation See an example of the Supplementary Pairs used in the Ion Identity Networking (IIN) workflow Exploring the IIMN workflow in Cytoscape \u00b6 The additional edges that IIMN identified as adducts and in-source modifications are visualized in Cytoscape. The different types of ions can be observed in different node colors if the Best Ion option is chosen in Fill Color, and Discrete Mapping type is selected. The lines connecting the nodes can be deferred if the connection represents a cosine or a MS1 annotation from INN. In the Line Type option, select EdgeType with Discrete Mapping. The annotation of the adducts or in-source fragmentations connected in the MS1 level can be annotated in the edges connecting the corresponding nodes. In the Label option, select Edge Annotation with Passthrough Mapping. Specific types of adducts\u2019 edges can be colored differently by selecting Stroke Color (Unselected) section, and choosing Edge Annotation and Discrete Mapping. Page Contributions \u00b6 Ming Wang (5.81%), lfnothias (20.93%), Daniel Petras (73.26%)","title":"IIN Workflow"},{"location":"fbmn-iin/#ion-identity-molecular-networking-iimn","text":"","title":"Ion Identity Molecular Networking (IIMN)"},{"location":"fbmn-iin/#introduction","text":"The Ion Identity Molecular Networking (IIMN) workflow complements the Feature-Based Molecular Networking (FBMN) by grouping MS2 spectra not only through similarity of MS2 spectra, but also of MS2 spectra whose precursor ions fulfill the retention time, peak shape, user-defined parameters. It enables the visualization of patterns of ion species and brings together subnetwork from the same molecule to create an ion identity molecular family. IIN can be performed with MZmine , XCMS-CAMERA , or MS-DIAL . You can find more information about IIN in this playlist and this video from an IIN Workshop.","title":"Introduction"},{"location":"fbmn-iin/#citations","text":"This work builds on the efforts of our many colleagues, please cite their work: For IIMN : Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking in the GNPS Environment bioRxiv 088948 (2020). For FBMN : Nothias, L.F., Petras D., Schmid R, et al. Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). For GNPS : Wang, M., Carver J, Phelan V.V., et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). And the tools you used to process your data.","title":"Citations"},{"location":"fbmn-iin/#running-the-iimn-workflow","text":"The Ion Identity Networking workflow is run throught the FBMN workflow by providing Supplementary Annotation/Pairs files in the \"Advanced Extras\" panel of the standard FBMN workflow interface . Alternatively, the quickstart interface for FBMN can also be used: Note that multiple Supplementary Pairs files can specified. Their content will be added.","title":"Running the IIMN workflow"},{"location":"fbmn-iin/#generating-supplementary-pairs","text":"The Supplementary Annotations/Pairs files can be generated with the following software: MZmine : See the documentation XCMS-CAMERA : See the documentation MS-DIAL : See the documentation Alternatively, the results of other software could be used as long as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file.","title":"Generating Supplementary Pairs"},{"location":"fbmn-iin/#supplementary-pairs","text":"The Supplementary Pairs is a .CSV format file (coma separated), and must contains the following columns: Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation See an example of the Supplementary Pairs used in the Ion Identity Networking (IIN) workflow","title":"Supplementary pairs"},{"location":"fbmn-iin/#exploring-the-iimn-workflow-in-cytoscape","text":"The additional edges that IIMN identified as adducts and in-source modifications are visualized in Cytoscape. The different types of ions can be observed in different node colors if the Best Ion option is chosen in Fill Color, and Discrete Mapping type is selected. The lines connecting the nodes can be deferred if the connection represents a cosine or a MS1 annotation from INN. In the Line Type option, select EdgeType with Discrete Mapping. The annotation of the adducts or in-source fragmentations connected in the MS1 level can be annotated in the edges connecting the corresponding nodes. In the Label option, select Edge Annotation with Passthrough Mapping. Specific types of adducts\u2019 edges can be colored differently by selecting Stroke Color (Unselected) section, and choosing Edge Annotation and Discrete Mapping.","title":"Exploring the IIMN workflow in Cytoscape"},{"location":"fbmn-iin/#page-contributions","text":"Ming Wang (5.81%), lfnothias (20.93%), Daniel Petras (73.26%)","title":"Page Contributions"},{"location":"featurebasedmolecularnetworking-cytoscape/","text":"Introduction to FBMN \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . The documentation for FBMN using Cytoscape is provided below. Feature-Based Molecular Networking in Cytoscape \u00b6 Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. Cytoscape is available for download from here . The instructions were created with Cytoscape 3.7. Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13 (11), 2498-2504. doi:10.1101/gr.1239303 Downloading Cytoscape Files from GNPS \u00b6 The first step is to download the input file (.graphML file format) for import into Cytoscape. From the job status page in the Feature-Based Molecular Networking workflow, click on Download Cytoscape Data . Save and unzip the downloaded file. Unzip the file and the resulting folder will look like this: Import the molecular network in Cytoscape \u00b6 To import the network file into Cytoscape: * in Cytoscape click on Import Network from File System and then choose the .graphml file. * Alternatively, you can drag and drop the .graphml file into Cytoscape. The imported network will be displayed in the main window. In the Control Panel (left panel), in the Network tab, rename the network with right-click and select Rename Network . You can import the table file into Cytoscape. Click Import Table from File System , navigate to the \u201cDB_result\u201d folder and select the .csv file. Lastly, click OK in the opened window. Import supplementary annotations in Cytoscape \u00b6 Cytoscape allows to map additional annotations such as those produced by other workflows on GNPS. See the documentation for DEREPLICATOR , NAP , MS2LDA , MolNetEnhancer for more details. The FBMN workflow makes possible to map the annotations (molecular formula, cross collision section) made by the processing software used for FBMN (MZmine, XCMS, MetaboScape, MS-DIAL, Progenesis QI), or other third party software tool that processed the same .MGF/.MSP file. In addition it is possible to import any feature metadata and statistical results you are interested in. Regardless of the tool and information to map, the importing procedure follows these steps: Obtain the annotation table that needs to be mapped. This table must contain a column that contains the identifier that matches the name column in the network. This identifier corresponds to the SCANS or FEATURE_ID in the .MGF/.MSP file. Verify that the identifier are indeed matching between the network and table. Import the table in Cytoscape. Go to Menu / Import / Import Table from File System . In the preview window, click on the header of the identifier column to set the meaning to Key (a key logo shows up) Import the table and map the annotation into the molecular network. [ IMPORTANT ] If columns already exist in the network, they will be replaced by the imported table ! Rename the header(s) of the imported table if necessary. Explore the annotation in the molecular network (see below). Rotation of the Network \u00b6 To rotate the entire molecular network choose the Layout tab and click Node Layout tool . In the opened window, uncheck the Selected Only box to rotate the entire network and move the blue bar to 90. You can also select specific subnetworks and rotate them by checking Selected only . Table Panel Visualization Data \u00b6 For advanced network visualisation and data analysis, you may click on Table Panel and select node or edge column information (network metadata) to be displayed. For example, in the Node Table , you can select the \"Compound_name\" (name of the spectral library match), the \" parent mass\" (precursor ion mass), the \" RTconsensus\" (retention time for the node), \" MZErrorPPM\" (ppm error with the spectral library match) and any attributes of interest in your in Node Table (node metadata). Create a New Style \u00b6 A style can be created by clicking on Create New Style and a style name can be specified (e.g. \"High vs Low Plant Consumer\"). The created style can be exported by going in the main menu to File > Export > Styles to File , or a previous style can be imported by clicking on Import > Style From File in the File menu. Edit the Style \u00b6 Node Styling \u00b6 Label \u00b6 In the Control Panel (left panel), go to the Style tab. Within the Node sub-tab, the properties of the node style can be modified. For example, you can choose the precursor mass as node label for the molecular networks [you need to select Passthrough Mapping as the Mapping Type ]. Go to Properties to display more style properties. Size \u00b6 In order to match the label size to the node size, go into Style panel , at Label Front Size option, select \u201c SumPeakIntensity \u201d or the \u201c number of spectra \u201d (as selected for node size) as Column and Continuous Mapping as Mapping Type . As described above, begin by setting the value for minimum and maximum node size value with the button Set Min and Max, then choose the same continuous mapping as used for the node size. Pie charts \u00b6 If you used a metadata table, the node table will contain group columns for each group specified in the metadata table. The group columns starts with \"_GNPSGROUP__\" and will consist of the mean (default and recommended) or summed intensity of the ion across the group's samples based on the MS1 feature table (LC-MS peak area). This group columns can be used to visualize groups as pie charts in the network. To start visualizing pie charts on node for the groups, click on the left box ( Def column) for the Image/Chart1 node property. Choose the Charts tab and select the Pie Chart Icon . Now, in the Data sub-tab, select the group columns you are interested in visualizing in the Select Columns box (e.g. \"GNPSGROUP: Less_than 5\" (low plant consumers) and \"GNPSGROUP:More_than_30\" (high plant consumers)). Click on Options (under Data ) to choose colors for the Groups (groups are numbered based on their position in the Selected Columns box). Click Apply when you are done with your selection. Edge Styling \u00b6 Width \u00b6 To aid in the visualization of individual node similarities within a cluster, the cosine score is displayed as an edge. The cosine scores define similarity between two MS/MS spectra. Scores ranging from 0 (totally dissimilar) to 1 (identical). The edge thickness can be used to visualize the cosine score value between related nodes. For this we will use the cosine-score-based continuous mapping for the edge thickness. Go to the Style tab, and the Edge sub-tab. From the Width property drop down menu, select \"cosine_score\" for the Column and Continuous Mapping for the Mapping Type . Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Optimise the minimum and maximum value for the continuous mapping. Mining information in the network \u00b6 Sub-network creation \u00b6 To separate one or multilple specific desired network(s), press \u201cctrl\u201d or \u201ccommand\u201d (windows or MacOS, respectively) at the same time drag the mouse to select the network(s). Then, click on the symbol as shown below. Automatically, the sub-network is created. For going back to the main network, go into the Control Panel , select Network and then choose the main network. The Toolbar function \u00b6 The Cytoscape's toolbar can be used to search nodes or edge metadata (e.g., \"shared name\" ). Note that this feature is very slow, especially with large networks. The list of nodes in the Note Table will be updated. You can select nodes of interest, perform right-click for Select nodes and then click on the + magnifier in the main menu to perform a zoom on the selected node. The Select function \u00b6 The Select function can be used to create a selection of nodes and/or edges based on their metadata and/or network topology. Go to the Control Panel and click on Select tab. Then, click on the \" + \" button and choose between column, degree, or topology filter(s) to add different filter properties. The \" x \" button deletes the corresponding property. For each filter property, various options are provided depending on the column type (numeric column: is , is not , between ; for string column: contains and does not contain . Here, we create annotation filter that selects nodes by the spectral library match with 10 ppm maximum error between precursor ions (\" MZErrorPPM \" from 0 to 10). By default, the filter should be automatically applied to the network, otherwise click Apply . Under the Filter tab, the number of nodes meeting the filter property variables (here 160 nodes) will be selected. These nodes are automatically selected and highlighted in yellow in the network. Filters are very powerful network analysis tools that can be modified, saved and exported. To rename, remove, create a new filter, or other options, click on the right button beside the Filter list menu. The list of available Filters will appear in the top part of the panel. For more details and options, follow this link . Bypass mode for style property \u00b6 A bypass could be applied to selected nodes and/or edged by going into the Style panel, and clicking on the Byp. column for the property you want to change such as Border paint and Border Width . For modifying or removing the bypass property, select the nodes of interest, click right and choose Remove Bypass or set Bypass option. Drawing structure in nodes \u00b6 The chemical structures can be visualized in the node using chemViz2 bioinformatics plugin for Cytoscape ( http://www.cgl.ucsf.edu/cytoscape/chemViz/ ). First, the chemViz2 plugin has to be installed. To do that, go to the Apps tab in the main menu, then open App Manager . In the Install Apps tab click on chemViz2 and install it by clicking Install . For more information about chemViz2, refer to the information available on the chemViz2 website . Once installed, chemViz2 can be used to display chemical structures on nodes. First, you will have to verify that chemViz2 is properly parameterized. Select Apps in the main menu, go to Cheminformatics Tools and click Settings . In the Attribute Settings section, choose node.Smiles for SMILES Attribute and/or node.INCHI for InCHI Attribute . Apply it by clicking OK . Finally, to draw structures in the nodes, return to Apps > Cheminformatics Tools > Paint Structures and select on all nodes or on selected nodes . Visualize the results. If needed, create a dedicated style to facilitate structure visualization. Mapping other node information \u00b6 Cytoscape enables to map informations obtained from the other workflows/softwares. Visualize this annotation by creating novel styles and changing its properties. Video Tutorial FBMN and Cytoscape \u00b6 Our tutorial on running the FBMN analysis on GNPS including a Cytoscape demo . See our tutorial on using MZmine2 for the FBMN analysis of a cohort from the American Gut Project . Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributions \u00b6 Ming Wang (5.88%), lfnothias (34.12%), irinakoester (51.18%), Ivan Protsyuk (8.82%)","title":"FBMN export to Cytoscape"},{"location":"featurebasedmolecularnetworking-cytoscape/#introduction-to-fbmn","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . The documentation for FBMN using Cytoscape is provided below.","title":"Introduction to FBMN"},{"location":"featurebasedmolecularnetworking-cytoscape/#feature-based-molecular-networking-in-cytoscape","text":"Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. Cytoscape is available for download from here . The instructions were created with Cytoscape 3.7. Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13 (11), 2498-2504. doi:10.1101/gr.1239303","title":"Feature-Based Molecular Networking in Cytoscape"},{"location":"featurebasedmolecularnetworking-cytoscape/#downloading-cytoscape-files-from-gnps","text":"The first step is to download the input file (.graphML file format) for import into Cytoscape. From the job status page in the Feature-Based Molecular Networking workflow, click on Download Cytoscape Data . Save and unzip the downloaded file. Unzip the file and the resulting folder will look like this:","title":"Downloading Cytoscape Files from GNPS"},{"location":"featurebasedmolecularnetworking-cytoscape/#import-the-molecular-network-in-cytoscape","text":"To import the network file into Cytoscape: * in Cytoscape click on Import Network from File System and then choose the .graphml file. * Alternatively, you can drag and drop the .graphml file into Cytoscape. The imported network will be displayed in the main window. In the Control Panel (left panel), in the Network tab, rename the network with right-click and select Rename Network . You can import the table file into Cytoscape. Click Import Table from File System , navigate to the \u201cDB_result\u201d folder and select the .csv file. Lastly, click OK in the opened window.","title":"Import the molecular network in Cytoscape"},{"location":"featurebasedmolecularnetworking-cytoscape/#import-supplementary-annotations-in-cytoscape","text":"Cytoscape allows to map additional annotations such as those produced by other workflows on GNPS. See the documentation for DEREPLICATOR , NAP , MS2LDA , MolNetEnhancer for more details. The FBMN workflow makes possible to map the annotations (molecular formula, cross collision section) made by the processing software used for FBMN (MZmine, XCMS, MetaboScape, MS-DIAL, Progenesis QI), or other third party software tool that processed the same .MGF/.MSP file. In addition it is possible to import any feature metadata and statistical results you are interested in. Regardless of the tool and information to map, the importing procedure follows these steps: Obtain the annotation table that needs to be mapped. This table must contain a column that contains the identifier that matches the name column in the network. This identifier corresponds to the SCANS or FEATURE_ID in the .MGF/.MSP file. Verify that the identifier are indeed matching between the network and table. Import the table in Cytoscape. Go to Menu / Import / Import Table from File System . In the preview window, click on the header of the identifier column to set the meaning to Key (a key logo shows up) Import the table and map the annotation into the molecular network. [ IMPORTANT ] If columns already exist in the network, they will be replaced by the imported table ! Rename the header(s) of the imported table if necessary. Explore the annotation in the molecular network (see below).","title":"Import supplementary annotations in Cytoscape"},{"location":"featurebasedmolecularnetworking-cytoscape/#rotation-of-the-network","text":"To rotate the entire molecular network choose the Layout tab and click Node Layout tool . In the opened window, uncheck the Selected Only box to rotate the entire network and move the blue bar to 90. You can also select specific subnetworks and rotate them by checking Selected only .","title":"Rotation of the Network"},{"location":"featurebasedmolecularnetworking-cytoscape/#table-panel-visualization-data","text":"For advanced network visualisation and data analysis, you may click on Table Panel and select node or edge column information (network metadata) to be displayed. For example, in the Node Table , you can select the \"Compound_name\" (name of the spectral library match), the \" parent mass\" (precursor ion mass), the \" RTconsensus\" (retention time for the node), \" MZErrorPPM\" (ppm error with the spectral library match) and any attributes of interest in your in Node Table (node metadata).","title":"Table Panel Visualization Data"},{"location":"featurebasedmolecularnetworking-cytoscape/#create-a-new-style","text":"A style can be created by clicking on Create New Style and a style name can be specified (e.g. \"High vs Low Plant Consumer\"). The created style can be exported by going in the main menu to File > Export > Styles to File , or a previous style can be imported by clicking on Import > Style From File in the File menu.","title":"Create a New Style"},{"location":"featurebasedmolecularnetworking-cytoscape/#edit-the-style","text":"","title":"Edit the Style"},{"location":"featurebasedmolecularnetworking-cytoscape/#node-styling","text":"","title":"Node Styling"},{"location":"featurebasedmolecularnetworking-cytoscape/#label","text":"In the Control Panel (left panel), go to the Style tab. Within the Node sub-tab, the properties of the node style can be modified. For example, you can choose the precursor mass as node label for the molecular networks [you need to select Passthrough Mapping as the Mapping Type ]. Go to Properties to display more style properties.","title":"Label"},{"location":"featurebasedmolecularnetworking-cytoscape/#size","text":"In order to match the label size to the node size, go into Style panel , at Label Front Size option, select \u201c SumPeakIntensity \u201d or the \u201c number of spectra \u201d (as selected for node size) as Column and Continuous Mapping as Mapping Type . As described above, begin by setting the value for minimum and maximum node size value with the button Set Min and Max, then choose the same continuous mapping as used for the node size.","title":"Size"},{"location":"featurebasedmolecularnetworking-cytoscape/#pie-charts","text":"If you used a metadata table, the node table will contain group columns for each group specified in the metadata table. The group columns starts with \"_GNPSGROUP__\" and will consist of the mean (default and recommended) or summed intensity of the ion across the group's samples based on the MS1 feature table (LC-MS peak area). This group columns can be used to visualize groups as pie charts in the network. To start visualizing pie charts on node for the groups, click on the left box ( Def column) for the Image/Chart1 node property. Choose the Charts tab and select the Pie Chart Icon . Now, in the Data sub-tab, select the group columns you are interested in visualizing in the Select Columns box (e.g. \"GNPSGROUP: Less_than 5\" (low plant consumers) and \"GNPSGROUP:More_than_30\" (high plant consumers)). Click on Options (under Data ) to choose colors for the Groups (groups are numbered based on their position in the Selected Columns box). Click Apply when you are done with your selection.","title":"Pie charts"},{"location":"featurebasedmolecularnetworking-cytoscape/#edge-styling","text":"","title":"Edge Styling"},{"location":"featurebasedmolecularnetworking-cytoscape/#width","text":"To aid in the visualization of individual node similarities within a cluster, the cosine score is displayed as an edge. The cosine scores define similarity between two MS/MS spectra. Scores ranging from 0 (totally dissimilar) to 1 (identical). The edge thickness can be used to visualize the cosine score value between related nodes. For this we will use the cosine-score-based continuous mapping for the edge thickness. Go to the Style tab, and the Edge sub-tab. From the Width property drop down menu, select \"cosine_score\" for the Column and Continuous Mapping for the Mapping Type . Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Optimise the minimum and maximum value for the continuous mapping.","title":"Width"},{"location":"featurebasedmolecularnetworking-cytoscape/#mining-information-in-the-network","text":"","title":"Mining information in the network"},{"location":"featurebasedmolecularnetworking-cytoscape/#sub-network-creation","text":"To separate one or multilple specific desired network(s), press \u201cctrl\u201d or \u201ccommand\u201d (windows or MacOS, respectively) at the same time drag the mouse to select the network(s). Then, click on the symbol as shown below. Automatically, the sub-network is created. For going back to the main network, go into the Control Panel , select Network and then choose the main network.","title":"Sub-network creation"},{"location":"featurebasedmolecularnetworking-cytoscape/#the-toolbar-function","text":"The Cytoscape's toolbar can be used to search nodes or edge metadata (e.g., \"shared name\" ). Note that this feature is very slow, especially with large networks. The list of nodes in the Note Table will be updated. You can select nodes of interest, perform right-click for Select nodes and then click on the + magnifier in the main menu to perform a zoom on the selected node.","title":"The Toolbar function"},{"location":"featurebasedmolecularnetworking-cytoscape/#the-select-function","text":"The Select function can be used to create a selection of nodes and/or edges based on their metadata and/or network topology. Go to the Control Panel and click on Select tab. Then, click on the \" + \" button and choose between column, degree, or topology filter(s) to add different filter properties. The \" x \" button deletes the corresponding property. For each filter property, various options are provided depending on the column type (numeric column: is , is not , between ; for string column: contains and does not contain . Here, we create annotation filter that selects nodes by the spectral library match with 10 ppm maximum error between precursor ions (\" MZErrorPPM \" from 0 to 10). By default, the filter should be automatically applied to the network, otherwise click Apply . Under the Filter tab, the number of nodes meeting the filter property variables (here 160 nodes) will be selected. These nodes are automatically selected and highlighted in yellow in the network. Filters are very powerful network analysis tools that can be modified, saved and exported. To rename, remove, create a new filter, or other options, click on the right button beside the Filter list menu. The list of available Filters will appear in the top part of the panel. For more details and options, follow this link .","title":"The Select function"},{"location":"featurebasedmolecularnetworking-cytoscape/#bypass-mode-for-style-property","text":"A bypass could be applied to selected nodes and/or edged by going into the Style panel, and clicking on the Byp. column for the property you want to change such as Border paint and Border Width . For modifying or removing the bypass property, select the nodes of interest, click right and choose Remove Bypass or set Bypass option.","title":"Bypass mode for style property"},{"location":"featurebasedmolecularnetworking-cytoscape/#drawing-structure-in-nodes","text":"The chemical structures can be visualized in the node using chemViz2 bioinformatics plugin for Cytoscape ( http://www.cgl.ucsf.edu/cytoscape/chemViz/ ). First, the chemViz2 plugin has to be installed. To do that, go to the Apps tab in the main menu, then open App Manager . In the Install Apps tab click on chemViz2 and install it by clicking Install . For more information about chemViz2, refer to the information available on the chemViz2 website . Once installed, chemViz2 can be used to display chemical structures on nodes. First, you will have to verify that chemViz2 is properly parameterized. Select Apps in the main menu, go to Cheminformatics Tools and click Settings . In the Attribute Settings section, choose node.Smiles for SMILES Attribute and/or node.INCHI for InCHI Attribute . Apply it by clicking OK . Finally, to draw structures in the nodes, return to Apps > Cheminformatics Tools > Paint Structures and select on all nodes or on selected nodes . Visualize the results. If needed, create a dedicated style to facilitate structure visualization.","title":"Drawing structure in nodes"},{"location":"featurebasedmolecularnetworking-cytoscape/#mapping-other-node-information","text":"Cytoscape enables to map informations obtained from the other workflows/softwares. Visualize this annotation by creating novel styles and changing its properties.","title":"Mapping other node information"},{"location":"featurebasedmolecularnetworking-cytoscape/#video-tutorial-fbmn-and-cytoscape","text":"Our tutorial on running the FBMN analysis on GNPS including a Cytoscape demo . See our tutorial on using MZmine2 for the FBMN analysis of a cohort from the American Gut Project .","title":"Video Tutorial FBMN and Cytoscape"},{"location":"featurebasedmolecularnetworking-cytoscape/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-cytoscape/#page-contributions","text":"Ming Wang (5.88%), lfnothias (34.12%), irinakoester (51.18%), Ivan Protsyuk (8.82%)","title":"Page Contributions"},{"location":"featurebasedmolecularnetworking-with-metaboscape/","text":"Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use MetaboScape with the FBMN workflow on GNPS. Citations and development \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Using MetaboScape and FBMN \u00b6 MetaboScape can be used to process LC-MS/MS Bruker Daltonics data files (i.e. *.d files). After the processing with MetaboScape, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in to GNPS first). Requirements: Install MetaboScape (at least version 2.0) and get a valid license. A. Perform Feature Detection with Profile Analysis \u00b6 Nontargeted LC-MS/MS \u00b6 Open Profile Analysis and perform feature detection on your data following Profile Analysis documentation to generate an ion feature bucket table. Define groups and/or attributes to enhance downstream data analysis (see 3.3.4 in the MetaboScape 2.0 tutorial documentation ). The groups and/or attributes defined in Profile Analysis will be visualized in the molecular networks using pie chart diagram. IMPORTANT : Create one common group named 'SAMPLE' for all the samples. It will be used for molecular networking visualization. Export the bucket table to MetaboScape (see 3.1 in the MetaboScape 2.0 tutorial documentation ). B. Use MetaboScape to Annotate MS/MS spectra \u00b6 Open MetaboScape. Open the project in MetaboScape (see 3.7 in MetaboScape 2.0 tutorial documentation ). Assign MS/MS spectra to the bucket table (see 3.7 in MetaboScape 2.0 tutorial documentation ). Sort buckets based on the presence of MS/MS. Select only the buckets that have MS/MS associated with them. Perform Automatic molecular formula generation using SmartFormula (see 3.11.1 in MetaboScape 2.0 tutorial documentation ) on these buckets. Make sure to select Selected buckets only . Search molecular formula with SmartFormula . Right-click on the bucket table and select Export to GNPS format (.MGF/.CSV). Select Export all formats . The MS/MS spectral summary (.MGF file) and the feature quantification table (.CSV file) will be used to perform a FBMN job on GNPS (see below). Processing IMS Data (PASEF) \u00b6 The FBMN supports Ion Mobility Spectrometry (IMS) Data acquired in data-dependent acquisition mode using Parallel Accumulation-Serial Fragmentation (PASEF) and processed with MetaboScape (ver. 5.0). Process the IMS data following the MetaboScape documentation and do Export to GNPS format as indicated above. The cross collission section values and other annotations can be subsequently mapped in Cytoscape. See a representative FBMN job made from PASEF data (timsTOF) processed with MetaboScape (ver. 5.0). The Bruker files are available on the following MassIVE deposition ( MSV000084402 ) C. Perform FBMN Job on GNPS \u00b6 Go to GNPS and perform a FBMN job. Refer to that documentation . For metadata format supported, see this page D. Map MetaboScape Annotation in Cytoscape \u00b6 See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for more details. Step-by-Step Tutorial \u00b6 See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for the Coffee tutorial (part of the MetaboScape 2.0 documentation ). Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributions \u00b6 Ming Wang (7.41%), lfnothias (50.62%), Ivan Protsyuk (7.41%), tamhdang (34.57%)","title":"FBMN with MetaboScape"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use MetaboScape with the FBMN workflow on GNPS.","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#citations-and-development","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016).","title":"Citations and development"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#using-metaboscape-and-fbmn","text":"MetaboScape can be used to process LC-MS/MS Bruker Daltonics data files (i.e. *.d files). After the processing with MetaboScape, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in to GNPS first). Requirements: Install MetaboScape (at least version 2.0) and get a valid license.","title":"Using MetaboScape and FBMN"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#a-perform-feature-detection-with-profile-analysis","text":"","title":"A. Perform Feature Detection with Profile Analysis"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#nontargeted-lc-msms","text":"Open Profile Analysis and perform feature detection on your data following Profile Analysis documentation to generate an ion feature bucket table. Define groups and/or attributes to enhance downstream data analysis (see 3.3.4 in the MetaboScape 2.0 tutorial documentation ). The groups and/or attributes defined in Profile Analysis will be visualized in the molecular networks using pie chart diagram. IMPORTANT : Create one common group named 'SAMPLE' for all the samples. It will be used for molecular networking visualization. Export the bucket table to MetaboScape (see 3.1 in the MetaboScape 2.0 tutorial documentation ).","title":"Nontargeted LC-MS/MS"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#b-use-metaboscape-to-annotate-msms-spectra","text":"Open MetaboScape. Open the project in MetaboScape (see 3.7 in MetaboScape 2.0 tutorial documentation ). Assign MS/MS spectra to the bucket table (see 3.7 in MetaboScape 2.0 tutorial documentation ). Sort buckets based on the presence of MS/MS. Select only the buckets that have MS/MS associated with them. Perform Automatic molecular formula generation using SmartFormula (see 3.11.1 in MetaboScape 2.0 tutorial documentation ) on these buckets. Make sure to select Selected buckets only . Search molecular formula with SmartFormula . Right-click on the bucket table and select Export to GNPS format (.MGF/.CSV). Select Export all formats . The MS/MS spectral summary (.MGF file) and the feature quantification table (.CSV file) will be used to perform a FBMN job on GNPS (see below).","title":"B. Use MetaboScape to Annotate MS/MS spectra"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#processing-ims-data-pasef","text":"The FBMN supports Ion Mobility Spectrometry (IMS) Data acquired in data-dependent acquisition mode using Parallel Accumulation-Serial Fragmentation (PASEF) and processed with MetaboScape (ver. 5.0). Process the IMS data following the MetaboScape documentation and do Export to GNPS format as indicated above. The cross collission section values and other annotations can be subsequently mapped in Cytoscape. See a representative FBMN job made from PASEF data (timsTOF) processed with MetaboScape (ver. 5.0). The Bruker files are available on the following MassIVE deposition ( MSV000084402 )","title":"Processing IMS Data (PASEF)"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#c-perform-fbmn-job-on-gnps","text":"Go to GNPS and perform a FBMN job. Refer to that documentation . For metadata format supported, see this page","title":"C. Perform FBMN Job on GNPS"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#d-map-metaboscape-annotation-in-cytoscape","text":"See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for more details.","title":"D. Map MetaboScape Annotation in Cytoscape"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#step-by-step-tutorial","text":"See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for the Coffee tutorial (part of the MetaboScape 2.0 documentation ).","title":"Step-by-Step Tutorial"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#page-contributions","text":"Ming Wang (7.41%), lfnothias (50.62%), Ivan Protsyuk (7.41%), tamhdang (34.57%)","title":"Page Contributions"},{"location":"featurebasedmolecularnetworking-with-ms-dial/","text":"1. Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we are describing how to use MS-DIAL with the FBMN workflow on GNPS. 2. Mass spectrometry processing with MS-DIAL \u00b6 Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL . Citations and development \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018). Mass Spectrometry Data Processing with MS-DIAL \u00b6 In MS-DIAL, a sequence of steps is performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). MS- DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. For convenience we also provide a batch file (XML format) that can be imported directly in MS-DIAL. IMPORTANT: MS-DIAL parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples studied. In this page we present a basic guideline for using MS-DIAL with the FBMN on GNPS. Documentation \u00b6 Please consult these resources for more details on MS-DIAL processing: See the MS-DIAL documentation on LC-MS/MS data processing See the MS-DIAL documentation for MSE data processing See the MS-DIAL documentation on Ion Mobility Spectrometry data processing Video Presentation and Tutorials \u00b6 The presentation/tutorial about MS-DIAL from the Leibniz Institute of Plant Biochemistry. This video from the WCMC about MS-DIAL The video tutorial about MS-DIAL processing for FBMN on GNPS . Convert your LC-MS/MS Data to Open Format \u00b6 MS-DIAL accepts different input formats. Note that we recommend first to convert your files to mzML format before doing MS-DIAL processing. See the documentation here . Processing Steps for non-targeted LC-MS/MS \u00b6 Below is a walk-through of all the steps 1. Make a New Project \u00b6 Go to Menu: File / New Project Select appropriate parameters (ionization type / method type / data type / ion mode / target omics) for your dataset. Click \u201cNext\u201d. 2. Import Files \u00b6 Click \u201cbrowse\u201d and open the dropdown menu for file types, and select \u201cmzML file(*.mzml)\u201d. The other available options are .abf or .cdf files. [Note] Data files should be placed at the same folder with the project file. Select files and click \u201cOpen\u201d. You will see the list of selected files. Click \u201cNext\u201d. 3. Set Parameters - Data Collection \u00b6 Set the MS1/MS2 tolerance and data collection parameters. If you are dealing with a large dataset, you can reduce the running time by setting multithreading option in the \u201cAdvanced\u201d menu. 4. Set Parameters - Peak Detection \u00b6 Set the MS1 peak detection parameters. You should set a peak height threshold that is adapted to the mass spectrometer. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. If you want to remove some specific ions (e.g. known contaminants), you can make an exclusion list here. 5. Set Parameters - MS2Deconvolution \u00b6 You should set an appropriate MS/MS abundance cutoff. Make sure to set an intensity threshold representative of the noise level in MS2 spectra. This is typically lower than for MS1. If you have any doubt, set it to 0. 6. Set Parameters - Alignment \u00b6 Set appropriate Retention time / MS1 tolerance for alignment. If you have any quality control (QC) sample data, it is a nice candidate to be the reference file. Click \u201cFinish\u201d, then MS-DIAL will perform all the feature detection and alignment process. Processing Steps for MSE data (Experimental) \u00b6 See the MS-DIAL documentation for MSE data processing , and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub . Ion Mobility Spectrometry data (Experimental) \u00b6 See the MS-DIAL documentation on Ion Mobility Spectrometry data processing , and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub . Export the files for GNPS FBMN \u00b6 To run FBMN after MS-DIAL processing, two files have to be exported: The feature quantification table (TXT file) containing compound intensity and annotation. The MS/MS spectral summary (MGF file) containing the list of representative MS/MS spectra (the most intense MS/MS spectrum). Go to Menu: Export / Alignment result Make sur the \u201cGNPS export\u201d box is checked, and set the spectra type to \u201ccentroid\u201d. Set the directory and file name, then click \u201cExport\u201d. As a result, you will acquire a MS/MS spectral summary and the feature quantification table. [Note] The GNPS export option of MS-DIAL will create a feature table based on MS1 peak height. If you want a feature table based on peak area, check the \u201cRaw data matrix (Area)\u201d. See example of files generated by MS-DIAL and used for the FBMN by the export workflow here . 3. Running the FBMN with MS-DIAL \u00b6 After the processing with MS-DIAL, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). See the main documentation for more details about the FBMN workflow on GNPS . Basically, you will need to upload the files produced by MS-DIAL: The feature quantification table (.TXT file) The MS/MS spetral summary file (.MGF file) (Optional) The metadata table - requirements are described here . https://ccms-ucsd.github.io/GNPSDocumentation/metadata/ IMPORTANT WHEN USING A METADATA TABLE WITH MS-DIAL : \"filename\" in the metadata files for FBMN with MS-DIAL should not contain file extensions (ex: \"sample1.mzML\" must be \"sample1\"). Here is an example MS-DIAL networking job from a subset of the American Gut Project. Tutorials \u00b6 See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample. Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributions \u00b6 Ming Wang (7.51%), lfnothias (38.73%), KyobinKang (50.87%), Ivan Protsyuk (2.89%)","title":"FBMN with MS-DIAL"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#1-introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we are describing how to use MS-DIAL with the FBMN workflow on GNPS.","title":"1. Introduction"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#2-mass-spectrometry-processing-with-ms-dial","text":"Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL .","title":"2. Mass spectrometry processing with MS-DIAL"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#citations-and-development","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018).","title":"Citations and development"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#mass-spectrometry-data-processing-with-ms-dial","text":"In MS-DIAL, a sequence of steps is performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). MS- DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. For convenience we also provide a batch file (XML format) that can be imported directly in MS-DIAL. IMPORTANT: MS-DIAL parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples studied. In this page we present a basic guideline for using MS-DIAL with the FBMN on GNPS.","title":"Mass Spectrometry Data Processing with MS-DIAL"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#documentation","text":"Please consult these resources for more details on MS-DIAL processing: See the MS-DIAL documentation on LC-MS/MS data processing See the MS-DIAL documentation for MSE data processing See the MS-DIAL documentation on Ion Mobility Spectrometry data processing","title":"Documentation"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#video-presentation-and-tutorials","text":"The presentation/tutorial about MS-DIAL from the Leibniz Institute of Plant Biochemistry. This video from the WCMC about MS-DIAL The video tutorial about MS-DIAL processing for FBMN on GNPS .","title":"Video Presentation and Tutorials"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#convert-your-lc-msms-data-to-open-format","text":"MS-DIAL accepts different input formats. Note that we recommend first to convert your files to mzML format before doing MS-DIAL processing. See the documentation here .","title":"Convert your LC-MS/MS Data to Open Format"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#processing-steps-for-non-targeted-lc-msms","text":"Below is a walk-through of all the steps","title":"Processing Steps for non-targeted LC-MS/MS"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#1-make-a-new-project","text":"Go to Menu: File / New Project Select appropriate parameters (ionization type / method type / data type / ion mode / target omics) for your dataset. Click \u201cNext\u201d.","title":"1. Make a New Project"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#2-import-files","text":"Click \u201cbrowse\u201d and open the dropdown menu for file types, and select \u201cmzML file(*.mzml)\u201d. The other available options are .abf or .cdf files. [Note] Data files should be placed at the same folder with the project file. Select files and click \u201cOpen\u201d. You will see the list of selected files. Click \u201cNext\u201d.","title":"2. Import Files"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#3-set-parameters-data-collection","text":"Set the MS1/MS2 tolerance and data collection parameters. If you are dealing with a large dataset, you can reduce the running time by setting multithreading option in the \u201cAdvanced\u201d menu.","title":"3. Set Parameters - Data Collection"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#4-set-parameters-peak-detection","text":"Set the MS1 peak detection parameters. You should set a peak height threshold that is adapted to the mass spectrometer. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. If you want to remove some specific ions (e.g. known contaminants), you can make an exclusion list here.","title":"4. Set Parameters - Peak Detection"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#5-set-parameters-ms2deconvolution","text":"You should set an appropriate MS/MS abundance cutoff. Make sure to set an intensity threshold representative of the noise level in MS2 spectra. This is typically lower than for MS1. If you have any doubt, set it to 0.","title":"5. Set Parameters - MS2Deconvolution"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#6-set-parameters-alignment","text":"Set appropriate Retention time / MS1 tolerance for alignment. If you have any quality control (QC) sample data, it is a nice candidate to be the reference file. Click \u201cFinish\u201d, then MS-DIAL will perform all the feature detection and alignment process.","title":"6. Set Parameters - Alignment"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#processing-steps-for-mse-data-experimental","text":"See the MS-DIAL documentation for MSE data processing , and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub .","title":"Processing Steps for MSE data (Experimental)"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#ion-mobility-spectrometry-data-experimental","text":"See the MS-DIAL documentation on Ion Mobility Spectrometry data processing , and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub .","title":"Ion Mobility Spectrometry data (Experimental)"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#export-the-files-for-gnps-fbmn","text":"To run FBMN after MS-DIAL processing, two files have to be exported: The feature quantification table (TXT file) containing compound intensity and annotation. The MS/MS spectral summary (MGF file) containing the list of representative MS/MS spectra (the most intense MS/MS spectrum). Go to Menu: Export / Alignment result Make sur the \u201cGNPS export\u201d box is checked, and set the spectra type to \u201ccentroid\u201d. Set the directory and file name, then click \u201cExport\u201d. As a result, you will acquire a MS/MS spectral summary and the feature quantification table. [Note] The GNPS export option of MS-DIAL will create a feature table based on MS1 peak height. If you want a feature table based on peak area, check the \u201cRaw data matrix (Area)\u201d. See example of files generated by MS-DIAL and used for the FBMN by the export workflow here .","title":"Export the files for GNPS FBMN"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#3-running-the-fbmn-with-ms-dial","text":"After the processing with MS-DIAL, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). See the main documentation for more details about the FBMN workflow on GNPS . Basically, you will need to upload the files produced by MS-DIAL: The feature quantification table (.TXT file) The MS/MS spetral summary file (.MGF file) (Optional) The metadata table - requirements are described here . https://ccms-ucsd.github.io/GNPSDocumentation/metadata/ IMPORTANT WHEN USING A METADATA TABLE WITH MS-DIAL : \"filename\" in the metadata files for FBMN with MS-DIAL should not contain file extensions (ex: \"sample1.mzML\" must be \"sample1\"). Here is an example MS-DIAL networking job from a subset of the American Gut Project.","title":"3. Running the FBMN with MS-DIAL"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#tutorials","text":"See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample.","title":"Tutorials"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#page-contributions","text":"Ming Wang (7.51%), lfnothias (38.73%), KyobinKang (50.87%), Ivan Protsyuk (2.89%)","title":"Page Contributions"},{"location":"featurebasedmolecularnetworking-with-mzmine2/","text":"Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use MZmine2 v2.51 with the FBMN workflow on GNPS. We have previously written the documentation for v2.33 and have noted differences in the software versions. Mass spectrometry processing with MZmine \u00b6 Citations and development \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Katajamaa, M., Miettinen, J. & Oresic, M. MZmine: toolbox for processing and visualization of mass spectrometry based molecular profile data. Bioinformatics 22, 634\u2013636 (2006). Pluskal, T., Castillo, S., Villar-Briones, A. & Oresic, M. MZmine 2: modular framework for processing, visualizing, and analyzing mass spectrometry-based molecular profile data. BMC Bioinformatics 11, 395 (2010). The development of the features used in the pipeline is publicly accessible here . Installation \u00b6 Download the latest version of MZmine software (version MZmine v2.33 minimum) at https://github.com/mzmine/mzmine2/releases . Data Processing with MZmine for FBMN \u00b6 In MZmine, a sequence of steps are performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). For convenience we also provide a batch file (XML format) that can be imported directly in MZmine. Warning MZmine parameters will vary depending on the instrument used, the acquisition parameters, and samples studied. The following documentation serves a basic guideline for using MZmine with the FBMN workflow. Please consult the resources below for more details on MZmine processing: The official documentation http://mzmine.github.io/documentation.html , The MZmine tutorial by Pierre-Marie Allard and Joelle Houriet from the University of Geneva. ADAP User Manual The video tutorial below about MZmine2 processing for Feature Based Molecular Networking . Note that this video is slighlty outdatted , so please refer to the steps described in this documentation. The video tutorial below about Quick MZMine2 Export to GNPS for FBMN Convert your LC-MS/MS Data to an Open Format \u00b6 MZmine accepts different input formats. Note that we recommand to first convert your files to mzML format before doing MZmine2 processing. See the documentation here . Processing Steps \u00b6 Below is the schematic representation of the LC-MS/MS data processing steps with MZmine (thanks Daniel Petras !): Below is the overview of the LC-MS/MS data processing steps in the MZmine batch mode: Batch Import \u00b6 Here are some MZmine batch that are compatible with the FBMN workflow. These batch files can be imported into MZMine (Batch mode): Instrument Gradient Length Matrix Type Sample Size Download Bruker Maxis HD qTof 10 Min Stool 20 Batch Please contribute a send batch file for various instruments Batch Processing Steps \u00b6 Below is a walk-through of all the steps 1. Import Files \u00b6 Go to Menu: Raw data methods > Raw data import > Select the files 2. Mass Detection \u00b6 This step creates mass lists from your raw LC-MS/MS data (non-targeted mode). Perform mass detection on MS level 1: Menu: Raw data methods > Feature Detection > Mass detection > Set filters: MS level 1. (version 2.33) Menu: Raw data methods > Mass detection > Set filter : MS level 1 Important Set an appropriate intensity threshold. You can use the preview window to assess the right threshold on your data. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. (Example: MAXIS-QTOF: 1E3, Q-Exactive 1E4) Perform mass detection on MS level 2. The same mass list name must be used. Go to Menu: Raw data methods > Feature Detection > Mass detection > Set filters: MS level 2. (version 2.33) Go to: Raw data methods > Mass detection > Set filter : MS level 2. Important Make sure to set an intensity threshold representative of noise level in the MS2 spectra. This is typically lower than for MS1. (Example: maXis QTOF: 1E2; LTQ-XL Orbitrap 1E4, Q-Exactive: 0). If you have any doubt, set it to 0. 3. Build Chromatogram (LC-MS feature detection part 1) \u00b6 Starting with MZmine 2.39, the original Chromatogram builder is considered deprecated. It has been replaced with the ADAP Chromatogram Builder. The ADAP Module includes parameters for the Min group size # of scans and Group intensity threshold. Further explanation for these parameters can be found in the ADAP Tutorial . If you use the ADAP Chromatogram Builder, please cite the publication below. Myers, O.D. et al, One Step Forward for Reducing False Positive and False Negative Compound Identifications from Mass Spectrometry Metabolomics Data: New Algorithms for Constructing Extracted Ion Chromatograms and Detecting Chromatographic Peaks . Anal. Chem. 89, 17, 8696-8703 (2017). Go to: Raw data methods > Feature Detection > Chromatogram builder OR ADAP Chromatogram builder (version 2.33) Go to: Raw data methods > Chromatogram builder 4. Deconvolve the Chromatogram (LC-MS feature detection part 2) \u00b6 Go to Menu: Feature list methods > Feature detection > Chromatogram deconvolution (version 2.33) Go to Menu: Peak list methods > Peak detection > Chromatogram deconvolution Important tick both options \"m/z range for MS2 scan pairing (Da)\" and \"RT range for MS2 scan pairing (min)\". The values have to be defined according to your experimental setup (expected MS mass accuracy and chromatographic peak width). Example for a UHPLC colum (1.7 \u00b5m C18, 50 \u00d7 2.1 mm, flow rate of 0.5 mL/min): maXis-QTOF: 12 min gradient, 0.02 Da and 0.15 min Q-Exactive: 5 min gradient, 0.01 Da and 0.1 min 5. Group isotopes and co-eluting ions \u00b6 Use the \"Isotopic peaks grouper\" [recommended] or other alternative (such as the CAMERA module). Go to Menu: Feature list methods > Isotopes > Isotopic peaks grouper (version 2.33) Go to Menu: Peak list methods > Isotopes > Isotopic peaks grouper. Important This depends on your expected peak shapes, duty cycle time and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min gradient, 0.1 min, 0.02 m/z; Q-Exactive, 5 min gradient, 0.05 min, 0.01 m/z) 6. Order the peaklists \u00b6 Go to Menu: Peak list methods > Order peak lists . Important This is to ensure the reproducibility of the processing. Indeed, the aligned peak list will change slighlty if that step is not performed. 7. LC-MS feature alignement (Peaklist alignement) \u00b6 In this step, the peak lists from each sample will be aligned in one aligned peak list. The alignement is performed iteratively using the first peak list selected (see MZmine documentation). For that reason, make sure the first sample is adapted (not a negative control) or to manually put an representative peaklist in the first position. Go to Menu: Feature list methods > Alignment > Join aligner (version 2.33) Go to Menu: Peak list methods > Alignment > Join aligner 8. (Optional) Detect Missing Peaks / Gap Filling \u00b6 Gap filling enables to retrieve the intensity of a peak in all the samples, even if it was not detected in a previous processing step. Go to Menu: Feature list methods > Gap filling > Peak finder (multi-threaded) . (version 2.33) Go to Menu: Peak list methods > Gap filling > Peak finder (multi-threaded) . Important This step is optional. Use the multi-threaded peak finder for fast processing. 9. (Optional) Filter the Peaklist to MS/MS Peaks \u00b6 Depending on the number of features in the aligned peaklist, it is possible to filter the peaklist to keep only features with minimum number of occurences (\"Minimum peaks in a row\") or a mininum number of isotopic peaks for the feature (\"Minimum peaks in an isotope pattern\"), or to \"Keep only peaks with MS2 scan (GNPS)\". Go to Menu: Feature list methods > Filtering > Feature list rows filter > Select the filters (version 2.33) Go to Menu: Peak list methods > Filtering > Peak list row filter > Select the filters Important if you use a filter, we recommend using the filter \"Reset the peak number ID\" Important Note that this step was mandatory in the prototype versions of FBMN with MZmine, now the filter \"Keep only peaks with MS2 scan (GNPS)\" is optional. 10. Use the GNPS Export module \u00b6 Use the dedicated module \" Submit to/Export for GNPS \" in MZmine under Feature list methods > Export/Import to export the needed file: the feature quantification table (.CSV file format) with LC-MS feature intensities. the MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum (new feature !) Select the lastest \"filtered aligned peaklist\" generated and Go to Menu: Peak list methods > Export > Export for/Submit to GNPS See an example of files generated by the export module using the workflow: here . The files can be uploaded to the GNPS web-platform and Feature-Based Molecular Networking job can be directly launched \u00b6 IMPORTANT: While the possibility to submit the files directly to GNPS and launch a FBMN job on the fly is really convenient for quick data analysis, the files will not be saved in your personal account on GNPS and are periodically deleted, which will prevent futur cloning of the jobs. If you do not provide username/password, and you are limited to basic presets of parameters. For that reason, we recommend to upload your files with the FTP uploader (see documentation) and prepare your job directly on GNPS (you must be logged in first). In the \" Export for/Submit to GNPS \" module, select the option: \" Submit to GNPS \" [Optional] Metadata file: specify the path to the metadata table in GNPS format. See documentation here Select the parameters presets for the GNPS job. [Optional] Email: specify the email to forward the job link [Optional] Annotation edges (Experimental feature that will described later). [Optional] Open website: if ticked, will open the job webpage. ADDITIONAL NOTES: The feature table must contain at least the row ID, the row m/z, and row retention time, along with the sample columns. It is currently mandatory for the sample name headers to have the following format: \"filename Peak area\". Depending on the steps used in MZmine the sample name header can be \"filename baseline-corrected Peak area\", but this has to be changed back to \"filename Peak area\". Video Tutorial - Quick MZMine Export to GNPS for FBMN. \u00b6 The workflow for Feature Based Molecular Networking in GNPS is different from the classic molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !) FBMN in GNPS \u00b6 The main documentation of the Feature Based Molecular Networking workflow on GNPS can be consulted on that page . The workflow for Feature Based Molecular Networking in GNPS is different from the \"classic\" molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !). Basically, you will need to upload the files produced by MZmine (test files are accessible here ): The feature quantification table (.CSV file format). The MS/MS spectral summary (.MGF file format) [Optional] The metadata table - described here There are several additional normalization options specifically for feature detection. We can normalize the features per LC/MS run and aggregate by groups with either a sum or average (recommended). Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the American Gut Project . Video Tutorial - Analyze FBMN jobs in GNPS \u00b6 This video presents FBMN in Cytoscape \u00b6 Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here Tutorials \u00b6 See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project , and our tutorial on running a FBMN analysis on GNP . Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributors \u00b6 Ming Wang (11.7%), lfnothias (72.45%), Madeleine Ernst (0.38%), Ivan Protsyuk (1.89%), Cynthia Grim (13.58%)","title":"FBMN with MZmine"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use MZmine2 v2.51 with the FBMN workflow on GNPS. We have previously written the documentation for v2.33 and have noted differences in the software versions.","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#mass-spectrometry-processing-with-mzmine","text":"","title":"Mass spectrometry processing with MZmine"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#citations-and-development","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Katajamaa, M., Miettinen, J. & Oresic, M. MZmine: toolbox for processing and visualization of mass spectrometry based molecular profile data. Bioinformatics 22, 634\u2013636 (2006). Pluskal, T., Castillo, S., Villar-Briones, A. & Oresic, M. MZmine 2: modular framework for processing, visualizing, and analyzing mass spectrometry-based molecular profile data. BMC Bioinformatics 11, 395 (2010). The development of the features used in the pipeline is publicly accessible here .","title":"Citations and development"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#installation","text":"Download the latest version of MZmine software (version MZmine v2.33 minimum) at https://github.com/mzmine/mzmine2/releases .","title":"Installation"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#data-processing-with-mzmine-for-fbmn","text":"In MZmine, a sequence of steps are performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). For convenience we also provide a batch file (XML format) that can be imported directly in MZmine. Warning MZmine parameters will vary depending on the instrument used, the acquisition parameters, and samples studied. The following documentation serves a basic guideline for using MZmine with the FBMN workflow. Please consult the resources below for more details on MZmine processing: The official documentation http://mzmine.github.io/documentation.html , The MZmine tutorial by Pierre-Marie Allard and Joelle Houriet from the University of Geneva. ADAP User Manual The video tutorial below about MZmine2 processing for Feature Based Molecular Networking . Note that this video is slighlty outdatted , so please refer to the steps described in this documentation. The video tutorial below about Quick MZMine2 Export to GNPS for FBMN","title":"Data Processing with MZmine for FBMN"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#convert-your-lc-msms-data-to-an-open-format","text":"MZmine accepts different input formats. Note that we recommand to first convert your files to mzML format before doing MZmine2 processing. See the documentation here .","title":"Convert your LC-MS/MS Data to an Open Format"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#processing-steps","text":"Below is the schematic representation of the LC-MS/MS data processing steps with MZmine (thanks Daniel Petras !): Below is the overview of the LC-MS/MS data processing steps in the MZmine batch mode:","title":"Processing Steps"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#batch-import","text":"Here are some MZmine batch that are compatible with the FBMN workflow. These batch files can be imported into MZMine (Batch mode): Instrument Gradient Length Matrix Type Sample Size Download Bruker Maxis HD qTof 10 Min Stool 20 Batch Please contribute a send batch file for various instruments Batch","title":"Batch Import"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#processing-steps_1","text":"Below is a walk-through of all the steps","title":"Processing Steps"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#1-import-files","text":"Go to Menu: Raw data methods > Raw data import > Select the files","title":"1. Import Files"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#2-mass-detection","text":"This step creates mass lists from your raw LC-MS/MS data (non-targeted mode). Perform mass detection on MS level 1: Menu: Raw data methods > Feature Detection > Mass detection > Set filters: MS level 1. (version 2.33) Menu: Raw data methods > Mass detection > Set filter : MS level 1 Important Set an appropriate intensity threshold. You can use the preview window to assess the right threshold on your data. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. (Example: MAXIS-QTOF: 1E3, Q-Exactive 1E4) Perform mass detection on MS level 2. The same mass list name must be used. Go to Menu: Raw data methods > Feature Detection > Mass detection > Set filters: MS level 2. (version 2.33) Go to: Raw data methods > Mass detection > Set filter : MS level 2. Important Make sure to set an intensity threshold representative of noise level in the MS2 spectra. This is typically lower than for MS1. (Example: maXis QTOF: 1E2; LTQ-XL Orbitrap 1E4, Q-Exactive: 0). If you have any doubt, set it to 0.","title":"2. Mass Detection"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#3-build-chromatogram-lc-ms-feature-detection-part-1","text":"Starting with MZmine 2.39, the original Chromatogram builder is considered deprecated. It has been replaced with the ADAP Chromatogram Builder. The ADAP Module includes parameters for the Min group size # of scans and Group intensity threshold. Further explanation for these parameters can be found in the ADAP Tutorial . If you use the ADAP Chromatogram Builder, please cite the publication below. Myers, O.D. et al, One Step Forward for Reducing False Positive and False Negative Compound Identifications from Mass Spectrometry Metabolomics Data: New Algorithms for Constructing Extracted Ion Chromatograms and Detecting Chromatographic Peaks . Anal. Chem. 89, 17, 8696-8703 (2017). Go to: Raw data methods > Feature Detection > Chromatogram builder OR ADAP Chromatogram builder (version 2.33) Go to: Raw data methods > Chromatogram builder","title":"3. Build Chromatogram (LC-MS feature detection part 1)"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#4-deconvolve-the-chromatogram-lc-ms-feature-detection-part-2","text":"Go to Menu: Feature list methods > Feature detection > Chromatogram deconvolution (version 2.33) Go to Menu: Peak list methods > Peak detection > Chromatogram deconvolution Important tick both options \"m/z range for MS2 scan pairing (Da)\" and \"RT range for MS2 scan pairing (min)\". The values have to be defined according to your experimental setup (expected MS mass accuracy and chromatographic peak width). Example for a UHPLC colum (1.7 \u00b5m C18, 50 \u00d7 2.1 mm, flow rate of 0.5 mL/min): maXis-QTOF: 12 min gradient, 0.02 Da and 0.15 min Q-Exactive: 5 min gradient, 0.01 Da and 0.1 min","title":"4. Deconvolve the Chromatogram (LC-MS feature detection part 2)"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#5-group-isotopes-and-co-eluting-ions","text":"Use the \"Isotopic peaks grouper\" [recommended] or other alternative (such as the CAMERA module). Go to Menu: Feature list methods > Isotopes > Isotopic peaks grouper (version 2.33) Go to Menu: Peak list methods > Isotopes > Isotopic peaks grouper. Important This depends on your expected peak shapes, duty cycle time and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min gradient, 0.1 min, 0.02 m/z; Q-Exactive, 5 min gradient, 0.05 min, 0.01 m/z)","title":"5. Group isotopes and co-eluting ions"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#6-order-the-peaklists","text":"Go to Menu: Peak list methods > Order peak lists . Important This is to ensure the reproducibility of the processing. Indeed, the aligned peak list will change slighlty if that step is not performed.","title":"6. Order the peaklists"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#7-lc-ms-feature-alignement-peaklist-alignement","text":"In this step, the peak lists from each sample will be aligned in one aligned peak list. The alignement is performed iteratively using the first peak list selected (see MZmine documentation). For that reason, make sure the first sample is adapted (not a negative control) or to manually put an representative peaklist in the first position. Go to Menu: Feature list methods > Alignment > Join aligner (version 2.33) Go to Menu: Peak list methods > Alignment > Join aligner","title":"7. LC-MS feature alignement (Peaklist alignement)"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#8-optional-detect-missing-peaks-gap-filling","text":"Gap filling enables to retrieve the intensity of a peak in all the samples, even if it was not detected in a previous processing step. Go to Menu: Feature list methods > Gap filling > Peak finder (multi-threaded) . (version 2.33) Go to Menu: Peak list methods > Gap filling > Peak finder (multi-threaded) . Important This step is optional. Use the multi-threaded peak finder for fast processing.","title":"8. (Optional) Detect Missing Peaks / Gap Filling"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#9-optional-filter-the-peaklist-to-msms-peaks","text":"Depending on the number of features in the aligned peaklist, it is possible to filter the peaklist to keep only features with minimum number of occurences (\"Minimum peaks in a row\") or a mininum number of isotopic peaks for the feature (\"Minimum peaks in an isotope pattern\"), or to \"Keep only peaks with MS2 scan (GNPS)\". Go to Menu: Feature list methods > Filtering > Feature list rows filter > Select the filters (version 2.33) Go to Menu: Peak list methods > Filtering > Peak list row filter > Select the filters Important if you use a filter, we recommend using the filter \"Reset the peak number ID\" Important Note that this step was mandatory in the prototype versions of FBMN with MZmine, now the filter \"Keep only peaks with MS2 scan (GNPS)\" is optional.","title":"9. (Optional) Filter the Peaklist to MS/MS Peaks"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#10-use-the-gnps-export-module","text":"Use the dedicated module \" Submit to/Export for GNPS \" in MZmine under Feature list methods > Export/Import to export the needed file: the feature quantification table (.CSV file format) with LC-MS feature intensities. the MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum (new feature !) Select the lastest \"filtered aligned peaklist\" generated and Go to Menu: Peak list methods > Export > Export for/Submit to GNPS See an example of files generated by the export module using the workflow: here .","title":"10. Use the GNPS Export module"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#the-files-can-be-uploaded-to-the-gnps-web-platform-and-feature-based-molecular-networking-job-can-be-directly-launched","text":"IMPORTANT: While the possibility to submit the files directly to GNPS and launch a FBMN job on the fly is really convenient for quick data analysis, the files will not be saved in your personal account on GNPS and are periodically deleted, which will prevent futur cloning of the jobs. If you do not provide username/password, and you are limited to basic presets of parameters. For that reason, we recommend to upload your files with the FTP uploader (see documentation) and prepare your job directly on GNPS (you must be logged in first). In the \" Export for/Submit to GNPS \" module, select the option: \" Submit to GNPS \" [Optional] Metadata file: specify the path to the metadata table in GNPS format. See documentation here Select the parameters presets for the GNPS job. [Optional] Email: specify the email to forward the job link [Optional] Annotation edges (Experimental feature that will described later). [Optional] Open website: if ticked, will open the job webpage. ADDITIONAL NOTES: The feature table must contain at least the row ID, the row m/z, and row retention time, along with the sample columns. It is currently mandatory for the sample name headers to have the following format: \"filename Peak area\". Depending on the steps used in MZmine the sample name header can be \"filename baseline-corrected Peak area\", but this has to be changed back to \"filename Peak area\".","title":"The files can be uploaded to the GNPS web-platform and Feature-Based Molecular Networking job can be directly launched"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#video-tutorial-quick-mzmine-export-to-gnps-for-fbmn","text":"The workflow for Feature Based Molecular Networking in GNPS is different from the classic molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !)","title":"Video Tutorial - Quick MZMine Export to GNPS for FBMN."},{"location":"featurebasedmolecularnetworking-with-mzmine2/#fbmn-in-gnps","text":"The main documentation of the Feature Based Molecular Networking workflow on GNPS can be consulted on that page . The workflow for Feature Based Molecular Networking in GNPS is different from the \"classic\" molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !). Basically, you will need to upload the files produced by MZmine (test files are accessible here ): The feature quantification table (.CSV file format). The MS/MS spectral summary (.MGF file format) [Optional] The metadata table - described here There are several additional normalization options specifically for feature detection. We can normalize the features per LC/MS run and aggregate by groups with either a sum or average (recommended). Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the American Gut Project .","title":"FBMN in GNPS"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#video-tutorial-analyze-fbmn-jobs-in-gnps","text":"This video presents","title":"Video Tutorial - Analyze FBMN jobs in GNPS"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#fbmn-in-cytoscape","text":"Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here","title":"FBMN in Cytoscape"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#tutorials","text":"See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project , and our tutorial on running a FBMN analysis on GNP .","title":"Tutorials"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#page-contributors","text":"Ming Wang (11.7%), lfnothias (72.45%), Madeleine Ernst (0.38%), Ivan Protsyuk (1.89%), Cynthia Grim (13.58%)","title":"Page Contributors"},{"location":"featurebasedmolecularnetworking-with-mztab-m/","text":"Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below follows a description on how to use * mzTab-M format with the FBMN workflow on GNPS. Using the mzTab-M format with FBMN \u00b6 Introduction \u00b6 The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results. Citation and development \u00b6 Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Hoffman et al. mzTab-M: A Data Standard for Sharing Quantitative Results in Mass Spectrometry Metabolomics Anal. Chem. 2019 9153302-3310 See the GitHub repository for jmzTab-M: https://github.com/lifs-tools/jmzTab-m FBMN with mzTab-M \u00b6 The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. Basically, the mzTab-M is used to retrieve for each LC-MS/MS feature: The abundance of the LC-MS/MS feature in each sample. The filename ( mzML ) and the index of the most intense associated MS/MS spectrum. After inputing the mzTab-M and mzML file(s), GNPS will automatically extract the MS/MS spectra from the mzML file and generate internally an MS/MS spectral summary that will be used for FBMN analysis. So far only mzTab-M from XCMS have tested, please let us know if you have difficulties running FBMN jobs from mzTab-M files exported with OpenMS , MS-DIAL , MZmine , and others. See an example job with mzTab-M and mzML files here . Running FBMN with an mzTab-M \u00b6 The mzTab-M file and the associated mzML file(s) can be uploaded to the GNPS web-platform and a FBMN job can be launched only from the standard interface of the FBMN workflow (you need to be logged in GNPS first). Select the mzML file(s). See the screenshot below. Select the mzTab-M file as Feature Quantification Table . (EXPERIMENTAL) Select the metadata table. Requirements are described here . More information on the FBMN on GNPS can be obtained at this documentation page . Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributors \u00b6 Ming Wang (12.07%), lfnothias (87.93%)","title":"FBMN with mzTab-M"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below follows a description on how to use * mzTab-M format with the FBMN workflow on GNPS.","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#using-the-mztab-m-format-with-fbmn","text":"","title":"Using the mzTab-M format with FBMN"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#introduction_1","text":"The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results.","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#citation-and-development","text":"Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Hoffman et al. mzTab-M: A Data Standard for Sharing Quantitative Results in Mass Spectrometry Metabolomics Anal. Chem. 2019 9153302-3310 See the GitHub repository for jmzTab-M: https://github.com/lifs-tools/jmzTab-m","title":"Citation and development"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#fbmn-with-mztab-m","text":"The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. Basically, the mzTab-M is used to retrieve for each LC-MS/MS feature: The abundance of the LC-MS/MS feature in each sample. The filename ( mzML ) and the index of the most intense associated MS/MS spectrum. After inputing the mzTab-M and mzML file(s), GNPS will automatically extract the MS/MS spectra from the mzML file and generate internally an MS/MS spectral summary that will be used for FBMN analysis. So far only mzTab-M from XCMS have tested, please let us know if you have difficulties running FBMN jobs from mzTab-M files exported with OpenMS , MS-DIAL , MZmine , and others. See an example job with mzTab-M and mzML files here .","title":"FBMN with mzTab-M"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#running-fbmn-with-an-mztab-m","text":"The mzTab-M file and the associated mzML file(s) can be uploaded to the GNPS web-platform and a FBMN job can be launched only from the standard interface of the FBMN workflow (you need to be logged in GNPS first). Select the mzML file(s). See the screenshot below. Select the mzTab-M file as Feature Quantification Table . (EXPERIMENTAL) Select the metadata table. Requirements are described here . More information on the FBMN on GNPS can be obtained at this documentation page .","title":"Running FBMN with an mzTab-M"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#page-contributors","text":"Ming Wang (12.07%), lfnothias (87.93%)","title":"Page Contributors"},{"location":"featurebasedmolecularnetworking-with-openms/","text":"Introduction to FBMN with OpenMS \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we are describing how to use OpenMS with the FBMN workflow on GNPS. Citations \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). R\u00f6st, H. L. et al. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat. Methods 13, 741\u2013748 (2016). https://doi.org/10.1038/nmeth.3959 Development \u00b6 The OpenMS website at https://www.openms.de/ The GNPSExport TOPP tool code can be found on OpenMS GitHub repository and the lastest version on this fork repository . The code for the Open-GNPS pipeline (ProteoSAFe workflow and python wrapper) is available on this GitHub repository . Feature Detection with OpenMS for the FBMN \u00b6 We have developed an OpenMS-GNPS pipeline that can be used for the processing of metabolomics LC-MS data with OpenMS and Feature Based Molecular Networking (FBMN). This pipeline uses OpenMS tools and the GNPSExport (part of OpenMS TOPP tools). In brief, after running an OpenMS \"metabolomics\" pipeline , the GNPSExport TOPP tool can be used on the consensusXML file and corresponding mzML files to generate the files needed for FBMN on GNPS. These two files are: The feature quantification table (.TXT format) which is generated with the TextExport tool. The MS2 spectral summary file (.MGF format) which is generated with the GNPSExport tool. Running the OpenMS-GNPS pipeline on GNPS web-platform \u00b6 The OpenMS-GNPS pipeline is an experimetal workflow deployed currently on proteomics2.ucsd.edu [https://proteomics2.ucsd.edu/ProteoSAFe/]). The job can be configured as follows: Log into https://proteomics2.ucsd.edu (Create an account if necessary). Access the lastest version of the OpenMS + GNPS workflow (release 20) at this address . In Import Data Files, select the input mzML files (prefered) or mzXML files (not recommended, because the pipeline would have to perform conversion to mzML) [TO BE RELEASED] Select the parameters from the presets HPLC-Q-Exactive, UHPLC-Q-Exactive, HPLC-QTOF, UHPLC-Q-Exactive . The corresponding OpenMS configuration files (.INI files) are available from that [GitHub repository] (https://github.com/Bioinformatic-squad-DorresteinLab/openms-gnps-workflow/presets/)). Alternatively, you can upload your OpenMS TOPP tool parameter file (.INI files). Note that parameter files can be updated with a text editor or with the INIFileEditor TOPP tool. Wait for the job to complete. You will get a notification. Download the main output files with \"Download OpenMS Output Files\" and/or all the files with \"Download Workflow Files\". Unzip the archive. Examine the consensusXML file (in the filefilter folder) with TOPPAS. The gnpsexport folder contains the MS/MS spectral summary file (.MGF file) The textexporter folder contains the feature quantification table (.TXT file). Click a FBMN workflow on GNPS by clicking on \" Run a Feature-Based Molecular Networking at GNPS \" Note that you have to be logged in to GNPS first, https://gnps.ucsd.edu ). See documentation for the FBMN workflow on GNPS . Alternatively, upload these files via FTP for FBMN on GNPS , or use them for other annotation tools ( DEREPLICATOR , Mass2Motif , NAP . Running the OpenMS-GNPS pipeline with OpenMS TOPP tools \u00b6 Installation and requirement \u00b6 Installing OpenMS TOPP tools: See the OpenMS website at https://www.openms.de/ Representative OpenMS-GNPS workflow \u00b6 A representative OpenMS-GNPS workflow would sequencially use these OpenMS TOPP tools: Input the mzML files. Run the FeatureFinderMetabo tool on the mzML files. Run the IDMapper tool on the featureXML and mzML files. Run the MapAlignerPoseClustering tool on the featureXML files. Run the MetaboliteAdductDecharger tool on the featureXML files. Run the FeatureLinkerUnlabeledKD tool or FeatureLinkerUnlabeledQT , on the featureXML files and output a consensusXML file. Run the FileFilter tool on the consensusXML file to keep only consensusElements with at least MS/MS scan (peptide annotation). Run the GNPSExport tool on the \"filtered consensusXML file\" to export an .MGF file. Run the TextExport tool on the \"filtered consensusXML file\" to export a .TXT file. Upload your files to GNPS and run the Feature-Based Molecular Networking workflow. See the main documentation for using FBMN on GNPS . Requirements for the OpenMS-GNPS pipeline \u00b6 The IDMapper has to be run on the featureXML files, in order to associate MS2 scan(s) (peptide annotation) with each feature. These peptide annotations are used by the GNPSExport. The FileFilter has to be run on the consensusXML file, prior to the GNPSExport, in order to remove consensusElements without MS2 scans (peptide annotation). The GNPSExport TOPP tool \u00b6 The GNPSExport TOPP tool can be run on the consensusXML file and corresponding mzML files to generate a MS/MS spectral file (MGF format) and corresponding feature quantification table (.TXT format) that contains LC-MS peak area intensities. For each consensusElement in the consensusXML file, GNPSExport produces one representative consensus MS/MS spectrum (named peptide annotation in OpenMS jargon) saved to the MS/MS spectral summary file (.MGF file). Several modes for the generation of the consensus MS/MS spectrum are available and described below. Note that these parameters are defined in the GNPSExport parameters file (.INI file, available with that link ). Usage and Options for GNPSExport TOPP tool: \u00b6 GNPSExport --help GNPSExport -ini iniFile-GNPSExport.ini -in_cm filefilter.consensusXML -in_mzml inputFile0.mzML inputFile1.mzML -out GNPSExport_output.mgf Options for the consensus MS/MS spectra: output_type \u00b6 Merge [RECOMMENDED] : merged_spectra - For each consensusElement , the GNPSExport will merge all eligible MS/MS scans into one representative consensus MS/MS spectrum . Eligible MS/MS scans have a pairwise cosine similarity with the MS/MS scan of highest precursor intensity above the Cosine Similarity Treshold . The fragment ions of merged MS/MS scans are binned in m/z (or Da) range defined by the Binning width parameter. Cosine Similarity Treshold : merged_spectra:cos_similarity (float, default: 0.9) - Parameter that defines Cosine Similarity Treshold for the pairwise cosine similarity between the MS/MS scan with the highest precursor intensity and the other MS/MS scans. Binning width : merged_spectra:ms2_binned_size (float, default: 0.02 Daltons) - Parameter that defines the Binning width of fragment ions during the merging of eligible MS/MS spectra. Most intense : most_intense - For each consensusElement , the GNPSExport will output the most intense MS/MS scan (with the highest precursor ion intensity) as consensus MS/MS spectrum . All MS/MS : full_spectra - For each consensusElement , the GNPSExport will output All MS/MS scans . Note that mass accuracy and the retention time window for the pairing between MS/MS scans and a LC-MS feature orconsensusElement is defined at the IDMapper tool step. Running the FBMN workflow with OpenMS files \u00b6 After the processing with OpenMS, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). Make sure to select the correct table source (OpenMS). The main documentation for FBMN can be accessed here . For metadata format requirements, see this page Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributors \u00b6 Ming Wang (7.2%), lfnothias (83.2%), Ivan Protsyuk (9.6%)","title":"FBMN with OpenMS"},{"location":"featurebasedmolecularnetworking-with-openms/#introduction-to-fbmn-with-openms","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we are describing how to use OpenMS with the FBMN workflow on GNPS.","title":"Introduction to FBMN with OpenMS"},{"location":"featurebasedmolecularnetworking-with-openms/#citations","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). R\u00f6st, H. L. et al. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat. Methods 13, 741\u2013748 (2016). https://doi.org/10.1038/nmeth.3959","title":"Citations"},{"location":"featurebasedmolecularnetworking-with-openms/#development","text":"The OpenMS website at https://www.openms.de/ The GNPSExport TOPP tool code can be found on OpenMS GitHub repository and the lastest version on this fork repository . The code for the Open-GNPS pipeline (ProteoSAFe workflow and python wrapper) is available on this GitHub repository .","title":"Development"},{"location":"featurebasedmolecularnetworking-with-openms/#feature-detection-with-openms-for-the-fbmn","text":"We have developed an OpenMS-GNPS pipeline that can be used for the processing of metabolomics LC-MS data with OpenMS and Feature Based Molecular Networking (FBMN). This pipeline uses OpenMS tools and the GNPSExport (part of OpenMS TOPP tools). In brief, after running an OpenMS \"metabolomics\" pipeline , the GNPSExport TOPP tool can be used on the consensusXML file and corresponding mzML files to generate the files needed for FBMN on GNPS. These two files are: The feature quantification table (.TXT format) which is generated with the TextExport tool. The MS2 spectral summary file (.MGF format) which is generated with the GNPSExport tool.","title":"Feature Detection with OpenMS for the FBMN"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-openms-gnps-pipeline-on-gnps-web-platform","text":"The OpenMS-GNPS pipeline is an experimetal workflow deployed currently on proteomics2.ucsd.edu [https://proteomics2.ucsd.edu/ProteoSAFe/]). The job can be configured as follows: Log into https://proteomics2.ucsd.edu (Create an account if necessary). Access the lastest version of the OpenMS + GNPS workflow (release 20) at this address . In Import Data Files, select the input mzML files (prefered) or mzXML files (not recommended, because the pipeline would have to perform conversion to mzML) [TO BE RELEASED] Select the parameters from the presets HPLC-Q-Exactive, UHPLC-Q-Exactive, HPLC-QTOF, UHPLC-Q-Exactive . The corresponding OpenMS configuration files (.INI files) are available from that [GitHub repository] (https://github.com/Bioinformatic-squad-DorresteinLab/openms-gnps-workflow/presets/)). Alternatively, you can upload your OpenMS TOPP tool parameter file (.INI files). Note that parameter files can be updated with a text editor or with the INIFileEditor TOPP tool. Wait for the job to complete. You will get a notification. Download the main output files with \"Download OpenMS Output Files\" and/or all the files with \"Download Workflow Files\". Unzip the archive. Examine the consensusXML file (in the filefilter folder) with TOPPAS. The gnpsexport folder contains the MS/MS spectral summary file (.MGF file) The textexporter folder contains the feature quantification table (.TXT file). Click a FBMN workflow on GNPS by clicking on \" Run a Feature-Based Molecular Networking at GNPS \" Note that you have to be logged in to GNPS first, https://gnps.ucsd.edu ). See documentation for the FBMN workflow on GNPS . Alternatively, upload these files via FTP for FBMN on GNPS , or use them for other annotation tools ( DEREPLICATOR , Mass2Motif , NAP .","title":"Running the OpenMS-GNPS pipeline on GNPS web-platform"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-openms-gnps-pipeline-with-openms-topp-tools","text":"","title":"Running the OpenMS-GNPS pipeline with OpenMS TOPP tools"},{"location":"featurebasedmolecularnetworking-with-openms/#installation-and-requirement","text":"Installing OpenMS TOPP tools: See the OpenMS website at https://www.openms.de/","title":"Installation and requirement"},{"location":"featurebasedmolecularnetworking-with-openms/#representative-openms-gnps-workflow","text":"A representative OpenMS-GNPS workflow would sequencially use these OpenMS TOPP tools: Input the mzML files. Run the FeatureFinderMetabo tool on the mzML files. Run the IDMapper tool on the featureXML and mzML files. Run the MapAlignerPoseClustering tool on the featureXML files. Run the MetaboliteAdductDecharger tool on the featureXML files. Run the FeatureLinkerUnlabeledKD tool or FeatureLinkerUnlabeledQT , on the featureXML files and output a consensusXML file. Run the FileFilter tool on the consensusXML file to keep only consensusElements with at least MS/MS scan (peptide annotation). Run the GNPSExport tool on the \"filtered consensusXML file\" to export an .MGF file. Run the TextExport tool on the \"filtered consensusXML file\" to export a .TXT file. Upload your files to GNPS and run the Feature-Based Molecular Networking workflow. See the main documentation for using FBMN on GNPS .","title":"Representative OpenMS-GNPS workflow"},{"location":"featurebasedmolecularnetworking-with-openms/#requirements-for-the-openms-gnps-pipeline","text":"The IDMapper has to be run on the featureXML files, in order to associate MS2 scan(s) (peptide annotation) with each feature. These peptide annotations are used by the GNPSExport. The FileFilter has to be run on the consensusXML file, prior to the GNPSExport, in order to remove consensusElements without MS2 scans (peptide annotation).","title":"Requirements for the OpenMS-GNPS pipeline"},{"location":"featurebasedmolecularnetworking-with-openms/#the-gnpsexport-topp-tool","text":"The GNPSExport TOPP tool can be run on the consensusXML file and corresponding mzML files to generate a MS/MS spectral file (MGF format) and corresponding feature quantification table (.TXT format) that contains LC-MS peak area intensities. For each consensusElement in the consensusXML file, GNPSExport produces one representative consensus MS/MS spectrum (named peptide annotation in OpenMS jargon) saved to the MS/MS spectral summary file (.MGF file). Several modes for the generation of the consensus MS/MS spectrum are available and described below. Note that these parameters are defined in the GNPSExport parameters file (.INI file, available with that link ).","title":"The GNPSExport TOPP tool"},{"location":"featurebasedmolecularnetworking-with-openms/#usage-and-options-for-gnpsexport-topp-tool","text":"GNPSExport --help GNPSExport -ini iniFile-GNPSExport.ini -in_cm filefilter.consensusXML -in_mzml inputFile0.mzML inputFile1.mzML -out GNPSExport_output.mgf","title":"Usage and Options for GNPSExport TOPP tool:"},{"location":"featurebasedmolecularnetworking-with-openms/#options-for-the-consensus-msms-spectra-output_type","text":"Merge [RECOMMENDED] : merged_spectra - For each consensusElement , the GNPSExport will merge all eligible MS/MS scans into one representative consensus MS/MS spectrum . Eligible MS/MS scans have a pairwise cosine similarity with the MS/MS scan of highest precursor intensity above the Cosine Similarity Treshold . The fragment ions of merged MS/MS scans are binned in m/z (or Da) range defined by the Binning width parameter. Cosine Similarity Treshold : merged_spectra:cos_similarity (float, default: 0.9) - Parameter that defines Cosine Similarity Treshold for the pairwise cosine similarity between the MS/MS scan with the highest precursor intensity and the other MS/MS scans. Binning width : merged_spectra:ms2_binned_size (float, default: 0.02 Daltons) - Parameter that defines the Binning width of fragment ions during the merging of eligible MS/MS spectra. Most intense : most_intense - For each consensusElement , the GNPSExport will output the most intense MS/MS scan (with the highest precursor ion intensity) as consensus MS/MS spectrum . All MS/MS : full_spectra - For each consensusElement , the GNPSExport will output All MS/MS scans . Note that mass accuracy and the retention time window for the pairing between MS/MS scans and a LC-MS feature orconsensusElement is defined at the IDMapper tool step.","title":"Options for the consensus MS/MS spectra: output_type"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-fbmn-workflow-with-openms-files","text":"After the processing with OpenMS, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). Make sure to select the correct table source (OpenMS). The main documentation for FBMN can be accessed here . For metadata format requirements, see this page","title":"Running the FBMN workflow with OpenMS files"},{"location":"featurebasedmolecularnetworking-with-openms/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-openms/#page-contributors","text":"Ming Wang (7.2%), lfnothias (83.2%), Ivan Protsyuk (9.6%)","title":"Page Contributors"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/","text":"Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use Progenesis QI with the FBMN workflow on GNPS . Using Progenesis QI and the Feature-Based Molecular Networking on GNPS \u00b6 Progenesis QI is a proprietary LC-MS feature detection and alignment software developed by Nonlinear Dynamics that is compatible with Waters file format and other proprietary and open mass spectrometry format. Progenesis QI can perform feature detection, alignment and annotation of non-targeted LC-MS/MS data acquired either in data-dependent analysis (DDA) or MSE data independent analysis (DIA) , and can also uses the ion mobility spectrometry (IMS) dimension . Feature-based molecular networking (FBMN) can be performed on any of these data types processed with Progenesis QI . Citations and development \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). Running Progenesis QI for molecular networking on GNPS \u00b6 For more information on Progenesis QI, please refer to the official documentation at: http://www.nonlinear.com/progenesis/qi/ . 1. Import and process the mass spectrometry data \u00b6 In Progenesis QI (ver. 2.4, Nonlinear Dynamics), import RAW data from Waters QTof data-independent acquisition (DIA) modes such as SONAR, MSE or HDMSE. Processed data with Progenesis QI and export the results for GNPS analysis as indicated below. See the Progenesis QI LC-MS tutorial and the tutorial videos for more informations. 2. Export the processing results \u00b6 In the menu, under the \u201cIdentify Compounds\u201d tab: Select \u201cExport Compound Measurement\u201d to export the feature quantification table (CSV file) containing compound intensity and annotation can be exported (see below). Select \u201cExport fragment database\u201d to the export the MS/MS spectral summary (MSP file) containing the list of representative MS/MS spectra (see below). NOTE: Do not select tags to export Additional notes \u00b6 Alternatively, the Symphony software can be used the ion peaks in the entire RAW file can be detected, centroided, and deconvoluted, and converted to a suitable open-source data formats such as Mascot generic format (mgf), mzML, mzXML. More info on in the following note: See more information in the Nov. 2018 Waters Technology Brief . These files can be processed by other softwares supported FBMN, or can be used for classical molecular networking analysis. Running a molecular network on GNPS \u00b6 FBMN with Progenesis QI results can be performed using the using Superquick or the standard interface: Use the Superquick FBMN interface : Go to https://gnps-quickstart.ucsd.edu/featurebasednetworking . Select the \"Progenesis QI\" option for the \"Feature Quantification Table Source\". Drag and drop the feature quantification table (.CSV file) into the left box. Drag and drop the MS/MS spectral summary (.MSP file) into the right box. Use the standard FBMN interface : Refer to the main FBMN documentation for more informations. Mapping Progenesis QI annotations in Cytoscape \u00b6 Progenesis QI annotations or metadata can be mapped in Cytoscape as node attribute into the molecular networks. See the Cytoscape documentation for FBMN . For metadata format requirement, see this page . Helped is wanted to describe in detail the import procedure in Cytoscape. Acknowledgements \u00b6 Bindesh Shrestha (Waters), Giorgis Isaac (Waters and Jonathan McSayles (Waters). Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributors \u00b6 Ming Wang (13.58%), lfnothias (86.42%)","title":"FBMN with Progenesis QI"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below we describe how to use Progenesis QI with the FBMN workflow on GNPS .","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#using-progenesis-qi-and-the-feature-based-molecular-networking-on-gnps","text":"Progenesis QI is a proprietary LC-MS feature detection and alignment software developed by Nonlinear Dynamics that is compatible with Waters file format and other proprietary and open mass spectrometry format. Progenesis QI can perform feature detection, alignment and annotation of non-targeted LC-MS/MS data acquired either in data-dependent analysis (DDA) or MSE data independent analysis (DIA) , and can also uses the ion mobility spectrometry (IMS) dimension . Feature-based molecular networking (FBMN) can be performed on any of these data types processed with Progenesis QI .","title":"Using Progenesis QI and the Feature-Based Molecular Networking on GNPS"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#citations-and-development","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016).","title":"Citations and development"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#running-progenesis-qi-for-molecular-networking-on-gnps","text":"For more information on Progenesis QI, please refer to the official documentation at: http://www.nonlinear.com/progenesis/qi/ .","title":"Running Progenesis QI for molecular networking on GNPS"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#1-import-and-process-the-mass-spectrometry-data","text":"In Progenesis QI (ver. 2.4, Nonlinear Dynamics), import RAW data from Waters QTof data-independent acquisition (DIA) modes such as SONAR, MSE or HDMSE. Processed data with Progenesis QI and export the results for GNPS analysis as indicated below. See the Progenesis QI LC-MS tutorial and the tutorial videos for more informations.","title":"1. Import and process the mass spectrometry data"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#2-export-the-processing-results","text":"In the menu, under the \u201cIdentify Compounds\u201d tab: Select \u201cExport Compound Measurement\u201d to export the feature quantification table (CSV file) containing compound intensity and annotation can be exported (see below). Select \u201cExport fragment database\u201d to the export the MS/MS spectral summary (MSP file) containing the list of representative MS/MS spectra (see below). NOTE: Do not select tags to export","title":"2. Export the processing results"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#additional-notes","text":"Alternatively, the Symphony software can be used the ion peaks in the entire RAW file can be detected, centroided, and deconvoluted, and converted to a suitable open-source data formats such as Mascot generic format (mgf), mzML, mzXML. More info on in the following note: See more information in the Nov. 2018 Waters Technology Brief . These files can be processed by other softwares supported FBMN, or can be used for classical molecular networking analysis.","title":"Additional notes"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#running-a-molecular-network-on-gnps","text":"FBMN with Progenesis QI results can be performed using the using Superquick or the standard interface: Use the Superquick FBMN interface : Go to https://gnps-quickstart.ucsd.edu/featurebasednetworking . Select the \"Progenesis QI\" option for the \"Feature Quantification Table Source\". Drag and drop the feature quantification table (.CSV file) into the left box. Drag and drop the MS/MS spectral summary (.MSP file) into the right box. Use the standard FBMN interface : Refer to the main FBMN documentation for more informations.","title":"Running a molecular network on GNPS"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#mapping-progenesis-qi-annotations-in-cytoscape","text":"Progenesis QI annotations or metadata can be mapped in Cytoscape as node attribute into the molecular networks. See the Cytoscape documentation for FBMN . For metadata format requirement, see this page . Helped is wanted to describe in detail the import procedure in Cytoscape.","title":"Mapping Progenesis QI annotations in Cytoscape"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#acknowledgements","text":"Bindesh Shrestha (Waters), Giorgis Isaac (Waters and Jonathan McSayles (Waters).","title":"Acknowledgements"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#page-contributors","text":"Ming Wang (13.58%), lfnothias (86.42%)","title":"Page Contributors"},{"location":"featurebasedmolecularnetworking-with-xcms3/","text":"Introduction \u00b6 The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below follows a description on how to use XCMS (ver. >= 3) with the FBMN workflow on GNPS. Mass spectrometry processing with XCMS \u00b6 Citations and development \u00b6 This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). XCMS3 GitHub repository: https://github.com/sneumann/xcms Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008). Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006). Installation \u00b6 1 - Install the latest version of XCMS3 from Bioconductor (ver. >= 3.4) in R with: install(\"BiocManager\") BiocManager::install(\"xcms\") Alternatively, see the [xcms Bioconductor package] (https://www.bioconductor.org/packages/release/bioc/html/xcms.html). 2 - Retrieve the custom utility function from the XCMS-GNPS-TOOLS GitHub repository https://github.com/jorainer/xcms-gnps-tools . Mass Spectrometry Data Processing with XCMS. \u00b6 1. Introduction \u00b6 Below we are presenting the key steps required to process with XCMS non-targeted LC-MS/MS data collected using data dependent acquisition. For more information on XCMS, consult these resources: The official XCMS tutorial (also provided as xcms vignette with the xcms R package). XCMS workshop from the Metabolomics 2018 conference: xcms-preprocessing and github repository . The Canadian Bioinformatics Workshop video on XCMS at https://www.youtube.com/watch?v=cdIb7EyIiBI SCRIPT AVAILABILITY: Example of XCMS scripts are accessible as Jupyter notebook and RCommander script on https://github.com/DorresteinLaboratory/XCMS3_FeatureBasedMN . IMPORTANT: XCMS parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples investigated. The following documentation serves as a basic guideline for using XCMS with the Feature-Based Molecular Networking workflow. 2. Convert your Data \u00b6 XCMS accepts different input formats. Note that we recommand to convert your files to the mzML format before using XCMS for processing. See the documentation here . This will simplify the subsquent use of other mass spectrometry tools and data deposition on a public repository like MassIVE or MetaboLights . 3. Process with XCMS \u00b6 These are typical steps used for the processing of non-targeted LC-MS/MS data with XCMS: Import data ( readMSData ) Peak picking ( findChromPeaks ) Retention time alignment ( adjustRtime ). Peak grouping ( groupChromPeaks ). Gap filling ( fillChromPeaks ). Run CAMERA for adduct annotation ( xsAnnotate ). Export the results file for FBMN on GNPS: Option A - Export a feature quantification table and a MS/MS spectral summary file : Export a feature quantification table with ion intensities (.TXT file format) ( writeMgfData ). Export a MS/MS spectral summary file (.MGF file format). Note that it is recommended to use the maxTIC option for the MGF export. ( write.table ) Option B - Export an mzTab-M file : Export and select the mzTab-M file in the interface. The use of the mzTab-M requires the subsequent upload of the mzML files used during the XCMS processing. See and cite this publication . Perform FBMN on GNPS \u00b6 The files exported from XCMS3 can be uploaded to the GNPS web-platform and a Feature-Based Molecular Networking job can be launched. FBMN with XCMS3 can be performed either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). More information on the Feature Based Molecular Networking workflow on GNPS can be obtained at this documentation page . Note that you can upload a metadata table with your job. See documentation . Representative results files and job \u00b6 Option A - With a feature quantification table and a MS/MS spectral summary file : The feature quantification table (.TXT file) - Download here The MS/MS spectral summary (.MGF file) - Download here (Optional) The metadata table - Download here Here is an example FBMN job with XCMS from a subset of the American Gut Project. Option B - With a mzTab-M file: TODO: Finish this section The mzTab-M file - Download here The corresponding mzML file(s) - Download here Here is an example FBMN job with XCMS using a mzTab-M file and mzML files from a subset of the American Gut Project. Tutorials \u00b6 See our FBMN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/ . Acknowledgements \u00b6 Johannes Rainer (Eurac Research), Madeleine Ernst (UCSD), Ricardo da Silva (UCSD), Michael Witting (Helmholtz Zentrum Munich) Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributors \u00b6 Ming Wang (7.69%), lfnothias (59.44%), Madeleine Ernst (16.08%), Ivan Protsyuk (0.7%), jorainer (16.08%)","title":"FBMN with XCMS"},{"location":"featurebasedmolecularnetworking-with-xcms3/#introduction","text":"The main documentation for Feature-Based Molecular Networking (FBMN) can be accessed here . See our preprint on bioaRxiv . Below follows a description on how to use XCMS (ver. >= 3) with the FBMN workflow on GNPS.","title":"Introduction"},{"location":"featurebasedmolecularnetworking-with-xcms3/#mass-spectrometry-processing-with-xcms","text":"","title":"Mass spectrometry processing with XCMS"},{"location":"featurebasedmolecularnetworking-with-xcms3/#citations-and-development","text":"This work builds on the efforts of our many colleagues, please cite their work: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). XCMS3 GitHub repository: https://github.com/sneumann/xcms Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008). Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006).","title":"Citations and development"},{"location":"featurebasedmolecularnetworking-with-xcms3/#installation","text":"1 - Install the latest version of XCMS3 from Bioconductor (ver. >= 3.4) in R with: install(\"BiocManager\") BiocManager::install(\"xcms\") Alternatively, see the [xcms Bioconductor package] (https://www.bioconductor.org/packages/release/bioc/html/xcms.html). 2 - Retrieve the custom utility function from the XCMS-GNPS-TOOLS GitHub repository https://github.com/jorainer/xcms-gnps-tools .","title":"Installation"},{"location":"featurebasedmolecularnetworking-with-xcms3/#mass-spectrometry-data-processing-with-xcms","text":"","title":"Mass Spectrometry Data Processing with XCMS."},{"location":"featurebasedmolecularnetworking-with-xcms3/#1-introduction","text":"Below we are presenting the key steps required to process with XCMS non-targeted LC-MS/MS data collected using data dependent acquisition. For more information on XCMS, consult these resources: The official XCMS tutorial (also provided as xcms vignette with the xcms R package). XCMS workshop from the Metabolomics 2018 conference: xcms-preprocessing and github repository . The Canadian Bioinformatics Workshop video on XCMS at https://www.youtube.com/watch?v=cdIb7EyIiBI SCRIPT AVAILABILITY: Example of XCMS scripts are accessible as Jupyter notebook and RCommander script on https://github.com/DorresteinLaboratory/XCMS3_FeatureBasedMN . IMPORTANT: XCMS parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples investigated. The following documentation serves as a basic guideline for using XCMS with the Feature-Based Molecular Networking workflow.","title":"1. Introduction"},{"location":"featurebasedmolecularnetworking-with-xcms3/#2-convert-your-data","text":"XCMS accepts different input formats. Note that we recommand to convert your files to the mzML format before using XCMS for processing. See the documentation here . This will simplify the subsquent use of other mass spectrometry tools and data deposition on a public repository like MassIVE or MetaboLights .","title":"2. Convert your Data"},{"location":"featurebasedmolecularnetworking-with-xcms3/#3-process-with-xcms","text":"These are typical steps used for the processing of non-targeted LC-MS/MS data with XCMS: Import data ( readMSData ) Peak picking ( findChromPeaks ) Retention time alignment ( adjustRtime ). Peak grouping ( groupChromPeaks ). Gap filling ( fillChromPeaks ). Run CAMERA for adduct annotation ( xsAnnotate ). Export the results file for FBMN on GNPS: Option A - Export a feature quantification table and a MS/MS spectral summary file : Export a feature quantification table with ion intensities (.TXT file format) ( writeMgfData ). Export a MS/MS spectral summary file (.MGF file format). Note that it is recommended to use the maxTIC option for the MGF export. ( write.table ) Option B - Export an mzTab-M file : Export and select the mzTab-M file in the interface. The use of the mzTab-M requires the subsequent upload of the mzML files used during the XCMS processing. See and cite this publication .","title":"3. Process with XCMS"},{"location":"featurebasedmolecularnetworking-with-xcms3/#perform-fbmn-on-gnps","text":"The files exported from XCMS3 can be uploaded to the GNPS web-platform and a Feature-Based Molecular Networking job can be launched. FBMN with XCMS3 can be performed either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first). More information on the Feature Based Molecular Networking workflow on GNPS can be obtained at this documentation page . Note that you can upload a metadata table with your job. See documentation .","title":"Perform FBMN on GNPS"},{"location":"featurebasedmolecularnetworking-with-xcms3/#representative-results-files-and-job","text":"Option A - With a feature quantification table and a MS/MS spectral summary file : The feature quantification table (.TXT file) - Download here The MS/MS spectral summary (.MGF file) - Download here (Optional) The metadata table - Download here Here is an example FBMN job with XCMS from a subset of the American Gut Project. Option B - With a mzTab-M file: TODO: Finish this section The mzTab-M file - Download here The corresponding mzML file(s) - Download here Here is an example FBMN job with XCMS using a mzTab-M file and mzML files from a subset of the American Gut Project.","title":"Representative results files and job"},{"location":"featurebasedmolecularnetworking-with-xcms3/#tutorials","text":"See our FBMN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/ .","title":"Tutorials"},{"location":"featurebasedmolecularnetworking-with-xcms3/#acknowledgements","text":"Johannes Rainer (Eurac Research), Madeleine Ernst (UCSD), Ricardo da Silva (UCSD), Michael Witting (Helmholtz Zentrum Munich)","title":"Acknowledgements"},{"location":"featurebasedmolecularnetworking-with-xcms3/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking-with-xcms3/#page-contributors","text":"Ming Wang (7.69%), lfnothias (59.44%), Madeleine Ernst (16.08%), Ivan Protsyuk (0.7%), jorainer (16.08%)","title":"Page Contributors"},{"location":"featurebasedmolecularnetworking/","text":"Feature-Based Molecular Networking (FBMN) \u00b6 Introduction \u00b6 [ NEW !!! ] The FBMN allows to generate molecular networks from MSE and Ion Mobility Spectrometry (IMS) data with MS-DIAL, or Progenesis QI, MetaboScape. Feature-Based Molecular Networking (FBMN) is a computational method that bridges popular mass spectrometry data processing tools for LC-MS/MS and molecular networking analysis on GNPS . The supported tools are: MZmine , OpenMS , MS-DIAL , MetaboScape , XCMS , Progenesis QI , and the mzTab-M format . The main documentation for Feature-Based Molecular Networking is provided below. See our preprint on bioaRxiv . The Feature-Based Molecular Networking (FBMN) workflow is available on GNPS via: The Superquick Start page for FBMN . This page enables rapid submission of jobs with limited options. The standard GNPS interface page for FBMN (you need to be logged in GNPS first). For programmatic access to FBMN, contact Mingxun Wang at miw023@ucsd.edu . Citations \u00b6 This work builds on the efforts of our many colleagues, please make sure to cite the papers for their processing tools and the following GNPS papers: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). The citations from the mass spectrometry processing tools you used [ MZmine2 , OpenMS , MS-DIAL , MetaboScape , XCMS , and mzTab-M format ]. Mass Spectrometry Data Processing for the FBMN \u00b6 In brief, popular mass spectrometry processing programs have been adapted to export two files ( feature quantification table and MS/MS spectral summary ) files that can be used with the Feature Based Molecular Networking (FBMN) workflow on GNPS. Alternatively, the FBMN supports the mzTab-M format that can be inputted along witht the mzML file(s). The tools supported and their main features are presented in the table below along with a step-by-step documentation to use in FBMN on GNPS: Processing tool Doc. Data supported Interface Platform Code Target user MZmine See doc. Non-targeted LC-MS/MS Graphical UI Any Open source Mass spectrometrists MS-DIAL See doc. Non-targeted LC-MS/MS, MSE , Ion Mobility Graphical UI Windows Open source Mass spectrometrists OpenMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers XCMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers MetaboScape See doc. Non-targeted LC-MS/MS, Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists Progenesis QI See doc. Non-targeted LC-MS/MS, MSE , Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists mzTab-M See doc. Non-targeted LC-MS/MS Standardized format Multi-systems Open source All public IMPORTANT: The software used for the LC-MS/MS data processing has to be configured and utilized as recommended by its documentation. The FBMN Workflow in GNPS \u00b6 There is a dedicated Feature-Based Molecular Networking workflow on GNPS that can be accessed here (you need to be logged in GNPS first). Requirement for the FBMN workflow \u00b6 After processing your LC-MS/MS data with the prefered software, it is possible to export the results following two methods: Three type of input files are needed (test files for each software are accessible here ): Option A (RECOMMENDED) - Export the processing results using a feature table and an .MGF file: A feature table with the intensities of LC-MS ion features (TXT or CSV format). A MS/MS spectral summary file with a list of MS/MS spectra associated with the LC-MS ion features (.MGF File). (.MGF file format). [Optional] Metadata table - format described here [Optional] \"Supplementary Pairs\" of additional edges - described here Option B - Export the processing results using an mzTab-M and mzML files: Export a single mzTab-M file from the processed data. See and cite this publication . Use the mzML file(s) associated with mzTab-M file. [Optional] Metadata table - format described here SuperQuick Feature Based Molecular Networking Workflow \u00b6 A simplified interace for Super Quick web interace for FBMN is available here . Running the SuperQuick FBMN \u00b6 Indicate your email and your GNPS Credentials. Select the 'Feature Generation tool'. Select the parameters preset. Option A. Drag and drop your \"feature quantification table\" and \"MS/MS spectral file\" (.MGF). See the respective documentation for FBMN each tool. Optional. Drag and drop a metadata table . Optional. Drag and drop a \"Supplementary Pairs\" csv file ( see format ) with additional edges Click on \"Analyze Uploaded Files with GNPS Molecular Networking\". While this SuperQuick FBMN interface is convenient for quick analysis, we recommend using the standard FBMN workflow. [ IMPORTANT ] The file uploaded along with the jobs submitted with Superquick start interface are deleted on monthly basis. Use the \"standard\" interface of the FBMN for persistant jobs and more options. Overview of the standard interface \u00b6 Select the file source \u00b6 Molecular Networks Options \u00b6 Basic Options \u00b6 Parameter Description Default Precursor Ion Mass Tolerance (PIMT) Parameter used for MS-Cluster and spectral library search expressed in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 0.02 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.02 Advanced Molecular Network Options \u00b6 Parameter Description Default Notes Min Pairs Cos Minimum cosine score for a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. The minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, the mobile phase, etc.), and the collision-induced fragmentation settings of the molecules of interest within the samples. High molecular weight (MW) compounds and compounds with more hetero-atoms generally tend to produce more fragment ions. However, this rule cannot is not absolute. For example, some lipids with high MW generate only a few fragment ions. Maximum shift between precursors The maximum m/z difference between two precursors permitting their spectra to be considered as direct neighbors in a molecular network 500 The maximum mass difference between two connected nodes in a molecular network. Network TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Maximum Connected Component Size Maximum number of nodes allowed in a single connected network 100 Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Advanced Spectral Library Search Options \u00b6 Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending on the molecules of interest, and the experimental conditions (such as the ionisation mode and the fragmentation conditions). For example, the collision-induced fragmentation of some lipids produce only a few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular types to be connected in one network. A higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Whether to search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between the library and putative analogs found 100 (Da) Top results to report per query Number of matches to report for each feature 1 Advanced Filtering Options (for Spectra) \u00b6 Parameter Description Default Minimum Peak Intensity All fragment ions in the MS/MS spectra below this raw intensity value will be deleted. By default, the filtering is disabled. 0 Filter Precursor Window All peaks in a +/- 17 Da around precursor ion mass are deleted. Enabled by default. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not in the top 6 most intense peaks in a +/- 50Da window Filter Advanced Quantification Options \u00b6 There are additional normalization options specifically for the FBMN workflow: Parameter Description Default Normalization Per File Total Ion Current (TIC) normalization can be applied to the ion intensities (LC-MS1 peak area) per sample (NOT RECOMMENDED AS DEFAULT) No Norm Aggregation Method for Peak Abundances Per Group The ion feature intensity (LC-MS1 peak area) can be aggregated by GROUPS from the metadatable with either a Sum or Average (RECOMMENDED, because it is more robust to the difference in the number of samples per GROUPS). Average Advanced Univariate Statistics Options \u00b6 These options will enabling the calculation of statistics as well as draw box plots for exploring. Parameter Description Default Metadata Column to Compare This is the column name in your metadata (e.g. ATTRIBUTE_condition) Empty Metadata Field to Compare This is the first field in the metadata data column to compare (e.g. CONTROL) Empty Metadata Field to Compare This is the second field in the metadata data column to compare (e.g. CASE) Empty Metadata Column to Facet This is another column where you can facet based on the terms (e.g. ATTRIBUTE_media) Empty Advanced Extras \u00b6 \"Supplementary Pairs\" is an option to add extra edges to the resulting FBMN. It was initially implemented for the Ion Identity Networking (IIN) workflow . The IIN supports currently MZmine, XCMS-CAMERA, and MS-DIAL. However, this approach is designed to stimulate the development and testing of new workflows as the input is an edge file in a generic CSV format. An edge is described by the following table: Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation Note that if Supplementary Pairs from other software are used, it is mandatory that the as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file. Example of the Supplementary Pairs used in the IIN workflow . Inspecting the Results of FBMN on GNPS \u00b6 After the completion of the FBMN job (this will take from 10 to 10 hours depending on your number of samples and instrument), you will receive an email notification with a link to the results page (see example below). Spectral Library Match and Network Topology Analysis \u00b6 For more information about the inspection of the molecular networking results, please refer to the main documentation page . Web-browser Molecular Network Visualization \u00b6 Here is an example of web-browser view of molecular networks. Click on the link to view the interactive molecular networks . Inspecting the Results of FBMN in Cytoscape \u00b6 Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here . Demo GNPS job of FBMN \u00b6 Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/). Running the DEREPLICATOR \u00b6 The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. This workflow is also included into the Feature Based Molecular Network workflow, then you have the option to use it by clicking into Advanced External tools. After your job has completed you can explore your results and even clone the Dereplicator job and modify the parameters. If you use that tool, please cite the DEREPLICATOR papers. See citations in the main DEREPLICATOR documentation . Running Network Annotation Propagation \u00b6 It is possible to use the results of FBMN to run Network Annotation Propagation (NAP). NAP uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. See the following documentation for NAP If you use that tool, please cite the NAP paper. See citations in the main NAP documentation . Running MS2LDA Substructure Discovery \u00b6 The results of FBMN can be directly analyzed with MS2LDA . For this, on the result page click on \"Advanced View\" > \"Analyze with MS2LDA\". See the MS2LDA documentation . MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families. If you use that tool, please cite MS2LDA papers. See citations in the main MS2LDA documentation . Running MolNetEnhancer with FBMN \u00b6 MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication. See the main documentation of MolNetEnh for informations about using it for FBMN. Viewing the PCoA plot with EMPeror in Qiime2 \u00b6 EMPeror, is an open source and web browser enabled tool that allows researchers to perform rapid exploratory investigations of 3D visualizations of data. To view the PCoA plot (using Bray-Curtis dissimilarity metrics) with the EMPeror Qiime2 plugin, click on \"View qiime2 Emperor Plots\" . Citation for EMPeror : Yoshiki V\u00e1zquez-Baeza, Meg Pirrung, Antonio Gonzalez, and Rob Knight. Gigascience, 2(1):16, 2013. doi:10.1186/2047-217X-2-16 . Citation for Qiime2 : Bolyen, E. et al. QIIME 2: Reproducible, interactive, scalable, and extensible microbiome data science. (PeerJ Preprints, 2018). doi:10.7287/peerj.preprints.27295v2 Video Tutorial - Analyze FBMN in GNPS \u00b6 Tutorials \u00b6 See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project , and our tutorial on running a FBMN analysis on GNPS . Development \u00b6 Source code \u00b6 The FBMN source code can be found on the GNPS_Workflows GitHub repository . Requirements for the input files for each processing tool are described at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking and representative input files are provided at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking/test/reference_input_file_for_formatter . The \"formatter\" scripts that convert input files of the supported softwares are accessible in the script/ folder . Input files requirements \u00b6 The FBMN workflow accepts as input files either: A MS/MS spectral summary and a feature quantification table . or an mzTab-M file and the associated mzML files. MS/MS spectral summary and feature quantification table \u00b6 Applicable for MZmine, OpenMS, MS-DIAL, XCMS, MetaboScape, and Progenesis QI. MS/MS spectral summary \u00b6 The MS/MS spectral summary contains a list of representative spectra in the Mascot Generic Format ( MGF file). An MGF file is a plain text file (ASCII) containing peak list information and spectra parameters (more information at http://www.matrixscience.com/help/data_file_help.html . Note that for Progenesis QI, instead of an MGF file, an MSP file (NIST spectral library format) is used instead. Feature quantification table \u00b6 The feature quantification table ( TXT or CSV file) is specific for each supported processing tool and processed internally by GNPS. Yet, it needs to contain a Feature IDentifier (integer) for each LC-MS1 feature that must be unique and match the \" SCANS= \" header of the corresponding spectrum in the MS/MS spectral summary ( MGF file). Note that the number of LC-MS1 features in the feature quantification table can be larger than the number of LC-MS1 features with a spectrum in the MS/MS spectral file , and the Feature IDentifier does not have to be sequencial. As a result, the feature quantification table can contain LC-MS1 feature that does not have an associated MS/MS scan in the MS/MS spectral file . The PCoA generated with qiime2 EMPeror in FBMN workflow uses the entire content of feature quantification table provided. For all the processing tools supported, the mapping between the \" Feature ID \" of the feature quantification table should be consistent with the \" SCAN \" header of the representative spectrum in the MS/MS spectral summary . See this page for example files . Note that internally, the feature quantification table file inputted by the user are converted to a standard internal format prior to FBMN analysis in GNPS. The python scripts used for the conversion feature quantification Table from various software are available here . If you want to add support for another LC-MS processing tool, please contact us. Support for mz-Tab-M format \u00b6 The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results. The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. Basically, the mzTab-M file is used to retrieve for each LC-MS/MS feature: The abundance of the LC-MS/MS feature in each sample. The filename ( mzML ) and the index of the most intense associated MS/MS spectrum. Note that currently, the mzTab-M has been tested only with XCMS. More informations in the FBMN with mzTab-M documentation . Programmatic Access to FBMN \u00b6 For programmatic access to the FBMN workflow, contact Mingxun Wang at miw023@ucsd.edu . Join the GNPS Community ! \u00b6 For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes. Page Contributions \u00b6 Ming Wang (22.04%), lfnothias (69.65%), Ivan Protsyuk (4.15%), robinschmid (2.88%), mccall-lab-OU (1.28%)","title":"FBMN Workflow"},{"location":"featurebasedmolecularnetworking/#feature-based-molecular-networking-fbmn","text":"","title":"Feature-Based Molecular Networking (FBMN)"},{"location":"featurebasedmolecularnetworking/#introduction","text":"[ NEW !!! ] The FBMN allows to generate molecular networks from MSE and Ion Mobility Spectrometry (IMS) data with MS-DIAL, or Progenesis QI, MetaboScape. Feature-Based Molecular Networking (FBMN) is a computational method that bridges popular mass spectrometry data processing tools for LC-MS/MS and molecular networking analysis on GNPS . The supported tools are: MZmine , OpenMS , MS-DIAL , MetaboScape , XCMS , Progenesis QI , and the mzTab-M format . The main documentation for Feature-Based Molecular Networking is provided below. See our preprint on bioaRxiv . The Feature-Based Molecular Networking (FBMN) workflow is available on GNPS via: The Superquick Start page for FBMN . This page enables rapid submission of jobs with limited options. The standard GNPS interface page for FBMN (you need to be logged in GNPS first). For programmatic access to FBMN, contact Mingxun Wang at miw023@ucsd.edu .","title":"Introduction"},{"location":"featurebasedmolecularnetworking/#citations","text":"This work builds on the efforts of our many colleagues, please make sure to cite the papers for their processing tools and the following GNPS papers: Nothias, L.F. et al Feature-based Molecular Networking in the GNPS Analysis Environment bioRxiv 812404 (2019). Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking . Nat. Biotechnol. 34, 828\u2013837 (2016). The citations from the mass spectrometry processing tools you used [ MZmine2 , OpenMS , MS-DIAL , MetaboScape , XCMS , and mzTab-M format ].","title":"Citations"},{"location":"featurebasedmolecularnetworking/#mass-spectrometry-data-processing-for-the-fbmn","text":"In brief, popular mass spectrometry processing programs have been adapted to export two files ( feature quantification table and MS/MS spectral summary ) files that can be used with the Feature Based Molecular Networking (FBMN) workflow on GNPS. Alternatively, the FBMN supports the mzTab-M format that can be inputted along witht the mzML file(s). The tools supported and their main features are presented in the table below along with a step-by-step documentation to use in FBMN on GNPS: Processing tool Doc. Data supported Interface Platform Code Target user MZmine See doc. Non-targeted LC-MS/MS Graphical UI Any Open source Mass spectrometrists MS-DIAL See doc. Non-targeted LC-MS/MS, MSE , Ion Mobility Graphical UI Windows Open source Mass spectrometrists OpenMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers XCMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers MetaboScape See doc. Non-targeted LC-MS/MS, Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists Progenesis QI See doc. Non-targeted LC-MS/MS, MSE , Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists mzTab-M See doc. Non-targeted LC-MS/MS Standardized format Multi-systems Open source All public IMPORTANT: The software used for the LC-MS/MS data processing has to be configured and utilized as recommended by its documentation.","title":"Mass Spectrometry Data Processing for the FBMN"},{"location":"featurebasedmolecularnetworking/#the-fbmn-workflow-in-gnps","text":"There is a dedicated Feature-Based Molecular Networking workflow on GNPS that can be accessed here (you need to be logged in GNPS first).","title":"The FBMN Workflow in GNPS"},{"location":"featurebasedmolecularnetworking/#requirement-for-the-fbmn-workflow","text":"After processing your LC-MS/MS data with the prefered software, it is possible to export the results following two methods: Three type of input files are needed (test files for each software are accessible here ): Option A (RECOMMENDED) - Export the processing results using a feature table and an .MGF file: A feature table with the intensities of LC-MS ion features (TXT or CSV format). A MS/MS spectral summary file with a list of MS/MS spectra associated with the LC-MS ion features (.MGF File). (.MGF file format). [Optional] Metadata table - format described here [Optional] \"Supplementary Pairs\" of additional edges - described here Option B - Export the processing results using an mzTab-M and mzML files: Export a single mzTab-M file from the processed data. See and cite this publication . Use the mzML file(s) associated with mzTab-M file. [Optional] Metadata table - format described here","title":"Requirement for the FBMN workflow"},{"location":"featurebasedmolecularnetworking/#superquick-feature-based-molecular-networking-workflow","text":"A simplified interace for Super Quick web interace for FBMN is available here .","title":"SuperQuick Feature Based Molecular Networking Workflow"},{"location":"featurebasedmolecularnetworking/#running-the-superquick-fbmn","text":"Indicate your email and your GNPS Credentials. Select the 'Feature Generation tool'. Select the parameters preset. Option A. Drag and drop your \"feature quantification table\" and \"MS/MS spectral file\" (.MGF). See the respective documentation for FBMN each tool. Optional. Drag and drop a metadata table . Optional. Drag and drop a \"Supplementary Pairs\" csv file ( see format ) with additional edges Click on \"Analyze Uploaded Files with GNPS Molecular Networking\". While this SuperQuick FBMN interface is convenient for quick analysis, we recommend using the standard FBMN workflow. [ IMPORTANT ] The file uploaded along with the jobs submitted with Superquick start interface are deleted on monthly basis. Use the \"standard\" interface of the FBMN for persistant jobs and more options.","title":"Running the SuperQuick FBMN"},{"location":"featurebasedmolecularnetworking/#overview-of-the-standard-interface","text":"","title":"Overview of the standard interface"},{"location":"featurebasedmolecularnetworking/#select-the-file-source","text":"","title":"Select the file source"},{"location":"featurebasedmolecularnetworking/#molecular-networks-options","text":"","title":"Molecular Networks Options"},{"location":"featurebasedmolecularnetworking/#basic-options","text":"Parameter Description Default Precursor Ion Mass Tolerance (PIMT) Parameter used for MS-Cluster and spectral library search expressed in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 0.02 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.02","title":"Basic Options"},{"location":"featurebasedmolecularnetworking/#advanced-molecular-network-options","text":"Parameter Description Default Notes Min Pairs Cos Minimum cosine score for a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. The minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, the mobile phase, etc.), and the collision-induced fragmentation settings of the molecules of interest within the samples. High molecular weight (MW) compounds and compounds with more hetero-atoms generally tend to produce more fragment ions. However, this rule cannot is not absolute. For example, some lipids with high MW generate only a few fragment ions. Maximum shift between precursors The maximum m/z difference between two precursors permitting their spectra to be considered as direct neighbors in a molecular network 500 The maximum mass difference between two connected nodes in a molecular network. Network TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Maximum Connected Component Size Maximum number of nodes allowed in a single connected network 100 Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network.","title":"Advanced Molecular Network Options"},{"location":"featurebasedmolecularnetworking/#advanced-spectral-library-search-options","text":"Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending on the molecules of interest, and the experimental conditions (such as the ionisation mode and the fragmentation conditions). For example, the collision-induced fragmentation of some lipids produce only a few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular types to be connected in one network. A higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Whether to search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between the library and putative analogs found 100 (Da) Top results to report per query Number of matches to report for each feature 1","title":"Advanced Spectral Library Search Options"},{"location":"featurebasedmolecularnetworking/#advanced-filtering-options-for-spectra","text":"Parameter Description Default Minimum Peak Intensity All fragment ions in the MS/MS spectra below this raw intensity value will be deleted. By default, the filtering is disabled. 0 Filter Precursor Window All peaks in a +/- 17 Da around precursor ion mass are deleted. Enabled by default. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not in the top 6 most intense peaks in a +/- 50Da window Filter","title":"Advanced Filtering Options (for Spectra)"},{"location":"featurebasedmolecularnetworking/#advanced-quantification-options","text":"There are additional normalization options specifically for the FBMN workflow: Parameter Description Default Normalization Per File Total Ion Current (TIC) normalization can be applied to the ion intensities (LC-MS1 peak area) per sample (NOT RECOMMENDED AS DEFAULT) No Norm Aggregation Method for Peak Abundances Per Group The ion feature intensity (LC-MS1 peak area) can be aggregated by GROUPS from the metadatable with either a Sum or Average (RECOMMENDED, because it is more robust to the difference in the number of samples per GROUPS). Average","title":"Advanced Quantification Options"},{"location":"featurebasedmolecularnetworking/#advanced-univariate-statistics-options","text":"These options will enabling the calculation of statistics as well as draw box plots for exploring. Parameter Description Default Metadata Column to Compare This is the column name in your metadata (e.g. ATTRIBUTE_condition) Empty Metadata Field to Compare This is the first field in the metadata data column to compare (e.g. CONTROL) Empty Metadata Field to Compare This is the second field in the metadata data column to compare (e.g. CASE) Empty Metadata Column to Facet This is another column where you can facet based on the terms (e.g. ATTRIBUTE_media) Empty","title":"Advanced Univariate Statistics Options"},{"location":"featurebasedmolecularnetworking/#advanced-extras","text":"\"Supplementary Pairs\" is an option to add extra edges to the resulting FBMN. It was initially implemented for the Ion Identity Networking (IIN) workflow . The IIN supports currently MZmine, XCMS-CAMERA, and MS-DIAL. However, this approach is designed to stimulate the development and testing of new workflows as the input is an edge file in a generic CSV format. An edge is described by the following table: Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation Note that if Supplementary Pairs from other software are used, it is mandatory that the as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file. Example of the Supplementary Pairs used in the IIN workflow .","title":"Advanced Extras"},{"location":"featurebasedmolecularnetworking/#inspecting-the-results-of-fbmn-on-gnps","text":"After the completion of the FBMN job (this will take from 10 to 10 hours depending on your number of samples and instrument), you will receive an email notification with a link to the results page (see example below).","title":"Inspecting the Results of FBMN on GNPS"},{"location":"featurebasedmolecularnetworking/#spectral-library-match-and-network-topology-analysis","text":"For more information about the inspection of the molecular networking results, please refer to the main documentation page .","title":"Spectral Library Match and Network Topology Analysis"},{"location":"featurebasedmolecularnetworking/#web-browser-molecular-network-visualization","text":"Here is an example of web-browser view of molecular networks. Click on the link to view the interactive molecular networks .","title":"Web-browser Molecular Network Visualization"},{"location":"featurebasedmolecularnetworking/#inspecting-the-results-of-fbmn-in-cytoscape","text":"Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here .","title":"Inspecting the Results of FBMN in Cytoscape"},{"location":"featurebasedmolecularnetworking/#demo-gnps-job-of-fbmn","text":"Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/).","title":"Demo GNPS job of FBMN"},{"location":"featurebasedmolecularnetworking/#running-the-dereplicator","text":"The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. This workflow is also included into the Feature Based Molecular Network workflow, then you have the option to use it by clicking into Advanced External tools. After your job has completed you can explore your results and even clone the Dereplicator job and modify the parameters. If you use that tool, please cite the DEREPLICATOR papers. See citations in the main DEREPLICATOR documentation .","title":"Running the DEREPLICATOR"},{"location":"featurebasedmolecularnetworking/#running-network-annotation-propagation","text":"It is possible to use the results of FBMN to run Network Annotation Propagation (NAP). NAP uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. See the following documentation for NAP If you use that tool, please cite the NAP paper. See citations in the main NAP documentation .","title":"Running Network Annotation Propagation"},{"location":"featurebasedmolecularnetworking/#running-ms2lda-substructure-discovery","text":"The results of FBMN can be directly analyzed with MS2LDA . For this, on the result page click on \"Advanced View\" > \"Analyze with MS2LDA\". See the MS2LDA documentation . MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families. If you use that tool, please cite MS2LDA papers. See citations in the main MS2LDA documentation .","title":"Running MS2LDA Substructure Discovery"},{"location":"featurebasedmolecularnetworking/#running-molnetenhancer-with-fbmn","text":"MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication. See the main documentation of MolNetEnh for informations about using it for FBMN.","title":"Running MolNetEnhancer with FBMN"},{"location":"featurebasedmolecularnetworking/#viewing-the-pcoa-plot-with-emperor-in-qiime2","text":"EMPeror, is an open source and web browser enabled tool that allows researchers to perform rapid exploratory investigations of 3D visualizations of data. To view the PCoA plot (using Bray-Curtis dissimilarity metrics) with the EMPeror Qiime2 plugin, click on \"View qiime2 Emperor Plots\" . Citation for EMPeror : Yoshiki V\u00e1zquez-Baeza, Meg Pirrung, Antonio Gonzalez, and Rob Knight. Gigascience, 2(1):16, 2013. doi:10.1186/2047-217X-2-16 . Citation for Qiime2 : Bolyen, E. et al. QIIME 2: Reproducible, interactive, scalable, and extensible microbiome data science. (PeerJ Preprints, 2018). doi:10.7287/peerj.preprints.27295v2","title":"Viewing the PCoA plot with EMPeror in Qiime2"},{"location":"featurebasedmolecularnetworking/#video-tutorial-analyze-fbmn-in-gnps","text":"","title":"Video Tutorial - Analyze FBMN in GNPS"},{"location":"featurebasedmolecularnetworking/#tutorials","text":"See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project , and our tutorial on running a FBMN analysis on GNPS .","title":"Tutorials"},{"location":"featurebasedmolecularnetworking/#development","text":"","title":"Development"},{"location":"featurebasedmolecularnetworking/#source-code","text":"The FBMN source code can be found on the GNPS_Workflows GitHub repository . Requirements for the input files for each processing tool are described at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking and representative input files are provided at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking/test/reference_input_file_for_formatter . The \"formatter\" scripts that convert input files of the supported softwares are accessible in the script/ folder .","title":"Source code"},{"location":"featurebasedmolecularnetworking/#input-files-requirements","text":"The FBMN workflow accepts as input files either: A MS/MS spectral summary and a feature quantification table . or an mzTab-M file and the associated mzML files.","title":"Input files requirements"},{"location":"featurebasedmolecularnetworking/#msms-spectral-summary-and-feature-quantification-table","text":"Applicable for MZmine, OpenMS, MS-DIAL, XCMS, MetaboScape, and Progenesis QI.","title":"MS/MS spectral summary and feature quantification table"},{"location":"featurebasedmolecularnetworking/#msms-spectral-summary","text":"The MS/MS spectral summary contains a list of representative spectra in the Mascot Generic Format ( MGF file). An MGF file is a plain text file (ASCII) containing peak list information and spectra parameters (more information at http://www.matrixscience.com/help/data_file_help.html . Note that for Progenesis QI, instead of an MGF file, an MSP file (NIST spectral library format) is used instead.","title":"MS/MS spectral summary"},{"location":"featurebasedmolecularnetworking/#feature-quantification-table","text":"The feature quantification table ( TXT or CSV file) is specific for each supported processing tool and processed internally by GNPS. Yet, it needs to contain a Feature IDentifier (integer) for each LC-MS1 feature that must be unique and match the \" SCANS= \" header of the corresponding spectrum in the MS/MS spectral summary ( MGF file). Note that the number of LC-MS1 features in the feature quantification table can be larger than the number of LC-MS1 features with a spectrum in the MS/MS spectral file , and the Feature IDentifier does not have to be sequencial. As a result, the feature quantification table can contain LC-MS1 feature that does not have an associated MS/MS scan in the MS/MS spectral file . The PCoA generated with qiime2 EMPeror in FBMN workflow uses the entire content of feature quantification table provided. For all the processing tools supported, the mapping between the \" Feature ID \" of the feature quantification table should be consistent with the \" SCAN \" header of the representative spectrum in the MS/MS spectral summary . See this page for example files . Note that internally, the feature quantification table file inputted by the user are converted to a standard internal format prior to FBMN analysis in GNPS. The python scripts used for the conversion feature quantification Table from various software are available here . If you want to add support for another LC-MS processing tool, please contact us.","title":"Feature quantification table"},{"location":"featurebasedmolecularnetworking/#support-for-mz-tab-m-format","text":"The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results. The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. Basically, the mzTab-M file is used to retrieve for each LC-MS/MS feature: The abundance of the LC-MS/MS feature in each sample. The filename ( mzML ) and the index of the most intense associated MS/MS spectrum. Note that currently, the mzTab-M has been tested only with XCMS. More informations in the FBMN with mzTab-M documentation .","title":"Support for mz-Tab-M format"},{"location":"featurebasedmolecularnetworking/#programmatic-access-to-fbmn","text":"For programmatic access to the FBMN workflow, contact Mingxun Wang at miw023@ucsd.edu .","title":"Programmatic Access to FBMN"},{"location":"featurebasedmolecularnetworking/#join-the-gnps-community","text":"For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository . To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.","title":"Join the GNPS Community !"},{"location":"featurebasedmolecularnetworking/#page-contributions","text":"Ming Wang (22.04%), lfnothias (69.65%), Ivan Protsyuk (4.15%), robinschmid (2.88%), mccall-lab-OU (1.28%)","title":"Page Contributions"},{"location":"fileconversion/","text":"Supported Formats at GNPS GNPS supports mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If some of your files are in these formats, please use the following guide to convert them to open formats supported by GNPS. Data Conversion (Super Easy) \u00b6 Drag and drop files on our server here and hit convert. You will receive a download of all the converted files in a zip file that is ready to be analyzed! Data Conversion (Easy) \u00b6 This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzML or legacy mzXML). It is as easy as putting files into a folder and batch converting them all without any installation (well nearly so). Download the zip file here Unzip contents onto a folder on your computer (e.g. Desktop) Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here Put vendor formats in \"Input_Files\" not embedded in other folders Double click on Double-Click_To-Convert.bat - Download zip includes demo files for major vendor formats as a test. Wait patiently Check all the converted files in Output_Folder If there are errors, please check log.txt or read on how to convert files in a more traditional manner. A tip for Waters users: One of the frequent questions from Waters users is about PDA(UV) and LockSpray data contained in converted files. case 1 case 2 case 3 These occur because Waters .Raw files contain UV and LockSpray data as additional 'channels' of MS detector. Some Waters third party softwares can solve this problem, but for cases you have not purchased licenses for the softwares, here we introduce you a temporary expedient. Every channel data are contained as \"_FUNC00X.*\" in Water.Raw files, so just delete them and run \"Double-Click_To-Convert.bat.\" e.g. If LockSprary and UV data are channels 5/6 in your data, put every .Raw files in Input_Files folder, then run cmd, go to Input_Files, and run \"del /s _FUNC005. \" and \"del /s _FUNC006. \" Data Conversion (Traditional) \u00b6 The .mzXML or .mzML formats are strongly preferred and will be discussed below. Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA See more informations about the procedure in this Water Technology Brief Shimadzu .lcd MSConvert For problems with MSConvert, please contact the ProteoWizard developers . If you are a vendor and think there are better methods to convert your files to work with GNPS, let us know by contacting us . Conversion with MSConvert \u00b6 Download and install ProteoWizard from here . Info Make sure to choose a Windows-compatible version (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed. After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert. Click Browse and select file(s) for conversion. Then click Add to add them to the MSConvert workflow. Choose an Output Directory Under Options, choose mzML (prefered) or mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression. Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-2. Click Add to add the filter. Danger Make sure the PeakPicking filter is the first filter in the list (top position), otherwise the conversion will not be centroided! Save the parameters for the next conversion. This will save you some time and prevent misconfiguration. In Presets (left bottom), click on Save Presets, and select \"Save as default for the format\". Click on Start. Check your folder for the new .mzML/.mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS) . Advanced Online Conversion with Proteowizard (MSConvert) \u00b6 It is possible to convert spectrum files online at the sister site - MassIVE. This site is able to handle thermo RAW and Sciex Wiff files. Please check it out here . Page Contributors \u00b6 Ming Wang (74.39%), lfnothias (8.54%), KyobinKang (12.2%), Ivan Protsyuk (4.88%)","title":"Mass Spectrometry File Conversion"},{"location":"fileconversion/#data-conversion-super-easy","text":"Drag and drop files on our server here and hit convert. You will receive a download of all the converted files in a zip file that is ready to be analyzed!","title":"Data Conversion (Super Easy)"},{"location":"fileconversion/#data-conversion-easy","text":"This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzML or legacy mzXML). It is as easy as putting files into a folder and batch converting them all without any installation (well nearly so). Download the zip file here Unzip contents onto a folder on your computer (e.g. Desktop) Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here Put vendor formats in \"Input_Files\" not embedded in other folders Double click on Double-Click_To-Convert.bat - Download zip includes demo files for major vendor formats as a test. Wait patiently Check all the converted files in Output_Folder If there are errors, please check log.txt or read on how to convert files in a more traditional manner. A tip for Waters users: One of the frequent questions from Waters users is about PDA(UV) and LockSpray data contained in converted files. case 1 case 2 case 3 These occur because Waters .Raw files contain UV and LockSpray data as additional 'channels' of MS detector. Some Waters third party softwares can solve this problem, but for cases you have not purchased licenses for the softwares, here we introduce you a temporary expedient. Every channel data are contained as \"_FUNC00X.*\" in Water.Raw files, so just delete them and run \"Double-Click_To-Convert.bat.\" e.g. If LockSprary and UV data are channels 5/6 in your data, put every .Raw files in Input_Files folder, then run cmd, go to Input_Files, and run \"del /s _FUNC005. \" and \"del /s _FUNC006. \"","title":"Data Conversion (Easy)"},{"location":"fileconversion/#data-conversion-traditional","text":"The .mzXML or .mzML formats are strongly preferred and will be discussed below. Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA See more informations about the procedure in this Water Technology Brief Shimadzu .lcd MSConvert For problems with MSConvert, please contact the ProteoWizard developers . If you are a vendor and think there are better methods to convert your files to work with GNPS, let us know by contacting us .","title":"Data Conversion (Traditional)"},{"location":"fileconversion/#conversion-with-msconvert","text":"Download and install ProteoWizard from here . Info Make sure to choose a Windows-compatible version (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed. After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert. Click Browse and select file(s) for conversion. Then click Add to add them to the MSConvert workflow. Choose an Output Directory Under Options, choose mzML (prefered) or mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression. Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-2. Click Add to add the filter. Danger Make sure the PeakPicking filter is the first filter in the list (top position), otherwise the conversion will not be centroided! Save the parameters for the next conversion. This will save you some time and prevent misconfiguration. In Presets (left bottom), click on Save Presets, and select \"Save as default for the format\". Click on Start. Check your folder for the new .mzML/.mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS) .","title":"Conversion with MSConvert"},{"location":"fileconversion/#advanced-online-conversion-with-proteowizard-msconvert","text":"It is possible to convert spectrum files online at the sister site - MassIVE. This site is able to handle thermo RAW and Sciex Wiff files. Please check it out here .","title":"Advanced Online Conversion with Proteowizard (MSConvert)"},{"location":"fileconversion/#page-contributors","text":"Ming Wang (74.39%), lfnothias (8.54%), KyobinKang (12.2%), Ivan Protsyuk (4.88%)","title":"Page Contributors"},{"location":"fileupload/","text":"To upload files to GNPS for analysis, the preferred method is to use an FTP client. This provides a robust and batch manner to upload many files. The one big downside is that you have to have to install an FTP client if you don't already have one. We offer as an alternative an online browser drag and drop that is limited to small files. FTP Batch File Uploads \u00b6 To upload data, this requires you to have already created a GNPS account. If you have not yet done so please follow these instructions . Once you have a GNPS account, it is strongly recommended that you use FTP to upload your dataset files to your account, as opposed to the GNPS web interface. This is because the web-based upload interface is optimized for quick uploads of small files, whereas for the much larger files, FTP is much more stable and robust. To connect to your GNPS user account via FTP, simply log on to the FTP server at massive.ucsd.edu, using the same username and password as your GNPS web account. GNPS FTP Server massive.ucsd.edu To do this, you will need to use your preferred FTP client program. There are many good free FTP clients, but a few of the more popular ones that have been tested with MassIVE include: WinSCP (recommended and used for the example illustrations below) CoreFTP CoffeeCup Free FTP Warning We no longer recommend FileZilla, since it was found to contain malware in a recent update. Most FTP client programs use a similar interface. There is usually some sort of server or session management interface, allowing you to set up and store your connection information for a particular FTP server, and then re-connect to that server easily. For example, in WinSCP: When setting up your FTP server connection, be sure to use plain FTP with no encryption. Then enter massive.ucsd.edu as the server or \u201chost\u201d name (port 21), followed by your GNPS username and password, and the client should connect you to your user file space. From there, you can upload files by finding them on your computer (usually in the left panel) and then dragging them over to the server (usually in the right panel), or you can download files from the server to your computer by dragging them in the reverse direction. You can also experiment with the FTP client interface to move and rename files and folders on the server, so as to reorganize your uploaded data in whatever manner you prefer. Browser File Uploads \u00b6 To upload files to GNPS using the browser, you can use our web drag and drop uploader. Note This browser upload is limited to 20 MB for each size This is not the recommended manner to upload files, but if you're in a hurry, we can't fault you. Located under the upload tab To select the folder to upload files into, click on a single folder in the file structure tree. Now drag and drop your files into the Drag and Drop area to upload. Page Contributors \u00b6 Ming Wang","title":"GNPS File Upload"},{"location":"fileupload/#ftp-batch-file-uploads","text":"To upload data, this requires you to have already created a GNPS account. If you have not yet done so please follow these instructions . Once you have a GNPS account, it is strongly recommended that you use FTP to upload your dataset files to your account, as opposed to the GNPS web interface. This is because the web-based upload interface is optimized for quick uploads of small files, whereas for the much larger files, FTP is much more stable and robust. To connect to your GNPS user account via FTP, simply log on to the FTP server at massive.ucsd.edu, using the same username and password as your GNPS web account. GNPS FTP Server massive.ucsd.edu To do this, you will need to use your preferred FTP client program. There are many good free FTP clients, but a few of the more popular ones that have been tested with MassIVE include: WinSCP (recommended and used for the example illustrations below) CoreFTP CoffeeCup Free FTP Warning We no longer recommend FileZilla, since it was found to contain malware in a recent update. Most FTP client programs use a similar interface. There is usually some sort of server or session management interface, allowing you to set up and store your connection information for a particular FTP server, and then re-connect to that server easily. For example, in WinSCP: When setting up your FTP server connection, be sure to use plain FTP with no encryption. Then enter massive.ucsd.edu as the server or \u201chost\u201d name (port 21), followed by your GNPS username and password, and the client should connect you to your user file space. From there, you can upload files by finding them on your computer (usually in the left panel) and then dragging them over to the server (usually in the right panel), or you can download files from the server to your computer by dragging them in the reverse direction. You can also experiment with the FTP client interface to move and rename files and folders on the server, so as to reorganize your uploaded data in whatever manner you prefer.","title":"FTP Batch File Uploads"},{"location":"fileupload/#browser-file-uploads","text":"To upload files to GNPS using the browser, you can use our web drag and drop uploader. Note This browser upload is limited to 20 MB for each size This is not the recommended manner to upload files, but if you're in a hurry, we can't fault you. Located under the upload tab To select the folder to upload files into, click on a single folder in the file structure tree. Now drag and drop your files into the Drag and Drop area to upload.","title":"Browser File Uploads"},{"location":"fileupload/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"gc-ms-data-processing-MZmine2/","text":"GC-MS data processing with MZmine \u00b6 Below, we describe briefly how to perform processing GC-MS data. To do that, the following steps are required: The detection of masses from the .mzML files to build extracted ion chromatograms The detection of features/peaks from the built chromatograms The spectral deconvolution can be done with one of the following algorithms: \u200b - Hierarchical Clustering \u200b - Multivariate Curve Resolution The alignment of the peaklists The missing peaks search Exporting the files for GNPS Uploading the files to GNPS and run a the GC-MS workflow For detailed instructions and more information about parameters used in the steps 1/2/4, see the section of pre-processing LC-MS data, and for the step 3, see the section pre-processing GC-MS data available in ADAP user manual . At each step, click on \"Help\" to see how to fell out the parameters correctly. Before starting, it is recommended to convert the files to .mzML format, but note that MZmine can also accept .netCDF and several proprietary vendor format. Conversion to mzML with MSConvert \u00b6 The GC-MS data is in the profile mode, then it has to be centroided. To convert and centroid data, please see our conversion guide . Installation of MZmine \u00b6 Download the latest version of MZmine . Once you have your .mzML files and MZmine opened, import your raw data files into a project by following \u201cRaw data methods / raw data import\u201d and select your files. Your .mzML files are now in the \u201cRaw data\u201d window. Save your current project by clicking on \u201cProject / Save project as\u201d. It is important to save your project regularly and for future access to the processing results. Reproducibility with the batch mode After having optimised the parameters in the GUI, it is strongly recommended to consolidate the parameters used for MZmine processing in a batch file (batch mode). This will ensure reproducibility of your analysis. Detection of masses \u00b6 The masses detection is going to detect individual ions in each scan and to generate a mass list of each scan. Select your .mzML files of interest on the \u201cRaw data\u201d window, then go to \u201cRaw data methods / Feature detection / Mass detection\u201d and set a Noise level as shown in the following picture. Make sure your threshold is not too high by clicking on \u201cShow preview\u201d. Then click \u201cok\u201d to process. Detection of peaks \u00b6 Open the ADAP chromatogram builder window by following \u201cRaw data methods / Feature detection / ADAP Chromatogram builder\u201d. This module is going to connect data points from the previously created mass lists of each scan and generate an extracted ion chromatograms. Set the parameters accordingly to the instrument used. Click \u201cHelp\u201d at the bottom of the pop-up window, or go on each parameter to see the details and how to set the parameters properly. When it is finished, click \u201cOK\u201d. Chromatogram/Peak deconvolution \u00b6 The chromatogram deconvolution consists of the detection and the separation of individual peaks in each chromatogram. After selecting your previously generated chromatograms in the \u201cFeature lists\u201d window, open the parameter window by following \u201cFeature list methods / Feature detection / Chromatogram deconvolution\u201d, then select Wavelets (ADAP) for the \u201cAlgorithm\u201d. Then, by clicking on the ellipse, a parameter window opens. Choose Wavelet Coeff. SN and set the parameters accordingly to the instrument used and previous parameters used to generate chromatograms. The RT wavelet range parameter is chosen by looking at the peak-detection results when clicking on \u201cShow preview\u201d. By trying several different values, see when the picks-detection (colored picks) is optimal in some Chromatogram for each Feature list . Then click on the \u201cok\u201d button. This step of peak-detection could take a while. Spectral deconvolution \u00b6 During the spectral deconvolution , similar peaks are combined and then, a pseudo fragmentation spectrum is built (also called deconvoluted spectrum), using peaks intensities. Two spectral deconvolution algorithms are available: Hierarchical Clustering and Multivariate Curve Resolution . \u200b The Hierarchical Clustering is fast but requires users to specify multiple parameters. It can be run by following \u201cFeature list methods / Spectral deconvolution / Hierarchical Clustering\u201d when your previously generated chromatograms deconvoluted are selected. Check the box \u201cShow preview\u201d to preview the first clustering parameters (top right) and peaks that passed the filter with the second clustering parameters (bottom right), by selecting Cluster list from your Feature list . The first parameters Min cluster distance / Min cluster size / Min cluster intensity refer to the ability to combine peaks based on the proximity of their retention times. The filtering parameters are Find shared peaks / Min edge-to-height ratio / Min delta-to-height ratio / Min sharpness / Exclude m/z values . The last parameter Shape-similarity tolerance (0..90) , involved in the second clustering step, refines the clusters by calculating the similarity of the peak\u2019s shapes. Finally, the module \u201cModel based on\u201d allows us to take the highest Sharpness or M/Z value passed peaks to propose as a model peak. When each parameter are set properly, process the spectral deconvolution by clicking on \u201cOK\u201d. \u200b The Multivariate Curve Resolution is slower but only a few parameters are used. Its model peaks that can have arbitrary shapes. Open the parameters window by following \u201cFeature list methods / Spectral deconvolution / Multivariate Curve Resolution\u201d. Because of the spectral deconvolution uses \u201cChromatograms\u201d and detected \u201cPeaks\u201d previously generated, the user must select them using the \u201cSpecific feature lists\u201d option for both, then click on the ellipsis button and check the boxes of the chromatograms and peaks list of interest, or using the \u201cFeature list name pattern\u201d option. After those parameters are set, click \u201cOk\u201d. When the selection is finished, crossing \u201cShow preview\u201d allows to see the influence of the parameters on the Clusters for each Feature list . Look at the preview plot (top right) for the Deconvolution window tolerance width parameter and the model peaks (right bottom) for Retention time tolerance and Minimum Number of Peaks parameters. Process the spectral deconvolution with the \u201cOk\u201d button. Alignment of the peak lists accross multiple samples \u00b6 The ADAP alignment module calculates the similarity between fragmentation mass spectra to find the best alignment. When the previously generated spectral deconvolution lists are selected, set the alignment parameters in the window which opens when following \u201cFeature list method / Alignment / ADAP Aligner (GC)\u201d. Click \u201cOk\u201d, then the aligned feature list appears in the \u201cFeature lists\u201d window. Missing peaks search \u00b6 Finally, a module named \u201c Peak finder (multithreaded)\u201d, available in \u201cFeature list methods / Gap filling / Peak finder (multithreaded)\u201d is used to search and find missing peaks in the feature list previously generated from the peaks in the raw data. Select your aligned feature list, then apply peak finder parameters by clicking \u201cOk\u201d. Open the generated aligned table by double-clicking on it. Taking a look at this table can help to define if the used parameters are good enough. This table can, not only be ordered by the ID , giving information about the number of detected features, but also by the m/z or the RT . Export results \u00b6 A new module (introduced in MZmine 2.52) allows to export the GC-MS data processing results (feature quantification table as .CSV and a spectral summary file as .MGF) into the correct input format for the GNPS GC-MS library search workflow. The export module is available at \u201cFeature list methods / Export / Import / Export to GNPS-GC-MS (with ADAP)\u201d. In the open window, complete the filename and press \u201cOk\u201d. The exported files are the .MGF file containing the deconvolved EI spectra and the .CSV feature quantification table. Those exported .MGF file and .CSV feature table can be used for the GNPS library search/molecular networking workflow directly, without any modifications. They need to be provided as input files by adding to the: \u201cDeconvolved EI Spectra MGF File\u201d and \u201cFeature Quantification Table\u201d correspondingly. Uploading the files to GNPS and run a the GC-MS workflow \u00b6 Please refer to the following page for more information on the GC-GNPS workflow . Kovats RI marker file in MZmine \u00b6 MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format. See tutorial video on Kovats RI marker file creation within MZmine. Citation \u00b6 Jiang W, Qiu Y, Ni Y, Su M, Jia W, Du X: An automated data analysis pipeline for GC-TOF-MS metabonomics studies. J Proteome Res 2010, 9(11):5974-5981. Ni Y, Qiu Y, Jiang W, Suttlemyre K, Su M, Zhang W, Jia W, Du X: ADAP-GC 2.0: deconvolution of coeluting metabolites from GC/TOF-MS data for metabolomics studies. Anal Chem 2012, 84(15):6619-6629. Ni Y, Su M, Qiu Y, Jia W, Du X: ADAP-GC 3.0: Improved Peak Detection and De-convolution of Co-eluting Metabolites from GC/TOF-MS Data for Metabolomics Studies. Anal Chem 2016, 88(17):8802-8811. Page Contributors \u00b6 Ming Wang (1.59%), MelissaESPOSITO (98.41%)","title":"GC-MS data processing with MZmine"},{"location":"gc-ms-data-processing-MZmine2/#gc-ms-data-processing-with-mzmine","text":"Below, we describe briefly how to perform processing GC-MS data. To do that, the following steps are required: The detection of masses from the .mzML files to build extracted ion chromatograms The detection of features/peaks from the built chromatograms The spectral deconvolution can be done with one of the following algorithms: \u200b - Hierarchical Clustering \u200b - Multivariate Curve Resolution The alignment of the peaklists The missing peaks search Exporting the files for GNPS Uploading the files to GNPS and run a the GC-MS workflow For detailed instructions and more information about parameters used in the steps 1/2/4, see the section of pre-processing LC-MS data, and for the step 3, see the section pre-processing GC-MS data available in ADAP user manual . At each step, click on \"Help\" to see how to fell out the parameters correctly. Before starting, it is recommended to convert the files to .mzML format, but note that MZmine can also accept .netCDF and several proprietary vendor format.","title":"GC-MS data processing with MZmine"},{"location":"gc-ms-data-processing-MZmine2/#conversion-to-mzml-with-msconvert","text":"The GC-MS data is in the profile mode, then it has to be centroided. To convert and centroid data, please see our conversion guide .","title":"Conversion to mzML with MSConvert"},{"location":"gc-ms-data-processing-MZmine2/#installation-of-mzmine","text":"Download the latest version of MZmine . Once you have your .mzML files and MZmine opened, import your raw data files into a project by following \u201cRaw data methods / raw data import\u201d and select your files. Your .mzML files are now in the \u201cRaw data\u201d window. Save your current project by clicking on \u201cProject / Save project as\u201d. It is important to save your project regularly and for future access to the processing results. Reproducibility with the batch mode After having optimised the parameters in the GUI, it is strongly recommended to consolidate the parameters used for MZmine processing in a batch file (batch mode). This will ensure reproducibility of your analysis.","title":"Installation of MZmine"},{"location":"gc-ms-data-processing-MZmine2/#detection-of-masses","text":"The masses detection is going to detect individual ions in each scan and to generate a mass list of each scan. Select your .mzML files of interest on the \u201cRaw data\u201d window, then go to \u201cRaw data methods / Feature detection / Mass detection\u201d and set a Noise level as shown in the following picture. Make sure your threshold is not too high by clicking on \u201cShow preview\u201d. Then click \u201cok\u201d to process.","title":"Detection of masses"},{"location":"gc-ms-data-processing-MZmine2/#detection-of-peaks","text":"Open the ADAP chromatogram builder window by following \u201cRaw data methods / Feature detection / ADAP Chromatogram builder\u201d. This module is going to connect data points from the previously created mass lists of each scan and generate an extracted ion chromatograms. Set the parameters accordingly to the instrument used. Click \u201cHelp\u201d at the bottom of the pop-up window, or go on each parameter to see the details and how to set the parameters properly. When it is finished, click \u201cOK\u201d.","title":"Detection of peaks"},{"location":"gc-ms-data-processing-MZmine2/#chromatogrampeak-deconvolution","text":"The chromatogram deconvolution consists of the detection and the separation of individual peaks in each chromatogram. After selecting your previously generated chromatograms in the \u201cFeature lists\u201d window, open the parameter window by following \u201cFeature list methods / Feature detection / Chromatogram deconvolution\u201d, then select Wavelets (ADAP) for the \u201cAlgorithm\u201d. Then, by clicking on the ellipse, a parameter window opens. Choose Wavelet Coeff. SN and set the parameters accordingly to the instrument used and previous parameters used to generate chromatograms. The RT wavelet range parameter is chosen by looking at the peak-detection results when clicking on \u201cShow preview\u201d. By trying several different values, see when the picks-detection (colored picks) is optimal in some Chromatogram for each Feature list . Then click on the \u201cok\u201d button. This step of peak-detection could take a while.","title":"Chromatogram/Peak deconvolution"},{"location":"gc-ms-data-processing-MZmine2/#spectral-deconvolution","text":"During the spectral deconvolution , similar peaks are combined and then, a pseudo fragmentation spectrum is built (also called deconvoluted spectrum), using peaks intensities. Two spectral deconvolution algorithms are available: Hierarchical Clustering and Multivariate Curve Resolution . \u200b The Hierarchical Clustering is fast but requires users to specify multiple parameters. It can be run by following \u201cFeature list methods / Spectral deconvolution / Hierarchical Clustering\u201d when your previously generated chromatograms deconvoluted are selected. Check the box \u201cShow preview\u201d to preview the first clustering parameters (top right) and peaks that passed the filter with the second clustering parameters (bottom right), by selecting Cluster list from your Feature list . The first parameters Min cluster distance / Min cluster size / Min cluster intensity refer to the ability to combine peaks based on the proximity of their retention times. The filtering parameters are Find shared peaks / Min edge-to-height ratio / Min delta-to-height ratio / Min sharpness / Exclude m/z values . The last parameter Shape-similarity tolerance (0..90) , involved in the second clustering step, refines the clusters by calculating the similarity of the peak\u2019s shapes. Finally, the module \u201cModel based on\u201d allows us to take the highest Sharpness or M/Z value passed peaks to propose as a model peak. When each parameter are set properly, process the spectral deconvolution by clicking on \u201cOK\u201d. \u200b The Multivariate Curve Resolution is slower but only a few parameters are used. Its model peaks that can have arbitrary shapes. Open the parameters window by following \u201cFeature list methods / Spectral deconvolution / Multivariate Curve Resolution\u201d. Because of the spectral deconvolution uses \u201cChromatograms\u201d and detected \u201cPeaks\u201d previously generated, the user must select them using the \u201cSpecific feature lists\u201d option for both, then click on the ellipsis button and check the boxes of the chromatograms and peaks list of interest, or using the \u201cFeature list name pattern\u201d option. After those parameters are set, click \u201cOk\u201d. When the selection is finished, crossing \u201cShow preview\u201d allows to see the influence of the parameters on the Clusters for each Feature list . Look at the preview plot (top right) for the Deconvolution window tolerance width parameter and the model peaks (right bottom) for Retention time tolerance and Minimum Number of Peaks parameters. Process the spectral deconvolution with the \u201cOk\u201d button.","title":"Spectral deconvolution"},{"location":"gc-ms-data-processing-MZmine2/#alignment-of-the-peak-lists-accross-multiple-samples","text":"The ADAP alignment module calculates the similarity between fragmentation mass spectra to find the best alignment. When the previously generated spectral deconvolution lists are selected, set the alignment parameters in the window which opens when following \u201cFeature list method / Alignment / ADAP Aligner (GC)\u201d. Click \u201cOk\u201d, then the aligned feature list appears in the \u201cFeature lists\u201d window.","title":"Alignment of the peak lists accross multiple samples"},{"location":"gc-ms-data-processing-MZmine2/#missing-peaks-search","text":"Finally, a module named \u201c Peak finder (multithreaded)\u201d, available in \u201cFeature list methods / Gap filling / Peak finder (multithreaded)\u201d is used to search and find missing peaks in the feature list previously generated from the peaks in the raw data. Select your aligned feature list, then apply peak finder parameters by clicking \u201cOk\u201d. Open the generated aligned table by double-clicking on it. Taking a look at this table can help to define if the used parameters are good enough. This table can, not only be ordered by the ID , giving information about the number of detected features, but also by the m/z or the RT .","title":"Missing peaks search"},{"location":"gc-ms-data-processing-MZmine2/#export-results","text":"A new module (introduced in MZmine 2.52) allows to export the GC-MS data processing results (feature quantification table as .CSV and a spectral summary file as .MGF) into the correct input format for the GNPS GC-MS library search workflow. The export module is available at \u201cFeature list methods / Export / Import / Export to GNPS-GC-MS (with ADAP)\u201d. In the open window, complete the filename and press \u201cOk\u201d. The exported files are the .MGF file containing the deconvolved EI spectra and the .CSV feature quantification table. Those exported .MGF file and .CSV feature table can be used for the GNPS library search/molecular networking workflow directly, without any modifications. They need to be provided as input files by adding to the: \u201cDeconvolved EI Spectra MGF File\u201d and \u201cFeature Quantification Table\u201d correspondingly.","title":"Export results"},{"location":"gc-ms-data-processing-MZmine2/#uploading-the-files-to-gnps-and-run-a-the-gc-ms-workflow","text":"Please refer to the following page for more information on the GC-GNPS workflow .","title":"Uploading the files to GNPS and run a the GC-MS workflow"},{"location":"gc-ms-data-processing-MZmine2/#kovats-ri-marker-file-in-mzmine","text":"MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format. See tutorial video on Kovats RI marker file creation within MZmine.","title":"Kovats RI marker file in MZmine"},{"location":"gc-ms-data-processing-MZmine2/#citation","text":"Jiang W, Qiu Y, Ni Y, Su M, Jia W, Du X: An automated data analysis pipeline for GC-TOF-MS metabonomics studies. J Proteome Res 2010, 9(11):5974-5981. Ni Y, Qiu Y, Jiang W, Suttlemyre K, Su M, Zhang W, Jia W, Du X: ADAP-GC 2.0: deconvolution of coeluting metabolites from GC/TOF-MS data for metabolomics studies. Anal Chem 2012, 84(15):6619-6629. Ni Y, Su M, Qiu Y, Jia W, Du X: ADAP-GC 3.0: Improved Peak Detection and De-convolution of Co-eluting Metabolites from GC/TOF-MS Data for Metabolomics Studies. Anal Chem 2016, 88(17):8802-8811.","title":"Citation"},{"location":"gc-ms-data-processing-MZmine2/#page-contributors","text":"Ming Wang (1.59%), MelissaESPOSITO (98.41%)","title":"Page Contributors"},{"location":"gc-ms-data_processing_MS-DIAL/","text":"GC-MS data processing with MS-DIAL \u00b6 Convert data \u00b6 To convert the Vendor specific files, go here to download and use msConvert or the default GNPS File converter on GNPS-quickstart (drag and drop). Browse the RAW files from Vendor into MSConvert interface. Typically .mzML output format is chosen with binary code precision of 64 bit for high resolution spectra. Uncheck the \u201cUse zlib compression\u201d option and select msLevel 1. Also, .mzML format is amenable to MS-DIAL analysis. The MSConvert window looks like: Download the most updated version of MS-DIAL from RIKEN PRIMe site. MS-DIAL has an extensive tutorial for step-by-step guidance here . Open MS-DIAL by clicking on the icon or shortcut. Processing data \u00b6 In the MS-DIAL software interface pops up, import your file by clicking on \u201cFile\u201d option. As highlighted for the GC-EI-MS data, choose \u201cHard ionization\u201d and then choose \u201cCentroid\u201d or \u201cProfile\u201d based on your mass-spec vendor data. You may add other information under the \u201cAdvanced\u201d tag for more meta data. In this window, click on \u201cBrowse\u201d to open the folders where the converted .mzML files are stored. The project file path and where the converted files need to sit have to be identical, and assigns a project ID with .mtd suffix. Hit \u201cNext\u201d to go to the next page. On the next page, click \u201cBrowse\u201d and choose the files that you need to analyze. In this window, the user needs to associate correct File names with their types (standard, samples, QC, Blank etc...), and assign them a Class ID. Any analytical order information, various batches or different injection volume can be set if needed. Then, hit next. In the new window, provide \u201c Data collection \u201d information such as mass range begin and end , depending on your data, Retention time (min), and Number of threads which could be left at the default value of 1. In the \u201c Peak Detection \u201d Window, provide the Minimum peak height information, which is typically 10,000 or higher for high resolution instruments like QEGC-Orbitrap-MS. For accurate mass , the box must be check, and provide same values for the Mass slice width and Mass accuracy . \"Advanced\" option can be left as default. In the \u201c MS1Dec \u201d tab, the \"Deconvolution parameters\" can be set as shown in the picture. The \u201c Identification \u201d tab should not be completed as the library search is performed on GNPS. Click on the \u201c Alignment \u201d tab, a default \u201cResult name\u201d is given to the alignment table, but the user can change it. Alignment can be based on RI or RT . An additional EI similarity tolerance can be set during alignment as well. The advanced parameters can be optionally changed. The last tab named \u201c Filtering \u201d, allows the user to set certain filters depending on the question in hand or ignore it. Once all Tabs are filled with user specific/default options, the user can click \u201cFinish\u201d to start the process. Visualize data \u00b6 A successfully finished job window on MS-DIAL looks like: By clicking on the \u201cAlignment navigator\u201d panel (bottom left) on the specific alignment result file, user can see the generated alignment table. This table can be sorted by ID , RT , RI , Quant mass , S/N , and other statistical values, and/or filtered by Metabolite name , m/z range , or RT range . Export results \u00b6 To export the generated tables, click on the \u201cExport\u201d tab, and chose \u201c Alignment Result export \u201d. In the Alignment window, chose a \"Directory\" to save the results, and select the correct \u201cfile\u201d corresponding to your aligned table. The user should check Raw data matrix (Height and Area), Normalized data matrix , Representative spectra , Parameters , Peak ID matrix , Retention time matrix , m/z matrix , and S/N matrix export boxes. Spectra-type should be selected to \u2018centroid\u2019 and as \u201c.mgf\u201d format for the downstream GNPS analysis workflows. Then, the user can click \u201cExport\u201d. A new module on GNPS allows to use the results of MS-DIAL processing (quantification table as area.TXT and a spectral summary file as .MGF) into the correct input format to lunch the GC-GNPS workflow. Uploading the files to GNPS and run a the GC-MS workflow \u00b6 Please refer to the following page for more information on the GC-GNPS workflow . Citation \u00b6 Tsugawa, H., Cajka, T., Kind, T. et al. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nat Methods 12, 523\u2013526 (2015). Page Contributors \u00b6 Ming Wang (2.33%), MelissaESPOSITO (97.67%)","title":"GC-MS data processing with MS-DIAL"},{"location":"gc-ms-data_processing_MS-DIAL/#gc-ms-data-processing-with-ms-dial","text":"","title":"GC-MS data processing with MS-DIAL"},{"location":"gc-ms-data_processing_MS-DIAL/#convert-data","text":"To convert the Vendor specific files, go here to download and use msConvert or the default GNPS File converter on GNPS-quickstart (drag and drop). Browse the RAW files from Vendor into MSConvert interface. Typically .mzML output format is chosen with binary code precision of 64 bit for high resolution spectra. Uncheck the \u201cUse zlib compression\u201d option and select msLevel 1. Also, .mzML format is amenable to MS-DIAL analysis. The MSConvert window looks like: Download the most updated version of MS-DIAL from RIKEN PRIMe site. MS-DIAL has an extensive tutorial for step-by-step guidance here . Open MS-DIAL by clicking on the icon or shortcut.","title":"Convert data"},{"location":"gc-ms-data_processing_MS-DIAL/#processing-data","text":"In the MS-DIAL software interface pops up, import your file by clicking on \u201cFile\u201d option. As highlighted for the GC-EI-MS data, choose \u201cHard ionization\u201d and then choose \u201cCentroid\u201d or \u201cProfile\u201d based on your mass-spec vendor data. You may add other information under the \u201cAdvanced\u201d tag for more meta data. In this window, click on \u201cBrowse\u201d to open the folders where the converted .mzML files are stored. The project file path and where the converted files need to sit have to be identical, and assigns a project ID with .mtd suffix. Hit \u201cNext\u201d to go to the next page. On the next page, click \u201cBrowse\u201d and choose the files that you need to analyze. In this window, the user needs to associate correct File names with their types (standard, samples, QC, Blank etc...), and assign them a Class ID. Any analytical order information, various batches or different injection volume can be set if needed. Then, hit next. In the new window, provide \u201c Data collection \u201d information such as mass range begin and end , depending on your data, Retention time (min), and Number of threads which could be left at the default value of 1. In the \u201c Peak Detection \u201d Window, provide the Minimum peak height information, which is typically 10,000 or higher for high resolution instruments like QEGC-Orbitrap-MS. For accurate mass , the box must be check, and provide same values for the Mass slice width and Mass accuracy . \"Advanced\" option can be left as default. In the \u201c MS1Dec \u201d tab, the \"Deconvolution parameters\" can be set as shown in the picture. The \u201c Identification \u201d tab should not be completed as the library search is performed on GNPS. Click on the \u201c Alignment \u201d tab, a default \u201cResult name\u201d is given to the alignment table, but the user can change it. Alignment can be based on RI or RT . An additional EI similarity tolerance can be set during alignment as well. The advanced parameters can be optionally changed. The last tab named \u201c Filtering \u201d, allows the user to set certain filters depending on the question in hand or ignore it. Once all Tabs are filled with user specific/default options, the user can click \u201cFinish\u201d to start the process.","title":"Processing data"},{"location":"gc-ms-data_processing_MS-DIAL/#visualize-data","text":"A successfully finished job window on MS-DIAL looks like: By clicking on the \u201cAlignment navigator\u201d panel (bottom left) on the specific alignment result file, user can see the generated alignment table. This table can be sorted by ID , RT , RI , Quant mass , S/N , and other statistical values, and/or filtered by Metabolite name , m/z range , or RT range .","title":"Visualize data"},{"location":"gc-ms-data_processing_MS-DIAL/#export-results","text":"To export the generated tables, click on the \u201cExport\u201d tab, and chose \u201c Alignment Result export \u201d. In the Alignment window, chose a \"Directory\" to save the results, and select the correct \u201cfile\u201d corresponding to your aligned table. The user should check Raw data matrix (Height and Area), Normalized data matrix , Representative spectra , Parameters , Peak ID matrix , Retention time matrix , m/z matrix , and S/N matrix export boxes. Spectra-type should be selected to \u2018centroid\u2019 and as \u201c.mgf\u201d format for the downstream GNPS analysis workflows. Then, the user can click \u201cExport\u201d. A new module on GNPS allows to use the results of MS-DIAL processing (quantification table as area.TXT and a spectral summary file as .MGF) into the correct input format to lunch the GC-GNPS workflow.","title":"Export results"},{"location":"gc-ms-data_processing_MS-DIAL/#uploading-the-files-to-gnps-and-run-a-the-gc-ms-workflow","text":"Please refer to the following page for more information on the GC-GNPS workflow .","title":"Uploading the files to GNPS and run a the GC-MS workflow"},{"location":"gc-ms-data_processing_MS-DIAL/#citation","text":"Tsugawa, H., Cajka, T., Kind, T. et al. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nat Methods 12, 523\u2013526 (2015).","title":"Citation"},{"location":"gc-ms-data_processing_MS-DIAL/#page-contributors","text":"Ming Wang (2.33%), MelissaESPOSITO (97.67%)","title":"Page Contributors"},{"location":"gc-ms-deconvolution/","text":"GC-MS Deconvolution for GNPS \u00b6 The GC-MS data have to be processed before performing the spectral library search and molecular networking workflow . See more information here . Below, we describe how to use the GC-MS deconvolution workflow on GNPS that uses MS-Hub. Alternatively, ADAP-MZmine or MS-DIAL can be used. GC-MS Deconvolution Workflow on GNPS with MS-Hub \u00b6 Configure the Workflow \u00b6 Log in to GNPS ( gnps.ucsd.edu ). If an account has to be created first, refer to GNPS documentation at the quickstart banner. Before starting, files from GC-MS analysis must be converted from proprietary vendor formats to .mzML, or .CDF file formats. To convert, please see our conversion guide . The GNPS home page includes two sections to launch GNPS GC-MS data analysis job, one for data processing - deconvolution and one for GC-MS library search/networking. By clicking on the \u201cProcess Raw GC-MS data\u201d icon , a job page opens. (1) Start by entering the title of your job. (2) The \u201cSelect Files\u201d section allows importing existing or previously uploaded dataset(s) from MassIVE. Select the files that need to be processed by clicking on \u201cSelect Input Files\u201d. A pop-up window appears with three tabs: \u201cSelect Input Files\u201d, \u201cUpload Files\u201d, and \u201cShare Files\u201d. To upload files to GNPS using the browser (limited to 20MB), you can use our web drag and drop uploader in the \u201cUpload Files\u201d banner. See the documentation here for more information. (3) Readers following the tutorial can go to the \u201cShare Files\u201d tab, enter the MassIVE accession number for the dataset (e.g. MSV000084226 ) in the \u201cImport Data Share\u201d box. (4) Then click on \u201cImport\u201d. (5) This specific dataset is now available directly in your GNPS user workspace at the \u201cSelect Input Files\u201d section. (6) Select the input file, who appears highlighted in blue color, and click on \u201cSpectrum files\u201d. (7) When the selected files are visible in the \u201cSelected Spectrum Files\u201d box, click on the \u201cFinish Selection\u201d button. NOTE: All of the data used for the job must be collected using the same GC protocol (temperature program, column, injection mode). Multiple datasets could be combined as long as the data have been collected using the same protocol. When creating a dataset on MassIVE ( massive.ucsd.edu ), include \u201cGNPS\u201d and \u201cGC\u201d in the name (As GNPS_GC_Name of the GNPS-MassIVE dataset). See the documentation about Dataset Creation/Sharing and an example of a MassIVE dataset MSV000084226 for more information. An insufficient volume of data causes unstable deconvolution resulting in spurious low-quality spectra. It is recommended for datasets smaller than ~10 files to use alternative deconvolution solutions such as MZMine2/ADAP, MS-Dial or XCMS. Increasing the number of files, for example, could be done by co-analyzing multiple datasets obtained with the same experimental protocol. The \u201cAdvanced MSHub Processing\u201d section displays some automatic setting parameters (related to peak symmetry and baseline adjustment) determined internally by MSHub. The user does not need to provide settings, although they can be set manually, should the user choose to do so. (8) In the \u201cAdvanced Clustering\u201d section , the cluster spectra have to be turned off (CLUSTER_SPECTRA = NO). The TIME_UNIT must be set as minutes or seconds, depending on the chromatography time units of your data (typically the default time units are seconds in NetCDF files and minutes in .mzML files). (9) Enter your email address. (10) Finish by clicking \u201cSubmit\u201d. Inspect the Results \u00b6 When the job has been completed, you will receive a notification email and the status \u201cDONE\u201d appears on your GNPS job. All submitted jobs appear under the \u201cjobs\u201d link from the GNPS main menu. By selecting the job of interest and clicking on the \u201cDone\u201d button, the \u201cJob Status\u201d window opens with different options: (i) Explore deconvolution results with the \u201cView All Deconvolved Spectra\u201d option. (ii) Download/export quantification results and feature table by clicking on \u201cDownload Spectra as MGF\u201d, \u201cDownload Feature Table\u201d (MZmine formatted), \"Download MSHub Data Integral Table\", or \"Download MSHub Spectra Data\". (iii) Continue the process with the \u201cSearch Spectral Library and Molecular Network\u201d tool to conduct a library search and create a molecular network. The first line of the MSHub data integral table indicates the retention time (in min.) with a balance score in parenthesis (in percentage). The \u201cRel. Max Integral\u201d and \u201cSample\\Best order\u201d values relate to the relative proportion of each peak in the data and the ranking of the feature in terms of its size, correspondingly. The feature table is formatted as a MZmine table output. GC-MS data processing with ADAP-MZmine \u00b6 Deconvolution of GC-EI-MS data can be performed within MZmine. User can follow the ADAP step-by-step documentation here or refer to the ADAP manual on the MZmine website for detailed instructions. Kovats RI marker file in MZmine \u00b6 MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format for this particular input. See tutorial video on Kovats RI marker file creation within MZmine. GC-MS data processing with MS-DIAL \u00b6 Deconvolution of GC-EI-MS data can be performed within MS-DIAL. User can follow the step-by-step documentation here or refer to the MS-DIAL documentation website for detailed introduction. Citation \u00b6 Aksenov, A. A. et al Algorithmic Learning for Auto-deconvolution of GC-MS Data to Enable Molecular Networking within GNPS. https://doi.org/10.1101/2020.01.13.905091 Page Contributors \u00b6 Ming Wang (2.11%), MelissaESPOSITO (96.84%), robinschmid (1.05%)","title":"GC-MS Deconvolution"},{"location":"gc-ms-deconvolution/#gc-ms-deconvolution-for-gnps","text":"The GC-MS data have to be processed before performing the spectral library search and molecular networking workflow . See more information here . Below, we describe how to use the GC-MS deconvolution workflow on GNPS that uses MS-Hub. Alternatively, ADAP-MZmine or MS-DIAL can be used.","title":"GC-MS Deconvolution for GNPS"},{"location":"gc-ms-deconvolution/#gc-ms-deconvolution-workflow-on-gnps-with-ms-hub","text":"","title":"GC-MS Deconvolution Workflow on GNPS with MS-Hub"},{"location":"gc-ms-deconvolution/#configure-the-workflow","text":"Log in to GNPS ( gnps.ucsd.edu ). If an account has to be created first, refer to GNPS documentation at the quickstart banner. Before starting, files from GC-MS analysis must be converted from proprietary vendor formats to .mzML, or .CDF file formats. To convert, please see our conversion guide . The GNPS home page includes two sections to launch GNPS GC-MS data analysis job, one for data processing - deconvolution and one for GC-MS library search/networking. By clicking on the \u201cProcess Raw GC-MS data\u201d icon , a job page opens. (1) Start by entering the title of your job. (2) The \u201cSelect Files\u201d section allows importing existing or previously uploaded dataset(s) from MassIVE. Select the files that need to be processed by clicking on \u201cSelect Input Files\u201d. A pop-up window appears with three tabs: \u201cSelect Input Files\u201d, \u201cUpload Files\u201d, and \u201cShare Files\u201d. To upload files to GNPS using the browser (limited to 20MB), you can use our web drag and drop uploader in the \u201cUpload Files\u201d banner. See the documentation here for more information. (3) Readers following the tutorial can go to the \u201cShare Files\u201d tab, enter the MassIVE accession number for the dataset (e.g. MSV000084226 ) in the \u201cImport Data Share\u201d box. (4) Then click on \u201cImport\u201d. (5) This specific dataset is now available directly in your GNPS user workspace at the \u201cSelect Input Files\u201d section. (6) Select the input file, who appears highlighted in blue color, and click on \u201cSpectrum files\u201d. (7) When the selected files are visible in the \u201cSelected Spectrum Files\u201d box, click on the \u201cFinish Selection\u201d button. NOTE: All of the data used for the job must be collected using the same GC protocol (temperature program, column, injection mode). Multiple datasets could be combined as long as the data have been collected using the same protocol. When creating a dataset on MassIVE ( massive.ucsd.edu ), include \u201cGNPS\u201d and \u201cGC\u201d in the name (As GNPS_GC_Name of the GNPS-MassIVE dataset). See the documentation about Dataset Creation/Sharing and an example of a MassIVE dataset MSV000084226 for more information. An insufficient volume of data causes unstable deconvolution resulting in spurious low-quality spectra. It is recommended for datasets smaller than ~10 files to use alternative deconvolution solutions such as MZMine2/ADAP, MS-Dial or XCMS. Increasing the number of files, for example, could be done by co-analyzing multiple datasets obtained with the same experimental protocol. The \u201cAdvanced MSHub Processing\u201d section displays some automatic setting parameters (related to peak symmetry and baseline adjustment) determined internally by MSHub. The user does not need to provide settings, although they can be set manually, should the user choose to do so. (8) In the \u201cAdvanced Clustering\u201d section , the cluster spectra have to be turned off (CLUSTER_SPECTRA = NO). The TIME_UNIT must be set as minutes or seconds, depending on the chromatography time units of your data (typically the default time units are seconds in NetCDF files and minutes in .mzML files). (9) Enter your email address. (10) Finish by clicking \u201cSubmit\u201d.","title":"Configure the Workflow"},{"location":"gc-ms-deconvolution/#inspect-the-results","text":"When the job has been completed, you will receive a notification email and the status \u201cDONE\u201d appears on your GNPS job. All submitted jobs appear under the \u201cjobs\u201d link from the GNPS main menu. By selecting the job of interest and clicking on the \u201cDone\u201d button, the \u201cJob Status\u201d window opens with different options: (i) Explore deconvolution results with the \u201cView All Deconvolved Spectra\u201d option. (ii) Download/export quantification results and feature table by clicking on \u201cDownload Spectra as MGF\u201d, \u201cDownload Feature Table\u201d (MZmine formatted), \"Download MSHub Data Integral Table\", or \"Download MSHub Spectra Data\". (iii) Continue the process with the \u201cSearch Spectral Library and Molecular Network\u201d tool to conduct a library search and create a molecular network. The first line of the MSHub data integral table indicates the retention time (in min.) with a balance score in parenthesis (in percentage). The \u201cRel. Max Integral\u201d and \u201cSample\\Best order\u201d values relate to the relative proportion of each peak in the data and the ranking of the feature in terms of its size, correspondingly. The feature table is formatted as a MZmine table output.","title":"Inspect the Results"},{"location":"gc-ms-deconvolution/#gc-ms-data-processing-with-adap-mzmine","text":"Deconvolution of GC-EI-MS data can be performed within MZmine. User can follow the ADAP step-by-step documentation here or refer to the ADAP manual on the MZmine website for detailed instructions.","title":"GC-MS data processing with ADAP-MZmine"},{"location":"gc-ms-deconvolution/#kovats-ri-marker-file-in-mzmine","text":"MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format for this particular input. See tutorial video on Kovats RI marker file creation within MZmine.","title":"Kovats RI marker file in MZmine"},{"location":"gc-ms-deconvolution/#gc-ms-data-processing-with-ms-dial","text":"Deconvolution of GC-EI-MS data can be performed within MS-DIAL. User can follow the step-by-step documentation here or refer to the MS-DIAL documentation website for detailed introduction.","title":"GC-MS data processing with MS-DIAL"},{"location":"gc-ms-deconvolution/#citation","text":"Aksenov, A. A. et al Algorithmic Learning for Auto-deconvolution of GC-MS Data to Enable Molecular Networking within GNPS. https://doi.org/10.1101/2020.01.13.905091","title":"Citation"},{"location":"gc-ms-deconvolution/#page-contributors","text":"Ming Wang (2.11%), MelissaESPOSITO (96.84%), robinschmid (1.05%)","title":"Page Contributors"},{"location":"gc-ms-library-molecular-network/","text":"GC-MS Spectral Library Search and Molecular Networking \u00b6 Configure the workflow \u00b6 There are two options to open the job page for conducting a spectral library search and create a molecular network. By clicking on the link \u201cSearch Spectral Library and Molecular Network\u201d from the deconvolution job page status. See GC-MS Deconvolution for GNPS documentation. By clicking on the \u201cAnalyze\u201d icon from the GNPS home page. The \"Search Option\" section in the job window allows importing files needed for the spectral library search and the molecular networking generation. By clicking on \"select Input Files\", a pop-up window appears, allowing to select every needed file. (1), (2) The .mgf file containing the deconvolved EI spectra and the .csv feature quantification table automatically (with balance score) adds if the spectral library search is launched from the deconvolution job performed with MS-Hub. Otherwise, they can be added by the user from others processing software (MS-DIAL, MZmine2, etc...). The quantification table can be exported from the follow tools: MZmine2 MS-Dial MS-Hub (3) Select your metadata table formatted as a tab-separated .txt file. To create your metadata table properly, see the documentation here . (4) Public Libraries files are selected by default. However, user could add their libraries on GNPS by following the instructions here , or by uploading them in .mgf format (drag and drop on \u201cUpload File\u201d section). If the libraries are curated and could be shared with the community, it is encouraged to upload them to GNPS. (5) The carbon marker table should be added. This table must be formatted as a comma separated values (.csv) file in the following headers: Compound_Name - name of the compound (string), Carbon_Number - number of carbons (integer), RT - retention time in seconds (float). Example File . The file can also be created from the raw experimental chromatograms of the RI marker compounds using MZMine2 as described in this video tutorial . (6) Click on the \"Finish selection\" button to close the pop-up window. Search Options Fragment Ion Mass Tolerance is the maximum mass deviation between the observed fragments and the ions selected within the libraries. The mass tolerance setting is related to the accuracy of the mass analyzer. Default value is \u00b1 0.025 Da for high-resolution mass spectrometers (q-TOF, q-Orbitrap) while \u00b1 2.0 Da is recommended for low-resolution MS/MS instruments (ion traps, triple-quadrupole/QqQ). Min Matched Peaks is the minimum number of common fragment ions that should share a spectra to be considered as a spectral library annotation. This parameter should be tuned depending on the molecules of interest and experimental conditions. It is recommended to perform several jobs modifying this parameter for testing possible outcomes variations in annotations. Typically high quality features contain more than 15 ions in EI data. Score Threshold is the minimum cosine score to be considered as an annotation in spectral library search. 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and it usually performs well with data obtained through experiments without derivatization, but that will depend on the quality of the mass spectra obtained. For derivatized compounds, the cosine value for good matches is generally lower by ~0.1 due to an inferior quality of the EI spectra. The job window proposed four fields of advanced search, filtering, network, and Kovats index calculation options. Click on the \u201cShow Fields\u201d button to show advanced options. The default parameters recommended for obtaining good results have been determined and pre-populated as described in the table Parameters for Library Search. However, users are encouraged to adjust the settings as appropriate for their analysis. (7) Enter your email address. (8) The job can be launched by clicking on the \u201cSubmit\u201d button. Advanced Search Options Library Class is the level of library to include hits. Keep default of \u201cBronze\u201d to include all possible hits from libraries. Top Hits Per Spectrum is how many top hits ranked by the cosine score to be included into the results. It is recommended to keep this number relatively high (for example, 10 to include top 10 matches) to increase the possibility to have a correct annotation if it is not in the first top hit. Spectral Library allows to select spectral libraries to include in the search. Advanced Filtering Options Filter StdDev Intensity , Filter Precursor Window and Filter Library are used for tandem MS data. Leave defaults parameters, \"0\" and \"Don\u2019t Filter\", respectively. Filter SNR Intensity and Min Peak Int. allow to delete all ions with a signal to noise ratio (SNR) or with a signal, in the EI spectrum, below this value raw intensity. If raw intensities of your data are very low, use a default value of 0. Filter peaks in 50Da Window removes peaks that are not on the top 6 most intense within a +/- 50 Da window. If fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signal. Advanced Network Options Min Pairs Cos is the minimum cosine score required for an edge to be formed between nodes. Lower value will increase the size of the clusters by inducing the clustering of less related spectra, while higher value will be more restrictive. The value set as default is 0.7. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and usually performs well with data obtained through experiments without derivatization. For derivatized compounds, the cosine value for good matches is generally lower due to an inferior quality of the EI spectra. Network TopK is the maximum of neighbor nodes for one single node. The edge between two nodes are kept only if both nodes are within each other's TopK most similar nodes. Maximum Connected Component Size is the maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Advanced Kovats Index Calculation Options Perform Kovats Calculation is turn on if the user need to calculate Kovats RIs for the compounds during library search. Input Carbon Marker File (Optional) allows to import your carbon marker file, use for retention index estimation, if needed. MSHub Balance Score allows to import your file that contains information for the balance score. The balance score is an estimation of mass spectrum patterns reproducibility across the entire dataset only available if deconvolution is conducted using MSHub, if needed. Advanced Dereplicated Options These options are only relevant if/when the parent mass information is available, so it is strongly recommended to leave the default values. Inspect the Results \u00b6 After the job has been completed, the job status page gives access to several molecular networking results views: (i) \u201c View All Library Hits\u201d opens the interface that allows visualization of spectral matches to the reference database from selected libraries. It will display all of the top matches for each feature to different libraries and relevant information including retention time. The displayed columns could be edited by clicking the \u201cSelect columns\u201d link in the upper left corner. The possible annotations could be sorted by their cosine value to aid in selecting the best annotation using the researcher's judgment. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the \u201cNo\u201d field listed in the feature table. Clicking on the spectrum icon at the left side of the screen will show a mirror plot comparison between the query spectrum and the reference spectrum. This allows assessing the quality of matches between the deconvolution and the reference spectra. The results can be sorted by the match score , balance score , number of shared peaks in the spectrum (can also be set when launching the job), TIC , Kovats RI (if enabled by user), and used library(ies) . To filter the results, type upper and/or lower boundary values in the text field underneath the corresponding column header and hit \"Enter\" or click \"Filter\" button on the left. Cosine and balance score can be jointly used as filters for processing of the final results: the highest quality annotations would require to pass thresholds for both metrics. To ensure highest quality/lowest FDR of the top match, we recommend using the cosine of >0.9 and >60% correspondingly. Alternatively, poor match scores can also be considered if they pass a conservative balance score value of >80% . Note that the high match score simply reflects that a library spectrum exists that is highly similar to the query spectrum (an occurrence that is likely for large libraries and sparse patterns), while a high balance score is reflective of the high confidence in deconvolution of the spectral pattern. Higher values of both metrics would improve quality of matches, but the \u201coptimal\u201d thresholds are data-specific and may be dependent on the circumstances. However, we recommend to use the above values as a good starting point. (ii) The \u201cView Top Hits\u201d option accesses the list of: top hits (Compound_Name) with the corresponding Scan (feature number), matched library class, cosine, number of shared peaks between library entry and the spectral pattern, abundance as TIC, retention time given in units used in input raw files, and information from the reference library entry, for all annotated spectra. (iii) The \"View All Spectra With Annotations\" option gives access to all annotated spectra with the same information listed. In addition, the balance score and Kovats RI values are also listed (if available) to allow including this information into making decisions for feature annotations. The displayed columns could be edited by clicking the \"Select columns\" link and selecting/deselecting columns as needed. NOTE : Clicking the \"Download\" link in ether view would allow downloading the results as a table will all the associated information for each library hit (including InChi, SMILES and CAS, whenever available); the file with the name \"MOLECULAR-LIBRARYSEARCH-GC*.tsv\" is in the root of the downloadable compressed folder. The button at the top of the page \u201cBack to status page\u201d allows going back. To visualize molecular networks generated, the user has to download the input network files from the \u201cDownload Cytoscape Data\u201d link, save the folder, and unzip it. In the job status page, some advanced views are available to visualized qiime2 emperor plots or bi-plots, and to download the associated tables. For more information, follow this link . Cloning a job \u00b6 If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job. Sharing data \u00b6 The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation . Adding/Curating reference spectra \u00b6 High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation . If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help . The compliance of the file format can be verified using an online workflow. Visualization \u00b6 Network Visualization in Cytoscape \u00b6 The network can be visualized in an external software such as Cytoscape [1], an open-source software platform used to visualize, analyze, and annotate molecular networks from GNPS. Cytoscape is available for download from here . This software allowed to encode any property of the network (i.e. node shape or color, edge thickness) with a metadata category (i.e. cohort, cosine score, compound family). An online tutorial, created with Cytoscape 3.7, used for molecular networking generated with LC-MS/MS data, can be accessed here . Many of these steps could be reproduced in the same way for molecular networking from GC-MS data. [1] Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13 (11), 2498-2504. doi:10.1101/gr.1239303 (A) Here we show an example of molecular networks visualizing in Cytoscape, generated from a study of volatiles related to aging of IPA beer ( GNPS link ). In Cytoscape, the different aging times (0, 1, 2, 3, 4, 5, 6, 8, 12, and 20 days) are represented by different colors, and the metabolites present in the beer (each node) can be mapped on the molecular networks. The size of each node represents the total abundance of the feature and the colors in the pie chart shows the proportions of the compound at different aging duration times (gradient from green to yellow to red). (B) Zoom in a cluster of terpenes annotated with compounds name is shown as an example. Networking can facilitate the interpretation of data by visualizing chemical changes. In this example, the annotated compounds E-nerolidol and alpha-limonene-diepoxide, framed in pink, appear to be present only in fresh beer (0 days) and disappear as the beer ages. (C) Other information can be mapped onto the network, for example, the same zoom with cosine values between nodes is shown instead of compound name annotations. NOTE : The name of the node corresponds to the best match of the spectral pattern to the library across the entire dataset. Consequently, for some nodes the top match is not selected as the node's name as there exists other spectral pattern in the data that has better match to the same compound in the library. In such cases, the next best matching annotation is used. Molecular mapping in ili \u00b6 Spatial distribution of different chemical features could be visualized in 2D or 3D using ili, a visualization app for 3D molecular cartography [2]. \u2018ili could be used either on the website or as a Chrome extension . For mapping, two files need to be uploaded (DRAG AND DROP): an image for 2D (PNG or JPG format) or model for 3D (STL format), and a .cvs file with the coordinates of the spots on the model that corresponds to the sampled locations. Examples of mapping applications are available on \u2018ili website . Here it is demonstrated how to map the volatile data on the same model as shown in the \u201cHuman skin metabolome\u201d example. [2] Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols , 13 (1), 134.https://doi.org/10.1038/nprot.2017.122 To create the .csv table, download the quantification table from GNPS deconvolution (example GNPS job ) output and add four columns with the x, y, z, and radius coordinates from the different sampling points as described [2]. For ease of navigation, the rows with feature descriptors could be deleted. The detailed instructions on creating the correctly formatted table with coordinates are given here . To create chemical maps, drag and drop the example volatilome table human 3D model. Different parameters can be set such as the spots, the mapping color, or the angles of visualization. To display different features, click on the feature identifier value listed above the color scale on the bottom right corner of the screen and select features to display. To annotate molecular features of interest, refer to the GNPS library search job for the matching features. Citation \u00b6 Aksenov, A. A. et al Algorithmic Learning for Auto-deconvolution of GC-MS Data to Enable Molecular Networking within GNPS. https://doi.org/10.1101/2020.01.13.905091 Page Contributors \u00b6 Ming Wang (6.25%), MelissaESPOSITO (93.75%)","title":"GC-MS Library Search and Molecular Networking"},{"location":"gc-ms-library-molecular-network/#gc-ms-spectral-library-search-and-molecular-networking","text":"","title":"GC-MS Spectral Library Search and Molecular Networking"},{"location":"gc-ms-library-molecular-network/#configure-the-workflow","text":"There are two options to open the job page for conducting a spectral library search and create a molecular network. By clicking on the link \u201cSearch Spectral Library and Molecular Network\u201d from the deconvolution job page status. See GC-MS Deconvolution for GNPS documentation. By clicking on the \u201cAnalyze\u201d icon from the GNPS home page. The \"Search Option\" section in the job window allows importing files needed for the spectral library search and the molecular networking generation. By clicking on \"select Input Files\", a pop-up window appears, allowing to select every needed file. (1), (2) The .mgf file containing the deconvolved EI spectra and the .csv feature quantification table automatically (with balance score) adds if the spectral library search is launched from the deconvolution job performed with MS-Hub. Otherwise, they can be added by the user from others processing software (MS-DIAL, MZmine2, etc...). The quantification table can be exported from the follow tools: MZmine2 MS-Dial MS-Hub (3) Select your metadata table formatted as a tab-separated .txt file. To create your metadata table properly, see the documentation here . (4) Public Libraries files are selected by default. However, user could add their libraries on GNPS by following the instructions here , or by uploading them in .mgf format (drag and drop on \u201cUpload File\u201d section). If the libraries are curated and could be shared with the community, it is encouraged to upload them to GNPS. (5) The carbon marker table should be added. This table must be formatted as a comma separated values (.csv) file in the following headers: Compound_Name - name of the compound (string), Carbon_Number - number of carbons (integer), RT - retention time in seconds (float). Example File . The file can also be created from the raw experimental chromatograms of the RI marker compounds using MZMine2 as described in this video tutorial . (6) Click on the \"Finish selection\" button to close the pop-up window. Search Options Fragment Ion Mass Tolerance is the maximum mass deviation between the observed fragments and the ions selected within the libraries. The mass tolerance setting is related to the accuracy of the mass analyzer. Default value is \u00b1 0.025 Da for high-resolution mass spectrometers (q-TOF, q-Orbitrap) while \u00b1 2.0 Da is recommended for low-resolution MS/MS instruments (ion traps, triple-quadrupole/QqQ). Min Matched Peaks is the minimum number of common fragment ions that should share a spectra to be considered as a spectral library annotation. This parameter should be tuned depending on the molecules of interest and experimental conditions. It is recommended to perform several jobs modifying this parameter for testing possible outcomes variations in annotations. Typically high quality features contain more than 15 ions in EI data. Score Threshold is the minimum cosine score to be considered as an annotation in spectral library search. 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and it usually performs well with data obtained through experiments without derivatization, but that will depend on the quality of the mass spectra obtained. For derivatized compounds, the cosine value for good matches is generally lower by ~0.1 due to an inferior quality of the EI spectra. The job window proposed four fields of advanced search, filtering, network, and Kovats index calculation options. Click on the \u201cShow Fields\u201d button to show advanced options. The default parameters recommended for obtaining good results have been determined and pre-populated as described in the table Parameters for Library Search. However, users are encouraged to adjust the settings as appropriate for their analysis. (7) Enter your email address. (8) The job can be launched by clicking on the \u201cSubmit\u201d button. Advanced Search Options Library Class is the level of library to include hits. Keep default of \u201cBronze\u201d to include all possible hits from libraries. Top Hits Per Spectrum is how many top hits ranked by the cosine score to be included into the results. It is recommended to keep this number relatively high (for example, 10 to include top 10 matches) to increase the possibility to have a correct annotation if it is not in the first top hit. Spectral Library allows to select spectral libraries to include in the search. Advanced Filtering Options Filter StdDev Intensity , Filter Precursor Window and Filter Library are used for tandem MS data. Leave defaults parameters, \"0\" and \"Don\u2019t Filter\", respectively. Filter SNR Intensity and Min Peak Int. allow to delete all ions with a signal to noise ratio (SNR) or with a signal, in the EI spectrum, below this value raw intensity. If raw intensities of your data are very low, use a default value of 0. Filter peaks in 50Da Window removes peaks that are not on the top 6 most intense within a +/- 50 Da window. If fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signal. Advanced Network Options Min Pairs Cos is the minimum cosine score required for an edge to be formed between nodes. Lower value will increase the size of the clusters by inducing the clustering of less related spectra, while higher value will be more restrictive. The value set as default is 0.7. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and usually performs well with data obtained through experiments without derivatization. For derivatized compounds, the cosine value for good matches is generally lower due to an inferior quality of the EI spectra. Network TopK is the maximum of neighbor nodes for one single node. The edge between two nodes are kept only if both nodes are within each other's TopK most similar nodes. Maximum Connected Component Size is the maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Advanced Kovats Index Calculation Options Perform Kovats Calculation is turn on if the user need to calculate Kovats RIs for the compounds during library search. Input Carbon Marker File (Optional) allows to import your carbon marker file, use for retention index estimation, if needed. MSHub Balance Score allows to import your file that contains information for the balance score. The balance score is an estimation of mass spectrum patterns reproducibility across the entire dataset only available if deconvolution is conducted using MSHub, if needed. Advanced Dereplicated Options These options are only relevant if/when the parent mass information is available, so it is strongly recommended to leave the default values.","title":"Configure the workflow"},{"location":"gc-ms-library-molecular-network/#inspect-the-results","text":"After the job has been completed, the job status page gives access to several molecular networking results views: (i) \u201c View All Library Hits\u201d opens the interface that allows visualization of spectral matches to the reference database from selected libraries. It will display all of the top matches for each feature to different libraries and relevant information including retention time. The displayed columns could be edited by clicking the \u201cSelect columns\u201d link in the upper left corner. The possible annotations could be sorted by their cosine value to aid in selecting the best annotation using the researcher's judgment. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the \u201cNo\u201d field listed in the feature table. Clicking on the spectrum icon at the left side of the screen will show a mirror plot comparison between the query spectrum and the reference spectrum. This allows assessing the quality of matches between the deconvolution and the reference spectra. The results can be sorted by the match score , balance score , number of shared peaks in the spectrum (can also be set when launching the job), TIC , Kovats RI (if enabled by user), and used library(ies) . To filter the results, type upper and/or lower boundary values in the text field underneath the corresponding column header and hit \"Enter\" or click \"Filter\" button on the left. Cosine and balance score can be jointly used as filters for processing of the final results: the highest quality annotations would require to pass thresholds for both metrics. To ensure highest quality/lowest FDR of the top match, we recommend using the cosine of >0.9 and >60% correspondingly. Alternatively, poor match scores can also be considered if they pass a conservative balance score value of >80% . Note that the high match score simply reflects that a library spectrum exists that is highly similar to the query spectrum (an occurrence that is likely for large libraries and sparse patterns), while a high balance score is reflective of the high confidence in deconvolution of the spectral pattern. Higher values of both metrics would improve quality of matches, but the \u201coptimal\u201d thresholds are data-specific and may be dependent on the circumstances. However, we recommend to use the above values as a good starting point. (ii) The \u201cView Top Hits\u201d option accesses the list of: top hits (Compound_Name) with the corresponding Scan (feature number), matched library class, cosine, number of shared peaks between library entry and the spectral pattern, abundance as TIC, retention time given in units used in input raw files, and information from the reference library entry, for all annotated spectra. (iii) The \"View All Spectra With Annotations\" option gives access to all annotated spectra with the same information listed. In addition, the balance score and Kovats RI values are also listed (if available) to allow including this information into making decisions for feature annotations. The displayed columns could be edited by clicking the \"Select columns\" link and selecting/deselecting columns as needed. NOTE : Clicking the \"Download\" link in ether view would allow downloading the results as a table will all the associated information for each library hit (including InChi, SMILES and CAS, whenever available); the file with the name \"MOLECULAR-LIBRARYSEARCH-GC*.tsv\" is in the root of the downloadable compressed folder. The button at the top of the page \u201cBack to status page\u201d allows going back. To visualize molecular networks generated, the user has to download the input network files from the \u201cDownload Cytoscape Data\u201d link, save the folder, and unzip it. In the job status page, some advanced views are available to visualized qiime2 emperor plots or bi-plots, and to download the associated tables. For more information, follow this link .","title":"Inspect the Results"},{"location":"gc-ms-library-molecular-network/#cloning-a-job","text":"If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.","title":"Cloning a job"},{"location":"gc-ms-library-molecular-network/#sharing-data","text":"The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation .","title":"Sharing data"},{"location":"gc-ms-library-molecular-network/#addingcurating-reference-spectra","text":"High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation . If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help . The compliance of the file format can be verified using an online workflow.","title":"Adding/Curating reference spectra"},{"location":"gc-ms-library-molecular-network/#visualization","text":"","title":"Visualization"},{"location":"gc-ms-library-molecular-network/#network-visualization-in-cytoscape","text":"The network can be visualized in an external software such as Cytoscape [1], an open-source software platform used to visualize, analyze, and annotate molecular networks from GNPS. Cytoscape is available for download from here . This software allowed to encode any property of the network (i.e. node shape or color, edge thickness) with a metadata category (i.e. cohort, cosine score, compound family). An online tutorial, created with Cytoscape 3.7, used for molecular networking generated with LC-MS/MS data, can be accessed here . Many of these steps could be reproduced in the same way for molecular networking from GC-MS data. [1] Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13 (11), 2498-2504. doi:10.1101/gr.1239303 (A) Here we show an example of molecular networks visualizing in Cytoscape, generated from a study of volatiles related to aging of IPA beer ( GNPS link ). In Cytoscape, the different aging times (0, 1, 2, 3, 4, 5, 6, 8, 12, and 20 days) are represented by different colors, and the metabolites present in the beer (each node) can be mapped on the molecular networks. The size of each node represents the total abundance of the feature and the colors in the pie chart shows the proportions of the compound at different aging duration times (gradient from green to yellow to red). (B) Zoom in a cluster of terpenes annotated with compounds name is shown as an example. Networking can facilitate the interpretation of data by visualizing chemical changes. In this example, the annotated compounds E-nerolidol and alpha-limonene-diepoxide, framed in pink, appear to be present only in fresh beer (0 days) and disappear as the beer ages. (C) Other information can be mapped onto the network, for example, the same zoom with cosine values between nodes is shown instead of compound name annotations. NOTE : The name of the node corresponds to the best match of the spectral pattern to the library across the entire dataset. Consequently, for some nodes the top match is not selected as the node's name as there exists other spectral pattern in the data that has better match to the same compound in the library. In such cases, the next best matching annotation is used.","title":"Network Visualization in Cytoscape"},{"location":"gc-ms-library-molecular-network/#molecular-mapping-in-ili","text":"Spatial distribution of different chemical features could be visualized in 2D or 3D using ili, a visualization app for 3D molecular cartography [2]. \u2018ili could be used either on the website or as a Chrome extension . For mapping, two files need to be uploaded (DRAG AND DROP): an image for 2D (PNG or JPG format) or model for 3D (STL format), and a .cvs file with the coordinates of the spots on the model that corresponds to the sampled locations. Examples of mapping applications are available on \u2018ili website . Here it is demonstrated how to map the volatile data on the same model as shown in the \u201cHuman skin metabolome\u201d example. [2] Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols , 13 (1), 134.https://doi.org/10.1038/nprot.2017.122 To create the .csv table, download the quantification table from GNPS deconvolution (example GNPS job ) output and add four columns with the x, y, z, and radius coordinates from the different sampling points as described [2]. For ease of navigation, the rows with feature descriptors could be deleted. The detailed instructions on creating the correctly formatted table with coordinates are given here . To create chemical maps, drag and drop the example volatilome table human 3D model. Different parameters can be set such as the spots, the mapping color, or the angles of visualization. To display different features, click on the feature identifier value listed above the color scale on the bottom right corner of the screen and select features to display. To annotate molecular features of interest, refer to the GNPS library search job for the matching features.","title":"Molecular mapping in ili"},{"location":"gc-ms-library-molecular-network/#citation","text":"Aksenov, A. A. et al Algorithmic Learning for Auto-deconvolution of GC-MS Data to Enable Molecular Networking within GNPS. https://doi.org/10.1101/2020.01.13.905091","title":"Citation"},{"location":"gc-ms-library-molecular-network/#page-contributors","text":"Ming Wang (6.25%), MelissaESPOSITO (93.75%)","title":"Page Contributors"},{"location":"gcanalysis/","text":"GC-MS EI Data Analysis \u00b6 Introduction \u00b6 GNPS now offers support for GC-MS data. Two workflows are available. GC-MS Deconvolution Workflow \u00b6 More information GC-MS online deconvolution workflow with MS-Hub, or ADAP-MZmine, or MS-DIAL. See here . GC-MS Library Search and Molecular Networking Workflow \u00b6 More information on the GC-MS spectral library search and molecular networking workflow from MS-Hub, MS-DIAL, and ADAP-MZmine results. See here for more information . Share Data, Clone Job, and Add Reference Spectra \u00b6 Cloning a job \u00b6 If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job. Sharing data \u00b6 The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation . Adding/Curating reference spectra \u00b6 High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation . If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help . The compliance of the file format can be verified using an online workflow. Page Contributors \u00b6 Ming Wang (6.45%), lfnothias (83.87%), MelissaESPOSITO (6.45%), katherinemaloney (3.23%)","title":"GC-MS on GNPS"},{"location":"gcanalysis/#gc-ms-ei-data-analysis","text":"","title":"GC-MS EI Data Analysis"},{"location":"gcanalysis/#introduction","text":"GNPS now offers support for GC-MS data. Two workflows are available.","title":"Introduction"},{"location":"gcanalysis/#gc-ms-deconvolution-workflow","text":"More information GC-MS online deconvolution workflow with MS-Hub, or ADAP-MZmine, or MS-DIAL. See here .","title":"GC-MS Deconvolution Workflow"},{"location":"gcanalysis/#gc-ms-library-search-and-molecular-networking-workflow","text":"More information on the GC-MS spectral library search and molecular networking workflow from MS-Hub, MS-DIAL, and ADAP-MZmine results. See here for more information .","title":"GC-MS Library Search and Molecular Networking Workflow"},{"location":"gcanalysis/#share-data-clone-job-and-add-reference-spectra","text":"","title":"Share Data, Clone Job, and Add Reference Spectra"},{"location":"gcanalysis/#cloning-a-job","text":"If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.","title":"Cloning a job"},{"location":"gcanalysis/#sharing-data","text":"The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation .","title":"Sharing data"},{"location":"gcanalysis/#addingcurating-reference-spectra","text":"High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation . If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help . The compliance of the file format can be verified using an online workflow.","title":"Adding/Curating reference spectra"},{"location":"gcanalysis/#page-contributors","text":"Ming Wang (6.45%), lfnothias (83.87%), MelissaESPOSITO (6.45%), katherinemaloney (3.23%)","title":"Page Contributors"},{"location":"gnps_community/","text":"Join the GNPS community \u00b6 The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute ! GitHub Repositories \u00b6 Your are kindly invited to open \"issues\" on our GitHub repositories, and propose changes to our Documentation and Workflows. We are also welcoming direct pull request on the respective repository. GNPS_Documentation GitHub respository that points to the documentation website (https://ccms-ucsd.github.io/GNPSDocumentation) . https://github.com/CCMS-UCSD/GNPSDocumentation GNPS_Workflows GitHub repository that contains the workflows available on GNPS (http://gnps.ucsd.edu) : http://github.com/CCMS-UCSD/GNPS_Workflows GNPS Forum \u00b6 Discussions and suggestions can also take place on the GNPS forum at https://groups.google.com/forum/#!forum/molecular_networking_bug_reports . Page Contributors \u00b6 Ming Wang (8.33%), lfnothias (91.67%)","title":"Join the GNPS community"},{"location":"gnps_community/#join-the-gnps-community","text":"The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute !","title":"Join the GNPS community"},{"location":"gnps_community/#github-repositories","text":"Your are kindly invited to open \"issues\" on our GitHub repositories, and propose changes to our Documentation and Workflows. We are also welcoming direct pull request on the respective repository. GNPS_Documentation GitHub respository that points to the documentation website (https://ccms-ucsd.github.io/GNPSDocumentation) . https://github.com/CCMS-UCSD/GNPSDocumentation GNPS_Workflows GitHub repository that contains the workflows available on GNPS (http://gnps.ucsd.edu) : http://github.com/CCMS-UCSD/GNPS_Workflows","title":"GitHub Repositories"},{"location":"gnps_community/#gnps-forum","text":"Discussions and suggestions can also take place on the GNPS forum at https://groups.google.com/forum/#!forum/molecular_networking_bug_reports .","title":"GNPS Forum"},{"location":"gnps_community/#page-contributors","text":"Ming Wang (8.33%), lfnothias (91.67%)","title":"Page Contributors"},{"location":"gnpsanalysisoverview/","text":"This highlights all the current production analysis tools at GNPS as well as some exciting up and coming tools in development. Recommended Analysis Tools \u00b6 Molecular Networking \u00b6 Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This approach groups sets of spectra from related molecules (known as molecular families) even when the spectra themselves are not identified (do not match to any known compounds). Molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (similar fragmentation implying similar structure) between nodes. Nodes can be supplemented with metadata, including library matches matches or information that is provided by the user, e.g. abundance, origin of product, hydrophobicity, etc. These metadata attributes can be reflected in a node\u2019s size or color. Spectral Library Search \u00b6 MS/MS data is searched against reference GNPS spectral libraries in a high throughput manner, scaling up to hundreds of files at a time. The spectral library search can be configured to either match exactly to known molecules or utilize variable dereplication to identify putative analogs of known compounds. MASST \u00b6 Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs as well as search a single MS/MS spectrum against all public spectral libraries. Advanced Analysis Tools \u00b6 Dereplicator \u00b6 The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. Network Annotation Propogation \u00b6 Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. Analysis Tools in Active Development \u00b6 Feature Based Molecular Networking \u00b6 Feature Based Molecular Networking relies on feature detection to determine molecule abundances and aligns these abundances across a cohort of samples into consensus features. Corresponding MS/MS spectra are assigned to each consensus feature and analyzed with spectral library search and molecular networking. This approach enables More accurate quantification of molecules Resolution of isomeric compounds Reduction of redundancy of MS/MS molecules MS2LDA \u00b6 MS2LDA is a method for the decomposition of sets of molecular fragment data derived from large metabolomics experiments. Check out the MS2LDA website here . At GNPS, we have worked with the MS2LDA team to curate a set of motifs that can help to annotate your MS/MS spectra. Page Contributions \u00b6 Ming Wang","title":"GNPS Analysis Tools Overview"},{"location":"gnpsanalysisoverview/#recommended-analysis-tools","text":"","title":"Recommended Analysis Tools"},{"location":"gnpsanalysisoverview/#molecular-networking","text":"Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This approach groups sets of spectra from related molecules (known as molecular families) even when the spectra themselves are not identified (do not match to any known compounds). Molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (similar fragmentation implying similar structure) between nodes. Nodes can be supplemented with metadata, including library matches matches or information that is provided by the user, e.g. abundance, origin of product, hydrophobicity, etc. These metadata attributes can be reflected in a node\u2019s size or color.","title":"Molecular Networking"},{"location":"gnpsanalysisoverview/#spectral-library-search","text":"MS/MS data is searched against reference GNPS spectral libraries in a high throughput manner, scaling up to hundreds of files at a time. The spectral library search can be configured to either match exactly to known molecules or utilize variable dereplication to identify putative analogs of known compounds.","title":"Spectral Library Search"},{"location":"gnpsanalysisoverview/#masst","text":"Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs as well as search a single MS/MS spectrum against all public spectral libraries.","title":"MASST"},{"location":"gnpsanalysisoverview/#advanced-analysis-tools","text":"","title":"Advanced Analysis Tools"},{"location":"gnpsanalysisoverview/#dereplicator","text":"The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree.","title":"Dereplicator"},{"location":"gnpsanalysisoverview/#network-annotation-propogation","text":"Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking.","title":"Network Annotation Propogation"},{"location":"gnpsanalysisoverview/#analysis-tools-in-active-development","text":"","title":"Analysis Tools in Active Development"},{"location":"gnpsanalysisoverview/#feature-based-molecular-networking","text":"Feature Based Molecular Networking relies on feature detection to determine molecule abundances and aligns these abundances across a cohort of samples into consensus features. Corresponding MS/MS spectra are assigned to each consensus feature and analyzed with spectral library search and molecular networking. This approach enables More accurate quantification of molecules Resolution of isomeric compounds Reduction of redundancy of MS/MS molecules","title":"Feature Based Molecular Networking"},{"location":"gnpsanalysisoverview/#ms2lda","text":"MS2LDA is a method for the decomposition of sets of molecular fragment data derived from large metabolomics experiments. Check out the MS2LDA website here . At GNPS, we have worked with the MS2LDA team to curate a set of motifs that can help to annotate your MS/MS spectra.","title":"MS2LDA"},{"location":"gnpsanalysisoverview/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"isgnpsright/","text":"What kind of data goes GNPS support? GNPS supports the analysis of tandem mass (MS/MS or MS2) data and EI GC/MS data. Below are additional guidelines that describe the kinds of data that GNPS's analysis tools and shared knowledgebase handle. Ionization Type \u00b6 GNPS supports data from soft ionization sources, e.g. electro spray ionization (ESI), Atmospheric-pressure chemical ionization (APCI), Matrix-assisted laser desorption/ionization (MALDI). Fragmentation \u00b6 GNPS only accepts data dependent acquisition data (DDA), i.e. molecules were fragmented with collision induced dissociation (CID), Higher-energy collisional dissociation (HCD), or Electron-transfer dissociation (ETD). This produces tandem mass spectra (MS/MS) that can be identified via spectral library search and organized into families of molecules with molecular networking. Data Sizes \u00b6 GNPS was designed to process MS/MS datasets of entire LC/MS runs. Many of the analysis tools were meant for datasets with at least hundreds of MS/MS spectra. While it is feasible to analyze a small amount of MS/MS spectra, certain capabilities (e.g. Molecular Networking) will not be effective at such small scales. For extremely small datasets (e.g. single MS/MS spectra), we recommend utilizing our MASST search tool and not molecular networking. For datasets that at least include an entire LC/MS run of MS/MS spectra, all workflows will accept. For molecular networking, please refer to the parameters and presets . File Formats \u00b6 Mass spectrometry files must be converted from proprietary vendor formats to open file formats. GNPS currently support .mzXML, .mzML, and .mgf formats for analysis. To convert, please see our conversion guide . Our tools do NOT support .mzData, .xml, .raw, .RAW, .wiff, .scan, .d, and .cdf formats. Page Contributions \u00b6 Ming Wang","title":"Is my data compatible with GNPS?"},{"location":"isgnpsright/#ionization-type","text":"GNPS supports data from soft ionization sources, e.g. electro spray ionization (ESI), Atmospheric-pressure chemical ionization (APCI), Matrix-assisted laser desorption/ionization (MALDI).","title":"Ionization Type"},{"location":"isgnpsright/#fragmentation","text":"GNPS only accepts data dependent acquisition data (DDA), i.e. molecules were fragmented with collision induced dissociation (CID), Higher-energy collisional dissociation (HCD), or Electron-transfer dissociation (ETD). This produces tandem mass spectra (MS/MS) that can be identified via spectral library search and organized into families of molecules with molecular networking.","title":"Fragmentation"},{"location":"isgnpsright/#data-sizes","text":"GNPS was designed to process MS/MS datasets of entire LC/MS runs. Many of the analysis tools were meant for datasets with at least hundreds of MS/MS spectra. While it is feasible to analyze a small amount of MS/MS spectra, certain capabilities (e.g. Molecular Networking) will not be effective at such small scales. For extremely small datasets (e.g. single MS/MS spectra), we recommend utilizing our MASST search tool and not molecular networking. For datasets that at least include an entire LC/MS run of MS/MS spectra, all workflows will accept. For molecular networking, please refer to the parameters and presets .","title":"Data Sizes"},{"location":"isgnpsright/#file-formats","text":"Mass spectrometry files must be converted from proprietary vendor formats to open file formats. GNPS currently support .mzXML, .mzML, and .mgf formats for analysis. To convert, please see our conversion guide . Our tools do NOT support .mzData, .xml, .raw, .RAW, .wiff, .scan, .d, and .cdf formats.","title":"File Formats"},{"location":"isgnpsright/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"librarysearch/","text":"Spectral Library Search \u00b6 One of the major limitations in discovering new chemical entities is determining which metabolites are known compounds within complex biological samples. A way to overcome this limitation is to compare the MS2 spectra of the unknown metabolite with a library of MS/MS spectra generated from structurally characterized metabolites. Herein, this comparison is based upon the similarity cosine scoring of MS/MS spectra. Dereplication Workflow \u00b6 From the main GNPS page , click the \"Match Search\" button. This will bring you to the workflow input to start library searching your data. Selecting Input Files \u00b6 Please refer to the file selection documentation from networking. Selecting Spectral Libraries to Search \u00b6 By default all the public spectral libraries are selected under the folder \"speclibs\". This includes many different spectral libraries. You can read about and browse these libraries on GNPS . NOTE: Do not change the selection of libraries unless you are an advanced user. Proteomics Spectral libraries will not work with GNPS and cause problems. Parameters Walkthrough \u00b6 Search Options \u00b6 Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6 Advanced Search Options \u00b6 Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options \u00b6 Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Exploration of Results \u00b6 To access your data, either click the link in the email or click the DONE link under Status on the jobs menu page. View Description View All Spectra Hits View all library matches View Top Hits View only top hit per query spectrum View All Compounds Unique set of compounds in matches Page Contributors \u00b6 Ming Wang","title":"Spectral Library Search"},{"location":"librarysearch/#spectral-library-search","text":"One of the major limitations in discovering new chemical entities is determining which metabolites are known compounds within complex biological samples. A way to overcome this limitation is to compare the MS2 spectra of the unknown metabolite with a library of MS/MS spectra generated from structurally characterized metabolites. Herein, this comparison is based upon the similarity cosine scoring of MS/MS spectra.","title":"Spectral Library Search"},{"location":"librarysearch/#dereplication-workflow","text":"From the main GNPS page , click the \"Match Search\" button. This will bring you to the workflow input to start library searching your data.","title":"Dereplication Workflow"},{"location":"librarysearch/#selecting-input-files","text":"Please refer to the file selection documentation from networking.","title":"Selecting Input Files"},{"location":"librarysearch/#selecting-spectral-libraries-to-search","text":"By default all the public spectral libraries are selected under the folder \"speclibs\". This includes many different spectral libraries. You can read about and browse these libraries on GNPS . NOTE: Do not change the selection of libraries unless you are an advanced user. Proteomics Spectral libraries will not work with GNPS and cause problems.","title":"Selecting Spectral Libraries to Search"},{"location":"librarysearch/#parameters-walkthrough","text":"","title":"Parameters Walkthrough"},{"location":"librarysearch/#search-options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6","title":"Search Options"},{"location":"librarysearch/#advanced-search-options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Search Options"},{"location":"librarysearch/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.","title":"Advanced Filtering Options"},{"location":"librarysearch/#exploration-of-results","text":"To access your data, either click the link in the email or click the DONE link under Status on the jobs menu page. View Description View All Spectra Hits View all library matches View Top Hits View only top hit per query spectrum View All Compounds Unique set of compounds in matches","title":"Exploration of Results"},{"location":"librarysearch/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"logos/","text":"Feel free to use any of the following logos for your presentations. The following logos are licensed as CC BY . GNPS Logo \u00b6 PNG with white background PNG with transparent background PNG with URL Animated MASST Logo \u00b6 Global Foodomics \u00b6 ReDU Logo \u00b6 MolNetEnhancer Logo \u00b6 Logos for Zoom Background \u00b6 Page Contributors \u00b6 Ming Wang (93.55%), Madeleine Ernst (6.45%)","title":"GNPS Logos"},{"location":"logos/#gnps-logo","text":"PNG with white background PNG with transparent background PNG with URL Animated","title":"GNPS Logo"},{"location":"logos/#masst-logo","text":"","title":"MASST Logo"},{"location":"logos/#global-foodomics","text":"","title":"Global Foodomics"},{"location":"logos/#redu-logo","text":"","title":"ReDU Logo"},{"location":"logos/#molnetenhancer-logo","text":"","title":"MolNetEnhancer Logo"},{"location":"logos/#logos-for-zoom-background","text":"","title":"Logos for Zoom Background"},{"location":"logos/#page-contributors","text":"Ming Wang (93.55%), Madeleine Ernst (6.45%)","title":"Page Contributors"},{"location":"masst/","text":"Overview \u00b6 Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including sample information) as well as search a single MS/MS spectrum against all public spectral libraries. Workflow Selection \u00b6 To search a single spectrum to see where it occurs in all public GNPS datasets, there are three ways to populate the search. 1. MASST Web Interface \u00b6 Click here for the standalone MASST search interface, to get this start page: 2. Manual Workflow Entering \u00b6 From the main GNPS page , click the \"Query Spectrum\" button. 3. From Molecular Networking \u00b6 In analyzing your molecular networks, you can click the \"Search Spec\" button on the View ALL Clusters With IDs link to pre-populate parent mass and peaks. Parameters \u00b6 The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks. The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an demonstration input spectrum. Search Options \u00b6 Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.7 Min Matched Peaks Minimum matched peaks to make a match 6 Advanced Search Options \u00b6 Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options \u00b6 Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Library Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Results \u00b6 Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that documentation . The top scoring match to public GNPS datasets are listed in the \"Dataset Matches\". The quality of the match can be inspected by clicking the \"plotting\" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking \"View File Matches in Dataset\". This view provides the full file path for all the files from each dataset along with the associated metadata for each file. FAQ - What if I do not see any results? There are a few scenarios in which a MASST search will not yield any hits including the following: - The query spectrum has not been observed in public data avaliable as the public data is not comprehensive and certain sample types are better represented than others. - The chemical observed (specifically the query spectrum) could be genuinely unique to your data - great news, if you are looking for new drugs derived from natural products (for example). Re-analysis of found files \u00b6 Clicking on [Analyze Files Found With Molecular Networking] will select all of the individual files identified through the single spectrum search and place them into a group. The window below will appear and you can then click on [Reanalyze with Molecular Networking] to launch a molecular networking job with the files that were found. The files are located in the default group (G1). You can then name the job and adjust parameters as applicable for your search. You can also add additional files to your job into one of the other default groups by clicking on [Select input files]. Citation \u00b6 Recommended Citation Wang, M., Jarmusch, A.K., Vargas, F. et al. Mass spectrometry searches using MASST. Nat Biotechnol (2020) doi:10.1038/s41587-019-0375-9 Page Contributions \u00b6 Ming Wang (66.36%), alan-jarmusch (11.21%), jgauglitz (21.5%), amcaraballor (0.93%)","title":"MASST Search (Mass Search Tool)"},{"location":"masst/#overview","text":"Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including sample information) as well as search a single MS/MS spectrum against all public spectral libraries.","title":"Overview"},{"location":"masst/#workflow-selection","text":"To search a single spectrum to see where it occurs in all public GNPS datasets, there are three ways to populate the search.","title":"Workflow Selection"},{"location":"masst/#1-masst-web-interface","text":"Click here for the standalone MASST search interface, to get this start page:","title":"1. MASST Web Interface"},{"location":"masst/#2-manual-workflow-entering","text":"From the main GNPS page , click the \"Query Spectrum\" button.","title":"2. Manual Workflow Entering"},{"location":"masst/#3-from-molecular-networking","text":"In analyzing your molecular networks, you can click the \"Search Spec\" button on the View ALL Clusters With IDs link to pre-populate parent mass and peaks.","title":"3. From Molecular Networking"},{"location":"masst/#parameters","text":"The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks. The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an demonstration input spectrum.","title":"Parameters"},{"location":"masst/#search-options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.7 Min Matched Peaks Minimum matched peaks to make a match 6","title":"Search Options"},{"location":"masst/#advanced-search-options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Search Options"},{"location":"masst/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Library Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.","title":"Advanced Filtering Options"},{"location":"masst/#results","text":"Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that documentation . The top scoring match to public GNPS datasets are listed in the \"Dataset Matches\". The quality of the match can be inspected by clicking the \"plotting\" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking \"View File Matches in Dataset\". This view provides the full file path for all the files from each dataset along with the associated metadata for each file. FAQ - What if I do not see any results? There are a few scenarios in which a MASST search will not yield any hits including the following: - The query spectrum has not been observed in public data avaliable as the public data is not comprehensive and certain sample types are better represented than others. - The chemical observed (specifically the query spectrum) could be genuinely unique to your data - great news, if you are looking for new drugs derived from natural products (for example).","title":"Results"},{"location":"masst/#re-analysis-of-found-files","text":"Clicking on [Analyze Files Found With Molecular Networking] will select all of the individual files identified through the single spectrum search and place them into a group. The window below will appear and you can then click on [Reanalyze with Molecular Networking] to launch a molecular networking job with the files that were found. The files are located in the default group (G1). You can then name the job and adjust parameters as applicable for your search. You can also add additional files to your job into one of the other default groups by clicking on [Select input files].","title":"Re-analysis of found files"},{"location":"masst/#citation","text":"Recommended Citation Wang, M., Jarmusch, A.K., Vargas, F. et al. Mass spectrometry searches using MASST. Nat Biotechnol (2020) doi:10.1038/s41587-019-0375-9","title":"Citation"},{"location":"masst/#page-contributions","text":"Ming Wang (66.36%), alan-jarmusch (11.21%), jgauglitz (21.5%), amcaraballor (0.93%)","title":"Page Contributions"},{"location":"mergepolarity/","text":"Here we merge polarity between positive and negative networks. Pardon our dust as this is a work in progress. Workflow \u00b6 The workflow is available on GNPS here Input Data \u00b6 A GNPS job is run on positive mode data and another job is run on negative mode data; the input is then the GNPS ID of both jobs. Interpreting Results \u00b6 A merged graphml file is created along with summary statistics and evaluations. To provide an assessment of accuracy of the edges inserted, new edges where both nodes in the respective positive and negative networks are identified with structure, a tanimoto score is calculated between the structures. We assume a tanimoto score of greater than 0.9 indicates concordance of structure. Citation \u00b6 Source code is available on Github Page Contributors \u00b6 Ming Wang (95.45%), Allegra A (4.55%)","title":"Merge Network Polarity"},{"location":"mergepolarity/#workflow","text":"The workflow is available on GNPS here","title":"Workflow"},{"location":"mergepolarity/#input-data","text":"A GNPS job is run on positive mode data and another job is run on negative mode data; the input is then the GNPS ID of both jobs.","title":"Input Data"},{"location":"mergepolarity/#interpreting-results","text":"A merged graphml file is created along with summary statistics and evaluations. To provide an assessment of accuracy of the edges inserted, new edges where both nodes in the respective positive and negative networks are identified with structure, a tanimoto score is calculated between the structures. We assume a tanimoto score of greater than 0.9 indicates concordance of structure.","title":"Interpreting Results"},{"location":"mergepolarity/#citation","text":"Source code is available on Github","title":"Citation"},{"location":"mergepolarity/#page-contributors","text":"Ming Wang (95.45%), Allegra A (4.55%)","title":"Page Contributors"},{"location":"metadata/","text":"Metadata \u00b6 Summary \u00b6 The metadata file used in GNPS describes the properties of a file/sample ( e.g. sample type, year of analysis, and collection method). Metadata adhering to the accepted formatting for each tool enhances data analysis and visualization options. We strongly encourage you to prepare metadata files in advance and upload to the supplementary file folder in the corresponding MassIVE dataset. However, we understand that all of this information might not be available, so it is a suggest starting point. Metadata Formats \u00b6 There are two metadata formats we accept for the majority of GNPS workflows: tab separated tsv file Google Sheets shared link Google Sheets Supported Workflows Classical Molecular Networking Release 22 or later FBMN Release 23 or later ReDU Metadata \u00b6 The recommended starting point for both of these metadata is ReDU Sample Information Template (additional documentation can be found here ). Users can add an unlimited amount of additional columns to the ReDU Sample Information Template. To add additional columns that are recognized by GNPS workflows, you can prefix the column header with ATTRIBUTE_ (e.g. ATTRIBUTE_Organism). There are specific instructions on required columns and formatting detailed for GNPS tools below. Note This standard metadata format works for the following GNPS tools Classical Molecular Networking Feature Based Molecular Networking GC Molecular Networking Qemistree Metadata file used must be a tab-delimited text file. A .tsv can be downloaded from the ReDU Sample Information Template. Users that create a metadata file without using the ReDU Sample Information Template using a text editor (e.g. Microsoft Excel, Notepad++ for Windows, gedit for Linux, TextWrangler for Mac OS) should save as a .txt (tab-delimited). Warning Excel (xlsx), rich text (rtf) are not supported. Barebones Metadata \u00b6 Starting from scratch, you can simply list the filenames for your mass spectrometry files and extra columns describing each file. Here is an example file without the ReDU Sample Information template in Google Sheets and as a tsv download if you Right-click, and Save link as to download. A text editor can be used to edit it as desired. Formatting metadata The only required columns in the metadata is \"filename\" and the file names should match those uploaded to GNPS and selected for analysis. Capitalization matters. Google Sheets Metadata \u00b6 Using metadata in Google Sheets is a relatively new feature and we warn there might be some bumps in the road. You can find the a barebones example here . In order to use Google Sheets as your source of metadata you will need to accomplish the following steps. Make sure you metadata is the first sheet of your Google Sheets Share metadata so that others can view simply by having the link Paste Link into Metadata Field in GNPS Requirements Specific to Molecular Networking \u00b6 The use of a metadata file is an alternative way to assign groups when selecting data input files within the workflow of GNPS. The current version of molecular networking allows to use the metadata table as an input. Tip Indicate which metadata columns should be considered in analysis by opening the file in a text editor and adding \"ATTRIBUTE_\" to the header of the column. Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Danger Although it is possible to use the legacy group mapping and attribute mapping file, we strongly advise against using this method. Requirements Specific to Qiime2 \u00b6 GNPS communicates with Qiime2. PCoA visualized using EMPeror and Qiime outputs (.qza/.qzv), including a BIOM formated output, can be generated. Microbe-metabolite interactions can also be studied with MMVEC . GNPS will parse any extra column in the metadata file and output them in the Qiime2 supported files (BIOM/qza files). Note that by default the mass spectrometry filename will be used as sample name for Qiime2 files. Alternatively, it is possible to specify an additional metada column called \"sample_name\" that will be used instead as sample name in Qiime2, to enable joint mass spectrometry - metabolomics analysis such as MMVEC. Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Optional Add an extra column called \"sample_name\" to the metadata file using a text editor. The sample name will replaced the mass spectrometry filename in the Qiime2 output. For joint mass spectrometry - sequencing analysis with MMVEC, provide the sequencing sample name as indicated in the qiime2 file used (BIOM/qza file). Requirements Specific to Qiita \u00b6 GNPS communicates with Qiita. Specifically, you can use the output of GNPS to add metabolomics data into an existing Qiita dataset. This is handled through the Biom table output as a qiime2 qza artifact. The key feature is renaming the mass spectrometry file into a sample identifier so that the identifiers are concordant. A Qiita ID with corresponding information must first be created. Add an extra column called \"sample_name\" to the metadata file using a text editor. The identifer must contain the Qiita ID prepended to the sample identifier using a period ( e.g. 10317.000096815). Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder If performing additional analysis in Qiime using the .qza, it is required to add a row indicating the type of variable. Requirements Specific to 'ili \u00b6 The metadata can also be used to specify spatial coordinates for direct visualization of the data in 'ili toolbox . It creates really cool plots like this: Extra columns are required in the metadata file A text editor should be used to add the following columns in order (required): \"COORDINATE_X\" - X coordinate on the 2D/3D model \"COORDINATE_Y\" - Y coordinate on the 2D/3D model \"COORDINATE_Z\" - Z coordinate on the 2D/3D model \"COORDINATE_radius\" - radius for the spot in 'ili toolbox. \"filename\" must be the first column Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Users must upload the corresponding .STL file and place it in the \"STL Model for ili\" folder Page Contributions \u00b6 Ming Wang (65.25%), alan-jarmusch (25.42%), emgentry (9.32%)","title":"Metadata"},{"location":"metadata/#metadata","text":"","title":"Metadata"},{"location":"metadata/#summary","text":"The metadata file used in GNPS describes the properties of a file/sample ( e.g. sample type, year of analysis, and collection method). Metadata adhering to the accepted formatting for each tool enhances data analysis and visualization options. We strongly encourage you to prepare metadata files in advance and upload to the supplementary file folder in the corresponding MassIVE dataset. However, we understand that all of this information might not be available, so it is a suggest starting point.","title":"Summary"},{"location":"metadata/#metadata-formats","text":"There are two metadata formats we accept for the majority of GNPS workflows: tab separated tsv file Google Sheets shared link Google Sheets Supported Workflows Classical Molecular Networking Release 22 or later FBMN Release 23 or later","title":"Metadata Formats"},{"location":"metadata/#redu-metadata","text":"The recommended starting point for both of these metadata is ReDU Sample Information Template (additional documentation can be found here ). Users can add an unlimited amount of additional columns to the ReDU Sample Information Template. To add additional columns that are recognized by GNPS workflows, you can prefix the column header with ATTRIBUTE_ (e.g. ATTRIBUTE_Organism). There are specific instructions on required columns and formatting detailed for GNPS tools below. Note This standard metadata format works for the following GNPS tools Classical Molecular Networking Feature Based Molecular Networking GC Molecular Networking Qemistree Metadata file used must be a tab-delimited text file. A .tsv can be downloaded from the ReDU Sample Information Template. Users that create a metadata file without using the ReDU Sample Information Template using a text editor (e.g. Microsoft Excel, Notepad++ for Windows, gedit for Linux, TextWrangler for Mac OS) should save as a .txt (tab-delimited). Warning Excel (xlsx), rich text (rtf) are not supported.","title":"ReDU Metadata"},{"location":"metadata/#barebones-metadata","text":"Starting from scratch, you can simply list the filenames for your mass spectrometry files and extra columns describing each file. Here is an example file without the ReDU Sample Information template in Google Sheets and as a tsv download if you Right-click, and Save link as to download. A text editor can be used to edit it as desired. Formatting metadata The only required columns in the metadata is \"filename\" and the file names should match those uploaded to GNPS and selected for analysis. Capitalization matters.","title":"Barebones Metadata"},{"location":"metadata/#google-sheets-metadata","text":"Using metadata in Google Sheets is a relatively new feature and we warn there might be some bumps in the road. You can find the a barebones example here . In order to use Google Sheets as your source of metadata you will need to accomplish the following steps. Make sure you metadata is the first sheet of your Google Sheets Share metadata so that others can view simply by having the link Paste Link into Metadata Field in GNPS","title":"Google Sheets Metadata"},{"location":"metadata/#requirements-specific-to-molecular-networking","text":"The use of a metadata file is an alternative way to assign groups when selecting data input files within the workflow of GNPS. The current version of molecular networking allows to use the metadata table as an input. Tip Indicate which metadata columns should be considered in analysis by opening the file in a text editor and adding \"ATTRIBUTE_\" to the header of the column. Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Danger Although it is possible to use the legacy group mapping and attribute mapping file, we strongly advise against using this method.","title":"Requirements Specific to Molecular Networking"},{"location":"metadata/#requirements-specific-to-qiime2","text":"GNPS communicates with Qiime2. PCoA visualized using EMPeror and Qiime outputs (.qza/.qzv), including a BIOM formated output, can be generated. Microbe-metabolite interactions can also be studied with MMVEC . GNPS will parse any extra column in the metadata file and output them in the Qiime2 supported files (BIOM/qza files). Note that by default the mass spectrometry filename will be used as sample name for Qiime2 files. Alternatively, it is possible to specify an additional metada column called \"sample_name\" that will be used instead as sample name in Qiime2, to enable joint mass spectrometry - metabolomics analysis such as MMVEC. Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Optional Add an extra column called \"sample_name\" to the metadata file using a text editor. The sample name will replaced the mass spectrometry filename in the Qiime2 output. For joint mass spectrometry - sequencing analysis with MMVEC, provide the sequencing sample name as indicated in the qiime2 file used (BIOM/qza file).","title":"Requirements Specific to Qiime2"},{"location":"metadata/#requirements-specific-to-qiita","text":"GNPS communicates with Qiita. Specifically, you can use the output of GNPS to add metabolomics data into an existing Qiita dataset. This is handled through the Biom table output as a qiime2 qza artifact. The key feature is renaming the mass spectrometry file into a sample identifier so that the identifiers are concordant. A Qiita ID with corresponding information must first be created. Add an extra column called \"sample_name\" to the metadata file using a text editor. The identifer must contain the Qiita ID prepended to the sample identifier using a period ( e.g. 10317.000096815). Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder If performing additional analysis in Qiime using the .qza, it is required to add a row indicating the type of variable.","title":"Requirements Specific to Qiita"},{"location":"metadata/#requirements-specific-to-ili","text":"The metadata can also be used to specify spatial coordinates for direct visualization of the data in 'ili toolbox . It creates really cool plots like this: Extra columns are required in the metadata file A text editor should be used to add the following columns in order (required): \"COORDINATE_X\" - X coordinate on the 2D/3D model \"COORDINATE_Y\" - Y coordinate on the 2D/3D model \"COORDINATE_Z\" - Z coordinate on the 2D/3D model \"COORDINATE_radius\" - radius for the spot in 'ili toolbox. \"filename\" must be the first column Save the file (must be tab-delimited text file) Users must upload their data file Users must select the metadata file and place it in the \"Metadata File\" folder Users must upload the corresponding .STL file and place it in the \"STL Model for ili\" folder","title":"Requirements Specific to 'ili"},{"location":"metadata/#page-contributions","text":"Ming Wang (65.25%), alan-jarmusch (25.42%), emgentry (9.32%)","title":"Page Contributions"},{"location":"metadatasetanalysis/","text":"Overview \u00b6 The GNPS Metadata Analysis enables users to perform meta-analyses on all public data based upon the metadata. Easily select LC/MS files to compare based upon metadata attributes (e.g. Skin vs stool) with Molecular Networking at GNPS Find differentially identified compounds across these groups Try it out here . Page Contributors \u00b6 Ming Wang","title":"Overview"},{"location":"metadatasetanalysis/#overview","text":"The GNPS Metadata Analysis enables users to perform meta-analyses on all public data based upon the metadata. Easily select LC/MS files to compare based upon metadata attributes (e.g. Skin vs stool) with Molecular Networking at GNPS Find differentially identified compounds across these groups Try it out here .","title":"Overview"},{"location":"metadatasetanalysis/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"metaminer/","text":"MetaMiner \u00b6 Introduction \u00b6 MetaMiner is a metabologenomic pipeline which integrates metabolomic (tandem mass spectra) and genomic data to identify novel Ribosomally synthesized and Post-translationally modified Peptides (RiPPs) and the biosynthetic gene clusters encoding them. See Cao et al, Cell Systems , In press (2019) https://doi.org/10.1016/j.cels.2019.09.004 for more informations. MetaMiner is developed in collaboration of Carnegie Mellon University , Saint Petersburg State University and the University of California San Diego (CA, USA) under the Apache 2.0 License. The detailed documentation of MetaMiner can be accessed here . Below we are describing how to use MetaMiner on GNPS. Manuscripts and Citations \u00b6 If you used MetaMiner , please cite the corresponding manuscripts: MetaMiner : Cao et al, Cell Systems , In press (2019) https://doi.org/10.1016/j.cels.2019.09.004 . DEREPLICATOR : Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology , 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219 . Development \u00b6 The standalone version of MetaMiner and the latest version is available in the Natural Product Discovery toolkit (NPDtools) at https://github.com/ablab/npdtools . Accessing the MetaMiner Workflow on GNPS \u00b6 The MetaMiner workflow is available on GNPS on the in silico tools page . STEP 1: Go to GNPS \u00b6 Go to http://gnps.ucsd.edu , and create/login to your account. STEP 2: Access MetaMiner \u00b6 Find the \"In Silico Tools\" box and click on \"Browse Tools\". Open the MetaMiner workflow. STEP 3: SELECT YOUR FILES \u00b6 Select the Spectrum Files (Required) : Select the tandem mass spectra file(s). The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload here . After getting done with selecting files, click on Finish Selection. Select the Sequence File (Required) : Select the sequence file(s) or a directory with multiple sequence files inside. In the latter case, NPDtools recursively walks through the directory and picks up all files with appropriate extensions (.fna, .fasta, or .fa for nucleotide or amino acid FASTA files, .gbk for antiSMASH output, .txt for BOA output). You can specify an unlimited number of input sequence files/directories, they will be processed independently (see also --correspondence option below). We determine sequence file type by its extension. For separating between nucleotide and amino acid FASTA files, the content of a few first entries is analysed. At least one sequence file is required unless correspondence file with RefSeq IDs is specified. Select the Correspondence File : Path to a file describing correspondence between sequence and spectra files. The file should be tab-separated and has two columns listing basenames of spectra and sequence files. Sequence column may include RefSeq IDs prefixed with #RefSeq: . In the latter case, the corresponding references are automatically downloaded from NCBI. Note that if a correspondence file not provided, the all-vs-all analysis is performed between the spectrum and sequences files. STEP 4: CONFIGURE \u00b6 Configure the parameters for the MetaMiner job : Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used. BASIC OPTIONS: \u00b6 -- Parent Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Product Ion Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Product Class : MetaMiner can search for multiple class of RIPPS. Select the class of interest or search for all class by selecting \"ALL\". ADVANCED OPTIONS: \u00b6 -- Search blind modification (slow) : By default is deactivated. If activated will search for new post translational modifications with arbitrary mass shifts. The computation will slower but will generally produce more annotations. -- Max charge : Maximum charge allowed. STEP 5: VIEW RESULTS \u00b6 See the MetaMiner job status : The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done. The job can be Cloned , for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links. The job can also be cloned to the latest workflow version with \"Clone to the Latest Version\" Significant Matches \u00b6 Clic on View Unique Peptides (recommended), to have get the list of peptide-to-spectrum annotation. Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum annotations. STEP 6: Explore the MetaMiner annotations: \u00b6 Each MetaMiner annotation is presented as row in the results table. Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function. The proposed peptide sequence is indicated \"FragmentSeq\" column. If you searched for blind modifications, the \"ModifiedSeq\" will display the amino acids that are modified and the modification. fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities. The score and p-value indicates the significance of the peptide-to-spectrum annotation. Significant annotations are found in View Unique Peptides . Unreliable annotations can be found in View All Matches (Including Unreliable Ones) . STEP 7: VALIDATE \u00b6 Validate a MetaMiner annotation : MetaMiner uses both the genome mining and tandem mass spectra annotation. This corresponds to a level 2 annotation based on Metabolomics Standard Initiative, since the stereochemistry of peptide is uncharacterized. Nevertheless, the annotation should be supported by additional informations. Validating a MetaMiner annotation to MSI level 1. \u00b6 A level 1 MSI identification can be achieved of the reference material is available for the compound, by ordering the compound and analyzing it with the same method LC-MS/MS. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time). Annotation with the MetaMiner (MSI level 2 or 3),: \u00b6 The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...) The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done with MZmine or other feature detection software. The molecular formula must be verified. Sirius can be used for that (only for single-charged compounds). Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the species analyzed. STEP 8 (Optional): Mapping MetaMiner Annotation on Molecular Networks \u00b6 Mapping MetaMiner Annotation on Molecular Networks is not trivial if multiple spectrum sequence files are used. When one sequence file is used, it is possible to use either the classical or feature-based molecular networking workflows as indicated below: [Option 1 - Classical Molecular Networking] Run a classical molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation . Download the molecular networks clustered data (.MGF file). Click on Download Clustered Spectra as MGF . [Option 2 - Feature-Based Molecular Networking] Run a feature-based molecular networking workflow. See the following documentation . Export the .MGF file to GNPS for MetaMiner analysis. Upload the .MGF file to GNPS, and run a MetaMiner job (see present documentation). When the job is completed click on View Unique Peptides . In the View unique Peptide page, download the .TSV annotation file. Click on download with Download button and unzip the file. Open the molecular networks with Cytoscape. See documentation here , and here for Feature-Based Molecular Networking In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above). In the preview window, click on the Scan header to set the meaning to Key . Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported). Contribute to the Documentation \u00b6 For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\". Page Contributors \u00b6 Ming Wang","title":"MetaMiner"},{"location":"metaminer/#metaminer","text":"","title":"MetaMiner"},{"location":"metaminer/#introduction","text":"MetaMiner is a metabologenomic pipeline which integrates metabolomic (tandem mass spectra) and genomic data to identify novel Ribosomally synthesized and Post-translationally modified Peptides (RiPPs) and the biosynthetic gene clusters encoding them. See Cao et al, Cell Systems , In press (2019) https://doi.org/10.1016/j.cels.2019.09.004 for more informations. MetaMiner is developed in collaboration of Carnegie Mellon University , Saint Petersburg State University and the University of California San Diego (CA, USA) under the Apache 2.0 License. The detailed documentation of MetaMiner can be accessed here . Below we are describing how to use MetaMiner on GNPS.","title":"Introduction"},{"location":"metaminer/#manuscripts-and-citations","text":"If you used MetaMiner , please cite the corresponding manuscripts: MetaMiner : Cao et al, Cell Systems , In press (2019) https://doi.org/10.1016/j.cels.2019.09.004 . DEREPLICATOR : Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology , 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219 .","title":"Manuscripts and Citations"},{"location":"metaminer/#development","text":"The standalone version of MetaMiner and the latest version is available in the Natural Product Discovery toolkit (NPDtools) at https://github.com/ablab/npdtools .","title":"Development"},{"location":"metaminer/#accessing-the-metaminer-workflow-on-gnps","text":"The MetaMiner workflow is available on GNPS on the in silico tools page .","title":"Accessing the MetaMiner Workflow on GNPS"},{"location":"metaminer/#step-1-go-to-gnps","text":"Go to http://gnps.ucsd.edu , and create/login to your account.","title":"STEP 1: Go to GNPS"},{"location":"metaminer/#step-2-access-metaminer","text":"Find the \"In Silico Tools\" box and click on \"Browse Tools\". Open the MetaMiner workflow.","title":"STEP 2: Access MetaMiner"},{"location":"metaminer/#step-3-select-your-files","text":"Select the Spectrum Files (Required) : Select the tandem mass spectra file(s). The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload here . After getting done with selecting files, click on Finish Selection. Select the Sequence File (Required) : Select the sequence file(s) or a directory with multiple sequence files inside. In the latter case, NPDtools recursively walks through the directory and picks up all files with appropriate extensions (.fna, .fasta, or .fa for nucleotide or amino acid FASTA files, .gbk for antiSMASH output, .txt for BOA output). You can specify an unlimited number of input sequence files/directories, they will be processed independently (see also --correspondence option below). We determine sequence file type by its extension. For separating between nucleotide and amino acid FASTA files, the content of a few first entries is analysed. At least one sequence file is required unless correspondence file with RefSeq IDs is specified. Select the Correspondence File : Path to a file describing correspondence between sequence and spectra files. The file should be tab-separated and has two columns listing basenames of spectra and sequence files. Sequence column may include RefSeq IDs prefixed with #RefSeq: . In the latter case, the corresponding references are automatically downloaded from NCBI. Note that if a correspondence file not provided, the all-vs-all analysis is performed between the spectrum and sequences files.","title":"STEP 3: SELECT YOUR FILES"},{"location":"metaminer/#step-4-configure","text":"Configure the parameters for the MetaMiner job : Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.","title":"STEP 4: CONFIGURE"},{"location":"metaminer/#basic-options","text":"-- Parent Mass Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Product Ion Tolerance : This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). -- Product Class : MetaMiner can search for multiple class of RIPPS. Select the class of interest or search for all class by selecting \"ALL\".","title":"BASIC OPTIONS:"},{"location":"metaminer/#advanced-options","text":"-- Search blind modification (slow) : By default is deactivated. If activated will search for new post translational modifications with arbitrary mass shifts. The computation will slower but will generally produce more annotations. -- Max charge : Maximum charge allowed.","title":"ADVANCED OPTIONS:"},{"location":"metaminer/#step-5-view-results","text":"See the MetaMiner job status : The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done. The job can be Cloned , for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links. The job can also be cloned to the latest workflow version with \"Clone to the Latest Version\"","title":"STEP 5: VIEW RESULTS"},{"location":"metaminer/#significant-matches","text":"Clic on View Unique Peptides (recommended), to have get the list of peptide-to-spectrum annotation. Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum annotations.","title":"Significant Matches"},{"location":"metaminer/#step-6-explore-the-metaminer-annotations","text":"Each MetaMiner annotation is presented as row in the results table. Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function. The proposed peptide sequence is indicated \"FragmentSeq\" column. If you searched for blind modifications, the \"ModifiedSeq\" will display the amino acids that are modified and the modification. fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities. The score and p-value indicates the significance of the peptide-to-spectrum annotation. Significant annotations are found in View Unique Peptides . Unreliable annotations can be found in View All Matches (Including Unreliable Ones) .","title":"STEP 6: Explore the MetaMiner annotations:"},{"location":"metaminer/#step-7-validate","text":"Validate a MetaMiner annotation : MetaMiner uses both the genome mining and tandem mass spectra annotation. This corresponds to a level 2 annotation based on Metabolomics Standard Initiative, since the stereochemistry of peptide is uncharacterized. Nevertheless, the annotation should be supported by additional informations.","title":"STEP 7: VALIDATE"},{"location":"metaminer/#validating-a-metaminer-annotation-to-msi-level-1","text":"A level 1 MSI identification can be achieved of the reference material is available for the compound, by ordering the compound and analyzing it with the same method LC-MS/MS. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time).","title":"Validating a MetaMiner annotation to MSI level 1."},{"location":"metaminer/#annotation-with-the-metaminer-msi-level-2-or-3","text":"The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...) The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done with MZmine or other feature detection software. The molecular formula must be verified. Sirius can be used for that (only for single-charged compounds). Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the species analyzed.","title":"Annotation with the MetaMiner (MSI level 2 or 3),:"},{"location":"metaminer/#step-8-optional-mapping-metaminer-annotation-on-molecular-networks","text":"Mapping MetaMiner Annotation on Molecular Networks is not trivial if multiple spectrum sequence files are used. When one sequence file is used, it is possible to use either the classical or feature-based molecular networking workflows as indicated below: [Option 1 - Classical Molecular Networking] Run a classical molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation . Download the molecular networks clustered data (.MGF file). Click on Download Clustered Spectra as MGF . [Option 2 - Feature-Based Molecular Networking] Run a feature-based molecular networking workflow. See the following documentation . Export the .MGF file to GNPS for MetaMiner analysis. Upload the .MGF file to GNPS, and run a MetaMiner job (see present documentation). When the job is completed click on View Unique Peptides . In the View unique Peptide page, download the .TSV annotation file. Click on download with Download button and unzip the file. Open the molecular networks with Cytoscape. See documentation here , and here for Feature-Based Molecular Networking In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above). In the preview window, click on the Scan header to set the meaning to Key . Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported).","title":"STEP 8 (Optional): Mapping MetaMiner Annotation on Molecular Networks"},{"location":"metaminer/#contribute-to-the-documentation","text":"For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".","title":"Contribute to the Documentation"},{"location":"metaminer/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"mmvec/","text":"MMVEC is a tool for multi-omics integration between metabolomics and microbiome data. Pardon our dust as this page is a work in progress... Input Formats \u00b6 Microbiome Metadata \u00b6 This is a tsv file that describes the taxonomy of hte input sequences. The required header is: featureid. Metabolomics Metadata \u00b6 This is a tsv file that describes the identification of the metabolites. The required header is featureid or sampleid that provides the identifier for each metabolite. Running the Workflow \u00b6 Exploring the Results \u00b6 Demonstration Data \u00b6 Page Contributors \u00b6 Ming Wang","title":"MMVEC"},{"location":"mmvec/#input-formats","text":"","title":"Input Formats"},{"location":"mmvec/#microbiome-metadata","text":"This is a tsv file that describes the taxonomy of hte input sequences. The required header is: featureid.","title":"Microbiome Metadata"},{"location":"mmvec/#metabolomics-metadata","text":"This is a tsv file that describes the identification of the metabolites. The required header is featureid or sampleid that provides the identifier for each metabolite.","title":"Metabolomics Metadata"},{"location":"mmvec/#running-the-workflow","text":"","title":"Running the Workflow"},{"location":"mmvec/#exploring-the-results","text":"","title":"Exploring the Results"},{"location":"mmvec/#demonstration-data","text":"","title":"Demonstration Data"},{"location":"mmvec/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"moleculeexplorer/","text":"Molecule Explorer \u00b6 Building upon Continuous Identification , Molecule Explorer provides a portal for users to find exactly where each molecules occur in all public GNPS datasets. This powerful exploration tool enables users to understand the expected context where each molecule has been seen before to inform future analyses. Explore here . All Molecules Summary \u00b6 This summary list includes all molecules identified in public GNPS datasets. The summary also includes the total number of datasets and files that each molecule has been found, to provide a sense of ubiquity of each molecule. For example, common known contaminants, e.g. Sodium Formate Clusters, are seen in almost all public datasets. Datasets per Molecule \u00b6 For each molecule, click on \"Datasets\" to view the specific datasets in which a molecule was found in. This view includes the accession and name of all datasets Continuous Identification found that molecule. Files per Molecule \u00b6 In the final level of granularity, the molecule can be traced down to the set of files per dataset. By clicking \"Dataset Files\" a set of files which contain the molecule is listed along with the metadata associated with each of the individual files. Here we can see that within the Skin Cartography Dataset, Avobenzone appears in only files from human swabs and not blanks: Page Contributors \u00b6 Ming Wang","title":"Molecule Explorer"},{"location":"moleculeexplorer/#molecule-explorer","text":"Building upon Continuous Identification , Molecule Explorer provides a portal for users to find exactly where each molecules occur in all public GNPS datasets. This powerful exploration tool enables users to understand the expected context where each molecule has been seen before to inform future analyses. Explore here .","title":"Molecule Explorer"},{"location":"moleculeexplorer/#all-molecules-summary","text":"This summary list includes all molecules identified in public GNPS datasets. The summary also includes the total number of datasets and files that each molecule has been found, to provide a sense of ubiquity of each molecule. For example, common known contaminants, e.g. Sodium Formate Clusters, are seen in almost all public datasets.","title":"All Molecules Summary"},{"location":"moleculeexplorer/#datasets-per-molecule","text":"For each molecule, click on \"Datasets\" to view the specific datasets in which a molecule was found in. This view includes the accession and name of all datasets Continuous Identification found that molecule.","title":"Datasets per Molecule"},{"location":"moleculeexplorer/#files-per-molecule","text":"In the final level of granularity, the molecule can be traced down to the set of files per dataset. By clicking \"Dataset Files\" a set of files which contain the molecule is listed along with the metadata associated with each of the individual files. Here we can see that within the Skin Cartography Dataset, Avobenzone appears in only files from human swabs and not blanks:","title":"Files per Molecule"},{"location":"moleculeexplorer/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"molnetenhancer/","text":"MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools \u00b6 MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication . The MolNetEnhancer worflow consists of two steps: Integrate MS2LDA substructure information with mass spectral molecular networks Integrate chemical structural information from GNPS library matching, and in silico structure prediction with mass spectral molecular networks to retrieve most abundant chemical classes per molecular family MolNetEnhancer is freely availble as Python and R package and open to contributions from the community on Github. Additionally, it is now also possible to run MolNetEnhancer through the GNPS interface: To run step 1 through the GNPS interface refer to the MS2LDA documentation or through MS2LDA.org . To run step 2 through the GNPS interface access this link , which will lead to the below displayed job entry page: In the following section, we explain what input files are needed, and what kind of output you'll get. Collecting the right input IDs \u00b6 After providing the GNPSs analysis with a title, you'll need at least one job ID and up to 3 job IDs from GNPS in silico structure annotation to start the MolNetEnhancer chemical class annotation, including: Required: GNPS Task ID Optional: NAP ID Optional: DEREPLICATOR ID Optional: VARQUEST ID Optional: MS2LDA.org Job ID Quick start from processed Molecular Network \u00b6 To facilitate MolNetEnhancer analysis of processed Molecular Networking jobs, in the newest (V2) version under \"Advanced Views - Experimental Views\" there is a button Enhance with MolNetEnhancer that will bring you directly to the MolNetEnhancer chemical class annotation analysis page with the GNPS Task ID prefilled. See also the animated GIF below. Please note that you can adapt the title and you must add the relevant in silico structure annotation job IDs for your data set. MolNetEnhancer output files \u00b6 Upon succesful completion, you will be able to see the output job page as displayed below: There are different files for download available: Download Network \u00b6 This downloads the network with chemical class information mapped in the .graphml format. To visualize results import the .graphml output file into Cytoscape . To color nodes based on the chemical subclass for example select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass' as Column and 'Discrete Mapping' as Mapping Type : Each molecular family is associated with a classification score at each level of the chemical taxonomy. The figure below retrieved from Ernst and co-workers , illustrates how this classification score is calculated. A hypothetical molecular family consisting of 6 nodes, for which chemical structural information could be retrieved for a total of 4 nodes is shown in (a). MolNetEnhancer calculates the total number of nodes per chemical class and subsequently assigns the most abundant chemical class to the respective molecular family. The molecular family illustrated in (a), was classified as \u2018flavonoids\u2019 at the chemical class level by MolNetEnhancer, with a score of 0.375, which translates to the majority of the putative structural annotations within this molecular family (2.25 nodes out of 6) belong to the flavonoid structural class (b): To color nodes based on the chemical subclass score select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass_score' as Column and 'Continuous Mapping' as Mapping Type : All columns related to chemical class information are labeled with 'CF_', and chemical class information at other hierarchical levels of the chemical taxonomy can be mapped analogously (e.g. CF_superclass, CF_superclass_score, CF_class, etc.). Direct Cytoscape Preview/Download \u00b6 This downloads the network with chemical class information mapped in the .cys format. You can open this file directly with Cytoscape . Chemical class information at the superclass level is already mapped. You can change to different levels of the chemical taxonomy as described above. View qiime2 Emperor plots \u00b6 This loads the principal coordinates plot within the Qiime2 platform using a beta version of a UniFrac-based, chemically informed distance metric. Chemically-informed distance trees are built from the MolNetEnhancer retrieved chemical class information (MetaboDistTree-ClassyTree), which is based on the ClassyFire chemical ontology. For more information on the algorithm refer to this repository . Citations \u00b6 Have you found MolNetEnhancer to be useful for your data analysis? Please cite the relevant literature from below. Main citation \u00b6 Ernst, M.; Kang, K.B.; Caraballo-Rodr\u00edguez, A. M.; Nothias, L.-F.; Wandy, J.; Chen, C.; Wang, M.; Rogers, S.; Medema, M.H.; Dorrestein, P.C. and van der Hooft, J.J.J. MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools. Metabolites 2019, 9 (7): 144. Other citations \u00b6 MolNetEnhancer uses molecular networking through GNPS: Wang, M.; Carver, J. J.; Phelan, V. V.; Sanchez, L. M.; Garg, N.; Peng, Y.; Nguyen, D. D.; Watrous, J.; Kapono, C. A.; Luzzatto-Knaan, T.; et al. Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 2016, 34 (8), 828\u2013837. MolNetEnhancer uses untargeted substructure exploration through MS2LDA: van der Hooft, J.J.J.; Wandy, J.; Barrett, M.P.; Burgess, K.E.V.; Rogers, S. Topic modeling for untargeted substructure exploration in metabolomics. PNAS 2016, 113 (48), 13738-13743. MolNetEnhancer uses Network Annotation Propagation (NAP): da Silva, R. R.; Wang, M.; Nothias, L.-F.; van der Hooft, J. J. J.; Caraballo-Rodr\u00edguez, A. M.; Fox, E.; Balunas, M. J.; Klassen, J. L.; Lopes, N. P.; Dorrestein, P. C. Propagating Annotations of Molecular Networks Using in Silico Fragmentation. PLoS Comput. Biol. 2018, 14 (4), e1006089. MolNetEnhancer uses DEREPLICATOR: Mohimani, H.; Gurevich, A.; Mikheenko, A.; Garg, N.; Nothias, L.-F.; Ninomiya, A.; Takada, K.; Dorrestein, P.C.; Pevzner, P.A. Dereplication of peptidic natural products through database search of mass spectra. Nat. Chem. Biol. 2017, 13, 30-37. MolNetEnhancer uses automated chemical classification through ClassyFire: Feunang, Y. D.; Eisner, R.; Knox, C.; Chepelev, L.; Hastings, J.; Owen, G.; Fahy, E.; Steinbeck, C.; Subramanian, S.; Bolton, E.; Greiner, R.; Wishart, D.S. ClassyFire: automated chemical classification with a comprehensive, computable taxonomy. J. Cheminform. 2016, 8, 61. Principal coordinates plots are visualised through the Qiime2 platform using EMPeror: Bolyen, E.; Rideout, J. R.; Dillon, M. R.; et al. Reproducible, interactive, scalable and extensible microbiome data science using QIIME 2. Nat. Biotechnol. 2019, 37, 852-857. and V\u00e1zquez-Baeza,Y.; Pirrung, M.; Gonzalez, A.; Knight R. EMPeror: a tool for visualizing high-throughput microbial community data. Gigascience 2013, 2, 16. Chemically-informed distances are calculated using the UniFrac distance metric: Lazupone, C.; Knight R. UniFrac: a New Phylogenetic Method for Comparing Microbial Communities. Applied and Environmental Microbiology 2005, 71, 8228-8235. Page Contributors \u00b6 Ming Wang (3.7%), Madeleine Ernst (94.44%), KyobinKang (1.85%)","title":"MolNetEnhancer"},{"location":"molnetenhancer/#molnetenhancer-enhanced-molecular-networks-by-integrating-metabolome-mining-and-annotation-tools","text":"MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication . The MolNetEnhancer worflow consists of two steps: Integrate MS2LDA substructure information with mass spectral molecular networks Integrate chemical structural information from GNPS library matching, and in silico structure prediction with mass spectral molecular networks to retrieve most abundant chemical classes per molecular family MolNetEnhancer is freely availble as Python and R package and open to contributions from the community on Github. Additionally, it is now also possible to run MolNetEnhancer through the GNPS interface: To run step 1 through the GNPS interface refer to the MS2LDA documentation or through MS2LDA.org . To run step 2 through the GNPS interface access this link , which will lead to the below displayed job entry page: In the following section, we explain what input files are needed, and what kind of output you'll get.","title":"MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools"},{"location":"molnetenhancer/#collecting-the-right-input-ids","text":"After providing the GNPSs analysis with a title, you'll need at least one job ID and up to 3 job IDs from GNPS in silico structure annotation to start the MolNetEnhancer chemical class annotation, including: Required: GNPS Task ID Optional: NAP ID Optional: DEREPLICATOR ID Optional: VARQUEST ID Optional: MS2LDA.org Job ID","title":"Collecting the right input IDs"},{"location":"molnetenhancer/#quick-start-from-processed-molecular-network","text":"To facilitate MolNetEnhancer analysis of processed Molecular Networking jobs, in the newest (V2) version under \"Advanced Views - Experimental Views\" there is a button Enhance with MolNetEnhancer that will bring you directly to the MolNetEnhancer chemical class annotation analysis page with the GNPS Task ID prefilled. See also the animated GIF below. Please note that you can adapt the title and you must add the relevant in silico structure annotation job IDs for your data set.","title":"Quick start from processed Molecular Network"},{"location":"molnetenhancer/#molnetenhancer-output-files","text":"Upon succesful completion, you will be able to see the output job page as displayed below: There are different files for download available:","title":"MolNetEnhancer output files"},{"location":"molnetenhancer/#download-network","text":"This downloads the network with chemical class information mapped in the .graphml format. To visualize results import the .graphml output file into Cytoscape . To color nodes based on the chemical subclass for example select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass' as Column and 'Discrete Mapping' as Mapping Type : Each molecular family is associated with a classification score at each level of the chemical taxonomy. The figure below retrieved from Ernst and co-workers , illustrates how this classification score is calculated. A hypothetical molecular family consisting of 6 nodes, for which chemical structural information could be retrieved for a total of 4 nodes is shown in (a). MolNetEnhancer calculates the total number of nodes per chemical class and subsequently assigns the most abundant chemical class to the respective molecular family. The molecular family illustrated in (a), was classified as \u2018flavonoids\u2019 at the chemical class level by MolNetEnhancer, with a score of 0.375, which translates to the majority of the putative structural annotations within this molecular family (2.25 nodes out of 6) belong to the flavonoid structural class (b): To color nodes based on the chemical subclass score select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass_score' as Column and 'Continuous Mapping' as Mapping Type : All columns related to chemical class information are labeled with 'CF_', and chemical class information at other hierarchical levels of the chemical taxonomy can be mapped analogously (e.g. CF_superclass, CF_superclass_score, CF_class, etc.).","title":"Download Network"},{"location":"molnetenhancer/#direct-cytoscape-previewdownload","text":"This downloads the network with chemical class information mapped in the .cys format. You can open this file directly with Cytoscape . Chemical class information at the superclass level is already mapped. You can change to different levels of the chemical taxonomy as described above.","title":"Direct Cytoscape Preview/Download"},{"location":"molnetenhancer/#view-qiime2-emperor-plots","text":"This loads the principal coordinates plot within the Qiime2 platform using a beta version of a UniFrac-based, chemically informed distance metric. Chemically-informed distance trees are built from the MolNetEnhancer retrieved chemical class information (MetaboDistTree-ClassyTree), which is based on the ClassyFire chemical ontology. For more information on the algorithm refer to this repository .","title":"View qiime2 Emperor plots"},{"location":"molnetenhancer/#citations","text":"Have you found MolNetEnhancer to be useful for your data analysis? Please cite the relevant literature from below.","title":"Citations"},{"location":"molnetenhancer/#main-citation","text":"Ernst, M.; Kang, K.B.; Caraballo-Rodr\u00edguez, A. M.; Nothias, L.-F.; Wandy, J.; Chen, C.; Wang, M.; Rogers, S.; Medema, M.H.; Dorrestein, P.C. and van der Hooft, J.J.J. MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools. Metabolites 2019, 9 (7): 144.","title":"Main citation"},{"location":"molnetenhancer/#other-citations","text":"MolNetEnhancer uses molecular networking through GNPS: Wang, M.; Carver, J. J.; Phelan, V. V.; Sanchez, L. M.; Garg, N.; Peng, Y.; Nguyen, D. D.; Watrous, J.; Kapono, C. A.; Luzzatto-Knaan, T.; et al. Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 2016, 34 (8), 828\u2013837. MolNetEnhancer uses untargeted substructure exploration through MS2LDA: van der Hooft, J.J.J.; Wandy, J.; Barrett, M.P.; Burgess, K.E.V.; Rogers, S. Topic modeling for untargeted substructure exploration in metabolomics. PNAS 2016, 113 (48), 13738-13743. MolNetEnhancer uses Network Annotation Propagation (NAP): da Silva, R. R.; Wang, M.; Nothias, L.-F.; van der Hooft, J. J. J.; Caraballo-Rodr\u00edguez, A. M.; Fox, E.; Balunas, M. J.; Klassen, J. L.; Lopes, N. P.; Dorrestein, P. C. Propagating Annotations of Molecular Networks Using in Silico Fragmentation. PLoS Comput. Biol. 2018, 14 (4), e1006089. MolNetEnhancer uses DEREPLICATOR: Mohimani, H.; Gurevich, A.; Mikheenko, A.; Garg, N.; Nothias, L.-F.; Ninomiya, A.; Takada, K.; Dorrestein, P.C.; Pevzner, P.A. Dereplication of peptidic natural products through database search of mass spectra. Nat. Chem. Biol. 2017, 13, 30-37. MolNetEnhancer uses automated chemical classification through ClassyFire: Feunang, Y. D.; Eisner, R.; Knox, C.; Chepelev, L.; Hastings, J.; Owen, G.; Fahy, E.; Steinbeck, C.; Subramanian, S.; Bolton, E.; Greiner, R.; Wishart, D.S. ClassyFire: automated chemical classification with a comprehensive, computable taxonomy. J. Cheminform. 2016, 8, 61. Principal coordinates plots are visualised through the Qiime2 platform using EMPeror: Bolyen, E.; Rideout, J. R.; Dillon, M. R.; et al. Reproducible, interactive, scalable and extensible microbiome data science using QIIME 2. Nat. Biotechnol. 2019, 37, 852-857. and V\u00e1zquez-Baeza,Y.; Pirrung, M.; Gonzalez, A.; Knight R. EMPeror: a tool for visualizing high-throughput microbial community data. Gigascience 2013, 2, 16. Chemically-informed distances are calculated using the UniFrac distance metric: Lazupone, C.; Knight R. UniFrac: a New Phylogenetic Method for Comparing Microbial Communities. Applied and Environmental Microbiology 2005, 71, 8228-8235.","title":"Other citations"},{"location":"molnetenhancer/#page-contributors","text":"Ming Wang (3.7%), Madeleine Ernst (94.44%), KyobinKang (1.85%)","title":"Page Contributors"},{"location":"ms2lda/","text":"MS2LDA Substructure Discovery \u00b6 Introduction \u00b6 MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families. It is now also possible to run MS2LDA analyses through the GNPS interface here which will lead to the below displayed job entry page. In this section, it is explained what input files are needed, how the parameters can be chosen, and what kind of output you get. Finally, it is explained how the obtained MS2LDA model can be further explored on the MS2LDA website by uploading the generated dict file. Collecting the Right Input Files \u00b6 After providing the GNPS analysis with a title, the right input files are needed to start an MS2LDA analysis. They can be obtained with the classical molecular network (MS-Cluster based, see documentation here ) or from the Feature-Based Molecular Networking workflow (using for example MZmine2, see documentation here . These files are: Required: Spectral data (MGF file) which can be downloaded from a processed Molecular Networking job Required: Edges file including selfloops which can be downloaded from a processed Molecular Networking job (i.e., typically found in the networkedges_selfloop folder within the downloaded GNPS job folder) Optional: MS1 peak abundance information (CSV file generated by MZmine2). The format must be similar to the MZmine2 format used with the Feature based Molecular Networking . This will allow you to perform MS1 differential analysis within the MS2LDA web app to find discriminate Mass2Motifs between groups. After selecting the input files, the right MGF Source needs to be selected: \"MSCluster\" for a classical Molecular Networking derived clustered MGF file, and \"MZmine2\" for a Feature based Molecular Networking derived MGF file. Quickstart from Processed Molecular Network \u00b6 To facilitate MS2LDA analysis of processed Molecular Networking jobs, in the newest (V2) version and the Feature Based Molecular Networking job, under \"Advanced Views - Experimental Views\" there is a button Analyze with MS2LDA that will bring you directly to the MS2LDA analysis page prefilling the relevant input files (spectral MGF file and edge pair file including selfloops). See also the animated GIF below. Please note that you can adapt the title and you must check the relevant MS2LDA parameter settings for your data set. Setting the MS2LDA Parameters \u00b6 There are three sections of parameters to fill out of which the first is the most important. Default values are provided for all settings, but each of them is dependent on the input data. We provide some guidelines here to ease your choice. LDA Parameters \u00b6 The \"Advanced MS2LDA parameters\" displays four parameter values to set. The first is the bin width used to bin the MS2 fragments and losses. Defaults for Q-Exactive (0.005 Da) and ToF (0.01 Da) Data are provided. For instruments like Ion Traps a larger bin width of 0.1 Da is recommended. The appropriate bin width to choose is dependent on the expected mass variation of mass fragments across mass spectra in your data. The number of LDA iterations is set to 1000 by default which should work in most cases. The Minimum MS2 Intensity is meant to filter out the basic noise from the MS/MS spectra. It is recommended to open the inputted MGF file and check the noise levels. Typically they range from 25-200 (ToF Data) to 5000 (Q-Exactive Data). Inclusion of noise will unnecessarily lengten the analysis time and create non-informative Mass2Motifs. The LDA Free Motifs correspond to the number of \"free Mass2Motifs\" that are added on top of the prefixed annotated Mass2Motifs from MotifDB. This number depends on your data: if you input a larger number of fragmented molecules (i.e., > 4,000) that includes lots of novel chemistry not present in MotifDB it is best to put the LDA Free Motifs on 300 - 500. If the data set is relatively small with a considerable amount of known chemistry, you best put this number to 50 - 150. Selecting MotifDB Motif Sets \u00b6 By default all Motif Sets will be imported from MotifDB . However, it is wise to exclude annotated motif sets of sources that are very distant from the source of your input data. Note that the GNPS and MassBank are annotated Mass2Motifs discovered in reference molecules. Output Networking File Thresholds \u00b6 After running MS2LDA, output files are created that include a new networking (edge) file that can be used to create an enriched Molecular Network including Mass2Motif distributions through the Molecular Families. To do so, cut-off values (thresholds) are needed for LDA scores to consider a Mass2Motif to be linked to a molecule or not and how many you want to show in the network. Default values are provided that were found to work well so far. In this publication the two scores are explained: probability and overlap score. The Figure (from van der Hooft, Anal. Chem. 2017 89147569-7577 ) below illustrates the overlap score (O) and probability threshold (P) with two hypothetical molecular spectra and three hypothetical Mass2Motifs. In example A, molecule 1 has an overlap score of 1 with Mass2Motif 1 as the motif is in the molecule in its entirety. The probability of this connection is 0.5 as it accounts for half of the molecule\u2019s total intensity. In example B, the same molecule has an overlap score of (approximately) 0.5 with Mass2Motif 2 as it includes roughly half of the Mass2Motif. Note that you will have to provide your email address in the appropriate field in order to be notified upon completion of your GNPS-MS2LDA job. MS2LDA Output Files \u00b6 Upon succesful completion, you will be able to see the output job page as displayed below: There are different views and files for download available: View Motif Labels for Spectra \u00b6 This view displays all the fragmented molecules (scans) and each of the motifs linked to them [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file. Individual Motif Details \u00b6 This view displays all molecule-motif links [some molecules have more than one motif linked and will appear multiple times in this table] and also shows the annotation if available from MotifDB. It can be downloaded as a tab separated file. View Pairs with Motif Edges \u00b6 This view is the new edge file enriched with Motif interactions: note that in the \"Interact\" column apart from cosine now different Mass2Motifs are listed [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file - this can be used to create a new enriched Molecular Network in CytoScape. View Motif PDF \u00b6 This displays a PDF report of all the Mass2Motifs. Each Mass2Motif spans two pages with the first page a graphical overview of the relevant mass fragments (red, on top, pointing up) and neutral losses (green, bottom, pointing down) with the y-axis being the intensity which equals the features' probability to be found in the Mass2Motif, and the x-axis being the m/z (rounded up to nominal values in the labels) in Daltons. The second page displays the top mass fragments and neutral losses with their probabilities. Download Motif PDF \u00b6 This downloads the PDF report as explained in \"View Motif PDF\". Download Pairs \u00b6 This downloads the new edge file as explained in \"View Pairs with Motif Edges\". Download MS2LDA Dict \u00b6 This downloads the MS2LDA Dict file that houses all the relevant information on the MS2LDA experiment. Analysing the MS2LDA results \u00b6 Analysing the results in GNPS \u00b6 The different available views enable a quick overview of the MS2LDA experiment. Especially when annotated Mass2Motifs are found, this could help in further downstream analysis. However, when no annotation is provided, the Mass2Motif is one of the \"free Motifs\" that was discovered by LDA. With the MS2LDA Dict file through the MS2LDA web app there are ways to analyse these Mass2Motifs further and also annotate them. In general, when analysing annotating or novel Mass2Motifs, it is important to keep this in mind! Taking the results to MS2LDA web app \u00b6 Uploading the dictionary to MS2LDA web app \u00b6 After downloading the MS2LSA Dict file from the finished MS2LDA experiment, this can be uploaded into the MS2LDA web app . There is a User Guide available that covers the main functionalities of the MS2LDA web app. If it is your first time at the MS2LDA web app, make sure you get a login account before continuing. Once logged in, go to the experiments section: By default, you arrive on the Create tab which lets you create an MS2LDA experiment from mass spectrometry data. Click on the Upload tab, to continue: Now, you will have to provide a unique name for the MS2LDA experiment and you can also provide relevant details. Most importantly, you will need to select the location of the downloaded MS2LDA Dict file under \"LDA output file\". Also, you will need to select the bin width as used in the GNPS-MS2LDA workflow (\"Bin Width\") from the available options. After you are ready, you can click \"Upload Your Experiment\" and the upload will start. Viewing the Experiment Results \u00b6 Once the MS2LDA dict file finished uploading, you can browse the MS2LDA experiment in the web app like a regular MS2LDa experiment. If you click on the experiment name, multiple tabs will appear: Here, you can click on the Summary Page tab which leads you to the summary of the experiment that includes all relevant Tables. For example, the Motif Table can be browsed, sorted, searched, and downloaded as CSV: Annotating Motifs \u00b6 When clicking on the relevant \"free Motif\" name a Motif Page will appear where the relevant mass fragment and neutral losses are listed including their scores and a frequency plot. Also, all the spectra the Mass2Motif appears in can be browsed to analyse the nature of the fragmentation pattern. Importantly, if you can annote the motif with any structural information, this can be provided on top of the page with the Annotation field for the full annotation and the Short Annotation field for a label to display in graphics - make sure to save the Motif Page afterwards! After reloading the Summary Page or the Show Mass2Motif tabs, the annotation(s) will be displayed and are searchable. Finally, on top of the summary page there is a toggle where you can make the entire MS2LDA experiment public. See for example the public MassBank Experiment . MS1 Differential Analyses within the MS2LDA web app \u00b6 If the Feature based Molecular Networking workflow was used, the MS1 peak information is available in the MS2LDA Dict file. This can be used to create MS1 analysis to find Mass2Motif that are discriminative between two sample groups. More information can be found in this publication and the MS2LDA web app User Guide explains how to set up such an analysis within your experiment. Uploading annotated motif sets into MotifDB \u00b6 This is a future feature that will become available in the course of this year. It will allow you to make your new annotations searchable and usable by the community. Future Directions \u00b6 At GNPS, we are working with the MS2LDA team to promote publication of curated sets of Mass2Motifs into MotifDB that can help to annotate your MS/MS spectra. Citations \u00b6 Have you found MS2LDA to be useful for your data analysis? Please cite the relevant literature from below. Introduction of MS2LDA Substructure Discovery algorithm \u00b6 van der Hooft, Justin J. J., Joe Wandy, Michael P. Barrett, Karl E.V. Burgess, and Simon Rogers. \"Topic modeling for untargeted substructure exploration in metabolomics.\" Proceedings of the National Academy of Sciences 113, no. 48 (2016): 13738-13743. Publication of the MS2LDA.org web app to discover and analyse Mass2Motifs \u00b6 Wandy, Joe, Yunfeng Zhu, Justin J.J. van der Hooft, Ronan Daly, Michael P. Barrett, and Simon Rogers. \"Ms2lda.org: web-based topic modelling for substructure discovery in mass spectrometry.\" Bioinformatics 34, no. 2 (2018): 317-318. Extended version of MS2LDA algorithm to handle multiple files at once \u00b6 van der Hooft, Justin J. J., Joe Wandy, Francesca Young, Sandosh Padmanabhan, Konstantinos Gerasidimis, Karl E.V. Burgess, Michael P. Barrett, and Simon Rogers. \"Unsupervised Discovery and Comparison of Structural Families Across Multiple Samples in Untargeted Metabolomics.\" Analytical Chemistry 89, no. 14 (2017): 7569-7577. Latest developments in MS2LDA.org: introduction of MotifDB with annotated Mass2Motif sets and MAGMa integration for Mass2Motif annotation of reference compounds Rogers, Simon, Cher Wei Ong, Joe Wandy, Madeleine Ernst, Lars Ridder, and Justin J.J. van der Hooft. \"Deciphering complex metabolite mixtures by unsupervised and supervised substructure discovery and semi-automated annotation from MS/MS spectra.\" Faraday Discussions themed collection Challenges in analysis of complex natural mixtures (2019). Page Contributors \u00b6 Ming Wang (7.21%), lfnothias (16.35%), Justin van der Hooft (76.44%)","title":"MS2LDA and MotifDB Substructure Discovery"},{"location":"ms2lda/#ms2lda-substructure-discovery","text":"","title":"MS2LDA Substructure Discovery"},{"location":"ms2lda/#introduction","text":"MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families. It is now also possible to run MS2LDA analyses through the GNPS interface here which will lead to the below displayed job entry page. In this section, it is explained what input files are needed, how the parameters can be chosen, and what kind of output you get. Finally, it is explained how the obtained MS2LDA model can be further explored on the MS2LDA website by uploading the generated dict file.","title":"Introduction"},{"location":"ms2lda/#collecting-the-right-input-files","text":"After providing the GNPS analysis with a title, the right input files are needed to start an MS2LDA analysis. They can be obtained with the classical molecular network (MS-Cluster based, see documentation here ) or from the Feature-Based Molecular Networking workflow (using for example MZmine2, see documentation here . These files are: Required: Spectral data (MGF file) which can be downloaded from a processed Molecular Networking job Required: Edges file including selfloops which can be downloaded from a processed Molecular Networking job (i.e., typically found in the networkedges_selfloop folder within the downloaded GNPS job folder) Optional: MS1 peak abundance information (CSV file generated by MZmine2). The format must be similar to the MZmine2 format used with the Feature based Molecular Networking . This will allow you to perform MS1 differential analysis within the MS2LDA web app to find discriminate Mass2Motifs between groups. After selecting the input files, the right MGF Source needs to be selected: \"MSCluster\" for a classical Molecular Networking derived clustered MGF file, and \"MZmine2\" for a Feature based Molecular Networking derived MGF file.","title":"Collecting the Right Input Files"},{"location":"ms2lda/#quickstart-from-processed-molecular-network","text":"To facilitate MS2LDA analysis of processed Molecular Networking jobs, in the newest (V2) version and the Feature Based Molecular Networking job, under \"Advanced Views - Experimental Views\" there is a button Analyze with MS2LDA that will bring you directly to the MS2LDA analysis page prefilling the relevant input files (spectral MGF file and edge pair file including selfloops). See also the animated GIF below. Please note that you can adapt the title and you must check the relevant MS2LDA parameter settings for your data set.","title":"Quickstart from Processed Molecular Network"},{"location":"ms2lda/#setting-the-ms2lda-parameters","text":"There are three sections of parameters to fill out of which the first is the most important. Default values are provided for all settings, but each of them is dependent on the input data. We provide some guidelines here to ease your choice.","title":"Setting the MS2LDA Parameters"},{"location":"ms2lda/#lda-parameters","text":"The \"Advanced MS2LDA parameters\" displays four parameter values to set. The first is the bin width used to bin the MS2 fragments and losses. Defaults for Q-Exactive (0.005 Da) and ToF (0.01 Da) Data are provided. For instruments like Ion Traps a larger bin width of 0.1 Da is recommended. The appropriate bin width to choose is dependent on the expected mass variation of mass fragments across mass spectra in your data. The number of LDA iterations is set to 1000 by default which should work in most cases. The Minimum MS2 Intensity is meant to filter out the basic noise from the MS/MS spectra. It is recommended to open the inputted MGF file and check the noise levels. Typically they range from 25-200 (ToF Data) to 5000 (Q-Exactive Data). Inclusion of noise will unnecessarily lengten the analysis time and create non-informative Mass2Motifs. The LDA Free Motifs correspond to the number of \"free Mass2Motifs\" that are added on top of the prefixed annotated Mass2Motifs from MotifDB. This number depends on your data: if you input a larger number of fragmented molecules (i.e., > 4,000) that includes lots of novel chemistry not present in MotifDB it is best to put the LDA Free Motifs on 300 - 500. If the data set is relatively small with a considerable amount of known chemistry, you best put this number to 50 - 150.","title":"LDA Parameters"},{"location":"ms2lda/#selecting-motifdb-motif-sets","text":"By default all Motif Sets will be imported from MotifDB . However, it is wise to exclude annotated motif sets of sources that are very distant from the source of your input data. Note that the GNPS and MassBank are annotated Mass2Motifs discovered in reference molecules.","title":"Selecting MotifDB Motif Sets"},{"location":"ms2lda/#output-networking-file-thresholds","text":"After running MS2LDA, output files are created that include a new networking (edge) file that can be used to create an enriched Molecular Network including Mass2Motif distributions through the Molecular Families. To do so, cut-off values (thresholds) are needed for LDA scores to consider a Mass2Motif to be linked to a molecule or not and how many you want to show in the network. Default values are provided that were found to work well so far. In this publication the two scores are explained: probability and overlap score. The Figure (from van der Hooft, Anal. Chem. 2017 89147569-7577 ) below illustrates the overlap score (O) and probability threshold (P) with two hypothetical molecular spectra and three hypothetical Mass2Motifs. In example A, molecule 1 has an overlap score of 1 with Mass2Motif 1 as the motif is in the molecule in its entirety. The probability of this connection is 0.5 as it accounts for half of the molecule\u2019s total intensity. In example B, the same molecule has an overlap score of (approximately) 0.5 with Mass2Motif 2 as it includes roughly half of the Mass2Motif. Note that you will have to provide your email address in the appropriate field in order to be notified upon completion of your GNPS-MS2LDA job.","title":"Output Networking File Thresholds"},{"location":"ms2lda/#ms2lda-output-files","text":"Upon succesful completion, you will be able to see the output job page as displayed below: There are different views and files for download available:","title":"MS2LDA Output Files"},{"location":"ms2lda/#view-motif-labels-for-spectra","text":"This view displays all the fragmented molecules (scans) and each of the motifs linked to them [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file.","title":"View Motif Labels for Spectra"},{"location":"ms2lda/#individual-motif-details","text":"This view displays all molecule-motif links [some molecules have more than one motif linked and will appear multiple times in this table] and also shows the annotation if available from MotifDB. It can be downloaded as a tab separated file.","title":"Individual Motif Details"},{"location":"ms2lda/#view-pairs-with-motif-edges","text":"This view is the new edge file enriched with Motif interactions: note that in the \"Interact\" column apart from cosine now different Mass2Motifs are listed [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file - this can be used to create a new enriched Molecular Network in CytoScape.","title":"View Pairs with Motif Edges"},{"location":"ms2lda/#view-motif-pdf","text":"This displays a PDF report of all the Mass2Motifs. Each Mass2Motif spans two pages with the first page a graphical overview of the relevant mass fragments (red, on top, pointing up) and neutral losses (green, bottom, pointing down) with the y-axis being the intensity which equals the features' probability to be found in the Mass2Motif, and the x-axis being the m/z (rounded up to nominal values in the labels) in Daltons. The second page displays the top mass fragments and neutral losses with their probabilities.","title":"View Motif PDF"},{"location":"ms2lda/#download-motif-pdf","text":"This downloads the PDF report as explained in \"View Motif PDF\".","title":"Download Motif PDF"},{"location":"ms2lda/#download-pairs","text":"This downloads the new edge file as explained in \"View Pairs with Motif Edges\".","title":"Download Pairs"},{"location":"ms2lda/#download-ms2lda-dict","text":"This downloads the MS2LDA Dict file that houses all the relevant information on the MS2LDA experiment.","title":"Download MS2LDA Dict"},{"location":"ms2lda/#analysing-the-ms2lda-results","text":"","title":"Analysing the MS2LDA results"},{"location":"ms2lda/#analysing-the-results-in-gnps","text":"The different available views enable a quick overview of the MS2LDA experiment. Especially when annotated Mass2Motifs are found, this could help in further downstream analysis. However, when no annotation is provided, the Mass2Motif is one of the \"free Motifs\" that was discovered by LDA. With the MS2LDA Dict file through the MS2LDA web app there are ways to analyse these Mass2Motifs further and also annotate them. In general, when analysing annotating or novel Mass2Motifs, it is important to keep this in mind!","title":"Analysing the results in GNPS"},{"location":"ms2lda/#taking-the-results-to-ms2lda-web-app","text":"","title":"Taking the results to MS2LDA web app"},{"location":"ms2lda/#uploading-the-dictionary-to-ms2lda-web-app","text":"After downloading the MS2LSA Dict file from the finished MS2LDA experiment, this can be uploaded into the MS2LDA web app . There is a User Guide available that covers the main functionalities of the MS2LDA web app. If it is your first time at the MS2LDA web app, make sure you get a login account before continuing. Once logged in, go to the experiments section: By default, you arrive on the Create tab which lets you create an MS2LDA experiment from mass spectrometry data. Click on the Upload tab, to continue: Now, you will have to provide a unique name for the MS2LDA experiment and you can also provide relevant details. Most importantly, you will need to select the location of the downloaded MS2LDA Dict file under \"LDA output file\". Also, you will need to select the bin width as used in the GNPS-MS2LDA workflow (\"Bin Width\") from the available options. After you are ready, you can click \"Upload Your Experiment\" and the upload will start.","title":"Uploading the dictionary to MS2LDA web app"},{"location":"ms2lda/#viewing-the-experiment-results","text":"Once the MS2LDA dict file finished uploading, you can browse the MS2LDA experiment in the web app like a regular MS2LDa experiment. If you click on the experiment name, multiple tabs will appear: Here, you can click on the Summary Page tab which leads you to the summary of the experiment that includes all relevant Tables. For example, the Motif Table can be browsed, sorted, searched, and downloaded as CSV:","title":"Viewing the Experiment Results"},{"location":"ms2lda/#annotating-motifs","text":"When clicking on the relevant \"free Motif\" name a Motif Page will appear where the relevant mass fragment and neutral losses are listed including their scores and a frequency plot. Also, all the spectra the Mass2Motif appears in can be browsed to analyse the nature of the fragmentation pattern. Importantly, if you can annote the motif with any structural information, this can be provided on top of the page with the Annotation field for the full annotation and the Short Annotation field for a label to display in graphics - make sure to save the Motif Page afterwards! After reloading the Summary Page or the Show Mass2Motif tabs, the annotation(s) will be displayed and are searchable. Finally, on top of the summary page there is a toggle where you can make the entire MS2LDA experiment public. See for example the public MassBank Experiment .","title":"Annotating Motifs"},{"location":"ms2lda/#ms1-differential-analyses-within-the-ms2lda-web-app","text":"If the Feature based Molecular Networking workflow was used, the MS1 peak information is available in the MS2LDA Dict file. This can be used to create MS1 analysis to find Mass2Motif that are discriminative between two sample groups. More information can be found in this publication and the MS2LDA web app User Guide explains how to set up such an analysis within your experiment.","title":"MS1 Differential Analyses within the MS2LDA web app"},{"location":"ms2lda/#uploading-annotated-motif-sets-into-motifdb","text":"This is a future feature that will become available in the course of this year. It will allow you to make your new annotations searchable and usable by the community.","title":"Uploading annotated motif sets into MotifDB"},{"location":"ms2lda/#future-directions","text":"At GNPS, we are working with the MS2LDA team to promote publication of curated sets of Mass2Motifs into MotifDB that can help to annotate your MS/MS spectra.","title":"Future Directions"},{"location":"ms2lda/#citations","text":"Have you found MS2LDA to be useful for your data analysis? Please cite the relevant literature from below.","title":"Citations"},{"location":"ms2lda/#introduction-of-ms2lda-substructure-discovery-algorithm","text":"van der Hooft, Justin J. J., Joe Wandy, Michael P. Barrett, Karl E.V. Burgess, and Simon Rogers. \"Topic modeling for untargeted substructure exploration in metabolomics.\" Proceedings of the National Academy of Sciences 113, no. 48 (2016): 13738-13743.","title":"Introduction of MS2LDA Substructure Discovery algorithm"},{"location":"ms2lda/#publication-of-the-ms2ldaorg-web-app-to-discover-and-analyse-mass2motifs","text":"Wandy, Joe, Yunfeng Zhu, Justin J.J. van der Hooft, Ronan Daly, Michael P. Barrett, and Simon Rogers. \"Ms2lda.org: web-based topic modelling for substructure discovery in mass spectrometry.\" Bioinformatics 34, no. 2 (2018): 317-318.","title":"Publication of the MS2LDA.org web app to discover and analyse Mass2Motifs"},{"location":"ms2lda/#extended-version-of-ms2lda-algorithm-to-handle-multiple-files-at-once","text":"van der Hooft, Justin J. J., Joe Wandy, Francesca Young, Sandosh Padmanabhan, Konstantinos Gerasidimis, Karl E.V. Burgess, Michael P. Barrett, and Simon Rogers. \"Unsupervised Discovery and Comparison of Structural Families Across Multiple Samples in Untargeted Metabolomics.\" Analytical Chemistry 89, no. 14 (2017): 7569-7577. Latest developments in MS2LDA.org: introduction of MotifDB with annotated Mass2Motif sets and MAGMa integration for Mass2Motif annotation of reference compounds Rogers, Simon, Cher Wei Ong, Joe Wandy, Madeleine Ernst, Lars Ridder, and Justin J.J. van der Hooft. \"Deciphering complex metabolite mixtures by unsupervised and supervised substructure discovery and semi-automated annotation from MS/MS spectra.\" Faraday Discussions themed collection Challenges in analysis of complex natural mixtures (2019).","title":"Extended version of MS2LDA algorithm to handle multiple files at once"},{"location":"ms2lda/#page-contributors","text":"Ming Wang (7.21%), lfnothias (16.35%), Justin van der Hooft (76.44%)","title":"Page Contributors"},{"location":"msmschooser/","text":"Open-source Protocol for Community-created Public MS/MS Reference Library (MSMS-Chooser) \u00b6 Summary \u00b6 MSMS-Chooser is a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. This specific step enables the finding of reference MS/MS spectra automatically in LC/MS data of pure standards given the structure of the pure standards. Its not fancy, but practically, its pretty beneficial. Info This is a community effort and welcome everyone to participate! Requirements for MSMS-Chooser Workflow and Subsequent Addition of Spectra to the GNPS Library Complete MSMS-Chooser Template Data containing MS/MS data convereted to open-file formats (.mzXML or .mzML) Validation of MSMS-Chooser output (using drag-and-drop validator) + visual inspection of MS/MS spectra Email contacting Dorrestein Lab with task ID (see contact information below) Step-by-Step Instructions \u00b6 Completion of MSMS-Chooser Template - Link Here \u00b6 Make a copy of the MSMS-Chooser Workflow Basic Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained. Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Workflow Basic Template\" tab. Download a copy of the MSMS-Chooser Basic Template tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\" MSMS-Chooser (v1.0) Workflow at GNPS \u00b6 Navigate to ProteoSAFe - link here . Select all .mzXML/.mzML files from MassIVE (positive and negative mode should be selected into the same folder). Select the \"MSMS-Chooser Submission\" file (.tsv) from MassIVE (or uploaded via the drag-and-drop method in the 2nd tab over in the selection UI). The default mass error tolerance is 10 ppm. This value should be adjusted according to the instrumentation and experimental conditions used to collect the mass spectrometry data. Launch the Job. Basic Information about MSMS-Chooser This workflow selects MS/MS spectra, specifically product ion scans, based on precursor m/z (within 10 ppm error by default). Retention time is not taken into consideration given the provided MSMS-Chooser workflow method uses flow-injection. Several adducts are considered in the positive and negative mode for each chemical (tabulated below). If additional adducts are required, please contact us. | Ionization Mode | Adducts Supported | |:---:|:---:| |Positive|[M+H]+, [M+Na]+, [M+K]+, [2M+H]+, [2M+Na]+, [2M+K]+, [M-H2O+H]+, [M-2H2O+H]+| |Negative|[M-H]-, [2M-H]-, [2M-2H+Na]-| Interpretation and Validation of MSMS-Chooser (v1.0) Results \u00b6 The results can be accessed by clicking the \"View Output Batch Table\" link and the \"View Spectrum\" button on the left-hand side of the table for each chemical. review of all data is strongly encouraged After review, if all look acceptable click the \u201cNext Step: Batch Anotation Validator on GNPS\u201d and run the validation workflow. Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above. After review, if you would like to remove MS/MS for any reason Download the \u201cDownload Output Batch Table\u201d and delete the rows you would like to exclude. You should then follow the \u201c Batch Upload of Annotated Spectra \" documentation (you will need to reselect the files and upload the modified \u201coutput batch table\u201d in the \u201cAnnotation Table\u201d option). Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above. Additional Information \u00b6 Data and Code Availability All public MS/MS spectra are avaliable for download and browsing in GNPS. Search for all MSMSChooser data in MassIVE by searching for \"GNPS - MSMS-Chooser -\" in the \"Title\" field Recommended Citation Peer-reviewed Publication - link here - Vargas, F, Weldon, KC, Sikora, N, et al. Protocol for Community\u2010created Public MS/MS Reference Spectra Within the Global Natural Products Social Molecular Networking Infrastructure. Rapid Commun Mass Spectrom. 2020. https://doi.org/10.1002/rcm.8725 Preprint on bioRxiv - link here Can I use this method to run isolated, possibly impure, chemicals? Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates. Issues and Suggestions Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged. Contacts \u00b6 Morgan Panitchpakdi(mpanitch@ucsd.edu) Mingxun Wang (miw023@ucsd.edu) Alan Jarmusch (ajarmusch@ucsd.edu) Page Contributions \u00b6 Ming Wang (9.2%), alan-jarmusch (90.8%)","title":"MSMS-Chooser Workflow"},{"location":"msmschooser/#open-source-protocol-for-community-created-public-msms-reference-library-msms-chooser","text":"","title":"Open-source Protocol for Community-created Public MS/MS Reference Library (MSMS-Chooser)"},{"location":"msmschooser/#summary","text":"MSMS-Chooser is a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. This specific step enables the finding of reference MS/MS spectra automatically in LC/MS data of pure standards given the structure of the pure standards. Its not fancy, but practically, its pretty beneficial. Info This is a community effort and welcome everyone to participate! Requirements for MSMS-Chooser Workflow and Subsequent Addition of Spectra to the GNPS Library Complete MSMS-Chooser Template Data containing MS/MS data convereted to open-file formats (.mzXML or .mzML) Validation of MSMS-Chooser output (using drag-and-drop validator) + visual inspection of MS/MS spectra Email contacting Dorrestein Lab with task ID (see contact information below)","title":"Summary"},{"location":"msmschooser/#step-by-step-instructions","text":"","title":"Step-by-Step Instructions"},{"location":"msmschooser/#completion-of-msms-chooser-template-link-here","text":"Make a copy of the MSMS-Chooser Workflow Basic Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained. Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Workflow Basic Template\" tab. Download a copy of the MSMS-Chooser Basic Template tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\"","title":"Completion of MSMS-Chooser Template - Link Here"},{"location":"msmschooser/#msms-chooser-v10-workflow-at-gnps","text":"Navigate to ProteoSAFe - link here . Select all .mzXML/.mzML files from MassIVE (positive and negative mode should be selected into the same folder). Select the \"MSMS-Chooser Submission\" file (.tsv) from MassIVE (or uploaded via the drag-and-drop method in the 2nd tab over in the selection UI). The default mass error tolerance is 10 ppm. This value should be adjusted according to the instrumentation and experimental conditions used to collect the mass spectrometry data. Launch the Job. Basic Information about MSMS-Chooser This workflow selects MS/MS spectra, specifically product ion scans, based on precursor m/z (within 10 ppm error by default). Retention time is not taken into consideration given the provided MSMS-Chooser workflow method uses flow-injection. Several adducts are considered in the positive and negative mode for each chemical (tabulated below). If additional adducts are required, please contact us. | Ionization Mode | Adducts Supported | |:---:|:---:| |Positive|[M+H]+, [M+Na]+, [M+K]+, [2M+H]+, [2M+Na]+, [2M+K]+, [M-H2O+H]+, [M-2H2O+H]+| |Negative|[M-H]-, [2M-H]-, [2M-2H+Na]-|","title":"MSMS-Chooser (v1.0) Workflow at GNPS"},{"location":"msmschooser/#interpretation-and-validation-of-msms-chooser-v10-results","text":"The results can be accessed by clicking the \"View Output Batch Table\" link and the \"View Spectrum\" button on the left-hand side of the table for each chemical. review of all data is strongly encouraged After review, if all look acceptable click the \u201cNext Step: Batch Anotation Validator on GNPS\u201d and run the validation workflow. Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above. After review, if you would like to remove MS/MS for any reason Download the \u201cDownload Output Batch Table\u201d and delete the rows you would like to exclude. You should then follow the \u201c Batch Upload of Annotated Spectra \" documentation (you will need to reselect the files and upload the modified \u201coutput batch table\u201d in the \u201cAnnotation Table\u201d option). Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above.","title":"Interpretation and Validation of MSMS-Chooser (v1.0) Results"},{"location":"msmschooser/#additional-information","text":"Data and Code Availability All public MS/MS spectra are avaliable for download and browsing in GNPS. Search for all MSMSChooser data in MassIVE by searching for \"GNPS - MSMS-Chooser -\" in the \"Title\" field Recommended Citation Peer-reviewed Publication - link here - Vargas, F, Weldon, KC, Sikora, N, et al. Protocol for Community\u2010created Public MS/MS Reference Spectra Within the Global Natural Products Social Molecular Networking Infrastructure. Rapid Commun Mass Spectrom. 2020. https://doi.org/10.1002/rcm.8725 Preprint on bioRxiv - link here Can I use this method to run isolated, possibly impure, chemicals? Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates. Issues and Suggestions Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged.","title":"Additional Information"},{"location":"msmschooser/#contacts","text":"Morgan Panitchpakdi(mpanitch@ucsd.edu) Mingxun Wang (miw023@ucsd.edu) Alan Jarmusch (ajarmusch@ucsd.edu)","title":"Contacts"},{"location":"msmschooser/#page-contributions","text":"Ming Wang (9.2%), alan-jarmusch (90.8%)","title":"Page Contributions"},{"location":"msmschooserdataacquisitionQE/","text":"MSMS-Chooser: Data Acquisition - QExactive (v1.0) \u00b6 Summary \u00b6 This document details an open-source protocol for the Thermo QExactive mass spectrometer coupled to the Thermo Vanquish UHPLC used to combination with MSMS-Chooser , a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. 1-5 \u03bcL of sample is introduced into a flow of MeOH-Water (1:1) with ~0.1% formic acid at 0.5 mL/min via injection from the autosampler. The needle is washed for 3 s prior to injection, flow rate of 10 \u03bcL/sec. Data acquisition for each injection is 0.3 minutes with the majority of the sample arriving ~0.05 - 0.1 min after injection. Data-dependant acquisition is used to collect data on the top 5 precursors at a resolution of 35,000. MS/MS data are collected using an isolation width of m/z 1.7 and stepped normalized collision energy of 20, 30, and 40. Separate positive and negative ionization mode methods were created with differences in the ionization source parameters. Further details can be found in the method files. Data acquisition takes 0.3 min followed by 0.3 - 0.4 min of needle washing and drawing of the next sample before the next sample. The total processes taking ~45 - 50 s for one injection sequence. The flow continues during the needle washing and drawing time, effectively flushing the line for ~30 s in between samples. Required Materials \u00b6 Vanquish UHPLC Solvent A - water (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of water (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times. Solvent B - methanol (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of methanol (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times. Associated fittings and tubing QExactive Syringe pump and required fitting for instrument calibration (see instrument calibration SOP) MS calibration solution specific to calibration protocol MS tune and MS method files can be downloaded from MassIVE . Step-by-Step Instructions \u00b6 Data Acquisition \u00b6 Create a folder on the local computer following this standard \u201cD:\\SOPGNPSChemicaltoLibrary[insert barcode]\u201d Obtain the MSMS-Chooser sequence table and copy it to a folder on the local computer. If you are analyzing more than one plate, open the corresponding .csv files and copy and merge them together in a spreadsheet editor. You will need to change the plate positions. Double check the barcode, the number of samples, and the plate position used (e.g. \u201cred\u201d; \u201cRA1\u201d). Calibrate the QExactive following instrument manufacturer directions in both negative and positive ion modes (using the appropriate tune file and source position). After calibration passes, load the \u201c20190520_SOP_chemicalreferencetoGNPSlibrary_positive.meth\u201d. the path to the tune file may need to be updated in the methods Place Solvent A and Solvent B onto the LC and purge the lines. Check all other solutions (e.g. needle wash) and ensure solvent level is sufficient. Place a zero-dead volume union (stainless steel) in the column compartment. Turn the instrument from \u201cstandby\u201d to \u201con\u201d. Flow the solvent 50% Solvent A and 50% Solvent B @ 0.5 mL / min. The backpressure was observed to be between 30-50 bar depending on the temperature of the column compartment. Import the appropriate sequence table (.csv) into Xcalibur, and double check the following: The barcode matches The amount of rows in the sequence table matches the number of wells. The plate is positioned in the correct tray, (e.g. red if the injection position starts with \u201cR:\u201d) Ensure that the positive and negative mode methods are appropriately selected. Save the sequence file and start data collection Issues and Suggestions \u00b6 Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged. Page Contributions \u00b6 Alan K. Jarmusch (UCSD)","title":"Data Acqusition - Thermo QExactive (v1.0)"},{"location":"msmschooserdataacquisitionQE/#msms-chooser-data-acquisition-qexactive-v10","text":"","title":"MSMS-Chooser: Data Acquisition - QExactive (v1.0)"},{"location":"msmschooserdataacquisitionQE/#summary","text":"This document details an open-source protocol for the Thermo QExactive mass spectrometer coupled to the Thermo Vanquish UHPLC used to combination with MSMS-Chooser , a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. 1-5 \u03bcL of sample is introduced into a flow of MeOH-Water (1:1) with ~0.1% formic acid at 0.5 mL/min via injection from the autosampler. The needle is washed for 3 s prior to injection, flow rate of 10 \u03bcL/sec. Data acquisition for each injection is 0.3 minutes with the majority of the sample arriving ~0.05 - 0.1 min after injection. Data-dependant acquisition is used to collect data on the top 5 precursors at a resolution of 35,000. MS/MS data are collected using an isolation width of m/z 1.7 and stepped normalized collision energy of 20, 30, and 40. Separate positive and negative ionization mode methods were created with differences in the ionization source parameters. Further details can be found in the method files. Data acquisition takes 0.3 min followed by 0.3 - 0.4 min of needle washing and drawing of the next sample before the next sample. The total processes taking ~45 - 50 s for one injection sequence. The flow continues during the needle washing and drawing time, effectively flushing the line for ~30 s in between samples.","title":"Summary"},{"location":"msmschooserdataacquisitionQE/#required-materials","text":"Vanquish UHPLC Solvent A - water (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of water (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times. Solvent B - methanol (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of methanol (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times. Associated fittings and tubing QExactive Syringe pump and required fitting for instrument calibration (see instrument calibration SOP) MS calibration solution specific to calibration protocol MS tune and MS method files can be downloaded from MassIVE .","title":"Required Materials"},{"location":"msmschooserdataacquisitionQE/#step-by-step-instructions","text":"","title":"Step-by-Step Instructions"},{"location":"msmschooserdataacquisitionQE/#data-acquisition","text":"Create a folder on the local computer following this standard \u201cD:\\SOPGNPSChemicaltoLibrary[insert barcode]\u201d Obtain the MSMS-Chooser sequence table and copy it to a folder on the local computer. If you are analyzing more than one plate, open the corresponding .csv files and copy and merge them together in a spreadsheet editor. You will need to change the plate positions. Double check the barcode, the number of samples, and the plate position used (e.g. \u201cred\u201d; \u201cRA1\u201d). Calibrate the QExactive following instrument manufacturer directions in both negative and positive ion modes (using the appropriate tune file and source position). After calibration passes, load the \u201c20190520_SOP_chemicalreferencetoGNPSlibrary_positive.meth\u201d. the path to the tune file may need to be updated in the methods Place Solvent A and Solvent B onto the LC and purge the lines. Check all other solutions (e.g. needle wash) and ensure solvent level is sufficient. Place a zero-dead volume union (stainless steel) in the column compartment. Turn the instrument from \u201cstandby\u201d to \u201con\u201d. Flow the solvent 50% Solvent A and 50% Solvent B @ 0.5 mL / min. The backpressure was observed to be between 30-50 bar depending on the temperature of the column compartment. Import the appropriate sequence table (.csv) into Xcalibur, and double check the following: The barcode matches The amount of rows in the sequence table matches the number of wells. The plate is positioned in the correct tray, (e.g. red if the injection position starts with \u201cR:\u201d) Ensure that the positive and negative mode methods are appropriately selected. Save the sequence file and start data collection","title":"Data Acquisition"},{"location":"msmschooserdataacquisitionQE/#issues-and-suggestions","text":"Please submit any issues or suggestions via GitHub . The use of the GNPS forum is encouraged.","title":"Issues and Suggestions"},{"location":"msmschooserdataacquisitionQE/#page-contributions","text":"Alan K. Jarmusch (UCSD)","title":"Page Contributions"},{"location":"msmschooserdataacquisitioncomputational/","text":"Computational Preparation for Data Acquisition and MSMS-Chooser to Create Spectral Libraries \u00b6 Summary \u00b6 These tools comprise an open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. Here are the steps that aid in the creation of the proper templates to acquire data that is definitely compatible with MSMS-Chooser as well as templates to go directly into the MSMS-Chooser workflow. Info This is a community effort and welcome everyone to participate! - We encourage individuals to implement the protocols in their own laboratory. - Individuals with chemical standards without access to instrumentation are encouraged to contact the Dorrestein lab to inquire about running standards in collaboration (see contact information on the MSMSChooser page ). Step-by-Step Instructions \u00b6 Completion of MSMS-Chooser Preparation Template - Link Here \u00b6 Make a copy of the MSMS-Chooser Preparation Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained. Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Sample Template\" tab. Info The first tab describes what should be entered as well as an example and additional information is in documentation (GitHub). Important: You must record the position of each chemical in the 96-well plate. Only columns H-Q need to be complete if submitting samples to Dorrestein Lab - approval required before submitting samples. Please complete one row for each chemical in the positive mode and then copy and paste rows below and update the \u201cIONMODE\u201d column from \u201cPositive\u201d to \u201cNegative\u201d. Download a copy of the MSMS-Chooser Submission File tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\" Info The MSMS-Chooser File required for submission is automatically generated in the \"MSMS-Chooser Submission\" tab. Download a copy of the applicable Sequence Table using the Sequence Table Generator tab as a .csv file from Google Sheets by selecting \"File\", \"Download\", and then \"Comma-separated value (.csv, current sheet).\" Info Please double check the chemicals and well position indicated in the submission file match the sequence table. List of Suggested Materials for Sample Preparation HPLC grade solvents in all sample preparation steps (highly encouraged) 96-well plates and corresponding well plate covers (autosampler compatible) | Manufacturer | Item Number | Item | Recommended Pairing | |:------------- |:-------------:|:-----:|:------:| | Eppendorf | 951040048 | Microplate 96/U-PP with white border | 1 | |-|-|-| 1 | | Thermo Scientific | 12565368 | Microplate U96 PP-0.5ml, natural | 2 | | Thermo Scientific | 12565560 | 96 well cap, natural | 2 | Sample Preparation - Protocol \u00b6 Generate a solution of your sample (standard) at a concentration of 10 \u00b5M. Note The amount of material needed for detection is not universal and will vary by chemical. The value is a suggested starting place. Transfer 10 \u00b5L of your sample (standard) into a well in the 96 well plate recording the well position and chemical added. Warning One sample should be added per well. Repeat transfer of 10 \u00b5L into wells Record plate number, well position, etc. in the sample submission template. Once all standards have been added to the 96-well plate, completely dry all solutions. Info Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or low pressure evaporation system (Centrivap systems are recommended). Seal plate using the previously mentioned 96 well plate cover. If analysis is to be performed in your laboratory, then we suggest storing the material dried in the 96 well plate, covered, at -20 \u00b0C prior to analysis. If you desired to collaborate with the Dorrestein lab, then the material must be dried in a 96 well plate and covered for shipping and should be stored at -20 \u00b0C. Data Acqusition \u00b6 Please select the following link: Vendor Instrument Version Revision Date Method Files Thermo QExactive - Link v1.0 Sept 4, 2019 Link - - - - - - - - - - Post-Data Acqusition \u00b6 It is recommended to completely dry all solutions. Info Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or Low pressure evaporation system (Centrivap systems are recommended). Place plates into a -20C freezer. Convert raw data to .mzXML Info Vendor Instrument Recommended Conversion Software Settings Thermo QExactive MSconvert - Link mzXML and binary encoding precision as 32-bit - - - - - - - - Create a GNPS/MassIVE Dataset Upload the files to your GNPS account using an FTP client (preferred clients are WinSCP, CoreFTP, and CoffeeCup Free FTP) Name the MassIVE data set using the following format: \u201cGNPS - MSMS-Chooser - [insert barcodes]\u201d Upload all .raw files into the RAW folder and all .mzXML files into the PEAKS folder Upload the MSMS-CHOOSER Submission file (.tsv) and place in SUPPLEMENTAL folder Make data public Run MSMS-Chooser workflow at GNPS to find the reference spectra in your data. See here for more details. Warning ALL data should be reviewed for accuracy. If chemical separation is performed prior to analysis, then special attention should be given to the MS/MS spectrum and retention time. MSMS-Chooser only matches on accurate mass (currently) and isobaric compounds eluting at different times might be confused. FAQs \u00b6 What if I alreadly have data collected, can MSMS-Chooser help me? Yes! MSMS-Chooser can be used as a shortcut and help you perform the steps of finding the MS/MS spectra in your files and format the data for inclusion in the GNPS MS/MS reference library. However, this was not the original intent of the MSMS-Chooser workflow. You should create a copy and completely fill the \"MSMS-Chooser Sample Template\" tab, download it, and include it with the files in the MSMS-Chooser workflow. The MSMS-Chooser workflow will go through your data and select a MS/MS spectrum for every chemical as indicated in the Sample Template. We have used MSMS-Chooser to help create the BILELIB19 library in GNPS. Can I use this method to run isolated, possibly impure, chemicals? Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates. Page Contributions \u00b6 Ming Wang (57.38%), alan-jarmusch (42.62%)","title":"Computational Data Acquisition Prep"},{"location":"msmschooserdataacquisitioncomputational/#computational-preparation-for-data-acquisition-and-msms-chooser-to-create-spectral-libraries","text":"","title":"Computational Preparation for Data Acquisition and MSMS-Chooser to Create Spectral Libraries"},{"location":"msmschooserdataacquisitioncomputational/#summary","text":"These tools comprise an open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. Here are the steps that aid in the creation of the proper templates to acquire data that is definitely compatible with MSMS-Chooser as well as templates to go directly into the MSMS-Chooser workflow. Info This is a community effort and welcome everyone to participate! - We encourage individuals to implement the protocols in their own laboratory. - Individuals with chemical standards without access to instrumentation are encouraged to contact the Dorrestein lab to inquire about running standards in collaboration (see contact information on the MSMSChooser page ).","title":"Summary"},{"location":"msmschooserdataacquisitioncomputational/#step-by-step-instructions","text":"","title":"Step-by-Step Instructions"},{"location":"msmschooserdataacquisitioncomputational/#completion-of-msms-chooser-preparation-template-link-here","text":"Make a copy of the MSMS-Chooser Preparation Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained. Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Sample Template\" tab. Info The first tab describes what should be entered as well as an example and additional information is in documentation (GitHub). Important: You must record the position of each chemical in the 96-well plate. Only columns H-Q need to be complete if submitting samples to Dorrestein Lab - approval required before submitting samples. Please complete one row for each chemical in the positive mode and then copy and paste rows below and update the \u201cIONMODE\u201d column from \u201cPositive\u201d to \u201cNegative\u201d. Download a copy of the MSMS-Chooser Submission File tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\" Info The MSMS-Chooser File required for submission is automatically generated in the \"MSMS-Chooser Submission\" tab. Download a copy of the applicable Sequence Table using the Sequence Table Generator tab as a .csv file from Google Sheets by selecting \"File\", \"Download\", and then \"Comma-separated value (.csv, current sheet).\" Info Please double check the chemicals and well position indicated in the submission file match the sequence table. List of Suggested Materials for Sample Preparation HPLC grade solvents in all sample preparation steps (highly encouraged) 96-well plates and corresponding well plate covers (autosampler compatible) | Manufacturer | Item Number | Item | Recommended Pairing | |:------------- |:-------------:|:-----:|:------:| | Eppendorf | 951040048 | Microplate 96/U-PP with white border | 1 | |-|-|-| 1 | | Thermo Scientific | 12565368 | Microplate U96 PP-0.5ml, natural | 2 | | Thermo Scientific | 12565560 | 96 well cap, natural | 2 |","title":"Completion of MSMS-Chooser Preparation Template - Link Here"},{"location":"msmschooserdataacquisitioncomputational/#sample-preparation-protocol","text":"Generate a solution of your sample (standard) at a concentration of 10 \u00b5M. Note The amount of material needed for detection is not universal and will vary by chemical. The value is a suggested starting place. Transfer 10 \u00b5L of your sample (standard) into a well in the 96 well plate recording the well position and chemical added. Warning One sample should be added per well. Repeat transfer of 10 \u00b5L into wells Record plate number, well position, etc. in the sample submission template. Once all standards have been added to the 96-well plate, completely dry all solutions. Info Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or low pressure evaporation system (Centrivap systems are recommended). Seal plate using the previously mentioned 96 well plate cover. If analysis is to be performed in your laboratory, then we suggest storing the material dried in the 96 well plate, covered, at -20 \u00b0C prior to analysis. If you desired to collaborate with the Dorrestein lab, then the material must be dried in a 96 well plate and covered for shipping and should be stored at -20 \u00b0C.","title":"Sample Preparation - Protocol"},{"location":"msmschooserdataacquisitioncomputational/#data-acqusition","text":"Please select the following link: Vendor Instrument Version Revision Date Method Files Thermo QExactive - Link v1.0 Sept 4, 2019 Link - - - - - - - - - -","title":"Data Acqusition"},{"location":"msmschooserdataacquisitioncomputational/#post-data-acqusition","text":"It is recommended to completely dry all solutions. Info Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or Low pressure evaporation system (Centrivap systems are recommended). Place plates into a -20C freezer. Convert raw data to .mzXML Info Vendor Instrument Recommended Conversion Software Settings Thermo QExactive MSconvert - Link mzXML and binary encoding precision as 32-bit - - - - - - - - Create a GNPS/MassIVE Dataset Upload the files to your GNPS account using an FTP client (preferred clients are WinSCP, CoreFTP, and CoffeeCup Free FTP) Name the MassIVE data set using the following format: \u201cGNPS - MSMS-Chooser - [insert barcodes]\u201d Upload all .raw files into the RAW folder and all .mzXML files into the PEAKS folder Upload the MSMS-CHOOSER Submission file (.tsv) and place in SUPPLEMENTAL folder Make data public Run MSMS-Chooser workflow at GNPS to find the reference spectra in your data. See here for more details. Warning ALL data should be reviewed for accuracy. If chemical separation is performed prior to analysis, then special attention should be given to the MS/MS spectrum and retention time. MSMS-Chooser only matches on accurate mass (currently) and isobaric compounds eluting at different times might be confused.","title":"Post-Data Acqusition"},{"location":"msmschooserdataacquisitioncomputational/#faqs","text":"What if I alreadly have data collected, can MSMS-Chooser help me? Yes! MSMS-Chooser can be used as a shortcut and help you perform the steps of finding the MS/MS spectra in your files and format the data for inclusion in the GNPS MS/MS reference library. However, this was not the original intent of the MSMS-Chooser workflow. You should create a copy and completely fill the \"MSMS-Chooser Sample Template\" tab, download it, and include it with the files in the MSMS-Chooser workflow. The MSMS-Chooser workflow will go through your data and select a MS/MS spectrum for every chemical as indicated in the Sample Template. We have used MSMS-Chooser to help create the BILELIB19 library in GNPS. Can I use this method to run isolated, possibly impure, chemicals? Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates.","title":"FAQs"},{"location":"msmschooserdataacquisitioncomputational/#page-contributions","text":"Ming Wang (57.38%), alan-jarmusch (42.62%)","title":"Page Contributions"},{"location":"nap/","text":"Network Annotation Propagation Overview \u00b6 Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. This workflow is currently in beta development stages so any feedback is welcome to improve analysis and usability. It is available here under 'NAP_CCMS' Workflow drop down menu. Check out the full documentation . NAP short hands on tutorial \u00b6 The aim of this tutorial is to work as a guided tour through this documentation page and exploring the finding of Kang et al., (2018) . Go to Structure database section, download the example in house database (two columns file), add the structure SN00230021 to the file and generate the formatted database. Make sure you use an excel like software and save as tab separated text file; Go to Running NAP section, open NAP input interface, make sure you are logged and run a job with example parameters present in the picture (including job id: '3b215c4b25594b9c85d92de547815c0a' and cluster index: 56), with the database you just created. Go here if need instructions to upload the database ; When your job is processed, you should receive a link similar to that. Go to section Online Exploration and browse the results; Follow the same link above. Go to section NAP Visualization in Cytoscape and browse the results; Data Input Preparation \u00b6 The following inputs are used for NAP: Molecular network task id, see Molecular Networking (required) Identifier(s) of databases and/or user provided databases (required) Structure database \u00b6 There are basically three options for database structure selection: Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Be aware that these databases are static and new changes on the source databases are not incorporated automatically. Input an in house generated database. See Molecular Networking documentation to learn how to use the drag and drop upload. A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as : Having an in house collection, before the use in NAP, the user has to first format the database, using the following webserver : After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as : The combination of the two databases above. NAP allows the combination of different databases, either through multiple database identifiers, or by the combination of identifiers and text file. While this feature allows flexibility, it is important narrow the search space for the system under study. Running NAP \u00b6 NAP Workflow Selection \u00b6 From the main GNPS page , you can access NAP clicking the banner and then selecting NAP in the corresponding description. You can also directly open clicking \"here\" . This will take you to the workflow input to start NAP. The image below shows an example of the most important parameters The first parameter is the GNPS network task id, this id can be found in the results email sent by GNPS or in the url, as shown in the image below, the task id is '3b215c4b25594b9c85d92de547815c0a' and the molecular family (connected component) containing the 'cluster index' 56 can be inspected in the molecular network . A detailed description of the parameters is provided below . Parameter Walkthrough \u00b6 Parameter Description Default GNPS job ID GNPS molecular networking task id. Number of a cluster index Any cluster index of a connected component of interest in a Molecular Network. The propagation is limited by the connected component. Cosine value to subselect inside a cluster Used to disconnect nodes in very dense molecular networks and decrease the number of nodes to be analyzed. 0.5 N first candidates for consensus score Number of candidate structures of the neighbor nodes used for Consensus re-ranking. 10 Use fusion result for consensus Whether to use the result from Fusion re-ranking to perform Consensus re-ranking. 1 Accuracy for exact mass candidate search (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 Acquisition mode Mass spectrometry acquisition mode. Positive Adduct ion type Expected adduct type for the precursor ion mass. [M+H] Multiple adduct types Input one or more adducts, separated by \",\". Available options are: listed on the Adduct drop down menu. Structure databases Input one or more databases, separated by \",\". Available options are: GNPS , HMDB , SUPNAT , CHEBI , DRUGBANK and FooDB . Use none to select only user defined. Compound class to be selected ClassyFire class in the following format: \"class:name\". User provided database In house candidate structure database to be used in the search. Skip parent mass selection Should be used only in combination with class selection. 0 User provided MetFrag parameter file Check here for a template. Maximum number of candidate structures in the graph: Number od candidate structures to be exported in the Cytoscape graph. 10 Workflow type Standard or MZmine . Online Exploration of NAP results \u00b6 After completing a NAP workflow, the results can be browsed in the web interface. The web interface provides a quick and easy way to perform initial analysis of your data, particularly if you are interested in a specific structure or class of structures and want to inspect in the results. To have access to the web interface click on the 'EXPERIMENTAL - NAPviewer' at the results page: The result summaries can be divided in four sections. 1. Structure view \u00b6 NAP attempts to re-rank the candidate structures provided by MetFrag using the information provided by the molecular network. This first view shows the S tructures ranked by MetFrag and the ones re-ranked by NAP to allow the user to quickly inspect if the propagation improved the ranking: 2. Graph view \u00b6 As the re-ranking is performing obtaining information from neighbor nodes, the G raph view displays the direct neighbor's first candidate structures of a given re-ranked node to allow the user to inspect if the re-ranking is consistent in the network: The node border colors indicate the source of structure: green - reference spectral library structure; magenta MetFrag's first candidate; blue Fusion's first candidate and red Consensus' first candidate. 3. Fragment view \u00b6 Some important aspects of structural prediction are: how many fragments were predicted, which fragments and which substructures were assigned to the predictions. The F ragment view displays the direct fragments predicted for each structure in the candidate list of a given fragmentation spectrum (represented by a node in the network): By hovering the mouse over the candidate fragment it is possible to see the substructure predicted for the fragment. 4. Full candidate list view \u00b6 As structural prediction is very challenging. The correct candidate may not be the first in the list, therefore it is important to be able to browse the candidate list. The Link containing the full list of candidate structures found in NAP search is provided. The first column of the candidate's table contains a link out for the respective database where the structure was originated. The table also contains the ranking for MetFrag, Fusion and Consensus, the link for number of fragments predicted for each candidate structure, a link to fragment plot representation and a column with color coded structural similarity grouping that can be easily associated with candidate's ClassyFire class, when available: NAP Visualization in Cytoscape \u00b6 In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output from NAP. Cytoscape (we have used version >= 3.4) is available for download from here . Download NAP Cytoscape files \u00b6 To download NAP's Cytoscape file, go back to the results page of your task: and download the compacted file containing the 'structure_graph_alt.xgmml' file. After the download, remember to uncompress the file for downstream use. Installing the ChemViz plugin \u00b6 To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below: Load NAP Cytoscape file and apply layout \u00b6 Load the 'structure_graph_alt.xgmml' file: and apply a layout to spread the nodes: Change image display properties and paint library match structure \u00b6 The 'structure_graph_alt.xgmml' file contains some pre-set elements to aid structure display. Nodes possessing a structure are empty squares. Node borders are either green (spectral library match) or blue (in silico prediction). In silico predictions can be a combination of MetFrag, Fusion and Consensus. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the columns MetFrag/Fusion/ConsensusSMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing: After setting the desired source column to display the structure one can just 'paint' the structure on the node: Change display properties and paint on multiple nodes \u00b6 As we described in the publications below we have a decreasing order of confidence on structural prediction spectral library match > Fusion scoring > Consensus scoring > MetFrag scoring. To change for Fusion scoring structures you can do: and paint the structures: Display the list of candidates \u00b6 As discussed in the Online Exploration section, the most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters : Citation \u00b6 da Silva, Ricardo R., Mingxun Wang, Louis-F\u00e9lix Nothias, Justin JJ van der Hooft, Andr\u00e9s Mauricio Caraballo-Rodr\u00edguez, Evan Fox, Marcy J. Balunas, Jonathan L. Klassen, Norberto Peporine Lopes, and Pieter C. Dorrestein. \"Propagating annotations of molecular networks using in silico fragmentation.\" PLoS computational biology 14, no. 4 (2018): e1006089. Kyo Bin Kang, Eun Jin Park, Ricardo R. da Silva, Hyun Woo Kim, Pieter C. Dorrestein, Sang Hyun Sung. \"Targeted Isolation of Neuroprotective Dicoumaroyl Neolignans and Lignans from Sageretia theezans Using in Silico Molecular Network Annotation Propagation-Based Dereplication\" Journal of Natural Products, 2018, 81 (8), pp 1819\u20131828 Contribute to the Documentation \u00b6 For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\". Page Contributors \u00b6 Ming Wang (6.37%), lfnothias (1.96%), Ricardo Silva (88.73%), amcaraballor (2.94%)","title":"Network Annotation Propagation (NAP)"},{"location":"nap/#network-annotation-propagation-overview","text":"Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. This workflow is currently in beta development stages so any feedback is welcome to improve analysis and usability. It is available here under 'NAP_CCMS' Workflow drop down menu. Check out the full documentation .","title":"Network Annotation Propagation Overview"},{"location":"nap/#nap-short-hands-on-tutorial","text":"The aim of this tutorial is to work as a guided tour through this documentation page and exploring the finding of Kang et al., (2018) . Go to Structure database section, download the example in house database (two columns file), add the structure SN00230021 to the file and generate the formatted database. Make sure you use an excel like software and save as tab separated text file; Go to Running NAP section, open NAP input interface, make sure you are logged and run a job with example parameters present in the picture (including job id: '3b215c4b25594b9c85d92de547815c0a' and cluster index: 56), with the database you just created. Go here if need instructions to upload the database ; When your job is processed, you should receive a link similar to that. Go to section Online Exploration and browse the results; Follow the same link above. Go to section NAP Visualization in Cytoscape and browse the results;","title":"NAP short hands on tutorial"},{"location":"nap/#data-input-preparation","text":"The following inputs are used for NAP: Molecular network task id, see Molecular Networking (required) Identifier(s) of databases and/or user provided databases (required)","title":"Data Input Preparation"},{"location":"nap/#structure-database","text":"There are basically three options for database structure selection: Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Be aware that these databases are static and new changes on the source databases are not incorporated automatically. Input an in house generated database. See Molecular Networking documentation to learn how to use the drag and drop upload. A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as : Having an in house collection, before the use in NAP, the user has to first format the database, using the following webserver : After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as : The combination of the two databases above. NAP allows the combination of different databases, either through multiple database identifiers, or by the combination of identifiers and text file. While this feature allows flexibility, it is important narrow the search space for the system under study.","title":"Structure database"},{"location":"nap/#running-nap","text":"","title":"Running NAP"},{"location":"nap/#nap-workflow-selection","text":"From the main GNPS page , you can access NAP clicking the banner and then selecting NAP in the corresponding description. You can also directly open clicking \"here\" . This will take you to the workflow input to start NAP. The image below shows an example of the most important parameters The first parameter is the GNPS network task id, this id can be found in the results email sent by GNPS or in the url, as shown in the image below, the task id is '3b215c4b25594b9c85d92de547815c0a' and the molecular family (connected component) containing the 'cluster index' 56 can be inspected in the molecular network . A detailed description of the parameters is provided below .","title":"NAP Workflow Selection"},{"location":"nap/#parameter-walkthrough","text":"Parameter Description Default GNPS job ID GNPS molecular networking task id. Number of a cluster index Any cluster index of a connected component of interest in a Molecular Network. The propagation is limited by the connected component. Cosine value to subselect inside a cluster Used to disconnect nodes in very dense molecular networks and decrease the number of nodes to be analyzed. 0.5 N first candidates for consensus score Number of candidate structures of the neighbor nodes used for Consensus re-ranking. 10 Use fusion result for consensus Whether to use the result from Fusion re-ranking to perform Consensus re-ranking. 1 Accuracy for exact mass candidate search (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 Acquisition mode Mass spectrometry acquisition mode. Positive Adduct ion type Expected adduct type for the precursor ion mass. [M+H] Multiple adduct types Input one or more adducts, separated by \",\". Available options are: listed on the Adduct drop down menu. Structure databases Input one or more databases, separated by \",\". Available options are: GNPS , HMDB , SUPNAT , CHEBI , DRUGBANK and FooDB . Use none to select only user defined. Compound class to be selected ClassyFire class in the following format: \"class:name\". User provided database In house candidate structure database to be used in the search. Skip parent mass selection Should be used only in combination with class selection. 0 User provided MetFrag parameter file Check here for a template. Maximum number of candidate structures in the graph: Number od candidate structures to be exported in the Cytoscape graph. 10 Workflow type Standard or MZmine .","title":"Parameter Walkthrough"},{"location":"nap/#online-exploration-of-nap-results","text":"After completing a NAP workflow, the results can be browsed in the web interface. The web interface provides a quick and easy way to perform initial analysis of your data, particularly if you are interested in a specific structure or class of structures and want to inspect in the results. To have access to the web interface click on the 'EXPERIMENTAL - NAPviewer' at the results page: The result summaries can be divided in four sections.","title":"Online Exploration of NAP results"},{"location":"nap/#1-structure-view","text":"NAP attempts to re-rank the candidate structures provided by MetFrag using the information provided by the molecular network. This first view shows the S tructures ranked by MetFrag and the ones re-ranked by NAP to allow the user to quickly inspect if the propagation improved the ranking:","title":"1. Structure view"},{"location":"nap/#2-graph-view","text":"As the re-ranking is performing obtaining information from neighbor nodes, the G raph view displays the direct neighbor's first candidate structures of a given re-ranked node to allow the user to inspect if the re-ranking is consistent in the network: The node border colors indicate the source of structure: green - reference spectral library structure; magenta MetFrag's first candidate; blue Fusion's first candidate and red Consensus' first candidate.","title":"2. Graph view"},{"location":"nap/#3-fragment-view","text":"Some important aspects of structural prediction are: how many fragments were predicted, which fragments and which substructures were assigned to the predictions. The F ragment view displays the direct fragments predicted for each structure in the candidate list of a given fragmentation spectrum (represented by a node in the network): By hovering the mouse over the candidate fragment it is possible to see the substructure predicted for the fragment.","title":"3. Fragment view"},{"location":"nap/#4-full-candidate-list-view","text":"As structural prediction is very challenging. The correct candidate may not be the first in the list, therefore it is important to be able to browse the candidate list. The Link containing the full list of candidate structures found in NAP search is provided. The first column of the candidate's table contains a link out for the respective database where the structure was originated. The table also contains the ranking for MetFrag, Fusion and Consensus, the link for number of fragments predicted for each candidate structure, a link to fragment plot representation and a column with color coded structural similarity grouping that can be easily associated with candidate's ClassyFire class, when available:","title":"4. Full candidate list view"},{"location":"nap/#nap-visualization-in-cytoscape","text":"In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output from NAP. Cytoscape (we have used version >= 3.4) is available for download from here .","title":"NAP Visualization in Cytoscape"},{"location":"nap/#download-nap-cytoscape-files","text":"To download NAP's Cytoscape file, go back to the results page of your task: and download the compacted file containing the 'structure_graph_alt.xgmml' file. After the download, remember to uncompress the file for downstream use.","title":"Download NAP Cytoscape files"},{"location":"nap/#installing-the-chemviz-plugin","text":"To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below:","title":"Installing the ChemViz plugin"},{"location":"nap/#load-nap-cytoscape-file-and-apply-layout","text":"Load the 'structure_graph_alt.xgmml' file: and apply a layout to spread the nodes:","title":"Load NAP Cytoscape file and apply layout"},{"location":"nap/#change-image-display-properties-and-paint-library-match-structure","text":"The 'structure_graph_alt.xgmml' file contains some pre-set elements to aid structure display. Nodes possessing a structure are empty squares. Node borders are either green (spectral library match) or blue (in silico prediction). In silico predictions can be a combination of MetFrag, Fusion and Consensus. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the columns MetFrag/Fusion/ConsensusSMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing: After setting the desired source column to display the structure one can just 'paint' the structure on the node:","title":"Change image display properties and paint library match structure"},{"location":"nap/#change-display-properties-and-paint-on-multiple-nodes","text":"As we described in the publications below we have a decreasing order of confidence on structural prediction spectral library match > Fusion scoring > Consensus scoring > MetFrag scoring. To change for Fusion scoring structures you can do: and paint the structures:","title":"Change display properties and paint on multiple nodes"},{"location":"nap/#display-the-list-of-candidates","text":"As discussed in the Online Exploration section, the most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters :","title":"Display the list of candidates"},{"location":"nap/#citation","text":"da Silva, Ricardo R., Mingxun Wang, Louis-F\u00e9lix Nothias, Justin JJ van der Hooft, Andr\u00e9s Mauricio Caraballo-Rodr\u00edguez, Evan Fox, Marcy J. Balunas, Jonathan L. Klassen, Norberto Peporine Lopes, and Pieter C. Dorrestein. \"Propagating annotations of molecular networks using in silico fragmentation.\" PLoS computational biology 14, no. 4 (2018): e1006089. Kyo Bin Kang, Eun Jin Park, Ricardo R. da Silva, Hyun Woo Kim, Pieter C. Dorrestein, Sang Hyun Sung. \"Targeted Isolation of Neuroprotective Dicoumaroyl Neolignans and Lignans from Sageretia theezans Using in Silico Molecular Network Annotation Propagation-Based Dereplication\" Journal of Natural Products, 2018, 81 (8), pp 1819\u20131828","title":"Citation"},{"location":"nap/#contribute-to-the-documentation","text":"For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository. To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".","title":"Contribute to the Documentation"},{"location":"nap/#page-contributors","text":"Ming Wang (6.37%), lfnothias (1.96%), Ricardo Silva (88.73%), amcaraballor (2.94%)","title":"Page Contributors"},{"location":"networking/","text":"Molecular Networking Overview \u00b6 Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This visualization approach can detect sets of spectra from related molecules (molecular networks), even when the spectra themselves are not matched to any known compounds. The visualization of molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (connections) between nodes. Nodes can be supplemented with metadata, including dereplication matches or information that is provided by the user, e.g. as abundance, origin of product, biochemical activity, or hydrophobicity, which can be reflected in a node\u2019s size or color. This map of all related molecules is visualized as a global molecular network. For more information about Molecular Networking check out the GNPS publication from 2016. Data Input Preparation \u00b6 The follow data is can be put into molecular networking. Mass Spectrometry data files (required) Metadata/Group Mapping (optional) `ili 3D mapping files (optional) Mass Spectrometry data files \u00b6 Molecular networking supports mzXML, mzML, and mgf file formats. To convert your file to the appropriate formats, check out our documentation . Metadata \u00b6 More information provided here . Running Molecular Networking \u00b6 Molecular Networking Workflow Selection \u00b6 From the main GNPS page , click the \"Create Molecular Network\" button. This will bring you to the workflow input to start networking. Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed. Selecting Files to Analyze \u00b6 Select files for analysis by first clicking \"Select Input Files\". This bring a popup window. We can select our own files to analyze. Alternatively, we can import an existing public dataset if we know the dataset accession ( Browse Datasets ). From the Select Input Files popup, you will be a shares files tab. There you will find a box called Import Data Share. In this box you may enter an accession of a MassIVE dataset. Upon clicking import the dataset will appear in your workspace to select input files to analyze from. Organizing Selected Files into Groups \u00b6 By default, files can be categorized into separate groups (G1, G2, etc.). For example, case and control or two different microbes can be separate groups. Using the basic options, only six groups can be created. Individual files or entire folders can be selected. Click Finish Selection which will close the pop-up window. Parameter Walkthrough \u00b6 Basic Options \u00b6 Parameter Description Default Precursor ion mass tolerance (PIMT) Parameter used for MS-Cluster and spectral library search. Specify the precursor ions mass tolerance, in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 2.0 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.5 Advanced Network Options \u00b6 Parameter Description Default Notes Min Pairs Cos Minimum cosine score that must occur between a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network. 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will limit do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. Is the minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, and the mobile phase, ...), and the collision-induced fragmentation behavior of the molecules of interest within the samples. High molecular weight (MW) compounds, and compounds with more hetero-atoms will generally tend to produce more fragment ions. However, this rule cannot be systematized. For example, some lipids with high MW generate only few fragment ions. Note that spectra with fewer than 5 fragment ions will by default not be considered for networking and result in single nodes. Node TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Minimum Cluster Size Minimum number of MS/MS spectra in a consensus MS/MS spectra to be considered for molecular networking 2 Requires MS-Cluster to be on. This parameter should be tuned based on the dataset size. See presets below Run MSCluster Cluster MS/MS spectra before networking Yes MSCluster will analyze every MS/MS spectra resulting from ions that fall within the defined precursor ion mass tolerance, and will merge the nearly-identical MS/MS spectra (above the cosine score) into a single consensus MS/MS spectrum. Each consensus MS/MS spectrum usually consist of multiple MS/MS spectra from across multiple LC-MS runs (or data files) Maximum Connected Component Size Maximum size of nodes allowed in a single connected network 100 Maximum size of nodes allowed in a single connected network. Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Metadata File Text input to describe experimental setup Replaces both Group mapping and Attribute Mapping Group Mapping Input text file organizing input files into groups Input text file organizing input files into groups. used as a more flexible alternative to assigning groups during data input selection. Attribute Mapping Attribute mapping eases visualization of different groups within cytoscape Input text file organizing groups into attributes Advanced Library Search Options \u00b6 Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending of the molecule of interest, and the experimental conditions (such as the ionisation mode, and the fragmentation conditions, ...). For example, collision-induced fragmentation of some lipids produce only few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular-type to be connected in one network. An higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options \u00b6 Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Filter Spectra from G6 as Blanks Before Networking Enables the filtering out of consensus clusters for consideration in the molecular network if it appears in any file in G6 Don't Filter Parameter Presets \u00b6 We have several parameter presets that seem to work well depending on the dataset size. Small datasets - up to 5 LC/MS files Medium Datasets - 5 to 400 LC/MS files Large Datasets - 400+ LC/MS files Big Data(sets) - Lets talk! Status Page \u00b6 Upon submission of the workflow, you will be brought to the status page. This will show you the progress of your molecular networking job. Molecular networks usually take 10 min for small datasets 1 hour for medium datasets Several hours for large datasets FOREVER for big datasets If you find your molecular network is taking longer than this, please contact us . Online Exploration of Molecular Networks \u00b6 After completing a Molecular Networking workflow utilizing GNPS, analysis can be done within the web interface. The GNPS web interface provides a quick and easy way to perform initial analysis of your data particularly if you want to view the MS2 spectra of the nodes/clusters/networks generated by the Molecular Networking workflow. Networking Results Views Description \u00b6 Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View Unique Library Compounds All unique library spectrum matches View All Clusters With IDs All consensus MS/MS spectra created by MSCluster that were considered for library search and molecular networking. This does not include consensus MS/MS spectra that fell below the minimum cluster size threshold Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Network Summarizing Graphs Brief statistics about the network such as number of spectra, number of nodes, number of spectral families, identification rates, etc. (legacy output) Methods and Citation for Manuscripts View Description Networking Parameters and Written Network Description Automatic description of molecular networking generation. This can be used in the methods section of manuscripts Export/Download Network Files View Description Download Clustered Spectra as MGF Download consensus MS/MS spectra as an MGF file Download GraphML for Cytoscape Download network files (graphML) for import into Cytoscape Download Bucket Table Download spectral abundance for all consensus spectra across all files (calculated within each file as the sum precursor abundance) Download BioM for Qiime/Qiita Download BioM for spectral counts for analysis in Qiime/Qiita multivariate statistics tools Download Metadata for Qiime Download Metadata file for analysis in Qiime Download ili Data Download the abundance information formatted for ili Advanced Views - Global Public Dataset Matches View Description View Matches to All Public Datasets View matches of consensus MS/MS spectra in the network to all public datasets Advanced Views - Third Party Visualization View Description View Emperor PCoA Plot in GNPS In browser visualization of all analyzed samples with PCoA View ili in GNPS Visualization of 3D ili mapping in GNPS Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape Citation \u00b6 If you are using GNPS for analysis, please cite the manuscript Mingxun Wang, Jeremy J Carver, Vanessa V Phelan, Laura M Sanchez, Neha Garg, Yao Peng, et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking\" Nature Biotechnology 34.8 (2016): 828-837. PMID: 27504778 If you use MS-Cluster in your molecular networks, cite the following as well: Frank, Ari M., et al. \"Clustering millions of tandem mass spectra.\" Journal of proteome research 7.01 (2007): 113-122. Documentation for \u00ccli \u00b6 Spatial distribution of molecular features can be visualized in 2D or 3D throughout \u00ccli in GNPS, a Molecular cartography approach Protsyuk et al., 2017 . For mapping, it is necessary to upload the metadata (.txt) containing the \u00ecli coordinates (x, y, z and radio) and the 2D or 3D model (STL format), along with the data files (mzXML format) for Classic Molecular Network. First, it is necessary to obtain the 2D/3D model. The 2D model may be a picture, a map or other, and the 3D model can be obtained by scanning the sample. The coordinates should be pointed in the 2D/3D model by Meshlab software before uploading in GNPS. A free Meshlab version can be downloaded from here . In Meshlab, use the PickPoint tool to point coordinates in the model as figure below. A list with the coordinates will appear in the new box, and you can rename them according to your data. After that, a .csv table containing the coordinates and the .stl pointed model should be exported from Meshlab. More details about how to create a .csv table with the coordinates can be found here . The coordinates must be added in the metadata (.txt format) according to ReDU format . All files should be selected according to indicated below: Finish selection and set the parameters to create the Molecular Network. More details regarding Classic Molecular Network can be found here . To create \u00ecli visualization you must go in the Advanced Output Options and change the \u00ecli Mapping Output to \u201cCreate\u201d . Submit the job. Once the job was done, click on \u201cView \u00ecli in GNPS\u201d to visualize the feature mapping. A window for visualization will open. You can explore your data changing the feature in the bottom right. You can also set different parameters in the right window, such as the size of the spot or the color of mapping. There, you will also find some more examples to explore. More details about \u00ecli can be found here . References \u00b6 Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols, 13(1), 134. https://doi.org/10.1038/nprot.2017.122 Page Contributors \u00b6 Ming Wang (82.1%), alan-jarmusch (0.39%), Madeleine Ernst (0.39%), abauermeister (17.12%)","title":"Molecular Networking"},{"location":"networking/#molecular-networking-overview","text":"Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This visualization approach can detect sets of spectra from related molecules (molecular networks), even when the spectra themselves are not matched to any known compounds. The visualization of molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (connections) between nodes. Nodes can be supplemented with metadata, including dereplication matches or information that is provided by the user, e.g. as abundance, origin of product, biochemical activity, or hydrophobicity, which can be reflected in a node\u2019s size or color. This map of all related molecules is visualized as a global molecular network. For more information about Molecular Networking check out the GNPS publication from 2016.","title":"Molecular Networking Overview"},{"location":"networking/#data-input-preparation","text":"The follow data is can be put into molecular networking. Mass Spectrometry data files (required) Metadata/Group Mapping (optional) `ili 3D mapping files (optional)","title":"Data Input Preparation"},{"location":"networking/#mass-spectrometry-data-files","text":"Molecular networking supports mzXML, mzML, and mgf file formats. To convert your file to the appropriate formats, check out our documentation .","title":"Mass Spectrometry data files"},{"location":"networking/#metadata","text":"More information provided here .","title":"Metadata"},{"location":"networking/#running-molecular-networking","text":"","title":"Running Molecular Networking"},{"location":"networking/#molecular-networking-workflow-selection","text":"From the main GNPS page , click the \"Create Molecular Network\" button. This will bring you to the workflow input to start networking. Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.","title":"Molecular Networking Workflow Selection"},{"location":"networking/#selecting-files-to-analyze","text":"Select files for analysis by first clicking \"Select Input Files\". This bring a popup window. We can select our own files to analyze. Alternatively, we can import an existing public dataset if we know the dataset accession ( Browse Datasets ). From the Select Input Files popup, you will be a shares files tab. There you will find a box called Import Data Share. In this box you may enter an accession of a MassIVE dataset. Upon clicking import the dataset will appear in your workspace to select input files to analyze from.","title":"Selecting Files to Analyze"},{"location":"networking/#organizing-selected-files-into-groups","text":"By default, files can be categorized into separate groups (G1, G2, etc.). For example, case and control or two different microbes can be separate groups. Using the basic options, only six groups can be created. Individual files or entire folders can be selected. Click Finish Selection which will close the pop-up window.","title":"Organizing Selected Files into Groups"},{"location":"networking/#parameter-walkthrough","text":"","title":"Parameter Walkthrough"},{"location":"networking/#basic-options","text":"Parameter Description Default Precursor ion mass tolerance (PIMT) Parameter used for MS-Cluster and spectral library search. Specify the precursor ions mass tolerance, in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 2.0 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.5","title":"Basic Options"},{"location":"networking/#advanced-network-options","text":"Parameter Description Default Notes Min Pairs Cos Minimum cosine score that must occur between a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network. 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will limit do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. Is the minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, and the mobile phase, ...), and the collision-induced fragmentation behavior of the molecules of interest within the samples. High molecular weight (MW) compounds, and compounds with more hetero-atoms will generally tend to produce more fragment ions. However, this rule cannot be systematized. For example, some lipids with high MW generate only few fragment ions. Note that spectra with fewer than 5 fragment ions will by default not be considered for networking and result in single nodes. Node TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Minimum Cluster Size Minimum number of MS/MS spectra in a consensus MS/MS spectra to be considered for molecular networking 2 Requires MS-Cluster to be on. This parameter should be tuned based on the dataset size. See presets below Run MSCluster Cluster MS/MS spectra before networking Yes MSCluster will analyze every MS/MS spectra resulting from ions that fall within the defined precursor ion mass tolerance, and will merge the nearly-identical MS/MS spectra (above the cosine score) into a single consensus MS/MS spectrum. Each consensus MS/MS spectrum usually consist of multiple MS/MS spectra from across multiple LC-MS runs (or data files) Maximum Connected Component Size Maximum size of nodes allowed in a single connected network 100 Maximum size of nodes allowed in a single connected network. Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Metadata File Text input to describe experimental setup Replaces both Group mapping and Attribute Mapping Group Mapping Input text file organizing input files into groups Input text file organizing input files into groups. used as a more flexible alternative to assigning groups during data input selection. Attribute Mapping Attribute mapping eases visualization of different groups within cytoscape Input text file organizing groups into attributes","title":"Advanced Network Options"},{"location":"networking/#advanced-library-search-options","text":"Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending of the molecule of interest, and the experimental conditions (such as the ionisation mode, and the fragmentation conditions, ...). For example, collision-induced fragmentation of some lipids produce only few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular-type to be connected in one network. An higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Library Search Options"},{"location":"networking/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Filter Spectra from G6 as Blanks Before Networking Enables the filtering out of consensus clusters for consideration in the molecular network if it appears in any file in G6 Don't Filter","title":"Advanced Filtering Options"},{"location":"networking/#parameter-presets","text":"We have several parameter presets that seem to work well depending on the dataset size. Small datasets - up to 5 LC/MS files Medium Datasets - 5 to 400 LC/MS files Large Datasets - 400+ LC/MS files Big Data(sets) - Lets talk!","title":"Parameter Presets"},{"location":"networking/#status-page","text":"Upon submission of the workflow, you will be brought to the status page. This will show you the progress of your molecular networking job. Molecular networks usually take 10 min for small datasets 1 hour for medium datasets Several hours for large datasets FOREVER for big datasets If you find your molecular network is taking longer than this, please contact us .","title":"Status Page"},{"location":"networking/#online-exploration-of-molecular-networks","text":"After completing a Molecular Networking workflow utilizing GNPS, analysis can be done within the web interface. The GNPS web interface provides a quick and easy way to perform initial analysis of your data particularly if you want to view the MS2 spectra of the nodes/clusters/networks generated by the Molecular Networking workflow.","title":"Online Exploration of Molecular Networks"},{"location":"networking/#networking-results-views-description","text":"Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View Unique Library Compounds All unique library spectrum matches View All Clusters With IDs All consensus MS/MS spectra created by MSCluster that were considered for library search and molecular networking. This does not include consensus MS/MS spectra that fell below the minimum cluster size threshold Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Network Summarizing Graphs Brief statistics about the network such as number of spectra, number of nodes, number of spectral families, identification rates, etc. (legacy output) Methods and Citation for Manuscripts View Description Networking Parameters and Written Network Description Automatic description of molecular networking generation. This can be used in the methods section of manuscripts Export/Download Network Files View Description Download Clustered Spectra as MGF Download consensus MS/MS spectra as an MGF file Download GraphML for Cytoscape Download network files (graphML) for import into Cytoscape Download Bucket Table Download spectral abundance for all consensus spectra across all files (calculated within each file as the sum precursor abundance) Download BioM for Qiime/Qiita Download BioM for spectral counts for analysis in Qiime/Qiita multivariate statistics tools Download Metadata for Qiime Download Metadata file for analysis in Qiime Download ili Data Download the abundance information formatted for ili Advanced Views - Global Public Dataset Matches View Description View Matches to All Public Datasets View matches of consensus MS/MS spectra in the network to all public datasets Advanced Views - Third Party Visualization View Description View Emperor PCoA Plot in GNPS In browser visualization of all analyzed samples with PCoA View ili in GNPS Visualization of 3D ili mapping in GNPS Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape","title":"Networking Results Views Description"},{"location":"networking/#citation","text":"If you are using GNPS for analysis, please cite the manuscript Mingxun Wang, Jeremy J Carver, Vanessa V Phelan, Laura M Sanchez, Neha Garg, Yao Peng, et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking\" Nature Biotechnology 34.8 (2016): 828-837. PMID: 27504778 If you use MS-Cluster in your molecular networks, cite the following as well: Frank, Ari M., et al. \"Clustering millions of tandem mass spectra.\" Journal of proteome research 7.01 (2007): 113-122.","title":"Citation"},{"location":"networking/#documentation-for-ili","text":"Spatial distribution of molecular features can be visualized in 2D or 3D throughout \u00ccli in GNPS, a Molecular cartography approach Protsyuk et al., 2017 . For mapping, it is necessary to upload the metadata (.txt) containing the \u00ecli coordinates (x, y, z and radio) and the 2D or 3D model (STL format), along with the data files (mzXML format) for Classic Molecular Network. First, it is necessary to obtain the 2D/3D model. The 2D model may be a picture, a map or other, and the 3D model can be obtained by scanning the sample. The coordinates should be pointed in the 2D/3D model by Meshlab software before uploading in GNPS. A free Meshlab version can be downloaded from here . In Meshlab, use the PickPoint tool to point coordinates in the model as figure below. A list with the coordinates will appear in the new box, and you can rename them according to your data. After that, a .csv table containing the coordinates and the .stl pointed model should be exported from Meshlab. More details about how to create a .csv table with the coordinates can be found here . The coordinates must be added in the metadata (.txt format) according to ReDU format . All files should be selected according to indicated below: Finish selection and set the parameters to create the Molecular Network. More details regarding Classic Molecular Network can be found here . To create \u00ecli visualization you must go in the Advanced Output Options and change the \u00ecli Mapping Output to \u201cCreate\u201d . Submit the job. Once the job was done, click on \u201cView \u00ecli in GNPS\u201d to visualize the feature mapping. A window for visualization will open. You can explore your data changing the feature in the bottom right. You can also set different parameters in the right window, such as the size of the spot or the color of mapping. There, you will also find some more examples to explore. More details about \u00ecli can be found here .","title":"Documentation for \u00ccli"},{"location":"networking/#references","text":"Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols, 13(1), 134. https://doi.org/10.1038/nprot.2017.122","title":"References"},{"location":"networking/#page-contributors","text":"Ming Wang (82.1%), alan-jarmusch (0.39%), Madeleine Ernst (0.39%), abauermeister (17.12%)","title":"Page Contributors"},{"location":"networkingviews/","text":"View All Library Hits \u00b6 This view shows all the library matches between the consensus MS/MS spectra and the GNPS MS/MS Spectral Libraries. To view the quality of the MS/MS match, click \"View Mirror Match\" to display a mirror plot View All Clusters With IDs \u00b6 View All Clusters allow a user to view the all consensus spectra in the molecular networking analysis. While Molecular Networking matches to all public reference libraries, the majority of molecules detected in untargeted LC/MS runs are unidentified. To help annotate these unidentified spectra, click the \"AnnotatetoGNPS\" to be taken to the view that allows you to choose a specific MS/MS spectrum to annotate. Then Click \"AnnotatetoGNPS\" to be taken to the annotation page with the spectrum prepopulated. Check out the details about annotation - Annotation Documentation . To view all the input MS/MS spectra that went into the consensus spectrum, click the link in the \"ClusterIdx\" link This brings up all the input MS/MS spectra. To visualize each spectrum, we can click the \"View Spectrum\" button. View Spectral Families \u00b6 View Spectra Families allows users to look at the molecular networks at a higher level. Users can see all the distinct spectral families that comprise the entire molecular network. These spectral families are all the nodes that are connected to each other. From here users can tell how big each component is, how many raw spectra are captured by the particular component, and also the libraries identifications of all the spectra in each component. To visualize each network, click on the \"Visualize Network\" link This brings up an in-browser visualization for a given spectral family Here users can explore the specific spectral family in the molecular network. Each circle (node) in the left network panel represents a consensus spectrum and edge represents related fragmentation patterns. The default color of the nodes is gray, with blue nodes representing consensus MS/MS spectra that were identified by library search. There is a lot to unpack in this online interface to explore the molecular networks. The following is a quick guide to all the features in this interface Node Labels Edge Labels Edge Highlight Node Highlights by MS2 Peak Search Align MS/MS spectra in right panels Node Size/Color Selection Node Pie Chart Coloring Rerun Network Layout Expand Network Window Toggle UI Widgets (Show/Hide) Download Spectral Family GraphML for Cytoscape Download Spectrum Peaks Annotate Spectrum with Peptide Sequence Large Spectrum Plot Show Peak m/z annotations in Spectrum Viewer Network Labeling \u00b6 The default labeling is the cluster/node index which is rather uninformative, but there are alternative labelings possible by selecting the appropriate node label from the Node Label legend box. Node Labels Label Description cluster index cluster index used globally for each cluster across all networking views parent mass precursor mass of the consensus spectrum LibraryID library identification name for the node if a library search were performed EvenOdd 1/0 for even or odd depending on the parent mass. Used for nitrogen rule Peptide peptide labeling None No Labeling Edge Labels Label Description Cosine Cosine score measuring fragmentation similarity between two nodes DeltaMZ The Delta MZ of the spectra None No Labeling Node Pie Coloring \u00b6 An additional way to customize the view of the networks is to color the nodes. By default the nodes are gray, but users can color the nodes based upon spectra counts of the groups they came from. By default the coloring labels will be based upon the default groups G1, G2, G3, G4, G5, and G6. The coloring of each node will be a pie, and the proportion colored of that pie is the proportion of the spectral counts coming from each respective group. Additionally, the Node Coloring legend describes the color for each group. Users can also use their own group names if they defined their own arbitrary groups when creating the network. To draw the pies, click \"Draw Pies\" Edge Highlights \u00b6 Edges by default include arrows pointing from low mass spectra to high mass spectra. Further, edges can also be colored. Users are able to enter a delta mz of their choice to highlight in the network. The highlighted edges will appear in red. Edge Directions \u00b6 The arrows between nodes in the molecular network point from higher m/z spectra to lower m/z spectra. This can facilitate tracking down identifying multiple extensions of a polymer or extension of a carbon chain. Edge Delta Histogram \u00b6 This histogram shows the distribution of the edge deltas. Clicking each peak in the histogram allows for highlighting the edges in the network. Node Sizing/Color \u00b6 The nodes size and color can be adjusted based upon several options: Spectrum counts Precursor intensity Number of Files Parent Mass Nitrogen Even/Odd Precursor Charge MS2 Peak Search in Molecular Network \u00b6 To search for specific molecules in the molecular network that contain an MS2 fragment of interest, you can enter a product ion m/z you want to find. First, we need to grab all the MS/MS spectra into the browser by clicking this button: Then, we can enter the m/z we want to search for and click the update button. This will highlight which molecules contain the specific product ion. We can also see a histogram of all product ions from all MS2 spectra in the current network. Detailed Interrogation of Network Spectra \u00b6 While its great to visualize the network properly, to truly make sense of the network users must be able to interrogate the network metadata and examine the actual spectra. To this end, users are able to find out information about a particular node by simply hovering their mouse over node. This will bring up a hover box describing the node information. At present the display shows like this: This shows basic information about the node, as well as the structure if the node is identified by library search and the structure was provided in the library spectrum. To further investigate the network, users can left click on a node to plot the spectrum in the top right panel (right click to plot in bottom right panel), along with the spectrum information and structure if one is available. The spectrum image is interactive so users can zoom in and look at precisely at the spectrum to make sense of the data. Additionally users can compare two spectra in the network by simple right clicking on a different node to render its information in the bottom right panel. Users can also click on an edge and both nodes that are connected to the edge are automatically displayed in the top and bottom right panels. Examining Spectrum Spectrum Alignment \u00b6 Users can quickly ascertain how two spectra align to each other at the peak level. By clicking the \"Align Spec\" button to obtain the score between the spectrum in the top and the spectrum in the bottom render panels. Additionally, the plots of the spectra will update to reflect the alignments shown here: with red peaks representing peaks that match at the exact same masses between the top and bottom spectra, and blue peaks representing peaks matching at shifted masses. Additionally, each peak is labeled with a unique identification number that shows the correspondence of peak matches between the top and bottom spectra. Network Spectra Library Matches \u00b6 To view how exactly a spectrum in the network has matched to a library spectrum, users can click the \"Show Library Match\" in the side panel on the far right. This will bring up this middle panel shown below comparing the spectrum in the network with the library spectrum in green. Network Screen Shot \u00b6 Download screenshot of the molecular network. Network Layout Re-run \u00b6 Rerun network layout to fit zoom and window. Network Window Size \u00b6 Max network view bigger to see more of the network with more room. Pop up Window \u00b6 Pop out network visualizer into new window without top menu bars. Sub-Network GraphML for Cytoscape \u00b6 Download a GraphML of network and visualize in Cytoscape or other graph software. Hide Widgets \u00b6 Show or hide user interface widgets. View Principle Coordinate Analysis (PCoA) Plots \u00b6 To view PCoA plots, please enable that output on the input page (default is on) in the \"Advanced Output Options\" section and enabling \"Create Cluster Buckets and BioM/PCoA Plots output\". This will create the appropriate data structures for PCoA analysis. To include additional metadata to color the nodes according to the sample types, include and add additional columns for metadata describing the experiment (see metadata documentation ). To view the PCoA plots when the parameters are appropriately set, click the \"View Emporer PCoA Plot in GNPS\" under the section \"Advanced Views - Third Party Visualization\" on the results page of your GNPS job. This PCoA analysis measures the distance between each of the samples based on their overlapping molecules (by MSCluster). This emperor plot is generated by the Qiime software package. The distance metric is binary_jaccard. Page Contributors \u00b6 Ming Wang","title":"Molecular Networking Views"},{"location":"networkingviews/#view-all-library-hits","text":"This view shows all the library matches between the consensus MS/MS spectra and the GNPS MS/MS Spectral Libraries. To view the quality of the MS/MS match, click \"View Mirror Match\" to display a mirror plot","title":"View All Library Hits"},{"location":"networkingviews/#view-all-clusters-with-ids","text":"View All Clusters allow a user to view the all consensus spectra in the molecular networking analysis. While Molecular Networking matches to all public reference libraries, the majority of molecules detected in untargeted LC/MS runs are unidentified. To help annotate these unidentified spectra, click the \"AnnotatetoGNPS\" to be taken to the view that allows you to choose a specific MS/MS spectrum to annotate. Then Click \"AnnotatetoGNPS\" to be taken to the annotation page with the spectrum prepopulated. Check out the details about annotation - Annotation Documentation . To view all the input MS/MS spectra that went into the consensus spectrum, click the link in the \"ClusterIdx\" link This brings up all the input MS/MS spectra. To visualize each spectrum, we can click the \"View Spectrum\" button.","title":"View All Clusters With IDs"},{"location":"networkingviews/#view-spectral-families","text":"View Spectra Families allows users to look at the molecular networks at a higher level. Users can see all the distinct spectral families that comprise the entire molecular network. These spectral families are all the nodes that are connected to each other. From here users can tell how big each component is, how many raw spectra are captured by the particular component, and also the libraries identifications of all the spectra in each component. To visualize each network, click on the \"Visualize Network\" link This brings up an in-browser visualization for a given spectral family Here users can explore the specific spectral family in the molecular network. Each circle (node) in the left network panel represents a consensus spectrum and edge represents related fragmentation patterns. The default color of the nodes is gray, with blue nodes representing consensus MS/MS spectra that were identified by library search. There is a lot to unpack in this online interface to explore the molecular networks. The following is a quick guide to all the features in this interface Node Labels Edge Labels Edge Highlight Node Highlights by MS2 Peak Search Align MS/MS spectra in right panels Node Size/Color Selection Node Pie Chart Coloring Rerun Network Layout Expand Network Window Toggle UI Widgets (Show/Hide) Download Spectral Family GraphML for Cytoscape Download Spectrum Peaks Annotate Spectrum with Peptide Sequence Large Spectrum Plot Show Peak m/z annotations in Spectrum Viewer","title":"View Spectral Families"},{"location":"networkingviews/#network-labeling","text":"The default labeling is the cluster/node index which is rather uninformative, but there are alternative labelings possible by selecting the appropriate node label from the Node Label legend box. Node Labels Label Description cluster index cluster index used globally for each cluster across all networking views parent mass precursor mass of the consensus spectrum LibraryID library identification name for the node if a library search were performed EvenOdd 1/0 for even or odd depending on the parent mass. Used for nitrogen rule Peptide peptide labeling None No Labeling Edge Labels Label Description Cosine Cosine score measuring fragmentation similarity between two nodes DeltaMZ The Delta MZ of the spectra None No Labeling","title":"Network Labeling"},{"location":"networkingviews/#node-pie-coloring","text":"An additional way to customize the view of the networks is to color the nodes. By default the nodes are gray, but users can color the nodes based upon spectra counts of the groups they came from. By default the coloring labels will be based upon the default groups G1, G2, G3, G4, G5, and G6. The coloring of each node will be a pie, and the proportion colored of that pie is the proportion of the spectral counts coming from each respective group. Additionally, the Node Coloring legend describes the color for each group. Users can also use their own group names if they defined their own arbitrary groups when creating the network. To draw the pies, click \"Draw Pies\"","title":"Node Pie Coloring"},{"location":"networkingviews/#edge-highlights","text":"Edges by default include arrows pointing from low mass spectra to high mass spectra. Further, edges can also be colored. Users are able to enter a delta mz of their choice to highlight in the network. The highlighted edges will appear in red.","title":"Edge Highlights"},{"location":"networkingviews/#edge-directions","text":"The arrows between nodes in the molecular network point from higher m/z spectra to lower m/z spectra. This can facilitate tracking down identifying multiple extensions of a polymer or extension of a carbon chain.","title":"Edge Directions"},{"location":"networkingviews/#edge-delta-histogram","text":"This histogram shows the distribution of the edge deltas. Clicking each peak in the histogram allows for highlighting the edges in the network.","title":"Edge Delta Histogram"},{"location":"networkingviews/#node-sizingcolor","text":"The nodes size and color can be adjusted based upon several options: Spectrum counts Precursor intensity Number of Files Parent Mass Nitrogen Even/Odd Precursor Charge","title":"Node Sizing/Color"},{"location":"networkingviews/#ms2-peak-search-in-molecular-network","text":"To search for specific molecules in the molecular network that contain an MS2 fragment of interest, you can enter a product ion m/z you want to find. First, we need to grab all the MS/MS spectra into the browser by clicking this button: Then, we can enter the m/z we want to search for and click the update button. This will highlight which molecules contain the specific product ion. We can also see a histogram of all product ions from all MS2 spectra in the current network.","title":"MS2 Peak Search in Molecular Network"},{"location":"networkingviews/#detailed-interrogation-of-network-spectra","text":"While its great to visualize the network properly, to truly make sense of the network users must be able to interrogate the network metadata and examine the actual spectra. To this end, users are able to find out information about a particular node by simply hovering their mouse over node. This will bring up a hover box describing the node information. At present the display shows like this: This shows basic information about the node, as well as the structure if the node is identified by library search and the structure was provided in the library spectrum. To further investigate the network, users can left click on a node to plot the spectrum in the top right panel (right click to plot in bottom right panel), along with the spectrum information and structure if one is available. The spectrum image is interactive so users can zoom in and look at precisely at the spectrum to make sense of the data. Additionally users can compare two spectra in the network by simple right clicking on a different node to render its information in the bottom right panel. Users can also click on an edge and both nodes that are connected to the edge are automatically displayed in the top and bottom right panels.","title":"Detailed Interrogation of Network Spectra"},{"location":"networkingviews/#examining-spectrum-spectrum-alignment","text":"Users can quickly ascertain how two spectra align to each other at the peak level. By clicking the \"Align Spec\" button to obtain the score between the spectrum in the top and the spectrum in the bottom render panels. Additionally, the plots of the spectra will update to reflect the alignments shown here: with red peaks representing peaks that match at the exact same masses between the top and bottom spectra, and blue peaks representing peaks matching at shifted masses. Additionally, each peak is labeled with a unique identification number that shows the correspondence of peak matches between the top and bottom spectra.","title":"Examining Spectrum Spectrum Alignment"},{"location":"networkingviews/#network-spectra-library-matches","text":"To view how exactly a spectrum in the network has matched to a library spectrum, users can click the \"Show Library Match\" in the side panel on the far right. This will bring up this middle panel shown below comparing the spectrum in the network with the library spectrum in green.","title":"Network Spectra Library Matches"},{"location":"networkingviews/#network-screen-shot","text":"Download screenshot of the molecular network.","title":"Network Screen Shot"},{"location":"networkingviews/#network-layout-re-run","text":"Rerun network layout to fit zoom and window.","title":"Network Layout Re-run"},{"location":"networkingviews/#network-window-size","text":"Max network view bigger to see more of the network with more room.","title":"Network Window Size"},{"location":"networkingviews/#pop-up-window","text":"Pop out network visualizer into new window without top menu bars.","title":"Pop up Window"},{"location":"networkingviews/#sub-network-graphml-for-cytoscape","text":"Download a GraphML of network and visualize in Cytoscape or other graph software.","title":"Sub-Network GraphML for Cytoscape"},{"location":"networkingviews/#hide-widgets","text":"Show or hide user interface widgets.","title":"Hide Widgets"},{"location":"networkingviews/#view-principle-coordinate-analysis-pcoa-plots","text":"To view PCoA plots, please enable that output on the input page (default is on) in the \"Advanced Output Options\" section and enabling \"Create Cluster Buckets and BioM/PCoA Plots output\". This will create the appropriate data structures for PCoA analysis. To include additional metadata to color the nodes according to the sample types, include and add additional columns for metadata describing the experiment (see metadata documentation ). To view the PCoA plots when the parameters are appropriately set, click the \"View Emporer PCoA Plot in GNPS\" under the section \"Advanced Views - Third Party Visualization\" on the results page of your GNPS job. This PCoA analysis measures the distance between each of the samples based on their overlapping molecules (by MSCluster). This emperor plot is generated by the Qiime software package. The distance metric is binary_jaccard.","title":"View Principle Coordinate Analysis (PCoA) Plots"},{"location":"networkingviews/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"qemistree/","text":"QEMISTREE - a tool to represnt metabolomics data as trees to explore chemical diversity Introduction : Qemistree is a computation tool to build a tree of mass-spectrometry (LC-MS/MS) features to perform which enables the use of phylogeny-based tools to study chemical composition of samples. This documentation aims to provide a user-guide on how to run a Qemistree workflow on GNPS. STEP 1: Collecting the right input files Users can perform QEMISTREE analysis in GNPS after processing LC-MS/MS data through Feature-Based Molecular Networking or FBMN using MZmine2 . The input files for Qemistree are: 1. Required : A SIRIUS MGF file generated from the MZmine workflow 2. Required : A quant table called qiime2_table.qza with all the identified features (an output of FBMN , and found within the folder qiime2_output ) 3. Optional : A metadata file called qiime2_metadata.tsv (an output of FBMN , and also found in folder qiime2_output ) 4. Optional : A library identification file (TSV) (an output of FBMN , and found in the folder clusterinfo_summary ) Follow the steps below to generate these files: a. Follow the documentation for Feature-Based Molecular Networking using MZmine2 to generate an aligned feature list for your LC-MS/MS data and export the necessary MGF and CSV files for FBMN GNPS workflow. b. While still in MZmine2, select your aligned feature list, then click on the tab for feature list methods and select Export/Import, followed by Export for SIRIUS. c. Choose the Mass list that you used to generate your feature list, and specify a path and filename for your SIRIUS file. Click OK. d. Go to GNPS server and run a FBMN job using the GNPS quant CSV, GNPS MGF (both generated in step a, above) and ReDU metadata file. e. The Qemistree task utilizes the output files from FBMN. These can be downloaded by clicking on Download qiime2 Emperor qzv ( qiime2_table.qza and qiime2_metadata.tsv from folder qiime2_output and clusterinfo_summary for the tsv file within). You can start a Qemistree task by clicking on Visualize with Qemistree link on your FBMN status page Note Visualize with Qemistree option is available for FBMN release version >= 20. If your FBMN job was run using an older version, please re-run the job by clicking on Clone to Latest Version to follow the rest of the tutorial. STEP 2: Running a Qemistree job 1. Go to the status page of your FBMN job: Click on Visualize with Qemistree under the Advanced Views - Experimental Views to analyze your data using Qemistree. This method auto-populates the input fields Quantification Table , Metadata Table and Library Identifications from your corresponding FBMN job. Additionally, you need to upload your SIRIUS MGF file exported from Mzmine2 as describes in Step 1. 2. Make sure the correct files are included as described in the beginning: Sirius MGF Spectrum file qiime2_table for Quantification Table qiime2_metadata for Metadata Table clusterinfo_summary file for Library Identifications 3. Under the header: Advanced options select the following: 1. Instrument Type: orbitrap or qtof 2. Ionization Mode: positive , negative or auto If you are signed in to the server the email address will auto-populate. If not, add your email address and click on submit. The runtime depends on the number of features in your dataset -- a typical dataset (few thousand features) can take a few hours. You will get an email once the job finishes and then you are ready to explore your molecular trees! STEP 3: Analysing the results from a Qemistree job from the status page Once the job is finished successfully, you will see the status page as below. 1. View Summary gives a list of the molecules, their structures and the chemical taxonomy assigned by ClassyFire taxonomic levels. It tabulates the annotations for all MS/MS spectra for which we could predict molecular fingerprint using Sirius and CSI:FingerID( D\u00fchrkop et. al ). 2. View Qemistree iTOL Tree to visualize the chemical tree based on similarity of molecular fingerprints predicted by Sirius and CSI:FingerID. Follow the click here button for Qemistree visualization in iTOL . Qemistree classifies the features/molecules based on ClassyFire chemical taxonomy into chemical kingdom, superclass, class, subclass, and direct_parent which can be visualized as tip labels in the tree. Note. The tree visualized above is the default visualization which includes all the molecules that had structural annotations from either spectral library matches or CSI:FingerID structural predictions. This tree is decorated with clade color and tip labels based on ClassyFire class assignment. This visualization can be interactively modified using View Qemistree Dashboard link (described in Step 4 below). Shown below is an example default tree. We recommend you to download the tree and tree decoration files by clicking on the boxes: Qemistree, Labels, Colors, and Abundance . These provide the tree file of the features that have smiles ( qemistree.tree ), the label for each tip of the tree ( labels.txt ), the color of each clade ( colors.txt ), and the relative abundance of the feature in the metadata category chosen for the job ( barplots.txt ). This is because the auto-generated tree is only available for 30 days & therefore it is recommended that you download the associated files and upload it on iTOL using your login credential for permanent storage. 3. Under Advanced Views , click on View qiime2 Emperor Plots to visualize the Principal Coordinate Analysis result using weighted UniFrac distances based on the chemical relationships based on predicted molecular fingerprints. 4 Visualizing chemical trees using the View Qemistree dashboard . You can further explore and modify the Qemistree visualization interactively using the Qemistree dashboard . This dashboard is available as a link on your Qemistree job status page for direct access. The example Qemistree task on the dashboard provides is based on a subset of a global foodomics dataset. For your own data visualization, enter the following information on the dashboard: Qemistree task ID: This is the unique ID of Qemistree job on GNPS. It can be found in your Jobs page in the Description column. Alternatively, click on View Qemistree Dashboard on the job status page, and this field will be auto-populated. Column to filter qemistree features: Enter the feature metadata column to prune the tree. This can be a chemical taxonomy level or structural annotation type (all structures, MS2 structures, CSI:FingerID structures). Column to label tree tips: Enter chemical taxonomic level that should be used to label each feature on the tree (tree tips). You can include additional options for labelling features by MS2 library match or parent m/z values, when a feature cannot be assigned a chemical taxonomy by ClassyFire. Choose metadata column by which to visualize the abundance of the features, and whether to normalize the abundance. Click on Submit. You can quickly generate many Qemistree-iTOL visualizations by changing the values entered in step 2-5 to explore your data. Click on Datasets tab in iTOL to visualize the relative abundance of each feature in the sample metadata category you chose in Step 5. You can interactively modify the aethetics of this visualization (such as colors, fonts, sizes etc) interactively by using the control panel in iTOL. STEP 4. Advanced analysis using QIIME2 For advanced users, we encourage you to download all the files generated from this analysis by clicking on Download Qiime2 data on the status page of the job and explore your data using tools available in QIIME2 . Qemistree workflow formats all resulting files such that they are compatible with statistical and visualization tools in QIIME2 and we encourage users to leverage QIIME2 tools for data exploration. Among the folders downloaded, the output folder contains qemistree.qza and qemistree-pruned-smiles.qza which are two tree files. The qemistree.qza file contains all the features for which molecular fingerprints could be predicted using Sirius+CSI:FingerID; qemistree-pruned-smiles.qza which contains the features that were annotated with molecular structures using spectral matching or CSI:FingerID. Moreover, output_folder also contains: 1. merged-feature-table.qza which has the abundances of features per sample and 2. classified-feature-data.qza which has feature metadata (parent mass, retention time, spectral library match, molecular structures and Classyfire chemical taxonomy for each feature). You can use these files to perform additional analyses in the QIIME2 which can be installed on your computer using the documentation here . Some suggested QIIME2 analytical tools are linked below: 1. Generate heatmap of features per sample 2. Alpha-diversity using Faith's PD for within sample chemical diversity 3. Beta-diversity using UniFrac for between sample chemical comparison 4. Songbird analysis for identifying differentially abundant molecules between sample groupings 5. mmvec analyses for microbe-metabolite interactions Additionally, we encourage you to explore the plethora of tools available here to guide further analyses of your metabolomics data. For detailed information on all the steps performed during Qemistree processing, please check out our source code and documentation here CITATIONS : D\u00fchrkop, K., Shen, H., Meusel, M., Rousu, J. & B\u00f6cker, S. Searching molecular structure databases with tandem mass spectra using CSI:FingerID. Proc. Natl. Acad. Sci. U. S. A. 112, 12580\u20135 (2015) Djoumbou Feunang, Y. et al. ClassyFire: automated chemical classification with a comprehensive, computable taxonomy. J. Cheminform. 8, 61 (2016) Letunic, I. & Bork, P. Interactive Tree Of Life (iTOL) v4: recent updates and new developments. Nucleic Acids Research vol. 47 W256\u2013W259 (2019) Page Contributors \u00b6 Ming Wang (6.92%), Deepa Acharya (51.54%), Anupriya Tripathi (41.54%)","title":"Qemistree"},{"location":"qemistree/#page-contributors","text":"Ming Wang (6.92%), Deepa Acharya (51.54%), Anupriya Tripathi (41.54%)","title":"Page Contributors"},{"location":"quickstart/","text":"This is a quickstart guide that will enable you to prepare your data, create a GNPS account, upload to GNPS, and create your a molecular network on GNPS. While there are a wide variety of other tools at GNPS, molecular networking analysis is a great place to get your feet wet. Converting Data \u00b6 Convert vendor formats to open formats using MSConvert locally. Checkout this documentation . Create a GNPS Account \u00b6 Account registration is a simple process, and completely private \u2013 GNPS will never use your contact information for any reason other than to email you the outcome of your dataset submissions and other workflows. To register an account, navigate to the GNPS web site . Here you will find a registration link in the upper right corner of the page, just below the login box. Click on the registration link to bring up the account registration form. Upload data (Quick) \u00b6 Open a ftp client such as WinSCP (Not Filezilla as it includes malware) client with the following input parameters; Host: ccms-ftp01.ucsd.edu followed by entering your user name and password for GNPS followed by enter. Choose the location of your files within the local site drop down menu. Highlight the files or folders to upload and select upload by right clicking. You will then see the files being queued and transferred to GNPS. Once all the files are uploaded using this method they will be available for you to use for your molecular networking workflows within GNPS. For a more detailed description of all the ways to upload data, please refer to our Upload Documentation Molecular Networking Input \u00b6 Navigate to the molecular networking analysis page . Molecular Networking Parameter Presets \u00b6 There are three presets that set the parameters to approximately appropriate values depending on the size of your dataset. Please select the appropriate one given the follow criteria: Small Dataset - up to 5 LC/MS files Medium Dataset - 5 to 400 LC/MS files Large Dataset - 400+ LC/MS files Naming your analysis \u00b6 Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed. Selecting Data Input Files \u00b6 Within the Basic Options header; to input your spectrum files, select the input files tab next to the Spectrum files (required) field. A pop-up window with three tabs will appear; Select Input Files, Upload Files, Share Files. Proceed by selecting the files you want to analyze by clicking on the mass spectrometry file or an entire folder. Next click on the Spectrum Files G1 button to mark these files for analysis. You may select more files for analysis and put them in the separate groups (G1, G2, G3, G4, G5, G6) to reflect your experimental design. If you are performing an analysis with more than six groups, a metadata file may be used (see Networking Documentation ). Once you are done selecting files to analyze, close the pop-up and hit submit. View Analysis Results \u00b6 Browsing Identifications \u00b6 To quickly glance at all the molecules in your data matching to the GNPS community knowledge of reference MS/MS spectra, click on \"View All Library Hits\". Viewing Network (Quick) \u00b6 To visualize the molecular networks in the browser, click the \"View Spectral Families (In Browser Network Visualization)\". This brings you to a list of all the individual networks (connected components) that are in your data. Click on the \"Visualize Network\" link to explore each network individually. Your selection can be guided by the identifications within each network if there is a specific molecule of interest. Advanced Online Visualization \u00b6 For a more detailed guide on how to explore the molecular networks online, please refer to our documentation Page Contributions \u00b6 Ming Wang","title":"Quick Start Guide"},{"location":"quickstart/#converting-data","text":"Convert vendor formats to open formats using MSConvert locally. Checkout this documentation .","title":"Converting Data"},{"location":"quickstart/#create-a-gnps-account","text":"Account registration is a simple process, and completely private \u2013 GNPS will never use your contact information for any reason other than to email you the outcome of your dataset submissions and other workflows. To register an account, navigate to the GNPS web site . Here you will find a registration link in the upper right corner of the page, just below the login box. Click on the registration link to bring up the account registration form.","title":"Create a GNPS Account"},{"location":"quickstart/#upload-data-quick","text":"Open a ftp client such as WinSCP (Not Filezilla as it includes malware) client with the following input parameters; Host: ccms-ftp01.ucsd.edu followed by entering your user name and password for GNPS followed by enter. Choose the location of your files within the local site drop down menu. Highlight the files or folders to upload and select upload by right clicking. You will then see the files being queued and transferred to GNPS. Once all the files are uploaded using this method they will be available for you to use for your molecular networking workflows within GNPS. For a more detailed description of all the ways to upload data, please refer to our Upload Documentation","title":"Upload data (Quick)"},{"location":"quickstart/#molecular-networking-input","text":"Navigate to the molecular networking analysis page .","title":"Molecular Networking Input"},{"location":"quickstart/#molecular-networking-parameter-presets","text":"There are three presets that set the parameters to approximately appropriate values depending on the size of your dataset. Please select the appropriate one given the follow criteria: Small Dataset - up to 5 LC/MS files Medium Dataset - 5 to 400 LC/MS files Large Dataset - 400+ LC/MS files","title":"Molecular Networking Parameter Presets"},{"location":"quickstart/#naming-your-analysis","text":"Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.","title":"Naming your analysis"},{"location":"quickstart/#selecting-data-input-files","text":"Within the Basic Options header; to input your spectrum files, select the input files tab next to the Spectrum files (required) field. A pop-up window with three tabs will appear; Select Input Files, Upload Files, Share Files. Proceed by selecting the files you want to analyze by clicking on the mass spectrometry file or an entire folder. Next click on the Spectrum Files G1 button to mark these files for analysis. You may select more files for analysis and put them in the separate groups (G1, G2, G3, G4, G5, G6) to reflect your experimental design. If you are performing an analysis with more than six groups, a metadata file may be used (see Networking Documentation ). Once you are done selecting files to analyze, close the pop-up and hit submit.","title":"Selecting Data Input Files"},{"location":"quickstart/#view-analysis-results","text":"","title":"View Analysis Results"},{"location":"quickstart/#browsing-identifications","text":"To quickly glance at all the molecules in your data matching to the GNPS community knowledge of reference MS/MS spectra, click on \"View All Library Hits\".","title":"Browsing Identifications"},{"location":"quickstart/#viewing-network-quick","text":"To visualize the molecular networks in the browser, click the \"View Spectral Families (In Browser Network Visualization)\". This brings you to a list of all the individual networks (connected components) that are in your data. Click on the \"Visualize Network\" link to explore each network individually. Your selection can be guided by the identifications within each network if there is a specific molecule of interest.","title":"Viewing Network (Quick)"},{"location":"quickstart/#advanced-online-visualization","text":"For a more detailed guide on how to explore the molecular networks online, please refer to our documentation","title":"Advanced Online Visualization"},{"location":"quickstart/#page-contributions","text":"Ming Wang","title":"Page Contributions"},{"location":"resultviews/","text":"Here we highlight general properties of table result views in GNPS. Filtering Tables \u00b6 Filtering Rows for Substring \u00b6 If you want to find rows that include a substring that you are interested in, simply enter the value in the box and hit enter. For example, to find all the identifications that include the substring \"mycin\": link . Filtering Rows with a single column AND operator \u00b6 If you want to filter a table in GNPS on a single column and the value in a given column must contain ALL of the substrings you define, you can use the \"&&\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1&&G2. See this link for an example. If you want to use negation, e.g. G1 AND not G2, you can use the carrot ^ like in this example G1&&^G2. Filtering Rows with a single column OR operator \u00b6 If you want to filter a table in GNPS on a single column and the value in a given column must contain at least one of the substrings you define, you can use the \"||\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1||G2. See this link for an example. Downloading Table Results \u00b6 In order to download the data for a result table in GNPS that you are currently viewing, click the download button: Page Contributors \u00b6 Ming Wang","title":"Result Views Navigation"},{"location":"resultviews/#filtering-tables","text":"","title":"Filtering Tables"},{"location":"resultviews/#filtering-rows-for-substring","text":"If you want to find rows that include a substring that you are interested in, simply enter the value in the box and hit enter. For example, to find all the identifications that include the substring \"mycin\": link .","title":"Filtering Rows for Substring"},{"location":"resultviews/#filtering-rows-with-a-single-column-and-operator","text":"If you want to filter a table in GNPS on a single column and the value in a given column must contain ALL of the substrings you define, you can use the \"&&\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1&&G2. See this link for an example. If you want to use negation, e.g. G1 AND not G2, you can use the carrot ^ like in this example G1&&^G2.","title":"Filtering Rows with a single column AND operator"},{"location":"resultviews/#filtering-rows-with-a-single-column-or-operator","text":"If you want to filter a table in GNPS on a single column and the value in a given column must contain at least one of the substrings you define, you can use the \"||\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1||G2. See this link for an example.","title":"Filtering Rows with a single column OR operator"},{"location":"resultviews/#downloading-table-results","text":"In order to download the data for a result table in GNPS that you are currently viewing, click the download button:","title":"Downloading Table Results"},{"location":"resultviews/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"spectrumcuration/","text":"Community Curated MS/MS Spectral Libraries \u00b6 GNPS provides a platform for users to contribute their own annotated MS/MS spectra to the spectral libraries. There are several requirements for annotation: 1) the compound must be of known structure and 2) the MS/MS must be of sufficient quality to support the annotation of the compound. By contributing these spectra, users will expand the spectral libraries and allow dereplication of these compounds within other datasets. Library Quality Level \u00b6 The spectral libraries are categorized based upon quality of the data. The level indicates both the quality of the MS/MS spectra as well as the trust worthiness of the annotations. These reflect both quality of the MS/MS spectra as well as the trust worthiness of the annotations. Quality Level Description Quality Number Gold Synthetic, Complete structural characterization with NMR, crystallography or other standard methods as defined in the publication guidelines for Journal of Natural Products, Privileged users 1 Silver Isolated or lysate/crude, Published data showing presence of molecule in the sample 2 Bronze Any other putative, complete or partial annotation 3 Challenge Unknown Identity, open to community to help annotate 10 By default, users will have access to Bronze, but approval is required to contribute to silver and gold libraries. To obtain training and access please email Mingxun Wang . Adding Single Spectra \u00b6 Input Formats \u00b6 mzXML, mzML, and mgf file formats are accepted. Additionally, spectra to be added to the library should be centroided. Profile data is not processed correctly by our algorithms. Adding Spectrum \u00b6 From the GNPS Splash Page , users can click on to be brought to the Add Single Annotated Spectrum workflow. By default, users will contribute bronze quality reference spectra. Permission is required to contribute higher quality spectra to the gold and silver workflows. Select an input spectrum file. Note Do not change the spectral library that is selected. Annotation Fields \u00b6 For a full set of parameters, see this Sample Parameters Field Description Default Required Ion Source Source of Ions LC-ESI Yes Instrument Mass Analyzer qTof Yes Ion Mode Ionization Mode Positive Yes Compound Source Sample source of compound Commercial Yes Principle Investigator PI overseeing compound acquisition and analysis N/A Yes Data Collector Individual Collecting Data N/A Yes Annotation Field Description Default Required Scan Spectrum Scan of Spectrum 0 Yes Adduct Adduct of Ion fragmented in MS2 M+H Yes Compound Name Compound Common Name N/A Yes Precursor MZ Experimental Precursor MZ for Compound 0 (will read from spectrum file if 0) Yes Charge Charge of Precursor 0 (will read from spectrum file if 0) Yes Advanced Annotation Field Description Default Required CAS Number Chemical Abstracts Service compound identification number N/A No Pubmed ID Pubmed ID where compound or data was published N/A No Exact Mass Compound Exact Mass 0 No Smiles Smiles Structure N/A No Inchi Inchi Structure N/A No Inchi Aux Inchi Auxiliary Structure N/A No Guidance on Providing Names to the Annotations in GNPS \u00b6 Source Structure Structural Position of Analog Mass Shift of Analog Guidance Example Chemical Standard Full Structure Known Known N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields. 7-Methylxanthine Your Data Full Structure Proposed Proposed based on MS/MS N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields (a bronze star rating will indicate a putative status) 7-Methylxanthine Your Data Incomplete Structure Proposed Cannot based on MS/MS N/A please annotate with the common name and indicate the position is unknown using \"X\" (X)-Methylxanthine Your Data No Structure Information No Position Information Mass shift provided via Molecular Networking please annotate with the common name of the chemical it is connected to and indicate mass shift. Mass shift indicated by nominal mass followed by putative formula difference (if the formula difference is unknown please enter \"X\"). No SMILES or Inchi should be provided. Caffeine +14(CH2) Caffeine +52(X) License \u00b6 All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users. Page Contributors \u00b6 Ming Wang (85.87%), alan-jarmusch (9.78%), mpanitch (4.35%)","title":"Add/Curate Reference Spectrum in the Library"},{"location":"spectrumcuration/#community-curated-msms-spectral-libraries","text":"GNPS provides a platform for users to contribute their own annotated MS/MS spectra to the spectral libraries. There are several requirements for annotation: 1) the compound must be of known structure and 2) the MS/MS must be of sufficient quality to support the annotation of the compound. By contributing these spectra, users will expand the spectral libraries and allow dereplication of these compounds within other datasets.","title":"Community Curated MS/MS Spectral Libraries"},{"location":"spectrumcuration/#library-quality-level","text":"The spectral libraries are categorized based upon quality of the data. The level indicates both the quality of the MS/MS spectra as well as the trust worthiness of the annotations. These reflect both quality of the MS/MS spectra as well as the trust worthiness of the annotations. Quality Level Description Quality Number Gold Synthetic, Complete structural characterization with NMR, crystallography or other standard methods as defined in the publication guidelines for Journal of Natural Products, Privileged users 1 Silver Isolated or lysate/crude, Published data showing presence of molecule in the sample 2 Bronze Any other putative, complete or partial annotation 3 Challenge Unknown Identity, open to community to help annotate 10 By default, users will have access to Bronze, but approval is required to contribute to silver and gold libraries. To obtain training and access please email Mingxun Wang .","title":"Library Quality Level"},{"location":"spectrumcuration/#adding-single-spectra","text":"","title":"Adding Single Spectra"},{"location":"spectrumcuration/#input-formats","text":"mzXML, mzML, and mgf file formats are accepted. Additionally, spectra to be added to the library should be centroided. Profile data is not processed correctly by our algorithms.","title":"Input Formats"},{"location":"spectrumcuration/#adding-spectrum","text":"From the GNPS Splash Page , users can click on to be brought to the Add Single Annotated Spectrum workflow. By default, users will contribute bronze quality reference spectra. Permission is required to contribute higher quality spectra to the gold and silver workflows. Select an input spectrum file. Note Do not change the spectral library that is selected.","title":"Adding Spectrum"},{"location":"spectrumcuration/#annotation-fields","text":"For a full set of parameters, see this Sample Parameters Field Description Default Required Ion Source Source of Ions LC-ESI Yes Instrument Mass Analyzer qTof Yes Ion Mode Ionization Mode Positive Yes Compound Source Sample source of compound Commercial Yes Principle Investigator PI overseeing compound acquisition and analysis N/A Yes Data Collector Individual Collecting Data N/A Yes Annotation Field Description Default Required Scan Spectrum Scan of Spectrum 0 Yes Adduct Adduct of Ion fragmented in MS2 M+H Yes Compound Name Compound Common Name N/A Yes Precursor MZ Experimental Precursor MZ for Compound 0 (will read from spectrum file if 0) Yes Charge Charge of Precursor 0 (will read from spectrum file if 0) Yes Advanced Annotation Field Description Default Required CAS Number Chemical Abstracts Service compound identification number N/A No Pubmed ID Pubmed ID where compound or data was published N/A No Exact Mass Compound Exact Mass 0 No Smiles Smiles Structure N/A No Inchi Inchi Structure N/A No Inchi Aux Inchi Auxiliary Structure N/A No","title":"Annotation Fields"},{"location":"spectrumcuration/#guidance-on-providing-names-to-the-annotations-in-gnps","text":"Source Structure Structural Position of Analog Mass Shift of Analog Guidance Example Chemical Standard Full Structure Known Known N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields. 7-Methylxanthine Your Data Full Structure Proposed Proposed based on MS/MS N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields (a bronze star rating will indicate a putative status) 7-Methylxanthine Your Data Incomplete Structure Proposed Cannot based on MS/MS N/A please annotate with the common name and indicate the position is unknown using \"X\" (X)-Methylxanthine Your Data No Structure Information No Position Information Mass shift provided via Molecular Networking please annotate with the common name of the chemical it is connected to and indicate mass shift. Mass shift indicated by nominal mass followed by putative formula difference (if the formula difference is unknown please enter \"X\"). No SMILES or Inchi should be provided. Caffeine +14(CH2) Caffeine +52(X)","title":"Guidance on Providing Names to the Annotations in GNPS"},{"location":"spectrumcuration/#license","text":"All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license. Third party libraries imported may not conform to the CC BY license and should be verified by users.","title":"License"},{"location":"spectrumcuration/#page-contributors","text":"Ming Wang (85.87%), alan-jarmusch (9.78%), mpanitch (4.35%)","title":"Page Contributors"},{"location":"superquickstart/","text":"The Superquick start interface enables you to rapidly explore your data without having to create an account or install any software besides your web browser and data conversion programs. No log-in required \u00b6 Warning The limitations to this method is that the files uploaded will not reside in your own account (though no one else can see them) and will be removed on a monthly basis. Please create your own account for more persistent and reproducible analyses. You would be able to use the Super quickstart interface if you have the following requirements: The format of your files is mzXML/mzML/Thermo raw files. You have less than 3 cohorts of samples. Each analysis has a maximum of 50 spectrum files. Each file has less than 200MB. Super-Quick Start Interface \u00b6 The Super-Quick Start Interface supports both Classical Molecular Networking and Feature-based Molecular Networking. On the GNPS homepage navigate to the super-quick start button Classic Molecular Networking ( see the detailed documentation ) - Analyze a few dozen samples in up to 3 cohorts Feature Based Molecular Networking ( see the detailed documentation ) - Analyze molecular networks out of your favorite LC-MS feature detection/alignment software Classic Molecular Networking \u00b6 Please navigate to the super quickstart page to begin with Classic Molecular Networking! The standard Classic Molecular Networking analysis start page can be accessed here Converting Data \u00b6 Convert vendor formats to open formats using MSConvert locally or using the GNPS format conversion tool. Checkout this documentation . Selecting Files \u00b6 Simply drag and drop your mass spectrometry files (mzML, mzXML, or MGF) into the appropriate cohorts you want to compare. It is required to upload files to Cohort Group 1. Additional Groups can be used (to separate control and treatment samples, for example). Wait until each file is loaded, as shown here: Analyze Files \u00b6 Once files have been uploaded into appropriate cohorts, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\". Entering your email will give you a means of retrieving the job at a later time or if you close the browser. This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again. Warning If you drag vendor proprietary files (e.g. not mzML/mzXML) you will be able to start the job, however it will fail, as shown here: Results \u00b6 You will receive an email when the job is complete if you entered it prior to submission. To understand the results, please refer to the analysis section of the standard quickstart guide . Feature Based Molecular Networking \u00b6 Please navigate to the super quickstart page to begin with Feature Based Molecular Networking! The standard Feature Based Molecular Networking analysis start page can also be started here: Feature Based Molecular Networking Feature Based Molecular Networking Documentation Selecting Files \u00b6 Simply drag and drop the files generated by your feature detection and alignment tool: the feature quantification table (.CSV file, or mzTab-M). the MS/MS spectral summary (MGF file or MSP file (Progenesis QI), or mzML (for mzTab-M). (Optional) Sample metadata file - The format can be found here (Optional) Additional features edge generated externally - See the documentation . Analyze your Files \u00b6 Once files have been uploaded, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\". This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again. If you entered your GNPS log-in credentials then the job will be saved to your account. Results \u00b6 To understand the results, please refer to the feature based molecular networking page . Page Contributors \u00b6 Ming Wang (67.71%), lfnothias (6.25%), Ivan Protsyuk (3.12%), jgauglitz (20.83%), Mabel Gonzalez (2.08%)","title":"Superquick Start Guide"},{"location":"superquickstart/#no-log-in-required","text":"Warning The limitations to this method is that the files uploaded will not reside in your own account (though no one else can see them) and will be removed on a monthly basis. Please create your own account for more persistent and reproducible analyses. You would be able to use the Super quickstart interface if you have the following requirements: The format of your files is mzXML/mzML/Thermo raw files. You have less than 3 cohorts of samples. Each analysis has a maximum of 50 spectrum files. Each file has less than 200MB.","title":"No log-in required"},{"location":"superquickstart/#super-quick-start-interface","text":"The Super-Quick Start Interface supports both Classical Molecular Networking and Feature-based Molecular Networking. On the GNPS homepage navigate to the super-quick start button Classic Molecular Networking ( see the detailed documentation ) - Analyze a few dozen samples in up to 3 cohorts Feature Based Molecular Networking ( see the detailed documentation ) - Analyze molecular networks out of your favorite LC-MS feature detection/alignment software","title":"Super-Quick Start Interface"},{"location":"superquickstart/#classic-molecular-networking","text":"Please navigate to the super quickstart page to begin with Classic Molecular Networking! The standard Classic Molecular Networking analysis start page can be accessed here","title":"Classic Molecular Networking"},{"location":"superquickstart/#converting-data","text":"Convert vendor formats to open formats using MSConvert locally or using the GNPS format conversion tool. Checkout this documentation .","title":"Converting Data"},{"location":"superquickstart/#selecting-files","text":"Simply drag and drop your mass spectrometry files (mzML, mzXML, or MGF) into the appropriate cohorts you want to compare. It is required to upload files to Cohort Group 1. Additional Groups can be used (to separate control and treatment samples, for example). Wait until each file is loaded, as shown here:","title":"Selecting Files"},{"location":"superquickstart/#analyze-files","text":"Once files have been uploaded into appropriate cohorts, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\". Entering your email will give you a means of retrieving the job at a later time or if you close the browser. This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again. Warning If you drag vendor proprietary files (e.g. not mzML/mzXML) you will be able to start the job, however it will fail, as shown here:","title":"Analyze Files"},{"location":"superquickstart/#results","text":"You will receive an email when the job is complete if you entered it prior to submission. To understand the results, please refer to the analysis section of the standard quickstart guide .","title":"Results"},{"location":"superquickstart/#feature-based-molecular-networking","text":"Please navigate to the super quickstart page to begin with Feature Based Molecular Networking! The standard Feature Based Molecular Networking analysis start page can also be started here: Feature Based Molecular Networking Feature Based Molecular Networking Documentation","title":"Feature Based Molecular Networking"},{"location":"superquickstart/#selecting-files_1","text":"Simply drag and drop the files generated by your feature detection and alignment tool: the feature quantification table (.CSV file, or mzTab-M). the MS/MS spectral summary (MGF file or MSP file (Progenesis QI), or mzML (for mzTab-M). (Optional) Sample metadata file - The format can be found here (Optional) Additional features edge generated externally - See the documentation .","title":"Selecting Files"},{"location":"superquickstart/#analyze-your-files","text":"Once files have been uploaded, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\". This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again. If you entered your GNPS log-in credentials then the job will be saved to your account.","title":"Analyze your Files"},{"location":"superquickstart/#results_1","text":"To understand the results, please refer to the feature based molecular networking page .","title":"Results"},{"location":"superquickstart/#page-contributors","text":"Ming Wang (67.71%), lfnothias (6.25%), Ivan Protsyuk (3.12%), jgauglitz (20.83%), Mabel Gonzalez (2.08%)","title":"Page Contributors"},{"location":"tag_info/","text":"How to Contribute Tags to GNPS and Analyses Currently Supported \u00b6 Pardon our dust as this is documentation is a work in progress! We also welcome your contributions. Required Items and Summary of Steps for Contribution \u00b6 GNPS Tag Template 1.1 Manual completion of the GNPS Tag Template ( link here ) 1.2.a Annotation without InChi without Tags 1.2.b Annotation without InChi with Tags 1.2.c Annotation with InChi without Tags 1.2.d Annotation with InChi with Tags 1.3 Submission of the GNPS Tag Template to admin Detailed Step-by-step Instructions for Contribution \u00b6 1. GNPS Tag Template \u00b6 1.1 Manual completion of the GNPS Tag Template \u00b6 Download the \"View all library hits\" table from GNPS Notes: - the link is located on the results page Open the \"View all library hits\" table in a spreadsheet program. Copy and paste the tables contents (skip the headers) into the \"INPUT GNPS Table\" tab. Notes: - All columns in light grey are for reference only and should not be modified. - If done correctly, information relevant to tagging should appear in the \"GNPS Tag - Batch Tag Template\" tab in columns A-D. IF matches are not found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns. IF matches are found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Master\" column = \"Yes\" (column E) and tags will appear in the \"Update_\" columns. Users should check that the tags present in columns F-J are accurate and appropriate for each annotation. Notes: - The InChi associated with each annotation is queried against the \"GNPS Tag Master\" tab which is updated by the admins and the results are displayed in the \"GNPS Tag - Batch Tag Template\" tab. Users should then complete the \"GNPS Tag - Batch Tag Template\" tab in a rowwise manner to the extent possible. The following scenarios in 1.2.a - 1.2.d provide guidance. 1.2.a Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation without InChi without Tags \u00b6 \"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns. \u00b6 Add the InChi to the \"Add_INCHI\" column (column K). > Notes: optional: add the common name (\"Add_Name\", Column L) - we suggest the use of PubChem IF matches are not found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Added_INCHI\" column = \"No\" (column M) and no tags will appear in the \"Check_\" columns (columns N-R). Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here 1.2.b Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation without InChi with Tags \u00b6 \"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns. \u00b6 Add the InChi to the \"Add_INCHI\" column (column K). > Notes: optional: add the common name (\"Add_Name\", Column L) - we suggest the use of PubChem IF matches are found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Added_INCHI\" column = \"Yes\" (column M) and tags will appear in the \"Check_\" columns (columns N-R). Check that the tags present in columns F-J are accurate and appropriate for each annotation. Complete the tags (if necessary) using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here 1.2.c Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation with InChi without Tags \u00b6 \"Check_Master\" column = \"Yes\" (column E) and no tags will appear in the \"Update_\" columns. \u00b6 Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here 1.2.d Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation with InChi with Tags \u00b6 \"Check_Master\" column = \"Yes\" (column E) and no tags will appear in the \"Update_\" columns. \u00b6 Check that the tags present in columns F-J are accurate and appropriate for each annotation. Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here 1.3 Download the \"GNPS Tag - Batch Tag Template\" \u00b6 Download the \"GNPS Tag - Batch Tag Template\" as a .tsv Email file to admins: Alan Jarmusch (ajarmusch@ucsd.edu) Thank you for contributing tags to GNPS! This is a community effort and every contribution helps! \u00b6 Help and Advice \u00b6 General Questions or Advice = GNPS Forum - link here New Terms, Corrections, Suggestions = GitHub - link here --- \u00b6 Current Analyses \u00b6 Summary the tags information in a GNPS molecular networking job Color an existing GNPS molecular networking using GNPS tags Coming Soon: Utilize \"TagTracker\" to simplify and focus the analysis of a GNPS molecular network Coming Soon: Analyze Tags using Metdata --- \u00b6 1. Summary the tags information in a GNPS molecular networking job \u00b6 Make a copy and download Master Tag Sheet (.tsv) from Google Sheets - link here Download the \"View all library hits\" table from GNPS Run the Jupyter Notebook or Code (R) = \"Tags_Summary\" Update the paths in the #COMMON STEPS section Run the code (generates .pdf of figures, example below) Modify graphs as desired 2. Color an existing GNPS molecular networking using GNPS tags \u00b6 Make a copy and download Master Tag Sheet (.tsv) from Google Sheets - link here Download the Cytoscape .graphML files via the \"Download Cytoscape Data\" or \"Direct Cytoscape Preview/Download\" Download the Node Table Open the molecular network in Cytoscape File -> Export -> Table to File -> Select the option ending in \"default node\" in the dropdown -> Update Path and Save Run the Jupyter Notebook or Code (R) = \"Tags_Cytoscape\" Update the paths in the #COMMON STEPS section Run the code (generates and updated node table) Import the Updated Node Table into Cytoscape Example Shown Above = Using node color to indicate chemicals tagged as \"bacterial\" Open node fill color in cytoscape Select \"TAG_bacterial\" and use discrete mapping Value of 0.1 = no InChi and no tag information present Value of 0.0 = InChi present but not tagged based on selection Value of 1.0 = InChi present and tagged based on selection Open node label in cytoscape Select \"Compound_Name\" and use passthrough mapping Interpretation - Molecular netowrk linked glycocholic acid, a primary bile acid conjugated to glycine, and glycodeoxycholic acid, a secondary bile acid. Glycodeoxycholic acid is known to be produced by bacteria in the human gut (and other animals) and was tagged as bacterial (green). Glycocholic acid is known to be produced by human (and other animals) and was not tagged as bacterial (red). The nodes in grey do not have tags at the time of analysis. 3. Utilize \"TagTracker\" to simplify and focus the analysis of a GNPS molecular network \u00b6 TBD Page Contributors \u00b6 Ming Wang (90.54%), alan-jarmusch (9.46%)","title":"GNPS Tag Contribution and Analyses"},{"location":"tag_info/#how-to-contribute-tags-to-gnps-and-analyses-currently-supported","text":"Pardon our dust as this is documentation is a work in progress! We also welcome your contributions.","title":"How to Contribute Tags to GNPS and Analyses Currently Supported"},{"location":"tag_info/#required-items-and-summary-of-steps-for-contribution","text":"GNPS Tag Template 1.1 Manual completion of the GNPS Tag Template ( link here ) 1.2.a Annotation without InChi without Tags 1.2.b Annotation without InChi with Tags 1.2.c Annotation with InChi without Tags 1.2.d Annotation with InChi with Tags 1.3 Submission of the GNPS Tag Template to admin","title":"Required Items and Summary of Steps for Contribution"},{"location":"tag_info/#detailed-step-by-step-instructions-for-contribution","text":"","title":"Detailed Step-by-step Instructions for Contribution"},{"location":"tag_info/#1-gnps-tag-template","text":"","title":"1. GNPS Tag Template  "},{"location":"tag_info/#11-manual-completion-of-the-gnps-tag-template","text":"Download the \"View all library hits\" table from GNPS Notes: - the link is located on the results page Open the \"View all library hits\" table in a spreadsheet program. Copy and paste the tables contents (skip the headers) into the \"INPUT GNPS Table\" tab. Notes: - All columns in light grey are for reference only and should not be modified. - If done correctly, information relevant to tagging should appear in the \"GNPS Tag - Batch Tag Template\" tab in columns A-D. IF matches are not found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns. IF matches are found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Master\" column = \"Yes\" (column E) and tags will appear in the \"Update_\" columns. Users should check that the tags present in columns F-J are accurate and appropriate for each annotation. Notes: - The InChi associated with each annotation is queried against the \"GNPS Tag Master\" tab which is updated by the admins and the results are displayed in the \"GNPS Tag - Batch Tag Template\" tab. Users should then complete the \"GNPS Tag - Batch Tag Template\" tab in a rowwise manner to the extent possible. The following scenarios in 1.2.a - 1.2.d provide guidance.","title":"1.1 Manual completion of the GNPS Tag Template"},{"location":"tag_info/#12a-complete-the-gnps-tag-batch-tag-template-following-these-scenarios-annotation-without-inchi-without-tags","text":"","title":"1.2.a Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation without InChi without Tags"},{"location":"tag_info/#check_master-column-no-column-e-and-no-tags-will-appear-in-the-update_-columns","text":"Add the InChi to the \"Add_INCHI\" column (column K). > Notes: optional: add the common name (\"Add_Name\", Column L) - we suggest the use of PubChem IF matches are not found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Added_INCHI\" column = \"No\" (column M) and no tags will appear in the \"Check_\" columns (columns N-R). Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here","title":"\"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns."},{"location":"tag_info/#12b-complete-the-gnps-tag-batch-tag-template-following-these-scenarios-annotation-without-inchi-with-tags","text":"","title":"1.2.b Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation without InChi with Tags"},{"location":"tag_info/#check_master-column-no-column-e-and-no-tags-will-appear-in-the-update_-columns_1","text":"Add the InChi to the \"Add_INCHI\" column (column K). > Notes: optional: add the common name (\"Add_Name\", Column L) - we suggest the use of PubChem IF matches are found to the InCHI in the \"GNPS Tag Master\" tab, then \"Check_Added_INCHI\" column = \"Yes\" (column M) and tags will appear in the \"Check_\" columns (columns N-R). Check that the tags present in columns F-J are accurate and appropriate for each annotation. Complete the tags (if necessary) using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here","title":"\"Check_Master\" column = \"No\" (column E) and no tags will appear in the \"Update_\" columns."},{"location":"tag_info/#12c-complete-the-gnps-tag-batch-tag-template-following-these-scenarios-annotation-with-inchi-without-tags","text":"","title":"1.2.c Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation with InChi without Tags"},{"location":"tag_info/#check_master-column-yes-column-e-and-no-tags-will-appear-in-the-update_-columns","text":"Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here","title":"\"Check_Master\" column = \"Yes\" (column E) and no tags will appear in the \"Update_\" columns."},{"location":"tag_info/#12d-complete-the-gnps-tag-batch-tag-template-following-these-scenarios-annotation-with-inchi-with-tags","text":"","title":"1.2.d Complete the \"GNPS Tag - Batch Tag Template\" following these scenarios: Annotation with InChi with Tags"},{"location":"tag_info/#check_master-column-yes-column-e-and-no-tags-will-appear-in-the-update_-columns_1","text":"Check that the tags present in columns F-J are accurate and appropriate for each annotation. Complete the tags using the controlled vocabulary (up to three tags can be added for each tag category) > Notes: The same tag can only be applied to an InCHI once, please avoid repeated tagging. If additional terms are desired, please submit an issue on GitHub - link here","title":"\"Check_Master\" column = \"Yes\" (column E) and no tags will appear in the \"Update_\" columns."},{"location":"tag_info/#13-download-the-gnps-tag-batch-tag-template","text":"Download the \"GNPS Tag - Batch Tag Template\" as a .tsv Email file to admins: Alan Jarmusch (ajarmusch@ucsd.edu)","title":"1.3 Download the \"GNPS Tag - Batch Tag Template\""},{"location":"tag_info/#thank-you-for-contributing-tags-to-gnps-this-is-a-community-effort-and-every-contribution-helps","text":"","title":"Thank you for contributing tags to GNPS! This is a community effort and every contribution helps!"},{"location":"tag_info/#help-and-advice","text":"General Questions or Advice = GNPS Forum - link here New Terms, Corrections, Suggestions = GitHub - link here","title":"Help and Advice"},{"location":"tag_info/#-","text":"","title":"---"},{"location":"tag_info/#current-analyses","text":"Summary the tags information in a GNPS molecular networking job Color an existing GNPS molecular networking using GNPS tags Coming Soon: Utilize \"TagTracker\" to simplify and focus the analysis of a GNPS molecular network Coming Soon: Analyze Tags using Metdata","title":"Current Analyses"},{"location":"tag_info/#-_1","text":"","title":"---"},{"location":"tag_info/#1-summary-the-tags-information-in-a-gnps-molecular-networking-job","text":"Make a copy and download Master Tag Sheet (.tsv) from Google Sheets - link here Download the \"View all library hits\" table from GNPS Run the Jupyter Notebook or Code (R) = \"Tags_Summary\" Update the paths in the #COMMON STEPS section Run the code (generates .pdf of figures, example below) Modify graphs as desired","title":"1. Summary the tags information in a GNPS molecular networking job  "},{"location":"tag_info/#2-color-an-existing-gnps-molecular-networking-using-gnps-tags","text":"Make a copy and download Master Tag Sheet (.tsv) from Google Sheets - link here Download the Cytoscape .graphML files via the \"Download Cytoscape Data\" or \"Direct Cytoscape Preview/Download\" Download the Node Table Open the molecular network in Cytoscape File -> Export -> Table to File -> Select the option ending in \"default node\" in the dropdown -> Update Path and Save Run the Jupyter Notebook or Code (R) = \"Tags_Cytoscape\" Update the paths in the #COMMON STEPS section Run the code (generates and updated node table) Import the Updated Node Table into Cytoscape Example Shown Above = Using node color to indicate chemicals tagged as \"bacterial\" Open node fill color in cytoscape Select \"TAG_bacterial\" and use discrete mapping Value of 0.1 = no InChi and no tag information present Value of 0.0 = InChi present but not tagged based on selection Value of 1.0 = InChi present and tagged based on selection Open node label in cytoscape Select \"Compound_Name\" and use passthrough mapping Interpretation - Molecular netowrk linked glycocholic acid, a primary bile acid conjugated to glycine, and glycodeoxycholic acid, a secondary bile acid. Glycodeoxycholic acid is known to be produced by bacteria in the human gut (and other animals) and was tagged as bacterial (green). Glycocholic acid is known to be produced by human (and other animals) and was not tagged as bacterial (red). The nodes in grey do not have tags at the time of analysis.","title":"2. Color an existing GNPS molecular networking using GNPS tags "},{"location":"tag_info/#3-utilize-tagtracker-to-simplify-and-focus-the-analysis-of-a-gnps-molecular-network","text":"TBD","title":"3. Utilize \"TagTracker\" to simplify and focus the analysis of a GNPS molecular network  "},{"location":"tag_info/#page-contributors","text":"Ming Wang (90.54%), alan-jarmusch (9.46%)","title":"Page Contributors"},{"location":"toolindex/","text":"GNPS Tool Index \u00b6 This is a global tool index for GNPS. Throughout this documentation we have very detailed information for how to use way more tools than we though we'd have, but its a good problem to have! However, we recognize it might be difficult for people to simply see what all is availble in GNPS as tool and web services. This table is always evolving and hope to make it easier for people to navigate. Please help us fill in more completely! GNPS Workflows \u00b6 Category Workflow GNPS Link Beta Link Documentation Source Code Citation Networking Molecular Networking Workflow Workflow Documentation Github Citation Networking Feature-Based Molecular Networking Workflow Workflow Networking Merge Polarity Networks Workflow Workflow Documentation Networking MS2LDA Motif DB Workflow Workflow Documentation Github-ms2lda , Github-ms2ldaviz Citation-ms2lda , Citation-ms2ldaviz Networking MolNetEnhancer / MetaboDistTree Workflow Workflow Documentation Github-MolNetEnhancer , Github-MetaboDistTrees Citation Data Analysis MASST Workflow Workflow Documentation --- Citation Data Analysis Microbiome-Metabolomics Association - mmvec Workflow - Inactive Workflow --- Annotation Large Scale Library Search Workflow Workflow --- Annotation Library Search/Molecular Networking GC Workflow Workflow Annotation Network Annotation Propogation (NAP) Workflow --- Documentation GitHub Citation Annotation Sirius - Bocker Lab Workflow Workflow Annotation Qemistree Workflow Workflow Annotation Dereplicator Workflow --- Annotation Dereplicator+ Workflow --- Annotation MetaMiner --- --- Data Processing MSHub-GC Deconvolution Workflow Workflow Data Processing OpenMS Feature Detector for FBMN - Future Feature Workflow Workflow --- Data Processing LC - MZMine2 Workflow Workflow Data Processing MSMS-Chooser Workflow Workflow Documentation Github Citation GNPS Web Tools \u00b6 Tool Documentation Source Code Citation ReDU Documentation GitHub Citation GNPS Structure Server Structure processing worker TODO! GNPS Quickstart/Batch Validator TODO TODO GNPS Cytoscape TODO TODO GNPS MASST Documentation TODO Citation Metabolomics Spectrum Resolver GitHub TODO Qemistree Dashboard TODO TODO GNPS Networking URL Formatter TODO TODO GNPS Task Esquisse Server (Beta) TODO TODO GNPS Result View Esquisse Server (Super Beta) TODO TODO GNPS Text Esquisse Server (Super Beta) TODO TODO GNPS Library Dash Explorer TODO TODO GNPS Mass Spec Calculator (Beta) TODO TODO GNPS Usage Stats Dashboard GitHub --- GNPS Upset Plot Dashboard (Beta) GitHub --- Community Tools GNPS Interfaces with \u00b6 Tool Publication MS2LDA.org Citation NPAtlas Citation MIBiG Citation ClassyFire Citation SMART NMR Citation MassBank Citation GNPS Tools Interoperability Graph \u00b6 Page Contributors \u00b6 Ming Wang (72.97%), alan-jarmusch (24.32%), Madeleine Ernst (2.7%)","title":"GNPS Tool Index"},{"location":"toolindex/#gnps-tool-index","text":"This is a global tool index for GNPS. Throughout this documentation we have very detailed information for how to use way more tools than we though we'd have, but its a good problem to have! However, we recognize it might be difficult for people to simply see what all is availble in GNPS as tool and web services. This table is always evolving and hope to make it easier for people to navigate. Please help us fill in more completely!","title":"GNPS Tool Index"},{"location":"toolindex/#gnps-workflows","text":"Category Workflow GNPS Link Beta Link Documentation Source Code Citation Networking Molecular Networking Workflow Workflow Documentation Github Citation Networking Feature-Based Molecular Networking Workflow Workflow Networking Merge Polarity Networks Workflow Workflow Documentation Networking MS2LDA Motif DB Workflow Workflow Documentation Github-ms2lda , Github-ms2ldaviz Citation-ms2lda , Citation-ms2ldaviz Networking MolNetEnhancer / MetaboDistTree Workflow Workflow Documentation Github-MolNetEnhancer , Github-MetaboDistTrees Citation Data Analysis MASST Workflow Workflow Documentation --- Citation Data Analysis Microbiome-Metabolomics Association - mmvec Workflow - Inactive Workflow --- Annotation Large Scale Library Search Workflow Workflow --- Annotation Library Search/Molecular Networking GC Workflow Workflow Annotation Network Annotation Propogation (NAP) Workflow --- Documentation GitHub Citation Annotation Sirius - Bocker Lab Workflow Workflow Annotation Qemistree Workflow Workflow Annotation Dereplicator Workflow --- Annotation Dereplicator+ Workflow --- Annotation MetaMiner --- --- Data Processing MSHub-GC Deconvolution Workflow Workflow Data Processing OpenMS Feature Detector for FBMN - Future Feature Workflow Workflow --- Data Processing LC - MZMine2 Workflow Workflow Data Processing MSMS-Chooser Workflow Workflow Documentation Github Citation","title":"GNPS Workflows"},{"location":"toolindex/#gnps-web-tools","text":"Tool Documentation Source Code Citation ReDU Documentation GitHub Citation GNPS Structure Server Structure processing worker TODO! GNPS Quickstart/Batch Validator TODO TODO GNPS Cytoscape TODO TODO GNPS MASST Documentation TODO Citation Metabolomics Spectrum Resolver GitHub TODO Qemistree Dashboard TODO TODO GNPS Networking URL Formatter TODO TODO GNPS Task Esquisse Server (Beta) TODO TODO GNPS Result View Esquisse Server (Super Beta) TODO TODO GNPS Text Esquisse Server (Super Beta) TODO TODO GNPS Library Dash Explorer TODO TODO GNPS Mass Spec Calculator (Beta) TODO TODO GNPS Usage Stats Dashboard GitHub --- GNPS Upset Plot Dashboard (Beta) GitHub ---","title":"GNPS Web Tools"},{"location":"toolindex/#community-tools-gnps-interfaces-with","text":"Tool Publication MS2LDA.org Citation NPAtlas Citation MIBiG Citation ClassyFire Citation SMART NMR Citation MassBank Citation","title":"Community Tools GNPS Interfaces with"},{"location":"toolindex/#gnps-tools-interoperability-graph","text":"","title":"GNPS Tools Interoperability Graph"},{"location":"toolindex/#page-contributors","text":"Ming Wang (72.97%), alan-jarmusch (24.32%), Madeleine Ernst (2.7%)","title":"Page Contributors"},{"location":"troubleshooting/","text":"Overview \u00b6 This section addresses some common issues with the analysis workflows at GNPS. If you run into any of these common issues, hopefully this page will give you actionable steps to address them. If this page cannot help you, please refer to the forum to help answer your questions. Molecular Networking \u00b6 Failed Molecular Networking Job \u00b6 Empty MS/MS This means that your input data has no MS/MS spectra. This could mean one of several things The file format input is incorrect. Please make sure it is a supported file format for GNPS. The mass spectrometry files do not contain MS/MS spectra. These files cannot be analyzed by GNPS. The filtering criteria are too aggressive. Please use an appropriate preset for your data. spectral library search exceeded memory This means that the spectral library search step used too much memory and had to be terminated. This is likely caused by changing the set of spectral libraries used in search. It is not recommended to change the set of libraries included unless you are an advanced users. Please remove all libraries except for the default \"speclibs\" and rerun. Missing filename in Metadata The metadata file included for networking is formatted incorrectly. Please refer to metadata formatting to correct this. Results Incorrect \u00b6 No attributes or groups in output Verify that file names match between metadata and data. Make sure the metadata file includes the appropriate columns and attributes are prefixed with ATTRIBUTE_ and that the metadata file is a tab separated text file. Avoid using special characters in metadata or file names. Library Search (Dereplication) \u00b6 No Results Check that the parameters are correct Make sure you have the right format for input Make sure you have MS/MS spectra in your data, this is summarized in the file summary link. MASST (Single Spectrum Search) \u00b6 Error: m/z and intensity not separated properly A common error is missing intensities for masses. Simply masses are insufficient, intensities are also required. Qiime2 errors \u00b6 Page not found output in qiime2 view for Emperor plots You could have: Duplicate file names A column called \u201csample_name\u201d in your metadata, this column should be removed. Your filenames in the metadata do not align with the input data Page Contributors \u00b6 Ming Wang (94.44%), mccall-lab-OU (5.56%)","title":"Troubleshooting"},{"location":"troubleshooting/#overview","text":"This section addresses some common issues with the analysis workflows at GNPS. If you run into any of these common issues, hopefully this page will give you actionable steps to address them. If this page cannot help you, please refer to the forum to help answer your questions.","title":"Overview"},{"location":"troubleshooting/#molecular-networking","text":"","title":"Molecular Networking"},{"location":"troubleshooting/#failed-molecular-networking-job","text":"Empty MS/MS This means that your input data has no MS/MS spectra. This could mean one of several things The file format input is incorrect. Please make sure it is a supported file format for GNPS. The mass spectrometry files do not contain MS/MS spectra. These files cannot be analyzed by GNPS. The filtering criteria are too aggressive. Please use an appropriate preset for your data. spectral library search exceeded memory This means that the spectral library search step used too much memory and had to be terminated. This is likely caused by changing the set of spectral libraries used in search. It is not recommended to change the set of libraries included unless you are an advanced users. Please remove all libraries except for the default \"speclibs\" and rerun. Missing filename in Metadata The metadata file included for networking is formatted incorrectly. Please refer to metadata formatting to correct this.","title":"Failed Molecular Networking Job"},{"location":"troubleshooting/#results-incorrect","text":"No attributes or groups in output Verify that file names match between metadata and data. Make sure the metadata file includes the appropriate columns and attributes are prefixed with ATTRIBUTE_ and that the metadata file is a tab separated text file. Avoid using special characters in metadata or file names.","title":"Results Incorrect"},{"location":"troubleshooting/#library-search-dereplication","text":"No Results Check that the parameters are correct Make sure you have the right format for input Make sure you have MS/MS spectra in your data, this is summarized in the file summary link.","title":"Library Search (Dereplication)"},{"location":"troubleshooting/#masst-single-spectrum-search","text":"Error: m/z and intensity not separated properly A common error is missing intensities for masses. Simply masses are insufficient, intensities are also required.","title":"MASST (Single Spectrum Search)"},{"location":"troubleshooting/#qiime2-errors","text":"Page not found output in qiime2 view for Emperor plots You could have: Duplicate file names A column called \u201csample_name\u201d in your metadata, this column should be removed. Your filenames in the metadata do not align with the input data","title":"Qiime2 errors"},{"location":"troubleshooting/#page-contributors","text":"Ming Wang (94.44%), mccall-lab-OU (5.56%)","title":"Page Contributors"},{"location":"user/","text":"User Page \u00b6 At GNPS, since there is so much power given to the user to affect the system, it is necessary for users to keep track of their own account. Specifically, in the user summary page, users can view the datasets that they have uploaded, browse the datasets they have subscribed to, spectra they have contributed to the GNPS spectral libraries, and the spectra that have been contributed to GNPS challenge spectra. My Datasets \u00b6 Users are able to see all their own datasets, either public or private in a view like this: From here users can view their private datasets and make them public if they wish or simply browse their own datasets. Additionally, users can share their datasets with the world via Twitter and Facebook. My Subscriptions \u00b6 Users can see all datasets they are subscribed to My Library Spectra \u00b6 These are all the annotated MS/MS spectra you have contributed to the community GNPS library. Page Contributors \u00b6 Ming Wang","title":"User Page"},{"location":"user/#user-page","text":"At GNPS, since there is so much power given to the user to affect the system, it is necessary for users to keep track of their own account. Specifically, in the user summary page, users can view the datasets that they have uploaded, browse the datasets they have subscribed to, spectra they have contributed to the GNPS spectral libraries, and the spectra that have been contributed to GNPS challenge spectra.","title":"User Page"},{"location":"user/#my-datasets","text":"Users are able to see all their own datasets, either public or private in a view like this: From here users can view their private datasets and make them public if they wish or simply browse their own datasets. Additionally, users can share their datasets with the world via Twitter and Facebook.","title":"My Datasets"},{"location":"user/#my-subscriptions","text":"Users can see all datasets they are subscribed to","title":"My Subscriptions"},{"location":"user/#my-library-spectra","text":"These are all the annotated MS/MS spectra you have contributed to the community GNPS library.","title":"My Library Spectra"},{"location":"user/#page-contributors","text":"Ming Wang","title":"Page Contributors"},{"location":"workshops/","text":"Upcoming Workshops \u00b6 Venue Description Dates Material Zoom! GNPS Classical Molecular Networking in Espa\u00f1ol 6/17/2020 9AM PST Material Zoom! GNPS - MS2LDA 6/24/2020 9AM PST TBD Zoom! Metabolomics Spectrum Resolver - Unifing spectrum rendering and customization 7/1/2020 9AM PST TBD Zoom! GNPS Users Meeting - Presentations from the Community 7/8/2020 9AM PST TBD Zoom! GNPS ChemDir - Chemical Directionality for Longitudinal Molecular Networking 7/15/2020 9AM PST TBD TBD TBD TBD ----- If you would like to host a GNPS workshop together with the GNPS team, please reach out to Ming to organize the logistics! Host Your Own \u00b6 If you would like to organize your own GNPS workshop to train new users, try getting started with our standard training modules . If you would like more advanced materials, please reach out to Ming and we'd be happy to help you. For promotional materials check out our logo page . GNPS Training Tutorial Modules \u00b6 We have standard training tutorial modules on GNPS. These are available fully in GitHub . Here is a table to briefly browse them Module Description Link Module 1 Classical Molecular Networking Link Module 2 Molecular Molecular Theory Link Module 3 Exploring Molecular Networks Link Module 4 Cytoscape Networks Link Module 5 Feature Based Molecular Networking Link Module 6 MASST Link Module 7 Qiime2 Analysis Link Module 8 ReDU Link Module 10 In Silico Analysis Link Module 11 MolNetEnhancer Link Module 12 MS2LDA Link Module 13 Adding Reference Library Spectra Link Previous Workshops \u00b6 Venue Description Dates Material Estimated Attendance Zoom! GNPS Merge Polarity Networks - Merging Networks from Positive and Negative Mode 6/11/2020 9AM PST Material 30 Zoom! GNPS MolNetEnhancer 6/3/2020 9AM PST Material 47 Zoom! GC-MS deconvolution, library search and molecular networking 5/27/2020 9AM PST Material 44 YouTube Utilizing GNPS and MS2LDA for some molecular networking discovery 5/21/2020 6AM PST LiveStream --- Zoom! GNPS Ion-Identity Networking, Native Metabolomics 5/20/2020 9AM PST Material Video 65 Zoom! GNPS Feature Based Molecular Networking (Job Submssions and Exploration) 5/14/2020 9AM PST Material 103 Zoom! GNPS Feature Based Molecular Networking (MZmine2) 5/13/2020 9AM PST Material Video 147 Zoom! GNPS ReDU 5/6/2020 9AM PST Material Video --- Zoom! GNPS Classical Molecular Networking 4/29/2020 9AM PST Material Video 60 Zoom! GNPS MASST 4/22/2020 9AM PST Material Video 54 Zoom! GNPS Library Workshop/Hackathon April 8 9AM PST Material Video UFMT Brazil VI Workshop Etnofarmacologia - Use of the GNPS platform Nov 18 - 28 2019 MIT Molecular Networking with MZmine and GNPS Dec 5 2019 ----- ASP 2019 GNPS Beginner/Advanced Workshop (3h) July 2019 Download 60 RFMF2019 , France GNPS Beginner Workshop (4h) May 20 TBA Metabolomics 2019 GNPS Beginner Workshop (2h) June 22 Download Prague GNPS Workshop (4h) June 28 TBA 20 NPS2019 - Symposia of Natural Products Natural Product Dereplication using GNPS Feb 5, 2019 Coming Soon! CCMS School - Natural Product Training GNPS, Molecular Networking, Library Search, Quantitative Analysis, NP Database Search, De novo cyclopeptide sequencing Dec 12/13 2018 Download EMSC Workshop 2018 This short course is aimed at explaining how to use the METASPACE and GNPS platforms for large scale data analysis in mass spectrometry (MS) based metabolomics experiments March 11, 2018 Download GNPS workshop in Grahamstown, South Africa (Rhodes University) GNPS introduction with Molecular Networking November 14, 2018 N/A ASP 2018 GNPS Introduction, Molecular Networking - Natural Product Discovery in bacterial extraction, `ili 3D cartography, MetBLAST - leveraging public datasets July 2018 Download Metabolomics 2018 GNPS Introduction, Molecular Networking - Food Analysis, `ili 3D cartography of plants, MS2LDA July 2018 Coming Soon Page Contributors \u00b6 Ming Wang (80.82%), MelissaESPOSITO (16.44%), alan-jarmusch (1.37%), Mabel Gonzalez (1.37%)","title":"GNPS Workshops/Training"},{"location":"workshops/#upcoming-workshops","text":"Venue Description Dates Material Zoom! GNPS Classical Molecular Networking in Espa\u00f1ol 6/17/2020 9AM PST Material Zoom! GNPS - MS2LDA 6/24/2020 9AM PST TBD Zoom! Metabolomics Spectrum Resolver - Unifing spectrum rendering and customization 7/1/2020 9AM PST TBD Zoom! GNPS Users Meeting - Presentations from the Community 7/8/2020 9AM PST TBD Zoom! GNPS ChemDir - Chemical Directionality for Longitudinal Molecular Networking 7/15/2020 9AM PST TBD TBD TBD TBD ----- If you would like to host a GNPS workshop together with the GNPS team, please reach out to Ming to organize the logistics!","title":"Upcoming Workshops"},{"location":"workshops/#host-your-own","text":"If you would like to organize your own GNPS workshop to train new users, try getting started with our standard training modules . If you would like more advanced materials, please reach out to Ming and we'd be happy to help you. For promotional materials check out our logo page .","title":"Host Your Own"},{"location":"workshops/#gnps-training-tutorial-modules","text":"We have standard training tutorial modules on GNPS. These are available fully in GitHub . Here is a table to briefly browse them Module Description Link Module 1 Classical Molecular Networking Link Module 2 Molecular Molecular Theory Link Module 3 Exploring Molecular Networks Link Module 4 Cytoscape Networks Link Module 5 Feature Based Molecular Networking Link Module 6 MASST Link Module 7 Qiime2 Analysis Link Module 8 ReDU Link Module 10 In Silico Analysis Link Module 11 MolNetEnhancer Link Module 12 MS2LDA Link Module 13 Adding Reference Library Spectra Link","title":"GNPS Training Tutorial Modules"},{"location":"workshops/#previous-workshops","text":"Venue Description Dates Material Estimated Attendance Zoom! GNPS Merge Polarity Networks - Merging Networks from Positive and Negative Mode 6/11/2020 9AM PST Material 30 Zoom! GNPS MolNetEnhancer 6/3/2020 9AM PST Material 47 Zoom! GC-MS deconvolution, library search and molecular networking 5/27/2020 9AM PST Material 44 YouTube Utilizing GNPS and MS2LDA for some molecular networking discovery 5/21/2020 6AM PST LiveStream --- Zoom! GNPS Ion-Identity Networking, Native Metabolomics 5/20/2020 9AM PST Material Video 65 Zoom! GNPS Feature Based Molecular Networking (Job Submssions and Exploration) 5/14/2020 9AM PST Material 103 Zoom! GNPS Feature Based Molecular Networking (MZmine2) 5/13/2020 9AM PST Material Video 147 Zoom! GNPS ReDU 5/6/2020 9AM PST Material Video --- Zoom! GNPS Classical Molecular Networking 4/29/2020 9AM PST Material Video 60 Zoom! GNPS MASST 4/22/2020 9AM PST Material Video 54 Zoom! GNPS Library Workshop/Hackathon April 8 9AM PST Material Video UFMT Brazil VI Workshop Etnofarmacologia - Use of the GNPS platform Nov 18 - 28 2019 MIT Molecular Networking with MZmine and GNPS Dec 5 2019 ----- ASP 2019 GNPS Beginner/Advanced Workshop (3h) July 2019 Download 60 RFMF2019 , France GNPS Beginner Workshop (4h) May 20 TBA Metabolomics 2019 GNPS Beginner Workshop (2h) June 22 Download Prague GNPS Workshop (4h) June 28 TBA 20 NPS2019 - Symposia of Natural Products Natural Product Dereplication using GNPS Feb 5, 2019 Coming Soon! CCMS School - Natural Product Training GNPS, Molecular Networking, Library Search, Quantitative Analysis, NP Database Search, De novo cyclopeptide sequencing Dec 12/13 2018 Download EMSC Workshop 2018 This short course is aimed at explaining how to use the METASPACE and GNPS platforms for large scale data analysis in mass spectrometry (MS) based metabolomics experiments March 11, 2018 Download GNPS workshop in Grahamstown, South Africa (Rhodes University) GNPS introduction with Molecular Networking November 14, 2018 N/A ASP 2018 GNPS Introduction, Molecular Networking - Natural Product Discovery in bacterial extraction, `ili 3D cartography, MetBLAST - leveraging public datasets July 2018 Download Metabolomics 2018 GNPS Introduction, Molecular Networking - Food Analysis, `ili 3D cartography of plants, MS2LDA July 2018 Coming Soon","title":"Previous Workshops"},{"location":"workshops/#page-contributors","text":"Ming Wang (80.82%), MelissaESPOSITO (16.44%), alan-jarmusch (1.37%), Mabel Gonzalez (1.37%)","title":"Page Contributors"},{"location":"img/tags/tag_images/","text":"","title":"Tag images"},{"location":"massspecbackground/identification/","text":"Overview \u00b6 Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/identification/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/networkingtheory/","text":"Molecular Networking Theory \u00b6 While there are many publications out there giving algorithmic and intuition into molecular networking, we attempt a cliff notes version here. Spectral Similarity Related to Molecular Structure Similarity \u00b6 A key concept in tandem mass spectrometry is that repeated MS/MS acquisitions of a molecule under the same experimental conditions (e.g. same instrument, collision energy, abundance, charge state) will yield highly similar MS/MS spectra. That is, fragmentation of molecules is consistent. This enables the identification of MS/MS spectra to libraries of reference compounds. Extending this concept, we have observed that structurally related molecules also exhibit similar fragmentation, with some caveats. Intuitively, two molecules that differ by the addition of a single chemical moiety, which does not contribute to a significant difference in molecule mass and not drastically change the bond energies of the molecule (e.g. Oxidation, methylation, glycosylation), will not drastically perturb the gas phase chemistry of fragmentation. Given that relative bond strengths between the two molecules do not drastically differ, the same bonds will undergo similar fragmentation within the collision cell of the mass spectrometer. The resulting corresponding product ions in the MS/MS spectra from the two molecules will either include the additional chemical moiety or will not. In cases fragments do not, the chemical moiety could either have Not been part of the product ion substructure Cleaved off prior to product ion formation Since corresponding product ions between structurally similar molecules can either have moiety or not, the product ions can either Appear at the exact same mass for both molecules Appear shifted by the mass of the chemical moiety Watrous et al. PNAS We consider both of these possibilities for each and every peak between two MS/MS spectra and explore how we do that below. Spectrum Alignment \u00b6 We will use a toy example here to demonstrate intuitively how we are able to consider an alignment between two MS/MS spectra. Given two molecules that differ by a single chemical moiety that each produce fragmentation as shown We can consider that each peak from molecule A, could align at the same mass in molecule B, or at an offset of Mass(Delta). One possible alignment is all peaks in A, align at the same mass Another, where the first peak aligns at the same mass, the second at an offset Third, where the first peak aligns at an offset, and the second aligns at the same mass Finally, where both peaks align at an offset All of these potential alignments can be explored and the best scoring alignment is determined between the two MS/MS spectra and is called the alignment score. The total number of potential alignments is exponential (2 ^ N, where N is the number of peaks) and is computationally expensive. GNPS has implemented algorithms that can efficiently approximate this alignment. Alignment of Entire Dataset \u00b6 So far we've investigated how to align one MS/MS spectrum to another, but have not created molecular networks across an entire dataset of MS/MS spectra. Since we do not know a priori, which MS/MS spectra will be structurally similar to any others, we must try aligning all MS/MS spectra within a dataset to all others. GNPS calculates the score between all MS/MS spectra within a dataset that provides the starting point of a molecular network. Network Filtering for Visualization \u00b6 The alignments between all MS/MS spectra must be filtered in order to produce molecular networks that can be visualized and interpretable. Alignment Score Filtering \u00b6 The most basic filter is by alignment score between MS/MS spectra. Generally, the default of cosine of 0.7 and 6 minimum matches peaks reduces the number of false positive alignments tremendously. Neighbor Top K \u00b6 A pathological case in Molecular Networks are promiscuous MS/MS spectra that align to many other MS/MS spectra due to a low complexity of fragmentation. To counteract this, only retain alignments between alignments between MS/MS spectra that mutually rank each other highly in the alignment score. Just like in human relationships, who wants a best friend who has a million other best friends? Connected Component Max Size \u00b6 Even with the above filters, the occasional false positive connections causes hairball networks that make visualization/interpretation difficult. The connected component size filter limits the maximum size of a single molecular network to a parameterized number of nodes (100 by default). This process iteratively breaks up large hairball networks by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Limitation of Molecular Networking \u00b6 Multiple Modifications \u00b6 Molecular networking is unable to align spectra from molecules that differ by two distinct structural modifications. We have observed that this limitation is ameliorated in biological datasets because chemical modifications are enzymatically catalyzed. In the event that two molecules differ by two distinct chemical modification which cannot be connected by molecular networking, an intermediate molecule which differs by only a single chemical modification to the respective molecules and links all three molecules into a molecular family.","title":"Molecular Networking"},{"location":"massspecbackground/networkingtheory/#molecular-networking-theory","text":"While there are many publications out there giving algorithmic and intuition into molecular networking, we attempt a cliff notes version here.","title":"Molecular Networking Theory"},{"location":"massspecbackground/networkingtheory/#spectral-similarity-related-to-molecular-structure-similarity","text":"A key concept in tandem mass spectrometry is that repeated MS/MS acquisitions of a molecule under the same experimental conditions (e.g. same instrument, collision energy, abundance, charge state) will yield highly similar MS/MS spectra. That is, fragmentation of molecules is consistent. This enables the identification of MS/MS spectra to libraries of reference compounds. Extending this concept, we have observed that structurally related molecules also exhibit similar fragmentation, with some caveats. Intuitively, two molecules that differ by the addition of a single chemical moiety, which does not contribute to a significant difference in molecule mass and not drastically change the bond energies of the molecule (e.g. Oxidation, methylation, glycosylation), will not drastically perturb the gas phase chemistry of fragmentation. Given that relative bond strengths between the two molecules do not drastically differ, the same bonds will undergo similar fragmentation within the collision cell of the mass spectrometer. The resulting corresponding product ions in the MS/MS spectra from the two molecules will either include the additional chemical moiety or will not. In cases fragments do not, the chemical moiety could either have Not been part of the product ion substructure Cleaved off prior to product ion formation Since corresponding product ions between structurally similar molecules can either have moiety or not, the product ions can either Appear at the exact same mass for both molecules Appear shifted by the mass of the chemical moiety Watrous et al. PNAS We consider both of these possibilities for each and every peak between two MS/MS spectra and explore how we do that below.","title":"Spectral Similarity Related to Molecular Structure Similarity"},{"location":"massspecbackground/networkingtheory/#spectrum-alignment","text":"We will use a toy example here to demonstrate intuitively how we are able to consider an alignment between two MS/MS spectra. Given two molecules that differ by a single chemical moiety that each produce fragmentation as shown We can consider that each peak from molecule A, could align at the same mass in molecule B, or at an offset of Mass(Delta). One possible alignment is all peaks in A, align at the same mass Another, where the first peak aligns at the same mass, the second at an offset Third, where the first peak aligns at an offset, and the second aligns at the same mass Finally, where both peaks align at an offset All of these potential alignments can be explored and the best scoring alignment is determined between the two MS/MS spectra and is called the alignment score. The total number of potential alignments is exponential (2 ^ N, where N is the number of peaks) and is computationally expensive. GNPS has implemented algorithms that can efficiently approximate this alignment.","title":"Spectrum Alignment"},{"location":"massspecbackground/networkingtheory/#alignment-of-entire-dataset","text":"So far we've investigated how to align one MS/MS spectrum to another, but have not created molecular networks across an entire dataset of MS/MS spectra. Since we do not know a priori, which MS/MS spectra will be structurally similar to any others, we must try aligning all MS/MS spectra within a dataset to all others. GNPS calculates the score between all MS/MS spectra within a dataset that provides the starting point of a molecular network.","title":"Alignment of Entire Dataset"},{"location":"massspecbackground/networkingtheory/#network-filtering-for-visualization","text":"The alignments between all MS/MS spectra must be filtered in order to produce molecular networks that can be visualized and interpretable.","title":"Network Filtering for Visualization"},{"location":"massspecbackground/networkingtheory/#alignment-score-filtering","text":"The most basic filter is by alignment score between MS/MS spectra. Generally, the default of cosine of 0.7 and 6 minimum matches peaks reduces the number of false positive alignments tremendously.","title":"Alignment Score Filtering"},{"location":"massspecbackground/networkingtheory/#neighbor-top-k","text":"A pathological case in Molecular Networks are promiscuous MS/MS spectra that align to many other MS/MS spectra due to a low complexity of fragmentation. To counteract this, only retain alignments between alignments between MS/MS spectra that mutually rank each other highly in the alignment score. Just like in human relationships, who wants a best friend who has a million other best friends?","title":"Neighbor Top K"},{"location":"massspecbackground/networkingtheory/#connected-component-max-size","text":"Even with the above filters, the occasional false positive connections causes hairball networks that make visualization/interpretation difficult. The connected component size filter limits the maximum size of a single molecular network to a parameterized number of nodes (100 by default). This process iteratively breaks up large hairball networks by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size.","title":"Connected Component Max Size"},{"location":"massspecbackground/networkingtheory/#limitation-of-molecular-networking","text":"","title":"Limitation of Molecular Networking"},{"location":"massspecbackground/networkingtheory/#multiple-modifications","text":"Molecular networking is unable to align spectra from molecules that differ by two distinct structural modifications. We have observed that this limitation is ameliorated in biological datasets because chemical modifications are enzymatically catalyzed. In the event that two molecules differ by two distinct chemical modification which cannot be connected by molecular networking, an intermediate molecule which differs by only a single chemical modification to the respective molecules and links all three molecules into a molecular family.","title":"Multiple Modifications"},{"location":"massspecbackground/quantification/","text":"Overview \u00b6 Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/quantification/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/tandemms/","text":"Overview \u00b6 Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/tandemms/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/targeteduntargeted/","text":"Overview \u00b6 Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/targeteduntargeted/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"tutorials/MSHUB-Kovats/","text":"In this tutorial you will be guided into running the MSHUB deconvolution integrating GC Library Search workflow on GNPS. Pipeline \u00b6 To create and launch GNPS feature detection job: \u00b6 Log in to GNPS (gnps.ucsd.edu) Upload data to MassIVE (massive.ucsd.edu) or import an existing dataset. All of the data must be collected using the same GC protocol. How to reach GC interface (MSHub) or clone the job Select the files that need to be processed and click \u201cSubmit\u201d (no explicit settings need to be entered as MSHub determines optimal settings internally without user input). When the job has completed, the feature table and .mgf file for all detected features could be downloaded by clicking \u201c[ all_features_table ]\u201d and \u201c[Download Quant Table]\u201d. To create and launch GNPS library search job: \u00b6 When feature detection job is completed, the link \u201claunch library search\u201d will become available. Clicking this link will launch library search job. Alternatively, the .mgf file of all features downloaded from the feature detection workflow could be uploaded in the same way as the original data. The file can then be selected by clicking \u201cSpectrum Files\u201d under \u201cSearch Options\u201d tab and selecting the uploaded .mgf file. Once files have been selected, the popup window can be closed by clicking on \u201cFinish Selection\u201d. NOTE: The default parameters recommended for obtaining good results have been determined and prepopulated. However, users are encouraged to adjust the settings as appropriate for their analysis. After the appropriate settings are entered, the job can be launched by clicking Submit\u201d. Parameter Explanation \u00b6 Advanced Network Options \u00b6 Fillable Field Description Recommended User Input Min pairs cos Minimum cosine score required for an edge to be formed between nodes 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7. Node TopK Pairs of nodes are reported only if they are found to be best matches in the topK in both directions that are above the minimum cosine score. Default is set to 10. This value enables the network to be more or less stringent. Maximum connected component size Maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Default setting is 100 \u2013 this value can be set to 0 to allow for an unlimited number of nodes or a higher setting can be used for larger data sets or for data sets containing many structurally-related molecules Maximum shift between precursors The maximum allowed difference in precursor m/z differences. Must be set to a large value for EI data since no precursor information is available (default value of 500) ### Advanced Search Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Library Class The level of library to include hits from. Keep default of \u201cBronze\u201d to include all possible hits including to public libraries. Top Hits Per Spectrum How many top hits ranked by the cosine score to include into the results. The default of 10. It is recommended to keep this number relatively high to allow for correct annotation selection if it is not a top hit. Spectral Library Selection of spectral libraries to include in the search. Make sure to select all appropriate EI libraries by selecting them and clicking \u201cLibrary Files\u201d. Click \u201cFinish Selection\u201d when completed. Search Analogs Used for tandem MS data. Keep default of \u201cDon\u2019t Search\u201d. Maximum Analog Search Mass Difference Maximum shift of the precursor m/z for analog search. Disabled when above option is set at \u201cDon\u2019t Search\u201d. ### Advanced Kovats Index Calculation Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Perform Kovats Calculation Whether to perform calculation of Kovats retention index. Select to calculate Kovats RIs for the compounds during library search. The Input Carbon Marker File could be provided for Kovats markers as comma separated values for each of the carbon markers and its corresponding retention time. The analysis must be conducted with identical protocol as the rest of the experiment. If the Input Carbon Marker File is not provided, the Kovat\u2019s RIs will be estimated based on dataset-wide annotations. Input Carbon Marker File (Optional) If provided, this information will be used for RI estimation. The RI markers information should be submitted as a comma separated values (.csv) file in the following format (header followed by names or available reference compounds and their retention times in seconds) Cosine Threshold for Kovats Filter The minimal value of cosine score for the library match to be used for Kovats RI values assignment. Default value is set at 0.9 to limit inclusion of erroneous annotations that may introduce errors into calculation. Retention time window starts/ends (mins) The portion of chromatogram across the dataset to be used for selecting annotations for Kovats RI assignment. Select values according to specifics of experiment. The front end portion of chromatogram that contains dead volume elution, solvent delay, solvent peak or otherwise is unusable, as well as back end portion after all of the meaningful compounds have eluted (e.g. bakeout ramp) should be excluded. Kovats Index Filtering Window (+/- %) The allowable error window for the calculated/assigned Kovats RI for the annotation to be retained. Default of +/-10%. All of the annotations are shown when exploring results in the browser. The filtered results can be downloaded under \u201cDownload Filtered Computed Kovats Index Files\u201d link upon job completion. ### Advanced Filtering Option Fillable Field Description Recommended User Input ------------- ------------- ------------- Filter below std dev For use with tandem MS data. It is highly recommend to use a default value of 0 so that no filter is applied. Filter SNR Intensity All ions in the EI spectrum below this raw intensity will be deleted. Use a default value of 0 so that no filter is applied, especially if the raw intensities of your data are very low. Filter precursor window All peaks in a +/- 17 Da around precursor ion mass are deleted. This removes the residual precursor ion, which is frequently observed in tandem MS spectra in the comparison of all spectra for molecular networking. Don\u2019t Filter is set as default for the EI data. Filter library Applies the above precursor ion window filter to the library as well. Don\u2019t Filter is set as default for the EI data. Filter peaks in 50 Da window Removes peaks that are not one of the top 6 most intense within a +/- 50 Da window. Depending on the deconvolution results, this could be turned on or off: if fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signals. Assessing the results of library search \u00b6 Once the job has completed, the putative matches to all selected libraries could be viewed under one of the links: \u201cView All Spectra DB\u201d; \u201cView All Compounds\u201d; \u201cView Kovats Calculation Result\u201d. The possible annotations could be sorted by their cosine value and/or RI error rate to aid in selecting best annotation using researcher\u2019s judgement. In addition, the results could be downloaded as a table for all of the matches (\u201cDownload Not Filtered Computed Kovats Index Files\u201d) or matches filtered by the Kovats RI window set when launching the job (\u201cDownload Filtered Computed Kovats Index Files\u201d). If clicking on the \u201cView Kovats Calculation Result\u201d results in an error: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d, this is indication that the dataset does not contain sufficient number of reference points for polynomial fitting to generate satisfactory regression (it does not pass internal quality check). In this case submitting the information for RI reference markers is necessary to generate Kovats estimates for the submitted data. The results can be visualized as a network (see \u201cMolecular Networking\u201d and the \u201cBiological Case Study\u201d sections below) by downloading and importing the GraphML file \u201cDownload GraphML\u201d. The detailed View All Spectra DB \u00b6 This option will display all of the top matches for each feature and relevant information including retention time. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the number listed in the feature table. Clicking on the spectrum icon at the left side of the screen would show mirror plot that could be investigated. View All Compounds \u00b6 This option will display only the cop hits for each feature of the top match. \u201cView Kovats Calculation Result\u201d \u00b6 This option will display all of the top matches for each feature and in addition will list the information for the Kovats RI calculation or assignment. This information includes: Kovats_Index_Lib_Record \u00b6 This is the library value of Kovats RI for the match. In no record available, \u201cNone\u201d is listed. Kovats_Index_calculated \u00b6 This is the value of calculated or assigned value of the RI. Kovats_Index_Error \u00b6 This is the error between the calculated/assigned RI value and the library entry. If no library value was available, \u201cNone\u201d is listed. Capturing information by adding reference spectra from your data. \u00b6 High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. Single spectrum submission If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help documentation. The compliance of the file format can be verified using online tool. Data Sharing and Cloning a Job \u00b6 The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. If the same analysis needs to be repeated, it is possible to clone the job by clicking \u2018clone\u2019 on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job (feature detection or library search) with the same (or adjusted) parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job. Troubleshooting \u00b6 Erro Description solution When clicking on \u201cView Kovats Calculation Result\u201d, error is displayed: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d The retention indices could not be reliably estimated from the annotations available within the dataset. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol could resolve the issue. Alternatively, the information for the reference mix needs to be supplied. A large number of spectra appear as a single peak. Insufficient volume of data cause unstable deconvolution resulting in spurious low-quality spectra. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol would resolve the issue. Otherwise, an external deconvolution could be carried out to ensure that the high quality spectral pattern are obtained. GNPS job fails due to improper metadata format The metadata file must be formatted as a tab-separated .txt file Example Files for GC-KOVATS workflow \u00b6 workflow raw data format result","title":"MSHUB Kovats"},{"location":"tutorials/MSHUB-Kovats/#pipeline","text":"","title":"Pipeline"},{"location":"tutorials/MSHUB-Kovats/#to-create-and-launch-gnps-feature-detection-job","text":"Log in to GNPS (gnps.ucsd.edu) Upload data to MassIVE (massive.ucsd.edu) or import an existing dataset. All of the data must be collected using the same GC protocol. How to reach GC interface (MSHub) or clone the job Select the files that need to be processed and click \u201cSubmit\u201d (no explicit settings need to be entered as MSHub determines optimal settings internally without user input). When the job has completed, the feature table and .mgf file for all detected features could be downloaded by clicking \u201c[ all_features_table ]\u201d and \u201c[Download Quant Table]\u201d.","title":"To create and launch GNPS feature detection job:"},{"location":"tutorials/MSHUB-Kovats/#to-create-and-launch-gnps-library-search-job","text":"When feature detection job is completed, the link \u201claunch library search\u201d will become available. Clicking this link will launch library search job. Alternatively, the .mgf file of all features downloaded from the feature detection workflow could be uploaded in the same way as the original data. The file can then be selected by clicking \u201cSpectrum Files\u201d under \u201cSearch Options\u201d tab and selecting the uploaded .mgf file. Once files have been selected, the popup window can be closed by clicking on \u201cFinish Selection\u201d. NOTE: The default parameters recommended for obtaining good results have been determined and prepopulated. However, users are encouraged to adjust the settings as appropriate for their analysis. After the appropriate settings are entered, the job can be launched by clicking Submit\u201d.","title":"To create and launch GNPS library search job:"},{"location":"tutorials/MSHUB-Kovats/#parameter-explanation","text":"","title":"Parameter Explanation"},{"location":"tutorials/MSHUB-Kovats/#advanced-network-options","text":"Fillable Field Description Recommended User Input Min pairs cos Minimum cosine score required for an edge to be formed between nodes 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7. Node TopK Pairs of nodes are reported only if they are found to be best matches in the topK in both directions that are above the minimum cosine score. Default is set to 10. This value enables the network to be more or less stringent. Maximum connected component size Maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Default setting is 100 \u2013 this value can be set to 0 to allow for an unlimited number of nodes or a higher setting can be used for larger data sets or for data sets containing many structurally-related molecules Maximum shift between precursors The maximum allowed difference in precursor m/z differences. Must be set to a large value for EI data since no precursor information is available (default value of 500) ### Advanced Search Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Library Class The level of library to include hits from. Keep default of \u201cBronze\u201d to include all possible hits including to public libraries. Top Hits Per Spectrum How many top hits ranked by the cosine score to include into the results. The default of 10. It is recommended to keep this number relatively high to allow for correct annotation selection if it is not a top hit. Spectral Library Selection of spectral libraries to include in the search. Make sure to select all appropriate EI libraries by selecting them and clicking \u201cLibrary Files\u201d. Click \u201cFinish Selection\u201d when completed. Search Analogs Used for tandem MS data. Keep default of \u201cDon\u2019t Search\u201d. Maximum Analog Search Mass Difference Maximum shift of the precursor m/z for analog search. Disabled when above option is set at \u201cDon\u2019t Search\u201d. ### Advanced Kovats Index Calculation Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Perform Kovats Calculation Whether to perform calculation of Kovats retention index. Select to calculate Kovats RIs for the compounds during library search. The Input Carbon Marker File could be provided for Kovats markers as comma separated values for each of the carbon markers and its corresponding retention time. The analysis must be conducted with identical protocol as the rest of the experiment. If the Input Carbon Marker File is not provided, the Kovat\u2019s RIs will be estimated based on dataset-wide annotations. Input Carbon Marker File (Optional) If provided, this information will be used for RI estimation. The RI markers information should be submitted as a comma separated values (.csv) file in the following format (header followed by names or available reference compounds and their retention times in seconds) Cosine Threshold for Kovats Filter The minimal value of cosine score for the library match to be used for Kovats RI values assignment. Default value is set at 0.9 to limit inclusion of erroneous annotations that may introduce errors into calculation. Retention time window starts/ends (mins) The portion of chromatogram across the dataset to be used for selecting annotations for Kovats RI assignment. Select values according to specifics of experiment. The front end portion of chromatogram that contains dead volume elution, solvent delay, solvent peak or otherwise is unusable, as well as back end portion after all of the meaningful compounds have eluted (e.g. bakeout ramp) should be excluded. Kovats Index Filtering Window (+/- %) The allowable error window for the calculated/assigned Kovats RI for the annotation to be retained. Default of +/-10%. All of the annotations are shown when exploring results in the browser. The filtered results can be downloaded under \u201cDownload Filtered Computed Kovats Index Files\u201d link upon job completion. ### Advanced Filtering Option Fillable Field Description Recommended User Input ------------- ------------- ------------- Filter below std dev For use with tandem MS data. It is highly recommend to use a default value of 0 so that no filter is applied. Filter SNR Intensity All ions in the EI spectrum below this raw intensity will be deleted. Use a default value of 0 so that no filter is applied, especially if the raw intensities of your data are very low. Filter precursor window All peaks in a +/- 17 Da around precursor ion mass are deleted. This removes the residual precursor ion, which is frequently observed in tandem MS spectra in the comparison of all spectra for molecular networking. Don\u2019t Filter is set as default for the EI data. Filter library Applies the above precursor ion window filter to the library as well. Don\u2019t Filter is set as default for the EI data. Filter peaks in 50 Da window Removes peaks that are not one of the top 6 most intense within a +/- 50 Da window. Depending on the deconvolution results, this could be turned on or off: if fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signals.","title":"Advanced Network Options"},{"location":"tutorials/MSHUB-Kovats/#assessing-the-results-of-library-search","text":"Once the job has completed, the putative matches to all selected libraries could be viewed under one of the links: \u201cView All Spectra DB\u201d; \u201cView All Compounds\u201d; \u201cView Kovats Calculation Result\u201d. The possible annotations could be sorted by their cosine value and/or RI error rate to aid in selecting best annotation using researcher\u2019s judgement. In addition, the results could be downloaded as a table for all of the matches (\u201cDownload Not Filtered Computed Kovats Index Files\u201d) or matches filtered by the Kovats RI window set when launching the job (\u201cDownload Filtered Computed Kovats Index Files\u201d). If clicking on the \u201cView Kovats Calculation Result\u201d results in an error: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d, this is indication that the dataset does not contain sufficient number of reference points for polynomial fitting to generate satisfactory regression (it does not pass internal quality check). In this case submitting the information for RI reference markers is necessary to generate Kovats estimates for the submitted data. The results can be visualized as a network (see \u201cMolecular Networking\u201d and the \u201cBiological Case Study\u201d sections below) by downloading and importing the GraphML file \u201cDownload GraphML\u201d. The detailed","title":"Assessing the results of library search"},{"location":"tutorials/MSHUB-Kovats/#view-all-spectra-db","text":"This option will display all of the top matches for each feature and relevant information including retention time. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the number listed in the feature table. Clicking on the spectrum icon at the left side of the screen would show mirror plot that could be investigated.","title":"View All Spectra DB"},{"location":"tutorials/MSHUB-Kovats/#view-all-compounds","text":"This option will display only the cop hits for each feature of the top match.","title":"View All Compounds"},{"location":"tutorials/MSHUB-Kovats/#view-kovats-calculation-result","text":"This option will display all of the top matches for each feature and in addition will list the information for the Kovats RI calculation or assignment. This information includes:","title":"\u201cView Kovats Calculation Result\u201d"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_lib_record","text":"This is the library value of Kovats RI for the match. In no record available, \u201cNone\u201d is listed.","title":"Kovats_Index_Lib_Record"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_calculated","text":"This is the value of calculated or assigned value of the RI.","title":"Kovats_Index_calculated"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_error","text":"This is the error between the calculated/assigned RI value and the library entry. If no library value was available, \u201cNone\u201d is listed.","title":"Kovats_Index_Error"},{"location":"tutorials/MSHUB-Kovats/#capturing-information-by-adding-reference-spectra-from-your-data","text":"High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. Single spectrum submission If the user wishes to upload >50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help documentation. The compliance of the file format can be verified using online tool.","title":"Capturing information by adding reference spectra from your data."},{"location":"tutorials/MSHUB-Kovats/#data-sharing-and-cloning-a-job","text":"The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. If the same analysis needs to be repeated, it is possible to clone the job by clicking \u2018clone\u2019 on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job (feature detection or library search) with the same (or adjusted) parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.","title":"Data Sharing and Cloning a Job"},{"location":"tutorials/MSHUB-Kovats/#troubleshooting","text":"Erro Description solution When clicking on \u201cView Kovats Calculation Result\u201d, error is displayed: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d The retention indices could not be reliably estimated from the annotations available within the dataset. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol could resolve the issue. Alternatively, the information for the reference mix needs to be supplied. A large number of spectra appear as a single peak. Insufficient volume of data cause unstable deconvolution resulting in spurious low-quality spectra. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol would resolve the issue. Otherwise, an external deconvolution could be carried out to ensure that the high quality spectral pattern are obtained. GNPS job fails due to improper metadata format The metadata file must be formatted as a tab-separated .txt file","title":"Troubleshooting"},{"location":"tutorials/MSHUB-Kovats/#example-files-for-gc-kovats-workflow","text":"workflow raw data format result","title":"Example Files for GC-KOVATS workflow"},{"location":"tutorials/americangut-ms-dial/","text":"Tutorial introduction \u00b6 In this tutorial you will be guided into running MS-DIAL for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript Citations \u00b6 Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018). McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18 Learning Objectives \u00b6 Learn how to download files from a GNPS/MassIVE Dataset. See instructions here . Run MS-DIAL feature detection on LC-MS/MS data. See tutorial here , and output a feature quantification table and a MS2 spectral file. Run the Feature Based Molecular Networking (FBMN) with MS-DIAL files on GNPS. See the tutorial here . Visualize the results of FBMN with Cytoscape See the tutorial here . Experimental Setup \u00b6 We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MS-DIAL will be used to detect features and output a feature quantification table (TXT format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak. Data and Files Needed for the Tutorial \u00b6 LC-MS/MS data can be found in the MassIVE dataset MSV000082678 . Study metadata (.TXT format) can downloaded here . MS-DIAL representative output files \u00b6 These files are not needed for the tutorial but are provided here as reference files, or if you wanna by pass the MS-DIAL processing. File Type Download Link Feature quantification table (TXT format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download MS-DIAL project (created with version 3.64) TODO: Download Required Software Installs \u00b6 FTP Client (e.g. WinSCP, DO NOT FileZilla!). See instructions here . MS-DIAL for feature detection (available only on Windows). An account on GNPS . Cytocape for network visualization. Video Tutorial - Running MS-DIAL for FBMN \u00b6 Running FBMN on GNPS \u00b6 See the FBMN documentation . Analyzing the Results of FBMN with Cytoscape \u00b6 See the documentation for using Cytoscape for FBMN analysis . Follow up Tutorial in GNPS \u00b6 Checkout the follow up tutorial on how to do FBMN with MZmine2 and GNPS. Other tutorials are available from the main Feature Based Molecular Networking Workflow page .","title":"FBMN with MS-DIAL - Microbiome Molecules in Fecal Samples in American Gut Project"},{"location":"tutorials/americangut-ms-dial/#tutorial-introduction","text":"In this tutorial you will be guided into running MS-DIAL for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript","title":"Tutorial introduction"},{"location":"tutorials/americangut-ms-dial/#citations","text":"Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. & Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015). Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. & Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018). McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18","title":"Citations"},{"location":"tutorials/americangut-ms-dial/#learning-objectives","text":"Learn how to download files from a GNPS/MassIVE Dataset. See instructions here . Run MS-DIAL feature detection on LC-MS/MS data. See tutorial here , and output a feature quantification table and a MS2 spectral file. Run the Feature Based Molecular Networking (FBMN) with MS-DIAL files on GNPS. See the tutorial here . Visualize the results of FBMN with Cytoscape See the tutorial here .","title":"Learning Objectives"},{"location":"tutorials/americangut-ms-dial/#experimental-setup","text":"We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MS-DIAL will be used to detect features and output a feature quantification table (TXT format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak.","title":"Experimental Setup"},{"location":"tutorials/americangut-ms-dial/#data-and-files-needed-for-the-tutorial","text":"LC-MS/MS data can be found in the MassIVE dataset MSV000082678 . Study metadata (.TXT format) can downloaded here .","title":"Data and Files Needed for the Tutorial"},{"location":"tutorials/americangut-ms-dial/#ms-dial-representative-output-files","text":"These files are not needed for the tutorial but are provided here as reference files, or if you wanna by pass the MS-DIAL processing. File Type Download Link Feature quantification table (TXT format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download MS-DIAL project (created with version 3.64) TODO: Download","title":"MS-DIAL representative output files"},{"location":"tutorials/americangut-ms-dial/#required-software-installs","text":"FTP Client (e.g. WinSCP, DO NOT FileZilla!). See instructions here . MS-DIAL for feature detection (available only on Windows). An account on GNPS . Cytocape for network visualization.","title":"Required Software Installs"},{"location":"tutorials/americangut-ms-dial/#video-tutorial-running-ms-dial-for-fbmn","text":"","title":"Video Tutorial - Running MS-DIAL for FBMN"},{"location":"tutorials/americangut-ms-dial/#running-fbmn-on-gnps","text":"See the FBMN documentation .","title":"Running FBMN on GNPS"},{"location":"tutorials/americangut-ms-dial/#analyzing-the-results-of-fbmn-with-cytoscape","text":"See the documentation for using Cytoscape for FBMN analysis .","title":"Analyzing the Results of FBMN with Cytoscape"},{"location":"tutorials/americangut-ms-dial/#follow-up-tutorial-in-gnps","text":"Checkout the follow up tutorial on how to do FBMN with MZmine2 and GNPS. Other tutorials are available from the main Feature Based Molecular Networking Workflow page .","title":"Follow up Tutorial in GNPS"},{"location":"tutorials/americangutmzmine/","text":"In this tutorial you will be guided into running MZmine2 for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript: McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18 Learning Objectives \u00b6 Learn how to download files from a GNPS/MassIVE Dataset. Run MZmine2 feature detection on LC-MS/MS data, and output a feature quantification table and a MS2 spectral file. See the tutorial here Experimental Setup \u00b6 We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 will be used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak. Data and Files Needed for the Tutorial \u00b6 LC-MS/MS data and files can be found in the MassIVE dataset MSV000082678 , and can be retrieved from the table below: File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download Required Software Installs \u00b6 FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here MZMine2 for feature detection Cytocape for network visualization Video Tutorial - Run MZmine2 \u00b6 IMPORTANT: MZmine2 processing for FBMN has been slightly updated since this video was produced. Please refer to this page for up-to-date informations on MZmine2 processing for the FBMN step-by-step documentation for MZmine2 processing . Follow up Tutorial in GNPS \u00b6 Checkout the follow up tutorial on how to take the output of MZMine2 to produce a molecular network at GNPS. Other tutorials are available from the main Feature Based Molecular Networking Workflow page .","title":"Feature-Based Molecular Networking (FBMN) with MZmine2 - Microbiome Molecules in Fecal Samples in American Gut Project"},{"location":"tutorials/americangutmzmine/#learning-objectives","text":"Learn how to download files from a GNPS/MassIVE Dataset. Run MZmine2 feature detection on LC-MS/MS data, and output a feature quantification table and a MS2 spectral file. See the tutorial here","title":"Learning Objectives"},{"location":"tutorials/americangutmzmine/#experimental-setup","text":"We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 will be used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak.","title":"Experimental Setup"},{"location":"tutorials/americangutmzmine/#data-and-files-needed-for-the-tutorial","text":"LC-MS/MS data and files can be found in the MassIVE dataset MSV000082678 , and can be retrieved from the table below: File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download","title":"Data and Files Needed for the Tutorial"},{"location":"tutorials/americangutmzmine/#required-software-installs","text":"FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here MZMine2 for feature detection Cytocape for network visualization","title":"Required Software Installs"},{"location":"tutorials/americangutmzmine/#video-tutorial-run-mzmine2","text":"IMPORTANT: MZmine2 processing for FBMN has been slightly updated since this video was produced. Please refer to this page for up-to-date informations on MZmine2 processing for the FBMN step-by-step documentation for MZmine2 processing .","title":"Video Tutorial - Run MZmine2"},{"location":"tutorials/americangutmzmine/#follow-up-tutorial-in-gnps","text":"Checkout the follow up tutorial on how to take the output of MZMine2 to produce a molecular network at GNPS. Other tutorials are available from the main Feature Based Molecular Networking Workflow page .","title":"Follow up Tutorial in GNPS"},{"location":"tutorials/bacterianetworking/","text":"In this tutorial, we highlight how GNPS and molecular networking can help users uncover unique molecules being produced a new strain of bacteria. Experimental Setup \u00b6 Microbial extracts from Streptomyces roseosporus and Streptomyces sp. DSM5940 were analyzed on an LTQ FT mass spectrometer. The mass spectrometer was operated in data dependent positive ion mode; automatically switching between full scan high resolution FT MS and low resolution LTQ MS/MS acquisitions. Full scan MS spectra were acquired in the FT and the top six most intense ions in a particular scan were fragmented using collision induced dissociation (CID) at a constant collision energy of 35eV, an activation Q of 0.25, and an activation time of 50 to 80 ms. Data Availability \u00b6 MS/MS data can be found in the MassIVE dataset MSV000079204 . There are a total of four mzXML mass spectrometry files that have already been converted for analysis. filename Description ccms_peak/0518_s_BuOH.mzXML S. roseosporus extract ccms_peak/15998_nBuOH_FT_test01.mzXML S. roseosporus extract ccms_peak/DSM4950_BuOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract ccms_peak/DSM4950_MeOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract Running Molecular Networking \u00b6 Select molecular networking analysis . Selecting Files \u00b6 Click \"Select Input Files\" - Help Import MSV000079204 to analyze - Help Select S. roseosporus files into Group G1 and Streptomyces sp. DSM5940 into Group G2 Updating parameters \u00b6 These parameters were selected to be appropriate for a small dataset and a little on the loose side. The following are the updates that deviate from the default. Advanced Network Options - Min Pairs Cos: 0.65 Advanced Network Options - Minimum Cluster Size: 1 Advanced Filtering Options - Filter Precursor Window: Don't Filter Advanced Filtering Options - Filter peaks in 50Da Window: Don't Filter Advanced Filtering Options - Filter Library: Don't Filter Pre-filled example \u00b6 If you want to see a pre-filled example, see here . Analyzing Results in Browser \u00b6 This is an example completed molecular networking analysis . Exploring Identified Compounds in Data \u00b6 Click the \"View All Library Hits\". This will list all library compounds that were matched. Here we can see many different antibiotics, e.g. Stenothricin, Arylomycin, Daptomycin, and Mureidomycin. Exploring Molecular Networks including Stenothricin \u00b6 Click the \"View All Clusters With IDs\". This brings you to a list of all MS/MS detected in your samples. We can filter on \"Stenothricin\" in the LibraryID column. Click on \"View Network\" for any of the Stenothricin compounds: Here we can see the molecular network of related compounds to Stenothricin To color the nodes by which species they came from, click the draw pies We can now see all the compounds from S. roseosporus in red and Streptomyces sp. DSM5940 in blue. Further, we can highlight the compounds where are identified (blue border of nodes) and show the actual names This network indicates to us that there are some unique compounds being produced by Streptomyces sp. DSM5940 that are related to Stenothricin. To highlight what might be different about these molecules, we can highlight the mass differences between connected (structurally related) molecules in the network. We can see the Stenothricin-GNPS 2 is a molecule which we discovered using molecular networking. We can further interrogate the similarity at the fragmentation level by clicking the edge between the two nodes to visualize the MS/MS spectra and align the peaks Analyzing Global Network with Cytoscape \u00b6 Click the \"Direct Cytoscape Preview/Download\" to get a preformatted cytoscape file In this preview you can even see from a high level the red and blue molecules that represent the G1 (roseosporus) and G2 (DSM5940) respectively. Download the Cytoscape file and view in cytoscape to dig further! Open network in Cytoscape ( Help ) to look at the entire network. Each molecule (node) has the pie charts already drawn with red (G1 - Rosesporus) and blue (G2 - DSM5940). Good Luck! Homework \u00b6 Look for putative analogs of other antibiotics such as Arylomycin and Daptomycin.","title":"Molecular Networking - Analog Discovery in Microbial Extracts"},{"location":"tutorials/bacterianetworking/#experimental-setup","text":"Microbial extracts from Streptomyces roseosporus and Streptomyces sp. DSM5940 were analyzed on an LTQ FT mass spectrometer. The mass spectrometer was operated in data dependent positive ion mode; automatically switching between full scan high resolution FT MS and low resolution LTQ MS/MS acquisitions. Full scan MS spectra were acquired in the FT and the top six most intense ions in a particular scan were fragmented using collision induced dissociation (CID) at a constant collision energy of 35eV, an activation Q of 0.25, and an activation time of 50 to 80 ms.","title":"Experimental Setup"},{"location":"tutorials/bacterianetworking/#data-availability","text":"MS/MS data can be found in the MassIVE dataset MSV000079204 . There are a total of four mzXML mass spectrometry files that have already been converted for analysis. filename Description ccms_peak/0518_s_BuOH.mzXML S. roseosporus extract ccms_peak/15998_nBuOH_FT_test01.mzXML S. roseosporus extract ccms_peak/DSM4950_BuOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract ccms_peak/DSM4950_MeOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract","title":"Data Availability"},{"location":"tutorials/bacterianetworking/#running-molecular-networking","text":"Select molecular networking analysis .","title":"Running Molecular Networking"},{"location":"tutorials/bacterianetworking/#selecting-files","text":"Click \"Select Input Files\" - Help Import MSV000079204 to analyze - Help Select S. roseosporus files into Group G1 and Streptomyces sp. DSM5940 into Group G2","title":"Selecting Files"},{"location":"tutorials/bacterianetworking/#updating-parameters","text":"These parameters were selected to be appropriate for a small dataset and a little on the loose side. The following are the updates that deviate from the default. Advanced Network Options - Min Pairs Cos: 0.65 Advanced Network Options - Minimum Cluster Size: 1 Advanced Filtering Options - Filter Precursor Window: Don't Filter Advanced Filtering Options - Filter peaks in 50Da Window: Don't Filter Advanced Filtering Options - Filter Library: Don't Filter","title":"Updating parameters"},{"location":"tutorials/bacterianetworking/#pre-filled-example","text":"If you want to see a pre-filled example, see here .","title":"Pre-filled example"},{"location":"tutorials/bacterianetworking/#analyzing-results-in-browser","text":"This is an example completed molecular networking analysis .","title":"Analyzing Results in Browser"},{"location":"tutorials/bacterianetworking/#exploring-identified-compounds-in-data","text":"Click the \"View All Library Hits\". This will list all library compounds that were matched. Here we can see many different antibiotics, e.g. Stenothricin, Arylomycin, Daptomycin, and Mureidomycin.","title":"Exploring Identified Compounds in Data"},{"location":"tutorials/bacterianetworking/#exploring-molecular-networks-including-stenothricin","text":"Click the \"View All Clusters With IDs\". This brings you to a list of all MS/MS detected in your samples. We can filter on \"Stenothricin\" in the LibraryID column. Click on \"View Network\" for any of the Stenothricin compounds: Here we can see the molecular network of related compounds to Stenothricin To color the nodes by which species they came from, click the draw pies We can now see all the compounds from S. roseosporus in red and Streptomyces sp. DSM5940 in blue. Further, we can highlight the compounds where are identified (blue border of nodes) and show the actual names This network indicates to us that there are some unique compounds being produced by Streptomyces sp. DSM5940 that are related to Stenothricin. To highlight what might be different about these molecules, we can highlight the mass differences between connected (structurally related) molecules in the network. We can see the Stenothricin-GNPS 2 is a molecule which we discovered using molecular networking. We can further interrogate the similarity at the fragmentation level by clicking the edge between the two nodes to visualize the MS/MS spectra and align the peaks","title":"Exploring Molecular Networks including Stenothricin"},{"location":"tutorials/bacterianetworking/#analyzing-global-network-with-cytoscape","text":"Click the \"Direct Cytoscape Preview/Download\" to get a preformatted cytoscape file In this preview you can even see from a high level the red and blue molecules that represent the G1 (roseosporus) and G2 (DSM5940) respectively. Download the Cytoscape file and view in cytoscape to dig further! Open network in Cytoscape ( Help ) to look at the entire network. Each molecule (node) has the pie charts already drawn with red (G1 - Rosesporus) and blue (G2 - DSM5940). Good Luck!","title":"Analyzing Global Network with Cytoscape"},{"location":"tutorials/bacterianetworking/#homework","text":"Look for putative analogs of other antibiotics such as Arylomycin and Daptomycin.","title":"Homework"},{"location":"tutorials/coffee-tutorial-metaboscape/","text":"Tutorial Using MetaboScape and GNPS \u00b6 In this tutorial you will be guided into running MetaboScape for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the MetaboScape Coffee tutorial. Learning Objectives \u00b6 Run MetaboScape feature detection on non-targeted LC-MS/MS data, and receive a feature quantification table and a MS2 spectral file as an output. Run GNPS and visualize MetaboScape annotation in Cytoscape. Experimental Setup \u00b6 We will use a subset of the LC-MS/MS analysis from the Coffee project. MetaboScape will be used to perform feature detection and alignment and output a feature quantification table (.CSV file) and a MS/MS spectral file (.MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS/MS spectral file contains a single MS/MS representing each aligned peak. Data and Files Needed for the Tutorial \u00b6 LC-MS/MS data and files are part of the MetaboScape tutorial project. MetaboScape Representative Output Files \u00b6 These files are not needed for the tutorial but are provided here as reference files, or if you want to bypass the MetaboScape processing. File Type Download Link Feature quantification table (.csv format) Download MS2 spectral file (.mgf format) Download Required Software Installations \u00b6 MetaboScape, commercially available from Bruker. Cytoscape for advanced network visualization. Process the data with MetaboScape \u00b6 Refer to the detailed step-by-step procedure to run Metaboscape here . Run FBMN on GNPS \u00b6 See the FBMN documentation here . Run Cytoscape \u00b6 See the documentation to perform visualization of the molecular networking on the data of the Coffee Project here . Visualization of Molecular Networks with Cytoscape \u00b6 Open Cytoscape 3.4 (or more recent version). Install the Cytoscape App ChemViz2 - http://apps.cytoscape.org/apps/chemviz2. Import the molecular networking files downloaded from GNPS into Cytoscape. Import the network topology. Go to File/Import/Network/File - select the .pairsinfo file in networkedges_selfloop folder. Import the node information table. Go to File/Import/Table/File - select the .tsv file in clusterinfosummarygroup_attributes_withIDs_withcomponentID folder. Import the MS/MS spectral library annotation table. Go to File/Import/Table/File - select the .tsv file in result_specnets_DB folder. Import the bucket table (MS/MS only) exported from MetaboScape. Go to File/Import/Table/File - select the .csv file. Figure 1. Import the molecular network topology. Figure 2. Node table import interface. Configure the Cytoscape style. For the Label properties. Select the column MOLECULAR_FORMULA and click Passthrough Mapping for the mapping type. For the Size properties. Select the column SAMPLE and click Continuous Mapping for the mapping type. Figure 3. Configure the molecular network style. Visualizing the bucket table as a pie chart diagram. For the Image/Chart properties. Click on the Def. box. Click on the Charts spreadsheet, and select the group for visualization. Click on the option Charts/option spreadsheet, and select the color-code for each group. Figure 4. Pie charts configuration. Data in Image/Chart properties. Figure 5. Pie charts configuration. Options in Image/Chart properties. Visualize the MS/MS spectral library annotations (make sure ChemViz2 is installed). Select the nodes with MS/MS spectral library annotation (column LibraryID in the Cytoscape node table). Right click on the nodes and select /Apps/Cheminformatics/Show compounds table , or alternatively /Apps/Cheminformatics/Show structures for selected nodes or /Apps/Cheminformatics/Paint structures for selected nodes . Figure 6. Molecular networks visualization with molecular formula annotation (node name). Figure 7. View of compounds structures for spectral library MS/MS annotation in the molecular networks. Figure 8. Molecular networks with MS/MS spectral annotation. Page contributors \u00b6 Louis Felix Nothias (UCSD), Tam Dang (Tech. Univ. Berlin), Kevin Ngoc (UCSD).","title":"FBMN with MetaboScape - Coffee Analysis"},{"location":"tutorials/coffee-tutorial-metaboscape/#tutorial-using-metaboscape-and-gnps","text":"In this tutorial you will be guided into running MetaboScape for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the MetaboScape Coffee tutorial.","title":"Tutorial Using MetaboScape and GNPS"},{"location":"tutorials/coffee-tutorial-metaboscape/#learning-objectives","text":"Run MetaboScape feature detection on non-targeted LC-MS/MS data, and receive a feature quantification table and a MS2 spectral file as an output. Run GNPS and visualize MetaboScape annotation in Cytoscape.","title":"Learning Objectives"},{"location":"tutorials/coffee-tutorial-metaboscape/#experimental-setup","text":"We will use a subset of the LC-MS/MS analysis from the Coffee project. MetaboScape will be used to perform feature detection and alignment and output a feature quantification table (.CSV file) and a MS/MS spectral file (.MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS/MS spectral file contains a single MS/MS representing each aligned peak.","title":"Experimental Setup"},{"location":"tutorials/coffee-tutorial-metaboscape/#data-and-files-needed-for-the-tutorial","text":"LC-MS/MS data and files are part of the MetaboScape tutorial project.","title":"Data and Files Needed for the Tutorial"},{"location":"tutorials/coffee-tutorial-metaboscape/#metaboscape-representative-output-files","text":"These files are not needed for the tutorial but are provided here as reference files, or if you want to bypass the MetaboScape processing. File Type Download Link Feature quantification table (.csv format) Download MS2 spectral file (.mgf format) Download","title":"MetaboScape Representative Output Files"},{"location":"tutorials/coffee-tutorial-metaboscape/#required-software-installations","text":"MetaboScape, commercially available from Bruker. Cytoscape for advanced network visualization.","title":"Required Software Installations"},{"location":"tutorials/coffee-tutorial-metaboscape/#process-the-data-with-metaboscape","text":"Refer to the detailed step-by-step procedure to run Metaboscape here .","title":"Process the data with MetaboScape"},{"location":"tutorials/coffee-tutorial-metaboscape/#run-fbmn-on-gnps","text":"See the FBMN documentation here .","title":"Run FBMN on GNPS"},{"location":"tutorials/coffee-tutorial-metaboscape/#run-cytoscape","text":"See the documentation to perform visualization of the molecular networking on the data of the Coffee Project here .","title":"Run Cytoscape"},{"location":"tutorials/coffee-tutorial-metaboscape/#visualization-of-molecular-networks-with-cytoscape","text":"Open Cytoscape 3.4 (or more recent version). Install the Cytoscape App ChemViz2 - http://apps.cytoscape.org/apps/chemviz2. Import the molecular networking files downloaded from GNPS into Cytoscape. Import the network topology. Go to File/Import/Network/File - select the .pairsinfo file in networkedges_selfloop folder. Import the node information table. Go to File/Import/Table/File - select the .tsv file in clusterinfosummarygroup_attributes_withIDs_withcomponentID folder. Import the MS/MS spectral library annotation table. Go to File/Import/Table/File - select the .tsv file in result_specnets_DB folder. Import the bucket table (MS/MS only) exported from MetaboScape. Go to File/Import/Table/File - select the .csv file. Figure 1. Import the molecular network topology. Figure 2. Node table import interface. Configure the Cytoscape style. For the Label properties. Select the column MOLECULAR_FORMULA and click Passthrough Mapping for the mapping type. For the Size properties. Select the column SAMPLE and click Continuous Mapping for the mapping type. Figure 3. Configure the molecular network style. Visualizing the bucket table as a pie chart diagram. For the Image/Chart properties. Click on the Def. box. Click on the Charts spreadsheet, and select the group for visualization. Click on the option Charts/option spreadsheet, and select the color-code for each group. Figure 4. Pie charts configuration. Data in Image/Chart properties. Figure 5. Pie charts configuration. Options in Image/Chart properties. Visualize the MS/MS spectral library annotations (make sure ChemViz2 is installed). Select the nodes with MS/MS spectral library annotation (column LibraryID in the Cytoscape node table). Right click on the nodes and select /Apps/Cheminformatics/Show compounds table , or alternatively /Apps/Cheminformatics/Show structures for selected nodes or /Apps/Cheminformatics/Paint structures for selected nodes . Figure 6. Molecular networks visualization with molecular formula annotation (node name). Figure 7. View of compounds structures for spectral library MS/MS annotation in the molecular networks. Figure 8. Molecular networks with MS/MS spectral annotation.","title":"Visualization of Molecular Networks with Cytoscape"},{"location":"tutorials/coffee-tutorial-metaboscape/#page-contributors","text":"Louis Felix Nothias (UCSD), Tam Dang (Tech. Univ. Berlin), Kevin Ngoc (UCSD).","title":"Page contributors"},{"location":"tutorials/featurebasedgnps/","text":"In this tutorial you will be guided into running the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript: McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18 Learning Objectives \u00b6 Run the Feature Based Molecular Networking using MZmine2 outputted files along with a metadata table. See the workflow here (Note that you must be logged in GNPS first). Explore Molecular Networking results briefly in GNPS Export Molecular Network to Cytoscape Prerequisites \u00b6 The LC-MS/MS data have first to be processed with MZmine2. The resulting MZmine2 output files needed for FBMN are provided here. If you have not learned that process yet, refer to this MZmine2 tutorial . Experimental Setup \u00b6 We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 was used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak. There is a dedicated MZmine2 tutorial describing that process. Data Availability \u00b6 The LC-MS/MS data can be found in the MassIVE dataset MSV000082678 . Files Needed for Tutorial \u00b6 File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download Demo GNPS job of Feature Based Molecular Networking \u00b6 Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/). Required Software Installs \u00b6 FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here Cytocape for network visualization For step-by-step tutorial on Feature Based Molecular Networking \u00b6 IMPORTANT: Note that the Feature Based Molecular Networking workflow has been slightly updated since the following videos were produced. Please refer to this page for the most recent description of step-by-step MZmine2 processing for the FBMN workflow . Video Tutorial - Analyze Feature Based Molecular Networking in GNPS \u00b6 Video Tutorial - Quick MZMine2 Export to GNPS Feature Based Molecular Networking \u00b6","title":"FBMN analysis at GNPS"},{"location":"tutorials/featurebasedgnps/#learning-objectives","text":"Run the Feature Based Molecular Networking using MZmine2 outputted files along with a metadata table. See the workflow here (Note that you must be logged in GNPS first). Explore Molecular Networking results briefly in GNPS Export Molecular Network to Cytoscape","title":"Learning Objectives"},{"location":"tutorials/featurebasedgnps/#prerequisites","text":"The LC-MS/MS data have first to be processed with MZmine2. The resulting MZmine2 output files needed for FBMN are provided here. If you have not learned that process yet, refer to this MZmine2 tutorial .","title":"Prerequisites"},{"location":"tutorials/featurebasedgnps/#experimental-setup","text":"We will use a subset of the LC-MS/MS analysis from the American Gut Project . The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 was used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak. There is a dedicated MZmine2 tutorial describing that process.","title":"Experimental Setup"},{"location":"tutorials/featurebasedgnps/#data-availability","text":"The LC-MS/MS data can be found in the MassIVE dataset MSV000082678 .","title":"Data Availability"},{"location":"tutorials/featurebasedgnps/#files-needed-for-tutorial","text":"File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download","title":"Files Needed for Tutorial"},{"location":"tutorials/featurebasedgnps/#demo-gnps-job-of-feature-based-molecular-networking","text":"Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/).","title":"Demo GNPS job of Feature Based Molecular Networking"},{"location":"tutorials/featurebasedgnps/#required-software-installs","text":"FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here Cytocape for network visualization","title":"Required Software Installs"},{"location":"tutorials/featurebasedgnps/#for-step-by-step-tutorial-on-feature-based-molecular-networking","text":"IMPORTANT: Note that the Feature Based Molecular Networking workflow has been slightly updated since the following videos were produced. Please refer to this page for the most recent description of step-by-step MZmine2 processing for the FBMN workflow .","title":"For step-by-step tutorial on Feature Based Molecular Networking"},{"location":"tutorials/featurebasedgnps/#video-tutorial-analyze-feature-based-molecular-networking-in-gnps","text":"","title":"Video Tutorial - Analyze Feature Based Molecular Networking in GNPS"},{"location":"tutorials/featurebasedgnps/#video-tutorial-quick-mzmine2-export-to-gnps-feature-based-molecular-networking","text":"","title":"Video Tutorial - Quick MZMine2 Export to GNPS Feature Based Molecular Networking"}]}