{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"GNPS Introduction","text":""},{"location":"#welcome-to-gnps-documentation","title":"Welcome to GNPS Documentation","text":"<p>Global Natural Products Social Molecular Networking (GNPS, https://gnps.ucsd.edu/) is a web-based mass spectrometry ecosystem that aims to be an open-source and open-access knowledge base for community-wide organization and sharing of raw, processed or identified tandem mass (MS/MS) spectrometry data. GNPS aids in identification and discovery throughout the entire life cycle of data; from initial data acquisition/analysis to post publication.</p> <p>As there are many aspects to GNPS, it can be a bit overwhelming. Here is a quick description of main functionalities:</p>"},{"location":"#analyze-and-annotate","title":"Analyze and Annotate","text":"<ul> <li>Perform molecular networking and spectral library search of LC-MS/MS data utilizing computational tools (See Molecular Networking, Spectral Library Search, etc).</li> <li>Annotate/curate identified MS/MS spectra in open-access GNPS reference spectral libraries.</li> <li>Annotate peptidic natural products in LC-MS/MS data with DEREPLICATOR/VarQuest/DEREPLICATOR+ and RiPPQuest. </li> <li>Propagate in silico annotations in your LC-MS/MS data with Network Annotation Propagation (NAP).</li> <li>NEW! Perform advanced molecular networking and spectral library search with Feature-Based Molecular Networking. See https://doi.org/10.1101/812404.</li> <li>NEW! Analyze GC-MS data with GNPS (See GC-MS deconvolution, and GC-MS library search/molecular networks).</li> <li>NEW! Annotate your LC-MS/MS data with MolNetEnhancer. See https://doi.org/10.1101/654459.</li> <li>NEW! Search spectral Mass2Motifs in your LC-MS/MS data with MS2LDA.</li> <li>NEW! Give LC-MS/MS spectra biological/environmental context by searching against all public LC-MS/MS datasets (MASST Search). See https://doi.org/10.1101/591016.</li> <li>NEW! Find and co- or re-analyze public LC-MS/MS data via systematic sample information at ReDU. See https://doi.org/10.1101/750471.</li> </ul>"},{"location":"#share-and-explore","title":"Share and Explore","text":"<ul> <li>Publish entire study datasets with the Mass Spectrometry Interactive Virtual Environment (MassIVE) data repository (Dataset Submission).</li> <li>Browse and Reanalyze over 1500 public datasets at GNPS</li> <li>Automatic reanalysis of public datasets with automated reports of new identifications (Continuous Identification).</li> <li>Explore identifications of public datasets across entire repository (Molecule Explorer).</li> </ul> <p>For more detailed information, read on in the documentation, checkout the GNPS publication, and view some tutorial videos.</p>"},{"location":"#contribute-to-gnps","title":"Contribute to GNPS","text":"<p>The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute ! See that page for more informations.</p>"},{"location":"#citation","title":"Citation","text":"<p>Recommended Citation</p> <p>Mingxun Wang, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking.\" Nature biotechnology 34, no. 8 (2016): 828. PMID: 27504778</p>"},{"location":"#gnps-and-massive-uptime","title":"GNPS and MassIVE uptime","text":"<p>This is a brief overview of whether our web services are up: here. </p> <p>And a more detailed functional test status page.</p>"},{"location":"#gnps-documentation-site-authors","title":"GNPS Documentation Site Authors","text":"<p>We would like to thank the following contributors to the documentation. </p> <p>However, we want to acknowledge that we have moved documentation in 2018 to GitHub from our previous wiki and those contributions are not reflected in these numbers and were broadly subsumed into Ming Wang's contributions. These first additions to the documentation were invaluable and a few of those pioneers were  Vanessa Phelan, Laura Sanchez, Laura Pace, Alexey Gurevich, and Don D. Nguyen. </p> <p> <ul> <li>Ming Wang (44.3%)</li> <li>lfnothias (16.54%)</li> <li>MelissaESPOSITO (5.15%)</li> <li>Daniel Petras (4.86%)</li> <li>alan-jarmusch (4.11%)</li> <li>Wout Bittremieux (4.05%)</li> <li>liucaomics (2.99%)</li> <li>KyobinKang (2.09%)</li> <li>Ricardo Silva (1.91%)</li> <li>Justin van der Hooft (1.69%)</li> <li>Madeleine Ernst (1.41%)</li> <li>zhz125 (1.04%)</li> <li>irinakoester (0.94%)</li> <li>amcaraballor (0.74%)</li> <li>Deepa Acharya (0.71%)</li> <li>mpanitch (0.64%)</li> <li>tamhdang (0.64%)</li> <li>Ivan Protsyuk (0.63%)</li> <li>Simone Zuffa (0.49%)</li> <li>abauermeister (0.49%)</li> <li>Anupriya Tripathi (0.48%)</li> <li>Shaurya Chanana (0.46%)</li> <li>jgauglitz (0.46%)</li> <li>Simone Zuffa (0.44%)</li> <li>Cynthia Grim (0.39%)</li> <li>j2zemlin (0.36%)</li> <li>Kevin Nguyen (0.29%)</li> <li>Daniel Petras (0.26%)</li> <li>Robin Schmid (0.24%)</li> <li>jorainer (0.18%)</li> <li>helenamrusso (0.16%)</li> <li>Robin Schmid (0.14%)</li> <li>emgentry (0.12%)</li> <li>ka-west (0.12%)</li> <li>Daniel Petras (0.1%)</li> <li>Laura-Isobel McCall (0.09%)</li> <li>Allegra A (0.07%)</li> <li>Sutherland7321 (0.07%)</li> <li>Tiago Leao (0.06%)</li> <li>elnurgar (0.03%)</li> <li>Ricardo (0.02%)</li> <li>acdm2020 (0.02%)</li> <li>Mabel Gonzalez (0.02%)</li> <li>klj0019 (0.01%)</li> </ul>"},{"location":"ReDU/","title":"Welcome to ReDU (Reanalysis of Data User Interface)","text":""},{"location":"ReDU/#full-documentation-link-here","title":"Full Documentation - link here","text":""},{"location":"ReDU/#what-is-redu","title":"\"What is ReDU?\"","text":"<p>Finding and reusing data is hard. ReDU aims to make that easier. ReDU is a community-minded approach to find and reuse public data containing tandem MS data at the repository scale. ReDU is the bridge between the Global Natural Product Social Molecular Networking Analysis Platform (GNPS) and MassIVE, a public data repository for mass spectrometry data. The key to making this work is a systemic way of capturing basic information about each file contributed to ReDU (i.e. sample information aka metadata). Using the sample information, users can select public data for re-analysis in GNPS or provide their own data along with public data to perform co-analysis. Our aim is to empower researchers to put their data in the context of public data as well as explore questions using public data at the repository scale.</p> <p></p> <p>How do I contribute to ReDU?</p> <p>This is a community effort and everyone is encouraged to participate by submitting their own data and sample information instructions. The sharing of new applications (and code) which use ReDU is highly encouraged.</p>"},{"location":"ReDU/#additional-information","title":"Additional Information","text":"<p>Data and Code Availability</p> <ul> <li>All data can be downloaded from MassIVE</li> <li>All sample information can be downloaded from the ReDU-MS2 homepage by clicking \"Download Database\".</li> <li>The ReDU identification database is publicly available and accessible via (GNPS), MSV000084206.</li> <li>Code for ReDU can be found on GitHub - link here</li> </ul> <p>Recommended Citation</p> <ul> <li>Preprint on bioRxiv - Repository-scale Co- and Re-analysis of Tandem Mass Spectrometry Data.</li> <li>Peer-reviewed Publication - pending</li> </ul> <p>Issues and Suggestions</p> <ul> <li>See FAQ - link here</li> <li>Please submit any issues or suggestions via GitHub.</li> <li>The use of the GNPS forum is encouraged.</li> </ul>"},{"location":"ReDU/#page-contributions","title":"Page Contributions","text":"<p>alan-jarmusch</p>"},{"location":"api/","title":"GNPS API Overview","text":""},{"location":"api/#gnps-library-spectra","title":"GNPS Library Spectra","text":""},{"location":"api/#all-public-library-spectra-at-gnps","title":"All Public Library Spectra at GNPS","text":"<p>This gets you all spectra but without peaks. </p> <pre><code>https://external.gnps2.org/gnpslibraryjson\n</code></pre>"},{"location":"api/#all-public-library-name-list-at-gnps","title":"All Public Library Name List at GNPS","text":"<pre><code>https://external.gnps2.org/gnpslibrary.json\n</code></pre> <p>Browse all spectra</p> <pre><code>https://external.gnps2.org/gnpslibrary\n</code></pre> <p>Download as JSON</p> <pre><code>https://external.gnps2.org/gnpslibrary/ALL_GNPS.json\n</code></pre> Example JSON Format <pre><code>[\n{\n\"spectrum_id\": \"CCMSLIB00000579358\",\n\"source_file\": \"Training_001.mgf\",\n\"task\": \"03c206430208430c887ca025ea6c3641\",\n\"scan\": \"1\",\n\"ms_level\": \"2\",\n\"library_membership\": \"CASMI\",\n\"spectrum_status\": \"1\",\n\"peaks_json\": \"[[164.033997,32294.500000],[179.057495,129907.101562]]\",\n\"splash\": \"null-null-null-null\",\n\"submit_user\": \"lfnothias\",\n\"Compound_Name\": \"Theophyllin\",\n\"Ion_Source\": \"LC-ESI\",\n\"Compound_Source\": \"Commercial\",\n\"Instrument\": \"Orbitrap\",\n\"PI\": \"CASMI\",\n\"Data_Collector\": \"CASMI2016\",\n\"Adduct\": \"M-H\",\n\"Scan\": \"-1\",\n\"Precursor_MZ\": \"179.057\",\n\"ExactMass\": \"0.0\",\n\"Charge\": \"1\",\n\"CAS_Number\": \"N/A\",\n\"Pubmed_ID\": \"33919\",\n\"Smiles\": \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\",\n\"INCHI\": \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\",\n\"INCHI_AUX\": \"N/A\",\n\"Library_Class\": \"1\",\n\"SpectrumID\": \"CCMSLIB00000579358\",\n\"Ion_Mode\": \" Negative\",\n\"create_time\": \"2016-05-24 18:27:20.0\",\n\"task_id\": \"03c206430208430c887ca025ea6c3641\",\n\"user_id\": \"null\",\n\"InChIKey_smiles\": \"ZFXYFBGIUFBOJW-UHFFFAOYSA-N\",\n\"InChIKey_inchi\": \"None\",\n\"Formula_smiles\": \"C7H8N4O2\",\n\"Formula_inchi\": \"\",\n\"url\": \"https://gnps.ucsd.edu/ProteoSAFe/gnpslibraryspectrum.jsp?SpectrumID=CCMSLIB00000579358\",\n\"annotation_history\": [\n{\n\"Compound_Name\": \"Theophyllin\",\n\"Ion_Source\": \"LC-ESI\",\n\"Compound_Source\": \"Commercial\",\n\"Instrument\": \"Orbitrap\",\n\"PI\": \"CASMI\",\n\"Data_Collector\": \"CASMI2016\",\n\"Adduct\": \"M-H\",\n\"Scan\": \"-1\",\n\"Precursor_MZ\": \"179.057\",\n\"ExactMass\": \"0.0\",\n\"Charge\": \"1\",\n\"CAS_Number\": \"N/A\",\n\"Pubmed_ID\": \"33919\",\n\"Smiles\": \"CN1C2=C(NC=N2)C(=O)N(C)C1=O\",\n\"INCHI\": \"\\\"InChI=1S/C7H8N4O2/c1-10-5-4(8-3-9-5)6(12)11(2)7(10)13/h3H,1-2H3,(H,8,9)\\\"\",\n\"INCHI_AUX\": \"N/A\",\n\"Library_Class\": \"1\",\n\"SpectrumID\": \"CCMSLIB00000579358\",\n\"Ion_Mode\": \" Negative\",\n\"create_time\": \"2016-05-24 18:27:20.0\",\n\"task_id\": \"03c206430208430c887ca025ea6c3641\",\n\"user_id\": \"lfnothias\"\n}\n]\n}\n]\n</code></pre> <p>As MGF</p> <pre><code>https://external.gnps2.org/gnpslibrary/ALL_GNPS.mgf\n</code></pre> Example MGF Format <pre><code>BEGIN IONS\nPEPMASS=407.186\nCHARGE=1\nMSLEVEL=2\nSOURCE_INSTRUMENT=LC-ESI-qTof\nFILENAME=Plate1_1_20_GG1_01_16488.mzXML\nSEQ=*..*\nIONMODE=Positive\nORGANISM=GNPS-SELLECKCHEM-FDA-PART2\nNAME=Bortezomib (Velcade) [M+Na]\nPI=Dorrestein\nDATACOLLECTOR=Garg_Neha\nSMILES=C1=CN=CC(=N1)C(N[C@H](C(N[C@H](B(O)O)CC(C)C)=O)CC2=CC=CC=C2)=O\nINCHI=N/A\nINCHIAUX=N/A\nPUBMED=N/A\nSUBMITUSER=negarg\nLIBRARYQUALITY=1\nSPECTRUMID=CCMSLIB00000077995\nSCANS=1211\n95.886879   236.0\n131.058121  188.0\n144.823196  204.0\n...\n1402.281494 144.0\nEND IONS\n</code></pre> <p>As MSP</p> <pre><code>https://external.gnps2.org/gnpslibrary/ALL_GNPS.msp\n</code></pre>"},{"location":"api/#all-gnps-spectra-and-structure-as-a-table","title":"All GNPS Spectra and Structure as a Table","text":"<pre><code>https://external.gnps2.org/gnpslibraryfornpatlastsv\n</code></pre>"},{"location":"api/#single-library-spectrum","title":"Single Library Spectrum","text":"<pre><code>https://gnps.ucsd.edu/ProteoSAFe/SpectrumCommentServlet?SpectrumID=&lt;Library Accession&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#experimental-or-library-spectrum-by-usi","title":"Experimental or Library Spectrum by USI","text":"<p>Access a JSON or csv version of a spectrum by any Universal Spectrum Identifier.</p> <pre><code>https://metabolomics-usi.gnps2.org/json/?usi1=&lt;USI HERE&gt;\nhttps://metabolomics-usi.gnps2.org/csv/?usi1=&lt;USI HERE&gt;\n</code></pre> <p>json example for mzspec:GNPS:GNPS-LIBRARY:accession:CCMSLIB00000579622</p> <p>csv example for mzspec:GNPS:GNPS-LIBRARY:accession:CCMSLIB00000579622</p>"},{"location":"api/#gnps-jobs","title":"GNPS Jobs","text":""},{"location":"api/#job-results-api","title":"Job Results API","text":"<p>GNPS job results page in JSON format:</p> <pre><code>https://gnps.ucsd.edu/ProteoSAFe/result_json.jsp?task=&lt;task id&gt;&amp;view=&lt;view name&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#job-status-api","title":"Job Status API","text":"<p>GNPS job status page in JSON format:</p> <pre><code>https://gnps.ucsd.edu/ProteoSAFe/status_json.jsp?task=&lt;task id&gt;\n</code></pre>"},{"location":"api/#job-parameters","title":"Job Parameters","text":"<p>GNPS job parameters page in XML format:</p> <pre><code>https://gnps.ucsd.edu/ProteoSAFe/ManageParameters?task=&lt;task id&gt;\n</code></pre>"},{"location":"api/#structure-conversion","title":"Structure Conversion","text":""},{"location":"api/#conversion-to-smiles","title":"Conversion to Smiles","text":"<pre><code>https://structure.gnps2.org/smiles?inchi=&lt;inchi string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#conversion-to-inchi","title":"Conversion to InChI","text":"<pre><code>https://structure.gnps2.org/inchi?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#conversion-to-inchikey","title":"Conversion to InChIKey","text":"<pre><code>https://structure.gnps2.org/inchikey?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#conversion-to-fingerprint","title":"Conversion to fingerprint","text":"<pre><code>https://structure.gnps2.org/structurefingerprint?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#conversion-to-exact-mass","title":"Conversion to exact mass","text":"<pre><code>https://structure.gnps2.org/structuremass?smiles=&lt;smiles string&gt;\n</code></pre>"},{"location":"api/#compare-to-adduct-mz","title":"Compare to Adduct m/z","text":"<pre><code>https://structure.gnps2.org/adductcalc?smiles=&lt;smiles string&gt;&amp;mz=&lt;experimental mz&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#conversion-to-formula","title":"Conversion to formula","text":"<pre><code>https://structure.gnps2.org/formula?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#structure-classyfire","title":"Structure Classyfire","text":"<p>If you have Smiles</p> <pre><code>https://structure.gnps2.org/classyfire?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p> <p>If you have InChI</p> <pre><code>https://structure.gnps2.org/classyfire?inchi=&lt;InChI string&gt;\n</code></pre> <p>Example</p> <p>If you have InChI Key</p> <pre><code>https://gnps-classyfire.ucsd.edu/entities/&lt;InChI Key&gt;.json\n</code></pre> <p>Example</p> <p>Additionally, in case the inchikey is not classified, you can provide <code>smiles</code> or <code>inchi</code> arguments for  us to push to the Wishart servers to classify. </p> <p>ClassyFire</p> <p>ClassyFire is tool from the Wishart Lab - check it out here. Here is the recommended citation:  Feunang, Yannick Djoumbou, Roman Eisner, Craig Knox, Leonid Chepelev, Janna Hastings, Gareth Owen, Eoin Fahy et al. \"ClassyFire: automated chemical classification with a comprehensive, computable taxonomy.\" Journal of cheminformatics 8, no. 1 (2016): 61.</p>"},{"location":"api/#structure-natural-product-classifier-np-classifier","title":"Structure Natural Product Classifier (NP Classifier)","text":"<p>If you have Smiles</p> <pre><code>https://npclassifier.gnps2.org/classify?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p> Example JSON Output <pre><code>{\n    class_results: [\n        \"Purine alkaloids\"\n    ],\n    superclass_results: [\n        \"Pseudoalkaloids\"\n    ],\n    pathway_results: [\n        \"Alkaloids\"\n    ],\n    isglycoside: false,\n    fp1: [\n        0,\n        0\n        ...\n    ],\n    fp2: [\n        0,\n        0,\n        ...\n    ]\n}\n</code></pre> <p>NPClassifier</p> <p>NPClassifier is A Deep Neural Network-Based Structural Classification Tool for Natural Products - check it out here. For citation: Kim, Hyun Woo, Mingxun Wang, Christopher A. Leber, Louis-F\u00e9lix Nothias, Raphael Reher, Kyo Bin Kang, Justin JJ van der Hooft, Pieter C. Dorrestein, William H. Gerwick, and Garrison W. Cottrell. \"NPClassifier: A deep neural network-based structural classification tool for natural products.\" Journal of Natural Products (2020). https://doi.org/10.1021/acs.jnatprod.1c00399. Checkout the tool index for a large scale workflow for batch classification. </p>"},{"location":"api/#structure-image","title":"Structure Image","text":"<pre><code>https://structure.gnps2.org/structureimg?smiles=&lt;smiles string&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#structure-similarity","title":"Structure Similarity","text":"<pre><code>https://structure.gnps2.org/structuresimilarity?smiles1=&lt;smiles string&gt;&amp;smiles2=&lt;smiles string&gt;\n</code></pre> <p>Example</p> <p>Warning</p> <p>Please make sure you are URL encoding your SMILES/InChI strings or else the web server on the other end won't understand your request. </p>"},{"location":"api/#structure-external-resource-information","title":"Structure External Resource information","text":"<p><pre><code>https://external.gnps2.org/structureproxy?smiles=&lt;smiles string&gt;\n</code></pre> Example - Caffeine</p> <p>Chemical Translation Service</p> <p>This API uses the Chemical Translation Service made by the Fiehn Lab - check it out here. For citation: Gert Wohlgemuth, Pradeep Kumar Haldiya, Egon Willighagen, Tobias Kind, Oliver Fiehn, The Chemical Translation Service\u2014a web-based tool to improve standardization of metabolomic reports, Bioinformatics, Volume 26, Issue 20, 15 October 2010, Pages 2647\u20132648, https://doi.org/10.1093/bioinformatics/btq476.</p> <p>Warning</p> <p>Please make sure you are URL encoding your SMILES/InChI strings or else the web server on the other end won't understand your request. </p>"},{"location":"api/#redu","title":"ReDU","text":""},{"location":"api/#per-file-sample-information-query","title":"Per File Sample Information Query","text":"<pre><code>https://redu.ucsd.edu/filename?query=&lt;File full path in MassIVE&gt;\n</code></pre> <p>Example</p>"},{"location":"api/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (97.08%), lfnothias (0.27%), Robin Schmid (2.65%)</p>"},{"location":"batchupload/","title":"Batch Upload of Annotated Spectra","text":"<p>While there is an interface to upload single spectra, users who wish to batch upload many spectra into the libraries might find adding one spectra at a time cumbersome. Here we provide a method to batch upload many spectra.</p> <p>Here is a quick instructional video we have put together:</p>"},{"location":"batchupload/#materials","title":"Materials","text":"<p>The materials that are required are:</p> <ol> <li>Annotation Spread Sheet (This can be produced below manually by selecting scans in the mass spec data, or automatically generated with the MSMS-Chooser workflow - see documentation)</li> <li>Source mzXML/mzML/mgf mass spectra files to pull MS/MS spectra </li> </ol> <p>ATTENTION: Batch Annotation Workflow should be used to create spectral libraries of 50 spectra or more. Please contact CCMS Team with questions (ccms-web@cs.ucsd.edu)</p>"},{"location":"batchupload/#annotation-spread-sheet","title":"Annotation Spread Sheet","text":"<p>To batch upload, this template must be used:</p> <p>Template Spreadsheet</p> <p>Annotation are to be added one spectrum per line. Columns may not be added, or deleted or changed. Each column must have a value. Refer to the table below for default values to enter when not known.</p> <p>Export from this Excel file as a tab separated text file (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings).</p>"},{"location":"batchupload/#batch-file-annotation","title":"Batch File Annotation","text":"<p>To check the validity of your batch file, check out our batch validator.</p>"},{"location":"batchupload/#field-information","title":"Field Information","text":"<p>The field requirements are the same as on the single spectrum upload form, the other columns can be ignored. FIeld description are listed below.</p> <p>Please note: Only letters, numbers and underscores are allowed in the filenames. Spaces and special characters are NOT allowed.</p> Header Desc. Default Value to Put When Not Known Possible Values Required FILENAME Input Filename (mzXML, mzML, or mgf) REQUIRED only letters, numbers, underscores and periods are allowed Yes SEQ Peptide Sequence *..* Please enter *..* here only No COMPOUND_NAME Compound Common Name REQUIRED Yes MOLECULEMASS Corrected Precursor MZ for Compound 0 Entering 0 means we will attempt to read the mz value from file No INSTRUMENT Mass Analyzer Instrument REQUIRED qTof, QQQ, Ion Trap, Hybrid FT, Orbitrap, ToF Yes IONSOURCE Source of Ions REQUIRED LC-ESI, DI-ESI, EI, APCI, ESI Yes EXTRACTSCAN Spectrum Scan of Spectrum REQUIRED Yes SMILES Smiles Structure N/A No INCHI Inchi Structure N/A No INCHIAUX Inchi Auxiliary Structure N/A No CHARGE Charge of Precursor (0 to pull from the spectrum file) 0 No IONMODE Ionization Mode (Positive/Negative) Positive Positive, Negative Yes PUBMED Pubmed ID where compound or data was published N/A No ACQUISITION Sample source of compound Crude Crude, Lysate, Commercial, Isolated, Other Yes EXACTMASS Compound Exact Mass 0 No DATACOLLECTOR Individual collecting data REQUIRED Yes ADDUCT Adduct of Ion Fragmented in MS2 (M+H, M+2H, etc.) REQUIRED Yes INTEREST N/A N/A No LIBQUALITY Quality of Library (1 for Gold, 2 for Silver, 3 for Bronze) 3 1,2,3 Yes GENUS Genus N/A No SPECIES Species N/A No STRAIN Strain N/A No CASNUMBER Chemical Abstracts Service compound identification number N/A No PI PI overseeing compound acquisition and analysis Required Yes <p>It must be noted that filenames must match exactly to those users are uploading. Filenames must also be unique, and can only contain numbers, letters, hyphens, underscores, and periods. All fields for each row must have some content -- blank fields are unacceptable. Fields other than filename also cannot contain return carriages or tabs.</p>"},{"location":"batchupload/#spectrum-upload","title":"Spectrum Upload","text":"<p>Users will need to upload their files into GNPS. To do this please refer to the upload documentation here.</p>"},{"location":"batchupload/#creationpublication-of-spectral-library","title":"Creation/Publication of Spectral Library","text":"<p>To actually add the spectra to the libraries, users will</p> <ol> <li>Export excel file as a tab separated text file and upload to GNPS (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings)</li> <li>Launch Batch Validator Workflow with all spectrum files and annotation table found here. NOTE: Creating spectral libraries from MGF files is discouragedas it is not a well defined format. If you do insist, you must make sure each MGF start from scan 1 (e.g. SCANS=1 in the file) and are incremented sequentially without any missing scan numbers. </li> <li>Users will then need to contact Jasmine (ccms-web@cs.ucsd.edu) and send her the completed job from above.</li> <li>A private spectral library will then be created by Jasmine. </li> <li>After the contributor may review the library to be made into a public library and will be made public after approval. </li> </ol>"},{"location":"batchupload/#license","title":"License","text":"<p>All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license.</p> <p>Third party libraries imported may not conform to the CC BY license and should be verified by users. </p>"},{"location":"batchupload/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (39.33%), mpanitch (59.55%), klj0019 (1.12%)</p>"},{"location":"batchuploadmzvault/","title":"Reference Spectral Library mzVault Addition","text":"<p>This page highlights how you can export from a Thermo mzVault spectral library and import it into GNPS</p>"},{"location":"batchuploadmzvault/#exporting-mzvault-libraries-to-the-msp-format-for-import-into-gnps","title":"Exporting mzVault libraries to the .msp format for import into GNPS","text":"<p>Versions and compatibilities</p> <p>mzVault 2.3 (Thermo Fisher Scientific), compatible with TraceFinder 5.0/5.1+ and Compound Discoverer 3.0/3.2+ (March 2021)</p>"},{"location":"batchuploadmzvault/#exporting-libraries-in-mzvault-to-the-msp-format","title":"Exporting libraries in mzVault to the .msp format","text":"<ul> <li>Go to the \u2018Browse\u2019 tab and click \u2018Open\u2019.</li> <li>Select the correct .db file (.db is the default format of spectral libraries built in mzVault) </li> </ul> <ul> <li>Go to the \u2018Build\u2019 tab and click \u2018Export\u2019.</li> </ul> <ul> <li>Export to the .msp format</li> </ul> <p>Inspect the .msp file in a text editor program (e.g Notepad++, TextEdit, BBEdit)</p> <p><pre><code>MS:1009003|Name = TYRAMINE\nMS:1009001|Spectrum index = 1\nMS:1000894|RetentionTime = 2,04000\nMS:1000864|Formula = C8H11NO\nMS:1002894|InChiKey = DZGWFCGJZKJUFP-UHFFFAOYSA-N\nMS:1009100|CASNo = 51-67-2\nMS:1000868|Smiles = NCCC1=CC=C(O)C=C1\nMS:1009101|CompoundClass = 5610\nMS:1000744|Selected Ion m/z = 138,09134\nMS:1000045|Collision_energy = 20.0\nPrecursor_type = M+H\nMS:1000073|Electrosprary ionization\nMS:1000130|Positive scan\nMS:1009006|number of peaks = 183\n50,1005 71,18\n50,2260 52,07\n</code></pre> NOTE: that you cannot choose which fields are exported. If you wish you can add information of your choice to the predefined fields. E.g. here we added information on \u2018Adduct\u2019 and \u2018PubChemID\u2019 to the \u2018Precursor_type\u2019 and \u2018CompoundClass\u2019 fields respectively. During inspection of the .msp file in a text editor program, you can manually replace the field names to ensure clarity in the final .msp file.</p>"},{"location":"batchuploadmzvault/#edit-libraries-through-sqlite-studio","title":"Edit libraries through SQLite Studio","text":"<ul> <li>If you wish you can edit your .msp library in SQLite Studio (free, open-source software, downloadable here) and:<ul> <li>Export compound or spectra tables in various formats</li> <li>Copy a table into a spreadsheet</li> <li>Paste lists of values into the database</li> <li>Access hidden fields such as \u2018percursor type\u2019 in the spectra table (useful since it\u2019s exported in the .msp files).</li> </ul> </li> <li>You need to click the green \u2018Commit\u2019 button to commit and validate your changes, which will then be visible in mzVault when you open the file again.</li> </ul>"},{"location":"batchuploadmzvault/#page-contributors","title":"Page Contributors","text":"<p>Anna Abrahamsson, Julie Courraud, Madeleine Ernst</p>"},{"location":"browselibraries/","title":"Browsing Reference Spectral Libraries","text":""},{"location":"browselibraries/#gnps-community-spectral-libraries","title":"GNPS Community Spectral Libraries","text":"<p>The GNPS public spectral libraries can be browsed, explored, and downloaded. The list of all public spectral libraries is listed here. The most up to date libraries can be downloaded here in mgf, msp, or json format, also providing aggregated libraries with all reference entries with or without propagated library spectra. </p>"},{"location":"browselibraries/#gnps-community-library","title":"GNPS Community Library","text":"<p>There are several spectral libraries available at GNPS. They are either imported from the community (e.g. Massbank ), provided directly to GNPS as a large collection of annotated spectra (e.g. Pesticide Library ), or aggregated from single MS/MS additions from the entire community (e.g. GNPS-Community ).</p> <p>Clicking on a library brings users to a list of all MS/MS spectra that are in that library. The most up to date annotation is listed.</p>"},{"location":"browselibraries/#most-recent-contributions","title":"Most Recent Contributions","text":"<p>At the bottom of the list of all spectral library, the most recent contributions of annotation library spectra are listed in reverse chronological order. These generous contributions from members of the community are just the latest amongst the thousands of MS/MS spectra deposited at GNPS.</p>"},{"location":"browselibraries/#library-spectrum-list","title":"Library Spectrum List","text":"<p>Users will be presented with a list of all spectra in the library. Each line represents a different entry in the library and displays the most recent annotation for that particular spectrum.</p> <p></p> <p>Users are able to download the update to date version of each particular library by clicking the download icon next to the library header.</p>"},{"location":"browselibraries/#individual-spectrum-view","title":"Individual Spectrum View","text":"<p>Users will be presented with a spectrum page that includes at the top an interactive spectrum viewer as well as the most recent spectrum information.</p> <p></p>"},{"location":"browselibraries/#updating-spectrum-annotation","title":"Updating Spectrum Annotation","text":"<p>In the event that annotations are incomplete or incorrect, users have the option to correct/update annotations of the library spectra. On each library spectrum page there is an update button to update the annotation.</p> <p></p>"},{"location":"browselibraries/#spectrum-annotation-history","title":"Spectrum Annotation History","text":"<p>Revision history of the spectrum. Sorted in reverse chronological order, with most recent revisions first. To comment on a specific revision of the annotations, users can click the comment button for each annotation row. To view comments on each annotation, users can click the double down arrow at the left of the row.</p> <p></p>"},{"location":"browselibraries/#using-spectral-libraries-in-gnps-analysis","title":"Using Spectral Libraries in GNPS Analysis","text":"<p>The default spectral libraries are located in the speclibs folder in GNPS. </p> <p>Additionally, separate libraries that are not selected by default are located for example:</p> <pre><code>CCMS_SpectralLibraries/GNPS_Propogated_Libraries\n</code></pre> <p></p> <p>These are propagated spectral libraries that inherently are less confident but this provides an avenue to give more identifications.</p>"},{"location":"browselibraries/#nearest-neighbor-suspect-spectral-library","title":"Nearest neighbor suspect spectral library","text":"<p>The nearest neighbor suspect spectral library is a propagated spectral library that has been compiled in a data-driven fashion from molecular networking of hundreds of millions of public MS/MS spectra. Rather than by measuring standards with known molecular identities, entries in the suspect library are related to a known compound with a specific modification, characterized by the precursor mass difference, to provide structural hypotheses.</p> <p>Follow these steps to include the nearest neighbor suspect spectral library to your GNPS analyses:</p> <ol> <li>Browse to the \"GNPS-SUSPECTLIST\" folder in the file selector.</li> <li>Click on \"Library Files\" to add the nearest neighbor suspect spectral library.</li> <li>Verify that the library now appears in the \"Selected Library Files\" category in the selection panel.</li> </ol> <p></p>"},{"location":"browselibraries/#license","title":"License","text":"<p>All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license.</p> <p>Third party libraries imported may not conform to the CC BY license and should be verified by users. </p>"},{"location":"browselibraries/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (80.0%), Wout Bittremieux (17.33%), Robin Schmid (2.67%)</p>"},{"location":"changelog/","title":"Change Log","text":""},{"location":"changelog/#change-log-of-gnps-documentation","title":"Change Log of GNPS Documentation","text":"<p>All new updates will be posted on the GNPS Github Page!</p>"},{"location":"changelog/#10202019","title":"10/20/2019","text":"<ul> <li>Major documentation update for the Feature-Based Molecular Networking (FBMN).</li> <li>FBMN supports the mzTab-M format, and Progenesis QI. </li> <li>FBMN provide now supports LC-MS/MS data acquired in MSE mode (MS-DIAL and Progenesis QI) or with Ion Mobility Spectrometry (MS-DIAL, Progenesis QI, and MetaboScape).</li> </ul>"},{"location":"changelog/#532019","title":"5/3/2019","text":"<ul> <li>GNPS Workflow Release 3</li> </ul>"},{"location":"changelog/#482019","title":"4/8/2019","text":"<ul> <li>Update documentation for DEREPLICATOR tools.</li> <li>Update the index.md.</li> </ul>"},{"location":"changelog/#452019","title":"4/5/2019","text":"<ul> <li>New documentation for Feature-Based Molecular Networking (FBMN).</li> <li>New tools available with the FBMN OpenMS, MS-DIAL, XCMS, and MetaboScape.</li> </ul>"},{"location":"changelog/#392019","title":"3/9/2019","text":"<ul> <li>Adding qiime2 qza and emperor output for Feature Based Molecular Networking</li> <li>Adding GraphML output for MS2LDA</li> <li>GNPS Quickstart will do only the fly conversion of Thermo raw files.</li> </ul>"},{"location":"changelog/#252019","title":"2/5/2019","text":"<ul> <li>Adding credentials option for GNPS quickstart for classic molecular Networking</li> <li>Adding link to clone deprecated molecular networking to latest version of molecular networking</li> <li>Adding direct re-analysis link for MS2LDA from molecular networking</li> <li>Bug fixes for MS2LDA</li> <li>Adding batch spectra additional validator</li> </ul>"},{"location":"changelog/#12272018","title":"12/27/2018","text":"<ul> <li>GNPS quickstart support within MZMine2 updated</li> </ul>"},{"location":"changelog/#1112018","title":"11/1/2018","text":"<ul> <li>Added UniqueFileCount to GraphML in Classic Molecular Networking</li> <li>Added GNPS Cluster Linkouts and GNPS Network Visualizer linkouts to GraphML in Classic Molecular Networking</li> </ul>"},{"location":"changelog/#10282018","title":"10/28/2018","text":"<ul> <li>Feature based molecular networking is supported in the superquick start page</li> <li>Feature based molecular networking now supports MZMine2, OpenMS, Optimus, MS-DIAL, Metaboscape, and XCMS3 feature finding tools</li> </ul>"},{"location":"changelog/#10262018","title":"10/26/2018","text":"<ul> <li>Adding UniqueFileSource attribute to GNPS Molecular Networking V2 Workflow (METABOLOMICS-SNETS-V2)</li> </ul>"},{"location":"changelog/#952018","title":"9/5/2018","text":"<ul> <li>Mirror plots include mz labels</li> <li>MASST supports dataset metadata display</li> </ul>"},{"location":"changelog/#812018","title":"8/1/2018","text":"<ul> <li>New Documentation and Splash Page are available</li> <li>Bug Fixes for Library Search to provide 10X increase in throughput for large datasets</li> <li>MASST is available to report MS/MS spectrum occurrences at a single file level with metadata reported if available</li> </ul>"},{"location":"changelog/#6272018","title":"6/27/2018","text":"<ul> <li>Updating documentation</li> </ul>"},{"location":"changelog/#612018","title":"6/1/2018","text":"<ul> <li>New documentation website.</li> <li>Beta version of Molecular Networking provides stream lined results and cytoscape compliant output.</li> </ul>"},{"location":"chemdir/","title":"Chemical Directionality","text":""},{"location":"chemdir/#chemical-proportionality-chemprop","title":"Chemical Proportionality (ChemProp)","text":"<p>The Chemical Proportionality (ChemProp) concept (Previously called ChemDir) applied here is defined by relative abundance changes between two neighbouring nodes within a molecular network. By taking advantage of the feature-based molecular network workflow (FBMN), we used the raw peak area across the longitudinal (or spatial) data series as a measure of the abundance for each detected feature among events. ChemProp facilitates the prioritisation of putative transformations in tandem mass spectrometry (MS/MS) data using the Global Natural Products Social Molecular Network (GNPS) environment.</p> <p>You can checkout the tool on GNPS. </p> <p>FBMN Version Compatibility</p> <p>We require a FBMN that is release_18 or newer. If your job is older than that, simply clone to latest to get the latest version and it should be compatible with ChemProp</p> <p>Workflow  Make sure you select the ChemProp workflow </p> <p></p> <p>Title  Name your job to be easily recognize by yourself as it will be available in your jobs tab</p> <p></p> <p>Enter GNPS Network Task ID (Required) Copy and paste the FBMN task ID from your previous FBMN  job</p> <p></p> <p>METADATA_COLUMN Define a metadata column header based on the exact metadata table provided for the FBMN job ID you are using in this ChemProp workflow</p> <p></p> <p>TIME_SERIES Provide the variables that you are interested in based on your longitudinal analysis. Example: 0,1,2,3; comma separated values, can be integers or strings; no spaces between variables. The variables provided here must match entries from the metadata column specified in METADATA_COLUMN.</p> <p></p> <p>MIN_AREA_THRESHOLD  Min peak area; defined during feature finding; job specific. The value used here will replace any 0 value from your dataset for ChemProp.</p> <p></p> <p>METADATA_FILTER_COLUMN It is possible to filter the dataset based on the columns of interest. </p> <p></p> <p>METADATA_FILTER_TERM It is possible to filter the column used from your dataset based on the specific term of interest for the analysis.</p> <p></p> <p>Job status Once your job is finished, you will be able to explore the results.</p> <p></p> <p>Summary table This table provides the general overview of every pair node compared via ChemProp.  </p> <p></p> <p>Direct Cytoscape preview This enables you to directly download and explore the data in Cytoscape.</p> <p></p> <p>ChemProp dashboard This enables you to quickly explore the maximum ChemProp scores and their correspondent DeltaMZ observed from your dataset.</p> <p></p>"},{"location":"chemdir/#development","title":"Development","text":"<p>Source code There are two portions of the ChemProp infrastructure: ChemDir GNPS/ProteoSAFe workflow and the ChemDir Results Exploration Dashboard. </p>"},{"location":"chemdir/#citation","title":"Citation","text":"<p>To be updated</p>"},{"location":"chemdir/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (8.86%), Daniel Petras (12.66%), amcaraballor (77.22%), Laura-Isobel McCall (1.27%)</p>"},{"location":"contact/","title":"Contact/Office Hours","text":""},{"location":"contact/#gnps-workflow-contact-information","title":"GNPS Workflow Contact information","text":"<p>Please see contact information here.</p>"},{"location":"contact/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"continuousid/","title":"Continuous Identification","text":""},{"location":"continuousid/#continuous-identification","title":"Continuous Identification","text":"<p>GNPS' continuous identification aims to bring datasets to life. Traditionally, after manuscript publication, mass spectrometry datasets remain static and are never heard from again, silo'd in data cemeteries. GNPS' approach is different, we aim to</p> <ol> <li>Automatically make new discoveries within each dataset</li> <li>Aid future analyses by putting new data in the context of all previously existing datasets</li> </ol> <p>GNPS achieves the first goal by periodically reanalyzing each and every public dataset. With ever expanding reference spectral libraries, GNPS makes new identifications within datasets in an automatic fashion, recording this growth in identifications, and reports it back to the community.</p> <p>GNPS achieves the second goal by enabling users to \"BLAST\" MS/MS spectra against the entire GNPS set of datasets (see MASST Search).</p>"},{"location":"continuousid/#exploring-current-continuous-identifications","title":"Exploring Current Continuous Identifications","text":"<p>On each dataset page (See datasets) the list of all continuous identifcations is listed under the \"Continuous Identification\" section. This list of all analyses shows the growth of identifications over time as well as how the identifications changed over time. For example, the 3D molecular skin cartography dataset (See MSV000078556) grew from 94 (April 9, 2014) identifications in the initial continuous identification to 860 (June 1, 2018).</p>"},{"location":"continuousid/#dataset-subscriptions","title":"Dataset Subscriptions","text":"<p>Whenever new identifications are made in a dataset, subscribers are automatically notified via email. To be subscribed to a dataset of interest, click the subscribe button on the dataset page:</p> <p></p>"},{"location":"continuousid/#continuous-identification-ratings","title":"Continuous Identification Ratings","text":"<p>Help us improve Continuous Identification by rating the matches returned on the \"All Identifications Page\". For each identification made, please rate each match according to the following rubric</p> Rating Description 4 stars correct match as context is right (i.e., molecule is known/expected to be in the sample) 3 stars compound class match \u2013 at least part of the structure makes sense to match 2 stars cannot tell \u2013 might be correct from the spectrum match and context but there is not enough information to tell 1 star incorrect: molecule does not make sense in this context <p>Users will be able to both add their own rating, add a comment for their given rating, as well as view the average rating of the identification.</p> <p></p>"},{"location":"continuousid/#continuous-id-subscription-email","title":"Continuous ID Subscription Email","text":"<p>This example continuous identification email informs subscribers that the dataset of interest has more IDs in the most recent round of continuous identifications. It will first list the title of the dataset, then the changes in identification counts, and finally direct links to explore the data. Users can go directly to the search results and view the new, different, and deleted identifications as well as go straight to the dataset page itself.</p> <p></p>"},{"location":"continuousid/#download-living-data","title":"Download Living Data","text":"<p>This dataset: MSV000084314 includes molecular networks, clustering, and library identifications. </p>"},{"location":"continuousid/#organization-of-the-ftp-repository","title":"Organization of the FTP Repository","text":"<p>They are organized respectively in 4 folders: </p> <ol> <li>CLUSTERSUMMARY - Represents the clusters for each dataset and the associated metadata (e.g. mz, rt, and number of MS2 spectra)</li> <li>CLUSTERINFO - Represents the clustering enabling tracing back from the clusters to the original files and scans they came from MGF - Clustered MS/MS spectra represented as an MGF file - scan numbers correspond to cluster index in </li> <li>CLUSTERSUMMARY PAIRS - Molecular Networking alignment pairs representing spectral similarity</li> <li>IDENTIFICATIONS - Spectral library identifications reported by living data/continuous id to the latest GNPS spectral libraries (scan numbers also correspond to cluster index)</li> </ol>"},{"location":"continuousid/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (89.83%), Tiago Leao (10.17%)</p>"},{"location":"cytoscape/","title":"Network Visualization in Cytoscape","text":"<p>While we do provide in-browser visualization for networks, these are limited to a single component at a time. Using Cytoscape, we can start visualizing the entire molecular network at once.</p> <p>Cytoscape is an open source software platform for visualization and annotation of networks. Cytoscape is available for download from here. The instructions below assume that you have installed Cytoscape 3.6.X.</p>"},{"location":"cytoscape/#cytoscape-36-analysis-quick","title":"Cytoscape 3.6 Analysis (Quick)","text":"<p>To quickly get started with your molecular network in Cytoscape, we have an easy export module from GNPS that previews the molecular network and provides a pre-formatted Cytoscape file. This feature is very much experimental, but from the status page, click the \"Direct Cytoscape Preview/Download\"</p> <p></p> <p>This will bring you to a new interface where you will see a preview and a download link.</p> <p></p> <p>To re-style it with our presets, at the bottom we have a few styles already populated. </p> <p></p> <p>Contributing Alternative Styles</p> <p>If you would like to suggest a new style, please send us a .cys file and the name of the style you have created within the Cytoscape file for us to add. </p>"},{"location":"cytoscape/#cytoscape-36-analysis-recommended","title":"Cytoscape 3.6 Analysis (Recommended)","text":""},{"location":"cytoscape/#downloading-cytoscape-import-files","title":"Downloading Cytoscape Import Files","text":"<p>The first step is to download the correct input to import into Cytoscape. From the results page of molecular networking, you will need to download the graphML file for Cytoscape.</p> <p></p> <p>Unzip the content of the zip file. The content will look like this:</p> <p></p>"},{"location":"cytoscape/#importing-network-into-cytoscape","title":"Importing Network into Cytoscape","text":"<p>Now open Cytoscape 3.6.1. From the Toolbar go to File / Import / Network / File (or cmd + L) and then select the .graphml file in the root of the unzipped job folder.</p> <p></p> <p>The network has been opened and will look like this.</p> <p></p>"},{"location":"cytoscape/#creating-a-cytoscape-style","title":"Creating a Cytoscape Style","text":"<p>In Cytoscape 3.6.1, create a new Cytoscape style. As shown below, click on \"Create New Style\" and provide a name.</p> <p></p>"},{"location":"cytoscape/#node-styling","title":"Node Styling","text":""},{"location":"cytoscape/#node-label-to-spectrum-property","title":"Node Label to Spectrum Property","text":"<p>Within the Node menu, you will be able to apply a label to each of your nodes, you may select the Attribute from the drop down menu to use as a label and then select Passthrough Mapping as the Mapping Type. Typically Parent mass or Precursor mass is selected for node labels of networks generated using GNPS.</p> <p></p>"},{"location":"cytoscape/#visualizing-group-abundances-as-pie-charts","title":"Visualizing Group Abundances as Pie Charts","text":"<p>If you organized your data into cohorts of samples, we can visualize the relative abundance (as measured by spectral counts which is psuedo-quantitative) with pie charts across these groups.</p> <p></p>"},{"location":"cytoscape/#visualizing-structures","title":"Visualizing Structures","text":"<p>The Cytoscape plugin ChemViz2 can visualize the chemical structure of GNPS spectral library annotation in the nodes. The ChemViz2 plugin can be be installed in the toolbar Apps /Apps manager / and type \"ChemViz2\" to find and install it.</p> <p>To visualize chemical structures, select the nodes of interest and do right-click, Apps / Cheminformatics tools / Paint structure on selected nodes.</p> <p></p> <p>Also check out their website.</p>"},{"location":"cytoscape/#edge-styling","title":"Edge Styling","text":""},{"location":"cytoscape/#edge-thickness-based-on-spectral-similarity","title":"Edge Thickness based on Spectral Similarity","text":"<p>To aid in the visualization of individual node relatedness within a cluster, the cosine score is used. This value will determine the thickness of the edge between related nodes. The thicker the edge, the higher the cosine score and therefore the more related the two individual nodes are to each other.</p> <p>Again working within the Style Tab, select the Edge menu. From the Width drop down menu, select Cosine for the Column and Continuous Mapping for the Mapping Type.</p> <p></p> <p>Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes.</p> <p></p> <p>Below is a zoomed in portion of a network demonstrating the use of Cosine score for edge width determination.</p> <p></p>"},{"location":"cytoscape/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"dashboard_use_cases/","title":"GNPS Dashboard Use Cases","text":""},{"location":"dashboard_use_cases/#use-case-1-mass-spectrometry-data-visualization-and-linking-to-molecular-networking","title":"Use Case 1: Mass spectrometry data visualization and linking to molecular networking","text":"<p>Daniel Petras PhD - Post-Doctoral Scholar - Analytical Chemistry and Chemical Ecology</p> <p>E. coli Nissle is broadly used as a probiotic and the producer of a series of secondary metabolites including the DNA damaging cytotoxins colibactin and siderophores yersiniabactin. In the context of searching for novel zinc uptake mechanisms, we screened Nissle wildtype and yersiniabactin NRPS knock-out mutants culture extract for yersiniabactin production (Zhi et al. 2020).</p> <p>The molecular network of MS/MS data and MS1 XICs from the extracts are shown in SI Figure 2. Panel a shows the molecular network of yersiniabactins including a series of derivatives around the main compound (m/z 482.124) which are produced by the wildtype but not the NRPS KO mutant according to the network pie charts that visualize MS/MS spectral counts (red = WT, blue = KO). Upon inspection of the extracted ion chromatogram of the m/z 482.124, which is available as a direct link out in the molecular networking results, we could see the abundance difference is evident on the MS1 level in the XIC and the box-plot in panel b. Upon inspection of the XIC and corresponding MS/MS spectra of m/z 482.124, it became apparent that yersiniabactin is present as chromatographically separated isomers, most likely diastereomers with identical MS/MS spectra. Hence classical molecular networking (panel a) that makes use of MS/MS clustering, collapses the spectra to one node (Wang et al. 2016). In order to resolve the chromatographically separated features, we reanalyzed the data via feature-based molecular networking using MZmine and GNPS (Nothias et al. 2020), shown in panel c. In the FBMN results, the two yersiniabactin isomers (m/z 482.124) remain as individual nodes in the network. In summary, this is an example of the benefit of direct XIC inspection of classic molecular networking results to verify quantitative results based on MS1 level as well as control of chromatographic peak shape and eventual artifacts such as split peaks or collapsed MS/MS spectra from isomers.</p> <p>Classic molecular Networking link</p> <p>GNPS Dashboard for Yersiniabactin link</p> <p>Feature-based molecular networking link</p> <p></p> <p>Supplemental Figure 2: Mass spectrometry data visualization and linking to molecular networks from yersiniabactin from E. coli nissle extracts. Panel a shows the MS/MS molecular networking results from an E. coli nissle wild type and NRPS knock-out strain, indicating the presence of yersiniabactin (m/z 482.124) and its derivatives only in the wild type. Panel b shows the XIC visualization and peak area difference between the WT and KO group as box-plot through the GNPS Dashboard. Panel c shows the feature-based molecular networking results from the same data in which the yersiniabactin isomers (m/z 482.124) are maintained as individual nodes.</p>"},{"location":"dashboard_use_cases/#use-case-2-quick-data-analysis-of-ms1-single-quad-data","title":"Use Case 2: Quick data analysis of MS1 single quad data","text":"<p>Dale A. Cummings Jr - PhD Student - Biological Chemistry</p> <p>Aaron W. Puri PhD - Assistant Professor - Biological Chemistry</p> <p>While many labs now have access to tandem mass spectrometers and can therefore acquire data for MS2-based molecular networking, routine analysis is often still performed on unit resolution MS1 mass analyzers, such as single quadrupoles. However, proprietary software often makes it difficult to rapidly analyze and share these types of data. To address this we have added functionality for analyzing MS1 spectra in the GNPS Dashboard specifically in netCDF format, which is commonly used by single quadrupole LC-MS systems.</p> <p>As an example use case, we analyzed the metabolome of the methylotrophic organism Methylorubrum extorquens PA1 (PA1) using an Agilent 6120 single quadrupole LC-MS. Methylotrophs have previously been reported to biosynthesize different natural products when grown on single versus multicarbon substrates (Nieto et al. 2006, Ueoka et al. 2018). We grew PA1 in minimal media containing either methanol or succinate as the sole source of carbon and energy, and subsequently extracted the supernatant with acidified ethyl acetate. We then analyzed this extract by LC-MS and examined the results using the GNPS Dashboard.</p> <p>One difference in the metabolome under these two growth conditions appears to be the production of quorum sensing signals. PA1 possesses a single LuxI-family acyl-homoserine lactone (acyl-HSL) synthase with 100% amino acid identity to MlaI (Nieto et al. 2006). In the closely related strain Methylorubrum extorquens AM1 (AM1), Vorholt and coworkers demonstrated that MlaI produces the long-chain quorum-sensing signals 7_Z_-C14-HSL and 2_E_,7_Z_-C14-HSL when grown on methanol but not succinate (Ueoka et al. 2018). We used the GNPS Dashboard to generate XICs for the protonated masses of these signals (m/z 308.1 for 2_E_,7_Z_-C14-HSL, and m/z 310.1 for 7_Z_-C14-HSL) (Figure S2a). These masses are apparent at retention times of 25.9 minutes for m/z 308 and 26.3 minutes for m/z 310 in the methanol-grown culture, but not in the succinate culture, which can be quantified by comparing the automatically generated peak integrations in the two conditions (Figure S2b). These features therefore likely correspond to quorum-sensing signals 7Z-C14-HSL and 2E,7Z-HSL, and demonstrate how the GNPS Dashboard can be used to rapidly analyze MS1 data.</p> <p>GNPS Dashboard link.</p> <p></p> <p>Supplemental Figure 3: Quick data analysis of MS1 single quad data</p> <p>Identification of differences in the extracellular metabolomes of the methylotrophic bacterium_Methylorubrum extorquens_ PA1 (PA1) grown on different carbon and energy sources. (a) XICs for protonated masses corresponding to quorum-sensing signals produced by PA1. (b) Box plots of integrated peak areas for the same XICs from a retention time window of 25-27 minutes. Data are from three separate cultures for each growth condition.</p>"},{"location":"dashboard_use_cases/#use-case-3-collaborative-exploration-of-lc-ms-data","title":"Use Case 3: Collaborative Exploration of LC-MS Data","text":"<p>Mingxun Wang PhD - Post-Doctoral Scholar - Computer Science and Bioinformatics</p> <p>Daniel Petras PhD - Post-Doctoral Scholar - Analytical Chemistry and Chemical Ecology</p> <p>The exploration of non-targeted mass spectrometry is often a long and collaborative process, e.g. between collaborating researchers or between mentors and mentees. In many instances, it is difficult to collaboratively explore and share results when it is impractical or impossible to physically sit together, for example during a global pandemic. With the GNPS Dashboard, it is possible to share exactly the settings and visualization that a researcher is seeing on their own screen either by our collaborative sync feature or by simply copying and pasting a url. This sharing ability enables others to build upon this visualization and reshare to collaboratively enhance and dive deeper into the data, whether in joint data analysis sessions with collaborators, reports, or peer-reviewed publications. One particular example and collaborative visualization dialog can be seen below with quality control (QC) sample of a mixture of 6 standard compounds ( SI Figure 4 ):</p> <p>Researcher A starts by initial data loading of the QC data- link.</p> <p>Next, Researcher B has the information of exact masses and adds XIC for the 6 standard compound used (m/z 271.0315; 278.1902; 279.0909; 285.0205; 311.0805; 314.1381) - link.</p> <p>To verify the ID of one of the standards through its isotope pattern, Researcher A then visualizes of MS1 spectrum for the m/z 314.1381 standard - link.</p> <p>Finally, Researcher B inspects co-eluting features by zooming in on 2D LC-MS heatmap for elution of the m/z 314.1381 standard - link.</p> <p>The final url can then be shared with others in the team and used to protocol the instrument performance for this particular experiment.</p> <p></p> <p>Supplemental Figure 4: In panel a we see an example communication between two users to collaboratively analyze a mass spectrometry sample. This communication can be done purely remotely by sharing URLs or the synchronization feature in GNPS Dashboard. In panel b we can see how the discrete steps line up with updating different parts of the dashboard as the analysis progresses.</p>"},{"location":"dashboard_use_cases/#use-case-4-inspection-and-validation-of-published-results-based-upon-public-data-sharinginspection","title":"Use Case 4: Inspection and validation of published results based upon public data sharing/inspection","text":"<p>Mingxun Wang PhD - Post-Doctoral Scholar - Computer Science and Bioinformatics</p> <p>Daniel Petras PhD - Post-Doctoral Scholar - Analytical Chemistry and Chemical Ecology</p> <p>Data transparency and verification of software-derived results have become key aspects in recent years in proteomics and metabolomics publications thanks to policy and cultural shifts within these fields. It has even become the standard for many scientific communities where publishers require data sharing for papers to be accepted for publication. While there are differences in guidelines with regards to data content (e.g. raw and processed data), as well as accepted repositories (e.g. ProteoXchange (Vizca\u00edno et al. 2014) initiative or Nature Publishing Group guidelines), there still exist multiple barriers for reviewers and readers of scientific articles to make use of the shared data for inspection or reproduction of the published results.</p> <p>The GNPS Dashboard in combination with the GNPS Dataset Explorer enables direct visualization of public data from the most common mass spec data repositories (PRIDE (Perez-Riverol et al. 2018), MassIVE (Wang et al. 2018) /GNPS (Wang et al. 2016), MetaboLights (Haug et al. 2020), Metabolomics Workbench (Sud et al. 2016)) in a vendor-independent fashion. The GNPS Dashboard removes the need to install software and to download MS data locally and enables inspection of and reproduction of peak visualization and integration as well as downstream data analysis in the GNPS environment within a few clicks in the web browser.</p> <p>Between October 2020 and January 2021, we inspected 10 LC-MS datasets from peer-reviewed articles as well as preprints in the fields of natural product research, metabolomics, and proteomics that were shared through the social media platform Twitter, which is quickly becoming a fundamental part of scientific literature sharing and discussions. In all cases, we inspected the raw MS/MS data using the GNPS Dashboard and created extracted ion chromatograms (XIC) for the masses of the main compounds discussed in the manuscripts. Depending on the experimental design of each study we also reproduced simple quantitative analysis by integrating the XICs and comparing the peak areas of the experimental groups as box plots directly in the GNPS Dashboard. Upon positive validation, we provided direct feedback through the comment and retweet function in the social media platform, including confirmation of the presence of described masses, MS/MS matching, and quantitative differences between sample groups ( SI Figure 5 ), as well as comparison to other public data through repository scale analysis ( SI Figure 6 ), and recommendations for additional data analysis options such as molecular networking in the case of one of the preprints ( SI Figure 7 ).</p> <p>Example Tweets List</p> <ol> <li>Tweet- Dashboard - Comparative Metabologenomics Analysis of Polar Actinomycetes</li> <li>Tweet - Dashboard- Exploring the Chemical Space of Macro- and Micro-Algae Using Comparative Metabolomics</li> <li>Tweet- Dashboard- Species Prioritization Based on Spectral Dissimilarity: A Case Study of Polyporoid Fungal Species</li> <li>Tweet- Dashboard- Planomonospora: A Metabolomics Perspective on an Underexplored Actinobacteria Genus</li> <li>Tweet- Dashboard- AdipoAtlas: A Reference Lipidome for Human White Adipose Tissue</li> <li>Tweet- Dashboard- Convergent evolution of pain-inducing defensive venom components in spitting cobras</li> <li>Tweet- Dashboard- Iron-meditated fungal starvation by lupine rhizosphere-associated and extremotolerant Streptomyces sp. S29 desferrioxamine production</li> <li>Tweet- Dashboard- Bacterial\u2013fungal interactions revealed by genome-wide analysis of bacterial mutant fitness</li> <li>Tweet- Dashboard- Deep Interrogation of Metabolism Using a Pathway-Targeted Click-Chemistry Approach</li> <li>Tweet- Dashboard- MassIVE.quant: a community resource of quantitative mass spectrometry-based proteomics datasets</li> </ol> <p></p> <p>Supplemental Figure 5 - Inspection of publicly shared mass spectrometry data from Deep Interrogation of Metabolism Using a Pathway-Targeted Click-Chemistry Approach</p> <p></p> <p>Supplemental Figure 6: Inspection of publicly shared mass spectrometry data from Bacterial\u2013fungal interactions revealed by genome-wide analysis of bacterial mutant fitness</p> <p></p> <p>Supplemental Figure 7: Inspection of publicly shared mass spectrometry data of AdipoAtlas: A Reference Lipidome for Human White Adipose Tissue</p>"},{"location":"dashboard_use_cases/#use-case-5a-gnps-dashboard-usage-in-teaching-setting","title":"Use Case 5A: GNPS Dashboard usage in Teaching Setting","text":"<p>Katherine Maloney PhD - Professor - Natural Product Chemistry,</p> <p>Allegra Aron PhD - Post-Doctoral Scholar - Biological Chemistry</p> <p>GNPS Dashboard proved useful in a teaching setting, as we developed a virtual, interactive laboratory exercise for undergraduate students to explore LC-MS data generated by the instructor, as part of Tiny Earth, an initiative to crowdsource antibiotic discovery in a Course-based Undergraduate Research Experience (CURE) GNPS Dashboard was an ideal tool for this interactive (or a virtually interactive) lab because software installation was not necessary and software licenses did not need to be obtained, both challenging obstacles when working with a class. One option frequently employed is the use of a virtual desktop that has the requisite software installed. For example, we used such a system for the processing of NMR data in the Tiny Earth (Hurley et al. 2021) course. However, students found the virtual desktop to be clunky and error-prone. The web-based interface of the GNPS Dashboard proved to be markedly more user-friendly, giving reproducible and shareable results. Moreover, the instructor can equip students with path links to data for exploration in GNPS Dashboard or can take students through data exploration using the synchronization feature.</p> <p>The interactive lab exercise making use of the GNPS Dashboard was part of the Tiny Earth Chemistry pilot course (CHEM 1003L) developed and taught by Katherine Maloney and Allegra Aron at Point Loma Nazarene University in San Diego, CA. The goal of the exercise was to teach students about LC-MS experiments and data structure by providing hands-on experience with LC-MS data generated from pure antibiotic standards and antibiotics in culture extracts. Briefly, the exercise asks students to determine the exact mass of antibiotics in question; once this has been completed students explore the LC-MS of a mixture of antibiotics using the LC-MS Viewer and a path link provided in the lab protocol. Students explore the TIC plot to load the MS1 spectrum for each antibiotic ( SI Figure 8 ). Next, students explore the XIC for each antibiotic then hone in to inspect the tandem MS (or MS2) spectrum of each antibiotic, trying to annotate fragment peaks with particular molecular fragments. Finally, students are given another path link for the LC-MS of culture extracts. Students are tasked with first looking through the TIC and XIC plots; from here, students dive into further exploration of compounds of interest in GNPS, including the use of Mass Spectrometry Search Tool (MASST) (Wang et al. 2020). The full laboratory exercise is provided as SI Data 1.</p> <p>GNPS Dashboard - Link</p> <p></p> <p>Supplemental Figure 8: Students use the GNPS Dashboard (link) to visualize XIC plots of antibiotics of interest, which include chloramphenicol ([H-H+], m/z 321.005), tetracycline ([H-H+], m/z 443.146), penicillin G ([H-H+], m/z 333.0915), and rifamycin ([H-H+], m/z 696.3025).</p>"},{"location":"dashboard_use_cases/#use-case-5b-gnps-dashboard-for-targeted-ms-in-a-teaching-setting","title":"Use Case 5B: GNPS Dashboard for Targeted MS in a Teaching Setting","text":"<p>Michael Marty PhD \u2013 Assistant Professor \u2013 Analytical Chemistry Deirdre Belle-Oudry PhD \u2013 Senior Lecturer \u2013 Analytical Chemistry</p> <p>In addition to analyzing LC-MS data generated by the instructor or in public data sets, the GNPS Dashboard is also useful for undergraduate students analyzing targeted data for quantitative analysis. For example, the GNPS Dashboard was used as the data analysis tool for two new labs in the Quantitative Analysis Lab (CHEM 326) course at the University of Arizona in Tucson, AZ developed by Michael Marty and Deirdre Belle-Oudry. Earlier in the semester, the students used HPLC with UV detection to quantify aspirin, acetaminophen, and caffeine (Fenk et al. 2010). However, additional peaks can be present in the UV chromatogram due to hydrolysis of acetyl-salicylic acid into salicylic acid. In the first LC/MS lab, students use LC/MS/MS with a triple quadrupole mass spectrometer to first identify the degraded product from product ion scans and then use single reaction monitoring (SRM) scans for targeted quantitation. After collecting the data and converting it to .mzML format using MSConvert (Chambers et al. 2012) students use the GNPS Dashboard to view the MS1 and MS2 data to assign the peaks. Example data is posted to MassIVE MSV000087058 to allow students to access training data from a direct link. Next, they use the Dashboard to view and integrate the SRM chromatograms. Because the LC/MS/MS system has a UV detector, students can also load the UV chromatograms into the GNPS Dashboard to compare retention times from both detection methods. In the second lab, the students apply the skills they develop in the first lab to quantify amino acids in food samples based on targeted SRM scans. Overall, the GNPS Dashboard provides a fast and user-friendly method to quantify targeted SRM scans and view MS data. The web-based interface provides easy and inclusive access for students with all different types of computers.</p> <p>Tutorial Video - https://www.youtube.com/watch?v=tT5b1IIJCE8</p> <p>GNPS Dashboard - Link</p>"},{"location":"dashboard_use_cases/#use-case-6-data-visualization-for-quantitative-proteomics-results","title":"Use Case 6: Data Visualization for Quantitative Proteomics Results","text":"<p>Ben Pullman - PhD Student - Computational Mass Spectrometry</p> <p>Nuno Bandeira PhD - Professor - Computational Mass Spectrometry</p> <p>MassIVE.quant (Choi et al. 2020) provides a platform for the sharing of quantitative re-analyses, from RAW data to features to differential expression (DE) analysis. The complete set of scripts and commands used to run the experiment enables reproducible data reanalysis and also facilitates altering parameters and algorithms used for slightly-modified future reanalyses. Incorporating the GNPS Dashboard provides a more interactive exploration of these stages of analysis and further facilitates investigating reported findings.</p> <p>In the IPRG2015 (Choi et al. 2017) study (MSV000079843/PXD015300), four samples are spiked into a consistent yeast background in six known, different concentrations. There are four conditions, each with a different known combination of the previous four spikes in samples (C1-C4), and each condition is run three times as technical replicates. The experiment design proves itself useful when considering quantifications pipelines, as we can assess if the differential expression found matches what is expected. In the reanalysis: RMSV000000249.18, which uses MaxQuant (Tyanova et al. 2016) for feature finding, almost all true positives (TP) are found, and the number of false positives (FP) is overall very low. However, there are still some FPs to investigate. sp|P07834|CDC4_YEAST is not a spiked in protein but is DE between two conditions in the experiment, C4 as compared to C2, and this expression is supported by only a single feature, though the feature does have consistent intensity across all three replicates in the sample ( SI Figure 9a , Protein Differential Expression Results). We can find the location of the features supporting the peptide by looking in the MaxQuant22 analysis ( SI Figure 9b , Peptide Differential Expression Results).</p> <p>To further examine the connection between the differential results and the raw data, the GNPS Dashboard enables us to examine the region where this peptide was detected to be, and inspect if there might be any other artifacts that might be influencing this feature intensity. We see that there's a feature for a different protein group that appears in exactly the same area and the first isotope of that feature overlaps completely with the monoisotopic m/z of the sp|P07834|CDC4_YEAST feature. Also generally it seems that the region around where the feature was acquired has many features ( SI Figure 9c , GNPS Dashboard Link).</p> <p>Finally, to confirm, when looking at the MS2 mapped to the feature, we also see that most of the intensity for the MS2 being considered cannot be explained by the peptide which it is assigned, lending more evidence to the fact that this feature might be improperly considered. (SI Figure 8d, Peptide Fragmentation Visualization - mzspec:PXD015300:JD_06232014_sample4_C:scan:8576:LSQKYPK/2).</p> <p></p> <p>Supplementary Figure 9: Connecting Protein Differential Expression with Raw Proteomics Data - a) shows the log2 intensity for features that map to sp|P07834|CDC4_YEAST in all 4 conditions from the IPRG2015 experiment, illustrating how the intensity is consistent across conditions 1-3 but significantly upregulated in condition 4, though only due to one features abundance, b) shows all features in Condition 4 that are for this protein, 6 in total, corresponding to 2 peptides, each with 3 replicates c) shows the LC-MS map for the region near the feature for LSQKYPK, the feature with very high abundance, in the 3rd replicate, and d) shows the annotated MS/MS spectrum for the peptide, and how the annotated peaks do not show much of the intensity of the spectrum.</p>"},{"location":"dashboard_use_cases/#use-case-7-data-visualization-and-parameter-optimization-for-large-scale-feature-finding","title":"Use Case 7: Data visualization and parameter optimization for large scale feature finding","text":"<p>Carlos Molina-Santiago PhD, Post-Doctoral Scholar, Microbiology</p> <p>Bacillus subtilis is a well-known Gram-positive strain that exhibits great potential as a biocontrol agent against bacterial and fungal pathogens in plants, such as in cucurbit crops (C\u00e1mara-Almir\u00f3n et al. 2020). In the example, we showcase the study of the metabolic changes occurring on melon leaves after the inoculation of B. subtilis by non-targeted LC-MS/MS. We compared the metabolomes of untreated and treated melon leaves 5 days after inoculation with B. subtilis.</p> <p>The optimization of feature finding parameters is one of the most important steps in the analysis of non-targeted LC-MS data, as it dictates much of the downstream quality of results. The GNPS Dashboard enables the tweaking of feature-finding parameters and immediate visualization of them for further downstream large-scale feature-finding via MZmine (Pluskal et al. 2010) as a GNPS workflow.</p> <p>We have used the GNPS Dashboard as a fast and easy tool to firstly compare the samples. We initially checked the successful colonization of the melon plant by B. subtilis by displaying the presence of surfactin (m/z 1036.69), a secondary metabolite known to be produced by this bacterium (Molino-Santiago et al. 2019). The GNPS Dashboard ( SI Fig 10A and B ) confirming its presence and abundance in treated leaves. With all the data already loaded in the GNPS dashboard, we can now perform Feature Finding directly modifying the settings in this tool ( SI Fig. 10C ) obtaining a heatmap where we can identify all the features detected (green diamonds) and their intensity coverage (Fig. XD). Once confirmed that the data are of enough quality to perform a deepest analysis, we can now perform Feature-Based Molecular Networking (FBMN)(Nothias et al. 2020) and MZmine (Pluskal et al. 2010) to all the datasets directly from the GNPS dashboard. With that, we can now compare all the samples of the dataset using PcoA analysis ( SI Fig. 10E ) confirming the pattern differences between non-treated and treated melon leaves and visualizing the results using Cytoscape. These tools have permitted us, for instance, to highlight the differences observed in a cluster where we can find known potential antimicrobial compounds produced by plants such as 3,5-Dimethoxy-4-hydroxycinnamic acid, neochlorogenic acid, and trans-ferulic acid ( SI Fig. 10F ) In this case, we find a higher abundance of these compounds when melon leaves are treated with B. subtilis, a result that we can also confirm using box plots from the GNPS dashboard ( SI Fig. 10G ), showcasing the seamless interlinking of the GNPS Dashboard to optimize and launch data analysis as well as downstream manual inspection and confirmation of results from FBMN (Nothias et al. 2020).</p> <p>GNPS Dashboard link</p> <p>FBMN GNPS Task link</p> <p></p> <p>Supplemental Figure 10. Optimization of feature finding settings and feature-based molecular networking through the GNPS dashboard. Panel a shows the comparison of XIC of Surfactin (m/z 1036.69) of B. subtilis treated plants (blue) and control plants without treatment (orange) in the GNPS dashboard. Box plots of integrated peak areas of Surfactin of treatment vs. control are shown in panel b and show that surfactin was detected in the treated sample but not the control. In the GNPS Dashboard MZmine parameters were visually optimized and shown as green boxes in the 2D LC-MS heatmap in panel d for a representative sample and then directly applied in a link out for feature finding using the GNPS MZmine workflow. Panel e shows the multivariate (PCoA) visualization of sample-to-sample distance based on all features in the data set. Panel f shows a selected network family that show different abundances between treatment and control group which was then further inspected by manually integrating the XICs of ferulic acid methyl ester (m/z 177) and neochlorogenic acid (m/z 163) in the GNPS Dashboard as shown in panel g.</p>"},{"location":"dashboard_use_cases/#use-case-8-outliers-in-data-analysis-visualization-of-lc-ms-can-diagnose-upstream-data-issues","title":"Use Case 8: Outliers in data analysis - Visualization of LC-MS can diagnose upstream data issues","text":"<p>Rachel Neve - PhD Student - Microbiology</p> <p>Vanessa Phelan PhD - Assistant Professor - Chemical Ecology</p> <p></p> <p>Supplemental Figure 11. Using GNPS Dashboard to confirm that low abundance data is due to poor extraction or improper injection. TOP: Boxplots with data points indicating the area under the curve value of features corresponding to m/z 225.0658, 244.1693, and 527.3184 of three biological replicates of P. aeruginosa SH2D overlaid on the boxes. BOTTOM: Extracted ion chromatograms of m/z 225.0658, 244.1693, and 527.3184 corresponding to each replicate.</p> <p>Visualization of quantitative LC-MS data using boxplots or scatterplots can reveal outlier values. Due to the number of processing steps involved to generate quantitative values from raw LC-MS data, those outlier values may originate from poor sample extraction, improper injection volume, or inappropriate feature finding settings for the dataset. However, the GNPS Dashboard can be used to quickly visualize the raw data to identify the origin of the outlier values. For the example in Supplemental Figure 11 , we analyzed the metabolome of Pseudomonas aeruginosa strain SH2D grown in synthetic cystic fibrosis medium 2 (SCFM2) containing dialyzed bovine submaxillary mucin (BSM). We subjected the LC-MS data to feature finding and generated box plots to visualize the area under the curve values for each replicate ( Supplemental Figure 11 TOP ). For many of the features quantified, biological replicate 1 (SH2D-1) values were near zero, while values for replicate 2 (SH2D-2) and 3 (SH2D-3) were not. This result suggested that there was likely an issue with either sample quality or data processing. We then visualized the extracted ion chromatograms (EIC) of m/z values associated with select features ( Supplemental Figure 11 BOTTOM ). Overlaying the EIC from each replicate for each m/z revealed that the boxplots faithfully represented the raw data, indicating an experimental issue associated with either sample extraction or injection. GNPS Dashboard Link</p>"},{"location":"dashboard_use_cases/#use-case-9-cross-laboratoryinstrument-sharingvisualization-of-ms-data","title":"Use Case 9: Cross Laboratory/Instrument sharing/visualization of MS data","text":""},{"location":"dashboard_use_cases/#part-1-multiple-instruments-within-different-laboratories","title":"Part 1: Multiple instruments within different laboratories","text":"<p>Monica Thukral - PhD Student - Microbial Ecology</p> <p>Pseudo-nitzschia australis (P. australis) is a cosmopolitan marine microalga capable of producing a potent neurotoxin domoic acid, particularly when undergoing nutrient starvation ([Bates et al. 2018]https://www.sciencedirect.com/science/article/abs/pii/S156898831830091X)). Domoic acid (DA) bioaccumulates up the food chain and can cause mass mortality to marine mammals and birds and also to humans if they consume DA-containing shellfish or crustaceans ([Bates et al. 2018]https://www.sciencedirect.com/science/article/abs/pii/S156898831830091X)). In the context of studying P. australis' metabolome under nutrient starvation, three LC-MS platforms are typically used by our group: A Bruker Amazon Ion Trap, an Agilent 6530 qToF, and a Thermo Fisher Scientific Q-Exactive qOrbitrap. As all three platforms come with their own vendor-specific data analysis software, the GNPS Dashboard facilitates this multi-laboratory and multi-instrument data analysis.</p> <p>Visualization of mass spectrometry data of aqueous methanol extracts of Pseudo-nitzschia australis are shown in SI Figure 12. Panel a shows extracted ion chromatograms (XICs) (left) and mass spectra (right) extracted for m/z = 314.1441, the mass of domoic acid from ion trap (top) qToF (middle) and qOrbitrap (bottom). Due to the use of three different platforms for data acquisition, we expect the absolute value of the intensity of peaks to differ. To resolve this problem and ensure proper comparison, the XIC normalization toggle feature is turned on, to clearly and easily compare visual data. A mass trace corresponding to domoic acids was clearly detected with all platforms and MS/MS spectra share the most intense fragment (m/z 266) but differ especially in the low m/z range in the ion trap data. SI Figure 12b shows the comparison of data of extracts acquired on the Ion Trap and the two high-resolution qTOF and qOrbitrap platforms. Depicted are heat maps and total ion chromatograms (TICs) from qToF (left) and Orbitrap (right) provide a direct comparison of globe data structure, including MS/MS events. The heat maps show m/z vs retention time as a 2D LC-MS map. Blue crosses represent the triggering of MS/MS data collection. While in the qToF data, the blue crosses are denser, the qOrbitrap data shows blue crosses well distributed across the data. Also clearly visible is that dynamic exclusion is not utilized in the qToF analysis, causing multiple MS/MS to be triggered along one peak and reducing the metabolome coverage of a molecular network in downstream analysis. Hence, it is not surprising that the coverage of chemical space in the downstream molecular network data analysis has a significantly higher contribution from the qOrbitrap data ( SI Figure 12c ) than from the qToF.</p> <p>In summary, the GNPS Dashboard directly benefited the investigation into P. australis metabolomics by allowing for rapid and efficient comparison between three instruments with different data analysis platforms. The GNPS Dashboard will serve as a valuable data integration tool for analysis going forward.</p> <p>Classic Molecular Networking LinkGNPS Dashboard IonTrapGNPS Dashboard qToFGNPS Dashboard Orbitrap</p> <p></p> <p>Supplemental Figure 12: Cross-platform comparison of LC-MS/MS from the same sample. Panel a shows the comparison of MS data from Domoic acid From extracts from Pseudo-nitzschia australis extracts that were recorded on three different instrument platforms (Ion Trap qToF and qOrbitrap). On the left side, the Extracted Ion Chromatograms (XIC) and corresponding MS/MS of domoic acid spectra on the right can be seen. Platform comparison of global DDA MS/MS data is shown in Panel b as heatmaps of the LC-MS run and MS/MS scans indicated as blue crosses. A molecular network from the global MS/MS data from all three platforms and zoom-ins to the domoic acids networks is shown in panel c.</p>"},{"location":"dashboard_use_cases/#part-2-multiple-instrument-within-the-same-laboratory","title":"Part 2: Multiple instrument within the same laboratory","text":"<p>Alan Jarmusch PhD - Post-Doctoral Scholar - Analytical Chemistry</p> <p>The multitude of mass spectrometers in existence is reflective of their commonplace in modern chemical measurement as well as their flexibility. Different mass spectrometers are defined, principally, by the mass analyzer of which there are traps, time-of-flights, quadruples, sectors, and hybrids. The different analytical performances (e.g. sensitivity, specificity, speed, duty cycle, mass resolution) of these mass analyzers often necessitate multiple mass spectrometers in a laboratory in order to access the different types of experiments available. The practical implication of this fact is that a laboratory is often forced to purchase instruments from different manufacturers and learn each manufacturer's control and data analysis software. The data analysis software is often complex to learn, knowledge does not readily translate from one manufacturer's software to another, and is plagued by different file formats. In reverse order, the utilization of an open-source file format (e.g. .mzML[29]) is a good initial step toward overcoming this challenge. By learning a single data analysis and visualization software, particularly one that exists in a web browser, it is hugely advantageous and nearly eliminates the need to learn multiple pieces of manufacturer software for simple visualizations and data processing. This of course will not immediately eliminate the need for manufacturer software, but it does make the initial steps towards a democratized, open-source, web-enabled, trans-manufacturer, and trans-mass spectrometer piece of software to facilitate chemical measurement and minimize time spent learning disparate software.</p>"},{"location":"dashboard_use_cases/#use-case-10-integration-of-dashboard-with-other-tools-sirius-and-comparison-with-standard-to-identify-isomerizationdegradation","title":"Use Case 10: Integration of Dashboard with other tools (SIRIUS) and comparison with standard to identify isomerization/degradation","text":"<p>Jessica M. Deutsch - PhD Student - Chemistry</p> <p>Neha Garg PhD - Assistant Professor - Natural Product Chemistry</p> <p>In non-targeted metabolomics experiments, one can typically annotate 1- 10% of the detected metabolites. To enhance our ability to decode the dark metabolome, we utilize various in silico methods such as SIRIUS 4 with CSI:FingerID (D\u00fchrkop et al. 2015) among others. The use of GNPS Dashboard to generate XIC on chemical formulas suggested by SIRIUS followed by feature detection and interrogation of the presence of chemical formula across samples allows us to integrate output from tools such as SIRIUS 4 with CSI:FingerID with rapid inspection of MS1 and MS2 spectra across multiple samples. Analysis performed directly via the GNPS Dashboard eliminated the need to install and toggle between multiple software to extract features and visualize multiple XIC alongside SIRIUS 4 with CSI:FingerID. The option to generate XICs from molecular formulas in the GNPS Dashboard also enables automated visualization of potential adducts, such as [M+Na]+ and [M+K]+, which enables further validation of the proposed chemical formula. Furthermore, access to individual LC-MS files on GNPS Dashboard also enables visualization of the MS2 spectra to inspect the fragmentation pattern and validation with analytical standards. Lastly, we can share these results with collaborators, additional lab members, and generate publication-quality figures without the use of expensive vendor software.</p> <p>The use of GNPS Dashboard has been instrumental in a remote teaching setting where I teach a potpourri of multiple mass spectrometry-based data annotation strategies and has enabled remote training of graduate students that joined my laboratory during the COVID shut down. Thus, the advantages of GNPS Dashboard are multi-fold and extend beyond the research setting. In the example presented in SI Figure 13 , we interrogated the annotation of korormicin A as suggested by SIRIUS with CSI:FingerID in organic extracts of a bacterium isolated from the coral tissue by our collaborator, Dr. Valerie Paul. The chemical formula was suggested as C25H39NO5 by SIRIUS 4 with a score of 99.95% and the top-most annotation belonged to korormicin A ( SI Figure 13a ). The XIC for this chemical formula was generated in the organic extract of bacterium ( SI Figure 13b ), which revealed detection of both [M+H]+ and [M+Na]+ adducts. This feature was used to optimize parameters for MZmine-based feature detection directly in GNPS Dashboard. These parameters were used to interrogate the presence of korormicin A in extracts of various microbes extracted from the same coral to identify likely isolation of the same species of bacteria ( SI Figure 13c ). Lastly, XIC comparison with analytical standards using GNPS Dashboard allowed us to observe isomerization of the purified molecule, which was also observed at low abundance in the culture extracts ( SI Figure 13c ).</p> <p>GNPS Dashboard Figure 12b - Link</p> <p>GNPS Dashboard Figure 12c - Link</p> <p></p> <p>Supplemental Figure 13. Integration of _ in silico _ annotation tool SIRIUS 4 with CSI:FingerID with GNPS Dashboard. a) The output ofSIRIUS 4 with CSI:FingerID showing prediction of chemical formula as C25H39NO5, with plausible annotation as korormicin A as the top candidate for m/z 434.290 Da. b) The XIC plot for a chemical formula using LC-MS viewer shows the possible adducts as [M+H]+ (blue trace) and [M+Na]+ (orange trace). The trace for [M+K]+ does not show peaks at the same retention time as [M+H]+ confirming [M+K]+ is not detected. c) The multiple XIC plot reveals that only one bacterial extract (green trace) produces korormicin A suggesting that the isolated bacteria is different from the other isolates. The same two isomers are observed in the bacterial extract. The isomer at 11 min is present in lower relative abundance in the bacterial extract than the standard suggesting conversion between the isomers during purification.</p>"},{"location":"dashboard_use_cases/#use-case-11-targeted-dereplication-and-evaluation-of-culture-conditions","title":"Use Case 11: Targeted dereplication and evaluation of culture conditions","text":"<p>Scott Jarmusch PhD - Post-Doctoral Scholar - Natural Product Chemistry</p> <p>Dereplication remains one of the principal target areas for metabolomics-based tools to accommodate the natural products community. GNPS molecular networking integrates fast, automated dereplication into its workflow, yet often, results still require the need to evaluate raw data for more critical interrogation. Utilizing the public data from a recent study on desferrioxamine metabolites produced by Streptomyces sp. S29 (Jarmusch et al . 2021), we can visualize how a targeted dereplication approach may be carried out. Using hits from the GNPS library as well as the work done by Traxler et al. (Traxler et al. 2013), the GNPS Dashboard allows for fast evaluation regarding the presence or absence of accurate mass XIC as well as providing context in which samples these metabolites are present. Taking desferrioxamine D (m/z 603.37), we expect it to be produced and it is, in any of the three conditions tested ( SI Figure 14a ): monoculture, coculture with Aspergillus niger and coculture with Botrytis cinerea. Furthermore, in microbial natural products, evaluation of culture conditions is vital to gain a better understanding of metabolite elicitation, especially when focusing on discovery. The two studies above observe the production of long-chain acyl desferrioxamines exclusively under coculture conditions. When we evaluate the presence/absence of three acyl desferrioxamines (C11-C13) in the fungal coculture study, we can clearly see the presence of the three metabolites in the cocultivation with B. cinerea, a presence of one metabolite in cocultivation with A. niger and an absence of the three in monoculture conditions ( SI Figure 14b ). Beyond the evaluation of knowns, we can also easily visualize and allow for prioritization of extracts when hunting for unknowns. An unknown desferrioxamine-like metabolite was identified in this study and we observe that its presence is related to cocultivation with B. cinerea, providing a guide to future isolation of this unknown ( SI Figure 14c ). Allowing for this rapid observation in the GNPS Dashboard interface that can then link into further GNPS tools makes this functionality invaluable when analyzing data that would normally require multiple software types to be opened simultaneously, requiring high computing power that some researchers do not have access to. These basic functionalities shown are essential in the community and the ability of the GNPS Dashboard to facilitate these are paramount to the service it provides.</p> <p>GNPS Dashboard Figure 13a - Link</p> <p>GNPS Dashboard Figure 13b - Link</p> <p>GNPS Dashboard Figure 13c - Link</p> <p></p> <p>Supplemental Figure 14. Targeted dereplication and evaluation of culture conditions. a) XIC plot of desferrioxamine D (m/z 603.3714) using LC-MS viewer shows the presence of the archetypal siderophore in monoculture (blue trace), cocultivation with A. niger (orange trace), and cocultivation with B. cinerea (green trace). b) XIC plot grouped by file showing the presence/absence of acyl desferrioxamines C11-C13 in each culture environment, clearly showing production in the presence of B. cinerea, some production in the presence of A. niger, and no production in the monoculture. c) targeting the culture conditions where an unknown metabolite (m/z 650.37 [M+2H]2+) could be isolated for future studies.</p>"},{"location":"dashboard_use_cases/#use-case-12-large-scale-xic-inspection-in-gnps-dashboard","title":"Use Case 12 - Large Scale XIC Inspection in GNPS Dashboard","text":"<p>Morgan Panitchpakdi - Staff Research Associate - Metabolomics</p> <p>Analysis of non-targeted LC-MS data often requires a thorough examination of the quality of each data file generated. Generating Extracted Ion Chromatograms (XIC) for internal standards and compounds of interest using vendor software is possible but becomes slower as the project size increases (\\&gt;20 files). The GNPS Dashboard helps alleviate these issues and enables quick inspection and analysis of LC-MS data and can generate XICs for large-scale projects within minutes.</p> <p>With the goal of reanalyzing published data from a clinical study investigating drug metabolism (Jarmusch et al. 2020), the GNPS Dashboard was used to quickly analyze LC-MS data quality and to confirm the presence of five reported internal standards in 140 urine samples (MSV000082493) before continuing on with downstream processing with MZmine (Pluskal et al. 2010). A single sample file was first inspected for the presence of the internal standards to determine retention time range. XIC's for all five internal standards, Omeprazole-d3 (m/z 349.1409), Caffeine-d3 (m/z 197.0992), Midazolam-d4 (m/z 330.1112), Dextromethorphan-d3 (m/z 275.2198), and Dextrophan-d3 (m/z 261.2035) were generated for all 140 urine samples. To obtain the XIC for all sample files, 140 USI's for these files were input into the GNPS USI field, m/z value and RT range were specified for each internal standard and visualized by grouping XIC's by m/z ( Figure 15a ). The GNPS Dashboard was used to visualize plotted AUC values for each of the five internal standards in all 140 urine samples ( Figure 15b ). In summary, the GNPS Dashboard generated XICs for 140 sample files faster than the vendor-provided data analysis software. Visual and shareable AUC value plots allow for quick analysis of internal standard presence and data quality before downstream processing and analysis begins.</p> <p>GNPS Dashboard Link - Omeprazole-d3</p> <p>GNPS Dashboard Link - Caffeine-d3</p> <p>GNPS Dashboard Link - Midazolam-d4</p> <p>GNPS Dashboard Link - Dextromethorphan-d3</p> <p>GNPS Dashboard Link - Dextrophan-d3</p> <p></p> <p>Supplemental Figure 15. Large Scale XIC in GNPS Dashboard</p> <p>a) Ovelrayed Extracted Ion Chromatograms (XIC) for each of the five internal standards in all 140 urine samples b) Plotted AUC values to confirm the presence of five internal standards in all 140 urine samples.</p>"},{"location":"dashboard_use_cases/#use-case-13-validating-multiply-eluting-peptides","title":"Use Case 13 - Validating Multiply-Eluting Peptides","text":"<p>Ben Pullman - PhD Student - Computational Mass Spectrometry</p> <p>Nuno Bandeira PhD - Professor - Computational Mass Spectrometry</p> <p>When analyzing a label-free proteomics experiment, the assumption is often made that each peptide should elute a single time in a given fraction, and the intensity of the peptide is that of the feature. However, in some cases, peptides can elute multiple times over a single run. Multiple elutions can complicate the calculation of feature intensity as well as create issues for the transfer of features between different runs. The GNPS Dashboard allows us to validate these multiply eluted peptides when examining the feature intensities.</p> <p>In the following example (GNPS Dashboard link), from the recent experiment looking at 31 tissues of the human proteome35 run through MaxQuant22 for feature finding and identification, we see an example of a peptide:</p> <p>NDGYLM[+16]FQQVPM[+16]VEIDGM[+16]K</p> <p>mapping to protein group:</p> <p>sp|P08263|GSTA1_HUMAN;sp|P09210|GSTA2_HUMAN</p> <p>that elutes 10 times over a 30-minute span in a single LC-MS run. All of these features have a mapped MS2 that could be identified to the peptide as well. Further, we see that the intensity of all the features is at max only a single order of magnitude lower than the highest intensity, and if the features beyond the highest two are not considered, the total intensity for the peptide would be off by ~30%.</p> <p>Using the GNPS Dashboard, we can examine the MS2 spectra for each feature in the XIC, and see that while there are likely some co-eluting peptides, the MS2 spectra generally look similar, confirming that indeed this feature likely elutes multiple times. The USIs for these MS2s are below:</p> <p>mzspec:MSV000083508:01275_D03_P013127_S00_N20_R1:scan:24647:NDGYLM[+15.994915]FQQVPM[+15.994915]VEIDGM[+15.994915]K/2</p> <p>mzspec:MSV000083508:01275_D03_P013127_S00_N20_R1:scan:30728:NDGYLM[+15.994915]FQQVPM[+15.994915]VEIDGM[+15.994915]K/2</p> <p>mzspec:MSV000083508:01275_D03_P013127_S00_N20_R1:scan:35674:NDGYLM[+15.994915]FQQVPM[+15.994915]VEIDGM[+15.994915]K/2</p> <p>mzspec:MSV000083508:01275_D03_P013127_S00_N20_R1:scan:41691:NDGYLM[+15.994915]FQQVPM[+15.994915]VEIDGM[+15.994915]K/2</p> <p></p> <p>Supplemental Figure 16 : Example of a long eluting peptide</p> <p>a) Shows the LC-MS map for the features of NDGYLM[+16]FQQVPM[+16]VEIDGM[+16]K zoomed in to show only RT 50-95 min and m/z 1132-1134. b) Shows the XIC for the mono-isotopic signal of the feature (m/z 1132.505737) with a retention time of 50-95 min, c) 1-4 show the corresponding MS/MS spectra that map to the identified features, color-coordinated with the arrows showing where the MS/MS was acquired on both a) the LC-MS map and b) the XIC.</p>"},{"location":"dashboard_use_cases/#use-case-14-implementation-of-third-party-tool-in-the-gnps-dashboard-for-rapid-prototyping","title":"Use Case 14 - Implementation of third party tool in the GNPS Dashboard for rapid prototyping","text":"<p>Robin Schmid PhD - Post-Doctoral Scholar - Computational Mass Spectrometry</p> <p>Software solutions for mass spectrometry data analysis have become essential to cope with the complex data generated by non-targeted LC-MS/MS. The GNPS dashboard offers collaborative visualization and integrative data analysis options (e.g., feature finding, molecular networking, and repository scale spectrum searches). Beyond a visualization tool for end-users, the GNPS Dashboard provides a new platform for software developers to quickly test new MS data analysis tools and make them readily accessible to the broader community. The access of public metabolomics and proteomics data in mass spectrometry repositories, rich visualization options, and the GNPS Dashboard's web-interface are beneficial for the testing and development of new software tools. Open-source licensing and effortless local deployment of the GNPS Dashboard enable rapid prototyping to integrate other tools and tailor the modular dashboard with specific graphical and tabular outputs. To exemplify a use case for developers, we used the GNPS Dashboard to integrate and test the latest development branch of the feature finding tool MZmine 3, which is currently undergoing a comprehensive redesign of its data model. The goal was to provide a framework to deploy, run, and visually compare feature finding results from MZmine 3 and the latest release of MZmine 2 as a consistency check.</p> <p>After downloading the open-source code for GNPS Dashboard, the dashboard can be executed locally in debugging mode (Documentation). MZmine 3 was integrated based on the existing feature finding options. Instead of running MZmine 2 only, both versions were executed sequentially to yield feature tables. Here, the dashboard provided UI controls to set essential parameters (e.g., mass tolerance, noise level, and feature width constraints) and rerun the comparison. New parameters that were introduced in MZmine 3 were set to reflect the default behavior of MZmine 2 (e.g., the minimum number of data points in the local minimum search feature resolver). We adjusted the LC-MS 2D heatmap ( Supplementary Figure 17 ) and feature finding results table to overlay the results of both MZmine versions.</p> <p>The presented integration was beneficial for comparing the latest development version and release of MZmine on different metabolomics datasets. As a result, we were able to track behavior changes in data processing and reporting. Some identified as planned changes (e.g., new parameters), while others resulted from introducing a new data model (e.g., changed accuracy (double\\&lt;\\&gt;float) for various data types) or changes in calculation methods. The latter case led to the feature area being calculated based on the retention time in minutes instead of seconds. The dashboard helped identify these small differences and verify that feature finding resulted in the same number of features for both MZmine versions. A discrepancy in the number of detected features was evident based on missing shapes in the LC-MS map for MZmine 3 when a new filter parameter was not turned off ( Supplementary Figure 17 ).</p> <p>Even for a rich graphical user interface tool, such as MZmine, the integration into the LC-MS dashboard facilitated the software development and testing. Key points were the provided data access from various repositories, the LC-MS map that showed overlapping or missing features, and the integration of MZmine 3 into the dashboard's modular framework. Furthermore, the dashboard's deployment in a local development environment was effortless and followed a few documented steps (Documentation) only.</p> <p></p> <p>Supplemental Figure 17: Consistency testing by overlaying feature finding results from MZmine 2 and the latest development version of MZmine 3. A complete results overlap was achieved after adjustment of the MZmine 3 preferences and batch mode. The specialized version of the GNPS dashboard informed the development of MZmine 3 to provide comparable results to MZmine 2.</p>"},{"location":"dashboard_use_cases/#use-case-15-quantification-of-isobutanol-produced-by-metabolically-engineered-_-ecoli-_-strains","title":"Use Case 15 - Quantification of isobutanol produced by metabolically engineered _ E.coli _ strains","text":"<p>Simon Boecker, PhD - Post-doctoral Scholar - Metabolic Engineering</p> <p>The performance of engineered microbial cell factories for the synthesis of a product of interest is usually characterized by the three parameters titer (product per volume), productivity (product per volume (or per biomass) and time), and yield (product per substrate). To determine these parameters, an exact quantification of the produced metabolite secreted to the medium is indispensable.</p> <p>For this use case, we compared the performance of two E. coli strains, which were engineered for the production of the biofuel isobutanol (i_BuOH). _i_BuOH is a volatile compound and can be quantified directly from the culture broth by GC-MS using head-space injection. External standards and medium sampled at different time points were analyzed on an Agilent Technologies GC-MS instrument in SIM mode. In our lab, we only own one license of the MassHunter software for data analysis, complicating the evaluation of the obtained data on your office or home PC. Instead of using MassHunter, we converted the data to mzML-format via the MSConvert tool[3], uploaded it to the MassIVE repository, and used the GNPS Dashboard for data analysis. XICs were extracted for the quantifier ion (_m/z 56.1) and the areas of the selected peaks were automatically integrated and exported as csv-file and used for generating a calibration curve ( SI Figure 18a ). The amount of _i_BuOH produced by the two strains was quantified with the calibration curve, demonstrating that strain 2 shows slightly superior performance in terms of _i_BuOH production ( SI Figure 18b ).</p> <p>In summary, the GNPS Dashboard is a very useful tool that facilitates data analysis for compound quantification by GC-MS, especially when the number of available software licenses is limited in the lab.</p> <p>GNPS Dashboard integration results - Link</p> <p>GNPS Dashboard Figure 17 - Link</p> <p></p> <p>Supplemental Figure 18: a) Overlaid XICs for m/z 56.1 of i_BuOH standards (in duplicates) visualized in the GNPS Dashboard and generated calibration curve from integrated peak areas. b) Time course of _i_BuOH production and specific productivity of both _E. coli strains.</p>"},{"location":"dashboard_use_cases/#use-case-16-exploring-new-directions-in-previously-analyzed-gc-ms-data","title":"Use Case 16 - Exploring new directions in previously-analyzed GC-MS data","text":"<p>Rachel Gregor, PhD - Post-doctoral Scholar - Chemical Ecology</p> <p>Michael M. Meijler, PhD - Professor - Chemical Biology</p> <p>Itzhak Mizrahi, PhD - Professor - Microbial Ecology</p> <p>Large-scale 'omics projects generate vast quantities of mass spectrometry data, more than can be comprehensively analyzed within the scope of one or even a series of publications. The same data can often be re-analyzed later to explore different questions or angles, especially if it is uploaded on public data depositories such as MassIVE. For example, as part of a large fecal microbiome-metabolome dataset collected in collaboration with a local zoo, we included food samples from the animals' diets and analyzed them by GC-MS. The food GC-MS metabolomes were not characterized in detail in the original data analysis, other than to quantify the overlap between fecal and food metabolites. Therefore, this portion of the dataset would be an excellent candidate for future analyses, for example in order to explore specific classes of nutrients found in different animal diet components.</p> <p>However, unexpected setbacks can arise when re-analyzing data at a later point, even for the original team who collected the data. In this case, we had originally visualized the chromatograms using Agilent's proprietary MassHunter software and performed deconvolution and molecular networking using the GNPS MS-Hub workflow. Since then, the lead author in this project finished her PhD and moved to a different institution, and no longer has access to an Agilent workstation with MassHunter, presenting a barrier in visualizing the chromatography data. This stage is especially crucial for the analysis of GC-MS data with electron impact ionization, both in order to manually verify the quality of the deconvolution for peaks of interest, and because different classes of compounds often have characteristic retention time ranges that are evident on the chromatograms.</p> <p>Using the GNPS Dashboard, we were able to load the GC-MS dataset from MassIVE (MSV000083859) and immediately explore metabolites of interest in the food samples. For example, the herbivores in the study consumed a variety of foods, including fresh fruits and two types of pellets. We examined the sugar content of three types of fruit and the two pellet samples by creating an XIC for m/z 217, a characteristic sugar fragment, resulting in three groups of peaks corresponding to mono-, di-, and tri-saccharides ( SI figure 19a ). It was immediately evident that fruits were enriched in mono- and some di-saccharides, while the pellets contained primarily di- and tri-saccharides. This was further strengthened by the molecular network, which showed a similar trend in a large cluster of sugar compounds ( SI figure 19b ). Using the GNPS Dashboard and the identifications from the molecular networking, we were able to easily examine specific examples of sugars from each type, such as the mono-saccharide fructose, the di-saccharide sucrose, and the tri-saccharide maltotriose, and compare the relative quantification in each sample ( SI figure 19c ). This analysis was possible quickly and easily upon selecting these samples from the MassIVE dataset on the GNPS Dashboard, thus removing barriers and making this data immediately accessible and ready for analysis.</p> <p></p> <p>Supplemental figure 19. a) Overlaid XIC's for m/z 217 for fruit samples (top) and pellet samples (bottom). Characteristic elution ranges for mono-, di-, and tri-saccharides are indicated in grey. b) Molecular network of saccharide cluster with relative abundances of fruit (green) and pellets (purple). (c) Overlaid XIC's for m/z 217 for all samples, for peaks identified by spectral library search as fructose (top), sucrose (middle), and maltotriose (bottom).</p>"},{"location":"dashboard_use_cases/#use-case-17-inspection-of-data-during-the-review-process","title":"Use Case 17 - Inspection of data during the review process","text":"<p>Pieter C. Dorrestein, PhD - Professor - Small Molecule Mass Spectrometry</p> <p>The review process is an active process of the scientific enterprise. The goal of peer review of manuscripts is to ensure that the science that is presented is accurate and, when needed, to provide suggestions to improve the work. One of the key challenges as a reviewer of research articles that include mass spectrometry (MS) data is to get insight into the methods and settings used for data acquisition and quality or details of the actual data that is collected. Even when data is made public, many reviewers do not have or take the time to look at the raw MS data as there is a high barrier to entry (e.g., as this entails downloading and converting the data into the proper format and then loading the data into specific software to view). The GNPS Dashboard makes this process a simple single step in the web browser. Further, if the authors include a direct url, then it is as easy as clicking the link to allow direct data inspection. As the review process is confidential, in this use case I will not show data, but rather describe recent examples that have been observed during recent reviews.</p> <p>Being able to inspect the data during a review enables one to gain insight if there are alternative explanations possible. Most methods in papers have insufficient detail to understand how the data was acquired. A quick inspection of the m/z and retention time (rt) data with MS/MS points marked will reveal specific details about the data dependent acquisition (DDA), starting with the length of separation, how well the TIC appears to separate, general noise levels, how much data was also present in the background or blank samples, etc. Quick inspection using the GNPS Dashboard also gives insight into the use of data dependent exclusion parameters. For example continuous \"lines'' of MS/MS at a given m/z value, can reveal that dynamic exclusion was not employed or not properly set, and the DDA perhaps cycled through the top n most intense ions only. Being able to quickly inspect the data in this way will enable reviewers to rapidly judge if the methods and data are appropriate for the task presented in the paper. For example if the paper wants to get molecular networks from as many different molecules as possible then it is critical to set the DDA including dynamic exclusion appropriately, however if the task is to verify the presence of a few molecules and their analogs, other settings may be appropriate.</p> <p>In addition, with the GNPS Dashboard it is possible to quickly check how the data was used and if the data analysis is reproducible. For example, a paper may show an zoomed XIC derived feature but upon inspection by zooming out there are multiple XIC's with the same mass. Thus, integration of peak area needs to be carefully considered as there could be artefacts due to a different molecule with the same mass (which will also give rise to a different MS/MS spectrum), an isomer which would likely have a nearly identical MS/MS spectrum, but could also be the same molecule but with different ion adducts, rotamers of molecules. In other words a single molecule can give rise to multiple peaks during chromatography. This could affect the quantification results and thus is important to be able to assess this as a reviewer. Being able to inspect the data will not only allow reviewers to inspect the details of the data and data acquisition parameters but also share their observations as hyperlinks in the reviews so that reviewers can help the authors to improve their papers or to provide suggestions on what to consider in future experiments. This way we all grow scientifically due to the review process.</p>"},{"location":"dashboard_use_cases/#use-case-18-structure-and-fragmentation-pattern-analysis-through-the-full-collaborative-synchronization-mode","title":"Use Case 18: Structure and fragmentation pattern analysis through the full collaborative synchronization mode","text":"<p>Mirtha Navarro PhD \u2013 Professor \u2013 Natural Product Chemistry, Bioactivity, and Nanotechnology</p> <p>Felipe Vasquez-Castro \u2013 MSc candidate \u2013 Natural Product Chemistry and Environmental Microbiology</p> <p>Depending on the structure of research groups, principal investigators (PI) are directly involved in the day-to-day knowledge transfer to junior researchers. Therefore, tools for efficient collaborative work are of the utmost importance to support these interactions. For instance, the analysis of complex mass spectrometry data requires particular supervision, and this time-consuming effort becomes a challenge for Principal Investigators' tight schedules. GNPS Dashboard facilitates this task through the fully collaborative synchronization mode, which allows a multi-user simultaneous visualization and examination of data, thus enhancing the learning experience. Hereby we illustrate such a case, in which a PI and a junior researcher use GNPS Dashboard to perform a remote multi-user analysis of a LC-MS/MS spectrum with the purpose of identifying the structural differences and fragmentation patterns of procyanidin oligomers. The researcher needed to learn and apply these interpretation skills in proanthocyanidin-enriched extracts from the PI's research group (BIODESS). For this, the spectrum (MSV000087075) of a P. domestica enriched-polyphenolic extract obtained using Pressure Liquid Extraction and Amberlite resin chromatographic purification (Navarro et al. 2018), was loaded onto the GNPS Dashboard, and the full collaborative synchronization mode under Sync Options was initiated ( SI Figure 20 ).</p> <p>During inspection of the Data Exploration panel, the PI highlighted that a peak at m/z 577.13 (12.64 min) indicated the presence of a procyanidin B-type dimer holding one single interflavanic bond between two units of (epi)catechin, while a peak at m/z 575.12 (24.96 min) indicated a procyanidin with 2 Da difference. Thus, corresponding to an A-type dimer with two single bonds present between the flavan-3-ol units. Based on this observation, the researcher was able to assign a peak at m/z 865.20 (17.88 min) to a procyanidin B-type trimer and to observe the peak at m/z 863.18 (18.80 min) with 2 Da lower mass. Therefore indicating a mixed procyanidin type-A trimer with one and two single interflavanic bonds respectively between the three (epi)catechin units. ( SI Figure 21 ).</p> <p>The utilization of the full collaborative synchronization mode focused afterwards in the PI explanation of the different fragmentation pathways these compounds undergo, namely Retro Diels-Alder (RDA), Heterocyclic Ring Fission (HRF) with the loss of phluoroglucinol (126 Da), and Quinone-methide (QM). The spectrum analysis using the GNPS Dashboard allowed the researcher to observe the more abundant ion fragment at m/z 425 in the procyanidin B-type dimer corresponding to the RDA neutral loss of 152 Da. The loss of water (18 Da) after RDA fragmentation produced the more abundant ion fragment at m/z 695 in the procyanidin B-type trimer. In addition, the joint spectrum analysis allowed the PI and researcher to highlight differences in respect to the second preferred fragmentation pathway. In fact, the second more abundant ion fragment at m/z 451 in the B-type dimer corresponded to the HRF pathway after the neutral loss of phloroglucinol (126 Da), while the QM pathway delivered the second more important ion fragment at m/z 577 in the case of the B-trimer ( SI Figure 22 ).</p> <p>In summary, GNPS Dashboard permitted the simultaneous exploration and analysis of mass spectrometry data through the fully synchronized collaborative mode, which proved useful for a Principal Investigator to share information in an efficient way with a researcher in MS data analysis, enhancing the learning process through the possibility of reviewing all actions and provide simultaneous feedback on the data produced.</p> <p>Link to XIC:GNPS - LCMS Browser (ucsd.edu)</p> <p>Link 2D LC-MSGNPS - LCMS Browser (ucsd.edu)</p> <p>MS2 at 12.64 min:GNPS - LCMS Browser (ucsd.edu)</p> <p>MS2 at 17.88 min:GNPS - LCMS Browser (ucsd.edu)</p> <p></p> <p>Supplemental Figure 20 : Step-by-step setup of the bidirectional synchronization mode. A spectrum is loaded onto GNPS Dashboard using a MassIVE accession number (as in this case) or by dragging and dropping the file. The spectrum can either be loaded before or after initiating the bidirectional synchronization mode. The button ''Sync Options'' reveals the different synchronization types available. The synchronization is set to ''Bidirectional sync'' under ''Dashboard Synchronization Type'', and the URL to the session is obtained by clicking on the ''Collab URL'' button.</p> <p></p> <p>Supplemental Figure 21. a) Example structures of a procyanidin A-type dimer constituted by two units of (epi)catechin with C4-C8 and C2-C7 bonds and a procyanidin B-type trimer composed of three units of (epi)catechin with C4-C8 bonds. b) 2D LC-MS heatmap for procyanidin A-type and B-type dimers and trimers c) grouped XICs for procyanidin A-type and B-type dimers and trimers.</p> <p></p> <p>Supplemental Figure 22. a) Fragmentation pathways for procyanidins: Retro Diels-Alder (RDA), Heterocyclic Ring Fission (HRF), and Quinone-methide (QM). b) MS2 spectrum of a procyanidin B-type dimer at 12.64 min (m/z 577.13). c) MS2 spectrum of a procyanidin B-type trimer at 17.88 min (m/z 865.20). The fragments highlighted in both spectrums represent the respective fragmentation pathways illustrated in panel a.</p>"},{"location":"datasets/","title":"Dataset Creation/Sharing","text":""},{"location":"datasets/#massive-datasets","title":"MassIVE Datasets","text":"<p>MassIVE is an online repository for publicly available datasets. MassIVE provides a location for researchers to access datasets that have been made available by others, oftentimes alongside publication. The datasets available remain alive long after publication. At GNPS, users will be able to</p> <ol> <li>Browse datasets - Explore all public GNPS datasets</li> <li>Download datasets - Download full dataset for offline processing/reanalysis</li> <li>Re-Analyze datasets - Online reanalysis with GNPS tools. Compare public data to your own</li> <li>Comment on datasets - Make public comments on public datasets to start a community discussion</li> <li>Subscribe to datasets - Subscribe to updates to datasets, e.g. Updated data from submitter, new identifications/analogs by Continuous Identification</li> </ol> <p>To enhance the analysis, datasets submitted to MassIVE through GNPS will be periodically searched against the ever growing annotated spectral libraries and new putative identifications within those datasets. Beyond new identifications within a dataset, subscribers will also be made aware of other datasets that exhibit chemical similarities to the subscribed dataset. This allows for users to be connected via their research interest to similar datasets.</p>"},{"location":"datasets/#submitting-gnps-massive-datasets","title":"Submitting GNPS-MassIVE Datasets","text":"<p>Here is a full video tutorial, showing how to convert, and upload raw LC-MS/MS data, and submit a MassIVE data set, and finally how to make the data set public.</p> <p> </p> <p>Below is a step-to-step description how to upload data into MassIVE specifically for GNPS.</p> <p>For more detailed information about general MassIVE dataset submission see here.</p> <p>At the GNPS splash screen, users can click this button</p> <p></p> <p>to create a MassIVE dataset.</p> <p>Login with your GNPS login and hit Submit Data.</p>"},{"location":"datasets/#gnps-submission-specifics","title":"GNPS Submission specifics","text":"<p>The title is the display that users will use primarily to filter datasets. For GNPS datasets, a specific title format is required.</p> <pre><code>GNPS - &lt;Title of Paper or Short Description&gt;\n</code></pre> <p>The GNPS prefix is required for GNPS datasets. If this is not provided GNPS-MassIVE datasets are not shown to GNPS users.</p>"},{"location":"datasets/#example-recommended-description","title":"Example Recommended Description","text":"<pre><code>Paper title: Molecular networking as a dereplication strategy.\nAuthor List: Yang JY, Sanchez LM, Rath CM, Liu X, Boudreau PD, Bruns N, Glukhov E, Wodtke A, de Felicio R, Fenner A, Wong WR, Linington RG, Zhang L, Debonsi HM, Gerwick WH, Dorrestein PC.\nCitation: J Nat Prod. 2013 Sep 27;76(9):1686-99. doi: 10.1021/np400413s\nPubMedID: 24025162\nBrief description of the data submitted: RAW Files used to generate Figure 4. Bacterial network with a cosine similarity score cutoff of 0.65. This network was generated from direct infusion of extracts or direct\n</code></pre>"},{"location":"datasets/#recommendations-for-data-collection","title":"Recommendations For Data Collection","text":"<p>There are several data collections in MassIVE dataset creation. These were originally created to serve proteomics data, and thus we offer the following recommendations for metabolomics/natural products datasets. </p> Collection Recommended Data Extension Types Raw Spectrum Files Instrument vendor data .d, .raw, .wiff, etc. Peak List Files Open format raw data .mzML, .mzXML Metadata gnps metadata describing your study .tsv Supplementary Files This is other information, that might include cytoscape files, feature finding batch files, feature finding quant, feature finding ms2 mgf files, or basically any supplementary files that are relevant to your data .tsv, .mgf, .xml, etc. <p>Info</p> <p>All other collections are optional and we recommend to generally not provide them unless you specifically desire to and understand their semantics. This can be found here. </p>"},{"location":"datasets/#making-dataset-public","title":"Making Dataset Public","text":"<p>After submitting your dataset to MassIVE, you must explicity make the dataset public, by clicking the make public button:</p> <p></p>"},{"location":"datasets/#continuous-identification","title":"Continuous Identification","text":"<p>A unique feature at GNPS is the continuous and automated reanalysis of public datasets. GNPS analyzes these datasets with molecular networking and library to make new identifications as the public community spectral libraries increase due to community contributions.</p> <p>Users may subscribe to datasets to receive email notifications of new identifications made to datasets of interest.</p>"},{"location":"datasets/#browsing-datasets","title":"Browsing Datasets","text":"<p>To browse all public datasets, click the \"Datasets\" link at the top menu bar. This brings users to a list of all public GNPS-MassIVE datasets.</p> <p></p>"},{"location":"datasets/#downloading-dataset-contents","title":"Downloading Dataset Contents","text":"<p>To download the contents of a dataset, you can reach the FTP url of each dataset by click the FTP link.</p> <p></p>"},{"location":"datasets/#reanalyze-datasets","title":"Reanalyze Datasets","text":"<p>Dataset data can be re-analyzed with the tools at GNPS. In order to import the dataset into your own workspace to select files, please refer to this documentation.</p>"},{"location":"datasets/#social-networking-with-datasets","title":"Social Networking with Datasets","text":""},{"location":"datasets/#dataset-comments","title":"Dataset Comments","text":"<p>Users may make a comment on a dataset by clicking the \"Comment on Dataset Link\":</p> <p></p> <p>To browse all comments per dataset, a table is shown</p> <p></p>"},{"location":"datasets/#finding-related-datasets","title":"Finding Related Datasets","text":"<p>Users can find related MassIVE datasets to the current one. Currently relatedness of datasets is determine by the number of shared identified compounds between the two. Users can see a view like this:</p> <p></p>"},{"location":"datasets/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (94.02%), Daniel Petras (3.42%), Simone Zuffa (2.56%)</p>"},{"location":"dereplicator%2B/","title":"DEREPLICATOR+","text":""},{"location":"dereplicator%2B/#dereplicator-in-silico-database-search-of-msms","title":"DEREPLICATOR+ - in silico database search of MS/MS","text":"<ul> <li>DEREPLICATOR+ - in silico database search of MS/MS</li> <li>Introduction</li> <li>Manuscripts and Citations</li> <li>Development</li> <li>Accessing DEREPLICATOR+ workflow on GNPS</li> <li>STEP 1: Go to GNPS and login</li> <li>STEP 2: Access DEREPLICATOR+</li> <li>STEP 3: Select input spectra</li> <li>STEP 4: Set up parameters<ul> <li>BASIC OPTIONS:</li> <li>ADVANCED OPTIONS:</li> </ul> </li> <li>STEP 5: Submit a job</li> <li>STEP 6: View results</li> <li>Feedback and Bug Reports</li> <li>Contribute to the Documentation</li> <li>Page Contributions</li> </ul>"},{"location":"dereplicator%2B/#introduction","title":"Introduction","text":"<p>DEREPLICATOR+ is an in silico database search tool that allows the annotation of metabolites in MS/MS data using in silico fragmentation graph. It generalizes DEREPLICATOR by</p> <ol> <li>considering O\u2013C and C\u2013C bonds for fragmentation in addition to N-C bonds</li> <li>allowing multi-stage fragmentation in addition to single-stage.</li> </ol> <p>As a result, DEREPLICATOR+ not only improves the annotation of peptidic natural products, but also expanded the annotation to general metabolites and natural products such as polyketides and terpenes. </p> <p>The following figure is an example of radamycin match by DEREPLICATOR+. Fragments and peaks that are annotated by DEREPLICATOR+ but not by DEREPLICATOR are marked with bluechecks. The score of the match increases from 9 to 25, and the p-value drops from $3\u00d710^{\u221217}$ to $3\u00d710^{\u221246}$.</p> <p></p> <p>DEREPLICATOR+ algorithm and software are developed in collaboration of Saint Petersburg State University (Russia),  University of California San Diego (CA, USA)  and Carnegie Mellon University (PA, USA).</p>"},{"location":"dereplicator%2B/#manuscripts-and-citations","title":"Manuscripts and Citations","text":"<p>DEREPLICATOR+: Mohimani, H. et al. Dereplication of microbial metabolites through database search of mass spectra. Nature Communication 9, 4035 (2018). https://doi.org/10.1038/s41467-018-06082-8</p>"},{"location":"dereplicator%2B/#development","title":"Development","text":"<p>The GitHub repository provides latest source code and release. </p>"},{"location":"dereplicator%2B/#accessing-dereplicator-workflow-on-gnps","title":"Accessing DEREPLICATOR+ workflow on GNPS","text":"<p>The DEREPLICATOR+ are available on GNPS on the in silico tools page.</p> <p></p>"},{"location":"dereplicator%2B/#step-1-go-to-gnps-and-login","title":"STEP 1: Go to GNPS and login","text":"<p>Go to http://gnps.ucsd.edu, and create/login to your account.</p> <p></p>"},{"location":"dereplicator%2B/#step-2-access-dereplicator","title":"STEP 2: Access DEREPLICATOR+","text":"<p>Derectly go to the workflow page or find the workflow page by Step 2.1 and Step 2.2 at main page:</p> <p></p>"},{"location":"dereplicator%2B/#step-3-select-input-spectra","title":"STEP 3: Select input spectra","text":"<p>Select/Import a mass spectrometry file: The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload.</p> <p>After getting done with selecting files, click on Finish Selection.</p> <p></p> <p></p> <p></p>"},{"location":"dereplicator%2B/#step-4-set-up-parameters","title":"STEP 4: Set up parameters","text":"<p>Set up the parameters for the DEREPLICATOR+ job: Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.</p> <p></p>"},{"location":"dereplicator%2B/#basic-options","title":"BASIC OPTIONS:","text":"<p>-- Precursor Ion Mass Tolerance:  This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.005 Da.</p> <p>-- Fragment ion Mass Tolerance: This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.01 Da.</p>"},{"location":"dereplicator%2B/#advanced-options","title":"ADVANCED OPTIONS:","text":"<p>-- Predifined database : the default small molecule structure database is AllDB, which contains 720K compounds.</p> <p>-- Custom DB file : if a custom database is provided (via File selection or URL), the predefined DB choice is ignored.</p> <p>-- Max charge: Maximum charge allowed. The default is 2.</p> <p>-- Fragmentation Model: the default model is 2-1-3, which indicates there will be at most two bridges, one 2-cut, and three cut in total.</p> <p>-- Min score to consider an MSM as significant: the minimum score (number of shared peaks between a experimental spectrum and a theoretical spectrum) to report a significant metabolite spectrum match. The default value is 12.</p>"},{"location":"dereplicator%2B/#step-5-submit-a-job","title":"STEP 5: Submit a job","text":"<p>Select an email. Then click on submit.</p> <p>You will soon get an email with the link to the results when your job is finished. You can also check the status of your job in \"Jobs\" section.</p> <p></p>"},{"location":"dereplicator%2B/#step-6-view-results","title":"STEP 6: View results","text":"<p>See the DEREPLICATOR+ job status: The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done.</p> <p>The job can be Cloned, for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links.</p> <p>Click on View Unique Metabolites (recommended), to have get the list of annotated molecules.</p> <p>Click on the View All MSM (Metabolites-Spectrum Match) to have detailed view of the Metabolites-spectrum matches.</p> <p>Explore the DEREPLICATOR+ annotations: Annotations are sorted by score (default), mass, compound name, etc. These fields can also be searched with the filter function.</p> <p></p>"},{"location":"dereplicator%2B/#feedback-and-bug-reports","title":"Feedback and Bug Reports","text":"<p>We will be thankful if you help us make DEREPLICATOR+ better by sending your comments, bug reports, and suggestions to npdtools.support@cab.spbu.ru or posting them on our GitHub repository tracker.</p>"},{"location":"dereplicator%2B/#contribute-to-the-documentation","title":"Contribute to the Documentation","text":"<ul> <li>For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository.</li> <li>To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".</li> </ul>"},{"location":"dereplicator%2B/#page-contributions","title":"Page Contributions","text":"<p>liucaomics</p>"},{"location":"dereplicator/","title":"DEREPLICATOR","text":""},{"location":"dereplicator/#dereplicator-insilico-peptidic-natural-products-tools","title":"DEREPLICATOR - Insilico Peptidic Natural Products Tools","text":"<ul> <li>DEREPLICATOR - Insilico Peptidic Natural Products Tools</li> <li>Manuscripts and Citations</li> <li>Development</li> <li>Accessing the DEREPLICATOR tools on GNPS<ul> <li>STEP 1: Go to GNPS</li> <li>STEP 2: Access DEREPLICATOR</li> <li>STEP 3: SELECT YOUR FILES</li> <li>STEP 4: CONFIGURE</li> <li>BASIC OPTIONS:</li> <li>ADVANCED OPTIONS:</li> <li>ADVANCED DEREPLICATOR OPTIONS:</li> <li>ADVANCED VARQUEST OPTIONS:</li> <li>STEP 5: VIEW RESULTS</li> <li>STEP 6: ANALYSE</li> <li>STEP 7: MAP ANNOTATIONS ON MOLECULAR NETWORKS</li> <li>STEP 8: VALIDATE</li> <li>Validating a DEREPLICATOR annotation:</li> </ul> </li> <li>Other in silico database search tools</li> <li>Contribute to the Documentation</li> <li>Page Contributions</li> </ul> <p>The Insilico Peptidic Natural Products DEREPLICATOR is a bioinformatic tool available on GNPS that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree.</p> <p>The introduction of DEREPLICATOR VarQuest made possible to search variants of known peptidic natural products on GNPS.</p> <p>The introduction of DEREPLICATOR+ (PLUS) and MOLDISCOVERY improved the confidence in the annotation from the DEREPLICATOR, and expanded annotations to non-peptidic natural products on GNPS. </p> <p>These algorithms and software are developed in collaboration of Saint Petersburg State University (Russia),  University of California San Diego (CA, USA)  and Carnegie Mellon University (PA, USA).</p>"},{"location":"dereplicator/#manuscripts-and-citations","title":"Manuscripts and Citations","text":"<p>If you used DEREPLICATOR tools, please cite the corresponding manuscripts:</p> <p>DEREPLICATOR: Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology, 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219.</p> <p>DEREPLICATOR VarQuest: Gurevich, A. et al. Increased diversity of peptidic natural products revealed by modification-tolerant database search of mass spectra. Nature Microbiology 3, 319\u2013327 (2018). https://doi.org/10.1038/s41564-017-0094-2</p> <p>DEREPLICATOR+: Mohimani, H. et al. Dereplication of microbial metabolites through database search of mass spectra. Nature Communication 9, 4035 (2018). https://doi.org/10.1038/s41467-018-06082-8</p>"},{"location":"dereplicator/#development","title":"Development","text":"<p>The GitHub repository provides latest source code and release. </p>"},{"location":"dereplicator/#accessing-the-dereplicator-tools-on-gnps","title":"Accessing the DEREPLICATOR tools on GNPS","text":"<p>The DEREPLICATOR (VarQuest), and DEREPLICATOR+ are available on GNPS on the in silico tools page.</p>"},{"location":"dereplicator/#step-1-go-to-gnps","title":"STEP 1: Go to GNPS","text":"<p>Go to http://gnps.ucsd.edu, and create/login to your account.</p>"},{"location":"dereplicator/#step-2-access-dereplicator","title":"STEP 2: Access DEREPLICATOR","text":"<p>Find the \"In Silico Tools\" box and click on \"Browse Tools\".</p> <p></p> <p>Choose either DEREPLICATOR (VarQuest) or DEREPLICATOR+.</p> <p></p>"},{"location":"dereplicator/#step-3-select-your-files","title":"STEP 3: SELECT YOUR FILES","text":"<p>Select/Import a mass spectrometry file: The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload.</p> <p>After getting done with selecting files, click on Finish Selection.</p>"},{"location":"dereplicator/#step-4-configure","title":"STEP 4: CONFIGURE","text":"<p>Configure the parameters for the DEREPLICATOR job: Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.</p> <p></p>"},{"location":"dereplicator/#basic-options","title":"BASIC OPTIONS:","text":"<p>-- Precursor Ion Mass Tolerance:  This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ).</p> <p>-- Fragment ion Mass Tolerance: This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ).</p> <p>-- Search analog (VarQuest) [RECOMMENDED TO USE]: The VarQuest algorithm can search for analogs of known natural products in MS/MS data using Dereplicator. VarQuest is a modification-tolerant database search tool that discovers unexpected modifications in a blind mode. Since the computational space for variable PNP identification is computationally expensive, VarQuest first constructs a set of feasible PSM using a simple scoring approach and further filters out this set using a rigorous scoring method. Using VarQuest will increase the job time. The use of VarQuest analogs option is recommended as it expands the search space, and it reduces the overall run time.</p>"},{"location":"dereplicator/#advanced-options","title":"ADVANCED OPTIONS:","text":"<p>-- PNP database : a choice of two databases Regular/Extended (Extended one is more informative but 2 times larger, i.e. two times slower processing)</p> <p>-- Mimimum number of AA: Dereplicator is able to search for short peptides. This parameter determines what is the minimum number of amino acids, we consider for the compounds that are considered in Dereplicator search.</p> <p>-- Accurate P-values : accurate (but slow) algorithm for P-value computation (MS-DPR), by default raw estimation is used.</p> <p>-- Max charge: Maximum charge allowed.</p>"},{"location":"dereplicator/#advanced-dereplicator-options","title":"ADVANCED DEREPLICATOR OPTIONS:","text":"<p>-- Max Isotopic Shift: When working with molecules with 1000 Da  or higher masses, mass spectrometers commonly predict the precursor mass 1 or 2 Da higher than the monoisotopic mass due to the isotopic pattern. Setting Maximum isotopic shift to higher than 0 allows Dereplicator to consider these shifts in the precursor mass.</p> <p>-- Adducts : Dereplicator can search in addition to protonated adducts, sodiated and potassium adducts.</p>"},{"location":"dereplicator/#advanced-varquest-options","title":"ADVANCED VARQUEST OPTIONS:","text":"<p>-- Max Allowed Modification Mass : Maximum difference allowed between the precursor ion of an unknown modified peptide and the (dereplicated) known peptide.</p> <p>-- Min Matched Peaks with Known Compound : Minimum number of common peaks between the MS/MS spectrum of an unknown modified peptide and the (dereplicated) known peptide.</p> <p>Select an email. Then click on submit.</p> <p>You will soon get an email with the link to the results when your job is finished. You can also check the status of your job in \"Jobs\" section.</p>"},{"location":"dereplicator/#step-5-view-results","title":"STEP 5: VIEW RESULTS","text":"<p>See the DEREPLICATOR job status:</p> <p>The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done.</p> <p>The job can be Cloned, for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links.</p> <p>Clic on View Unique Peptides (recommended), to have get the list of annotated molecules.</p> <p>Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum matches.</p> <p></p>"},{"location":"dereplicator/#step-6-analyse","title":"STEP 6: ANALYSE","text":"<p>Explore the DEREPLICATOR annotations: Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function.</p> <p></p> <p>Clic on Show Annotation to see the experimental spectrum and the matching with the fragmentation tree of the Dereplicator database.</p> <p></p> <p>The experimental MS/MS spectrum can be viewed in the left panel. The blue peaks are fragment ions that matched the fragmentation tree of peptidic natural products in the database.</p> <p>The structure of the molecule is displayed on the right.</p> <p>In the Annotated fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities.</p> <p>Click on a blue peak to highlighted the corresponding fragment on the molecular structure, along with its properties.</p> <p></p>"},{"location":"dereplicator/#step-7-map-annotations-on-molecular-networks","title":"STEP 7: MAP ANNOTATIONS ON MOLECULAR NETWORKS","text":"<p>Map and Explore the DEREPLICATOR annotations in the networks: 1. Run a classical or feature-based molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation. Note that the Feature-Based Molecular Network workflow can run the DEREPLICATOR VarQuest automatically (with default parameters only).</p> <ol> <li>If you run a classical molecular networking job, download the clustered spectra (.MGF file). Click on Download Clustered Spectra as MGF. If you run feature-based molecular network, uses the same MS/MS spectral summary file (.MGF file).</li> </ol> <p></p> <ol> <li> <p>Upload the MGF file for the clustered spectra or the MS/MS spectral summary, and run a DEREPLICATOR job (see present documentation).</p> </li> <li> <p>When the job is completed click on View Unique Peptides.</p> </li> <li> <p>Click on View unique Peptide, or View all PSM (Peptide-Spectrum Matches). On the annotation results page, click on download with Download button and unzip the file on your computer.</p> </li> </ol> <p></p> <ol> <li> <p>Open the corresponding molecular networks with Cytoscape. See documentation here, and here for Feature-Based Molecular Networking</p> </li> <li> <p>In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above).</p> </li> <li> <p>In the preview window, click on the Scan header to set the meaning to Key. The value in that column corresponds to the \"shared name\" or \"ClusterIdx\" in the molecular network.</p> </li> </ol> <p></p> <ol> <li> <p>Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported).</p> </li> <li> <p>Change the column header name from SMILES into SMILES_derepl</p> </li> <li> <p>Click on import. Now the attribute table is mapped into the networks.</p> </li> <li> <p>The structures can be viewed directly into Cytoscape with the ChemViz2 plugin. See the Network Annotation Propagation documentation for more details.</p> </li> <li> <p>Explore Dereplicator annotations in the network with the select function of Cytoscape.</p> </li> </ol>"},{"location":"dereplicator/#step-8-validate","title":"STEP 8: VALIDATE","text":"<p>Validate a DEREPLICATOR annotation: More than 60% of Dereplicator annotations on GNPS Massive datasets (April 2016) were manually curated.</p>"},{"location":"dereplicator/#validating-a-dereplicator-annotation","title":"Validating a DEREPLICATOR annotation:","text":"<p>Ideally the annotation should be validated by comparing the fragmentation spectra and other properties (retention time, cross-colision section, ...) of an authentic reference compound analyzed in the same LC-MS/MS conditions. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time). \\ In practice, the confidence in the annotation can be increased by: 1) comparing with a fragmentation spectra obtained in other experimental condition (i.e. other mass spectrometry plateform).\\ 2) using other computational annotations tools. \\ 3) examining if the main fragment ions are consistent with the structure proposed by the DEREPLICATOR. 4) if genome sequence(s) are available, observing a biosynthetic gene cluster associated with the molecule.</p> <p>In any cases the following are recommended: - The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...)</p> <ul> <li> <p>The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done MZmine2.</p> </li> <li> <p>The molecular formula should be verified. Sirius can be used for that (only for single-charged compounds).</p> </li> <li> <p>Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the sample.</p> </li> </ul>"},{"location":"dereplicator/#other-in-silico-database-search-tools","title":"Other in silico database search tools","text":"<ul> <li>The DEREPLICATOR+ and molDiscovery are advanced in silico database search tool that can handle more bond types and search general metabolites in addition to short peptides. See the documentations of DEREPLICATOR+ and MOLDISCOVERY.</li> </ul>"},{"location":"dereplicator/#contribute-to-the-documentation","title":"Contribute to the Documentation","text":"<ul> <li>For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository.</li> <li>To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".</li> </ul>"},{"location":"dereplicator/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (6.1%), lfnothias (84.98%), liucaomics (8.92%)</p>"},{"location":"developers/","title":"For Developers","text":"<p>If you're a developer, computer scientist, bioinformatician, or software enthusiast and you want to contribute to GNPS, we'd love to have your support. Given security concerns of running on a shared cluster, we didn't want to fully close off the development from outside of UC San Diego, but rather have the following avenues of development to engage the community.</p>"},{"location":"developers/#adding-functionality-to-existing-workflows","title":"Adding Functionality to Existing Workflows","text":"<p>This is the most straightforward process as it simply entails modifying/adding new code to existing GNPS workflows. Almost all GNPS workflows are open source and can be found on GitHub. Let us know if there is a new issue or feature you want to address and we'll work together to get you up to speed, merge the code, test it on our development servers, and eventually promote it to GNPS.  </p>"},{"location":"developers/#developing-new-workflows-for-new-tools","title":"Developing New Workflows For New Tools","text":"<p>This pathway is a bit more difficult as it requires writing ProteoSAFe workflow files. What we've found is likely the simplest path forward to start is reaching out once you have a single commandline tool ready along with the dependencies you need (e.g. requirements.txt, conda-environment.yml, etc.) and we can use our boiler plate workflow template to get your workflow onto our beta server. Due to security restrictions on our server, you won't be able to deploy directly, but we will be able to help you with those deployments. </p> <p>Feel free to contact us to discuss what you want to get into GNPS and then we'll do the fun thing and run that tool over all public data, what the worst that could happen? </p>"},{"location":"developers/#gnps-workflows-release-cycle","title":"GNPS Workflows Release Cycle","text":"<p>We strive to build new and better tools and thus release new versions on a regular cadence. Our current goal is to release new versions around the start of each month, with the understanding that some deadlines will slip due to additional needs for testing. If you would like to contribute code, please open a pull request in the appropriate repository and have a dialog with us about what is needed for testing, validation, and style. We will be instituting a soft code freeze 10 days prior to our planned releases to make sure our testing is thorough without any last minute destabilizing changes. </p>"},{"location":"downloadlibraries/","title":"Downloading Reference Spectral Libraries","text":""},{"location":"downloadlibraries/#downloading-gnps-spectral-libraries","title":"Downloading GNPS Spectral Libraries","text":"<p>Download GNPS Spectral libraries on each of the spectral library pages.</p> <p></p> <p>Click the download icon to get an MGF version of the spectral library.</p> <p>With a full list that can be found here.</p> MGF Format for GNPS Library Spectrum <pre><code>BEGIN IONS\nPEPMASS=561.365\nCHARGE=1\nMSLEVEL=2\nSOURCE_INSTRUMENT=DI-ESI-LTQ-FT-ICR\nFILENAME=Desferrioxamine_B_1H_561_3647.mzXML\nSEQ=*..*\nIONMODE=Positive\nORGANISM=GNPS-LIBRARY\nNAME=Desferrioxamine B M+H\nPI=Dorrestein\nDATACOLLECTOR=J Watrous\nSMILES=N/A\nINCHI=N/A\nINCHIAUX=N/A\nPUBMED=N/A\nSUBMITUSER=jdwatrou\nTAGS=\nLIBRARYQUALITY=3\nSPECTRUMID=CCMSLIB00000072100\nSCANS=1\n161.0   2.216415\n161.27272   3.386504\n165.181824  94.756683\n166.272736  38.394264\n167.0   0.407026\n168.363632  4.767616\n169.272736  1.753857\n170.363632  3.976861\n171.181824  1.136681\n172.181824  0.95803\n175.090912  0.973687\n177.363632  0.904491\n181.181824  0.374121\n181.454544  1.961724\n182.363632  1.306631\n183.272736  162.821075\n184.272736  3.942838\n185.272736  7.338296\n186.363632  1.208049\n190.181824  1.380652\n190.545456  0.753061\n191.0   0.477648\nEND IONS\n</code></pre>"},{"location":"downloadlibraries/#license","title":"License","text":"<p>All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license.</p> <p>Third party libraries imported may not conform to the CC BY license and should be verified by users. </p>"},{"location":"downloadlibraries/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"faq/","title":"Frequently Asked Questions","text":""},{"location":"faq/#gnps-account","title":"GNPS Account","text":"<p>I've forgotten my password, what should I do?</p> <p>If you remember your username, please send an email to ccms-web@cs.ucsd.edu and state your username and request a password reset. </p>"},{"location":"faq/#data-privacy","title":"Data Privacy","text":"<p>Is the data I upload to analyze publicly visible?</p> <p>Data you upload to analyze at GNPS will remain private unless you explicitly make it public. The two ways to make your data public are to create MassIVE datasets that make entire datasets public or add individual annotated MS/MS spectra to GNPS spectral libraries.</p> <p>Will MassIVE datasets that I create be public by default?</p> <p>No, when creating a MassIVE dataset, it is not public by default. On the input form page, you are able to set a password to access the MassIVE dataset. There is a Make Public link to make your dataset open to the public and documentation can be found here here. Such a feature is very useful because users can create a MassIVE dataset prior to publication submission that is private and password protected. The MassIVE dataset link can be provided to reviewers along with the password so to provide better transparency and increase probability of manuscript acceptance.</p> <p>Will my GNPS Analysis Tasks be public?</p> <p>No, by default, when you run an analysis at GNPS (e.g. Molecular Networking) that task will be private only to you. Each task is identified by this 32 task identifier (you can find it in the URL). If you share the URL with a collaborator, they will be able to visualize the results and explore the analysis. We recommend putting these URLs for task analyses in the methods section of your manuscripts. </p>"},{"location":"faq/#data-organization","title":"Data Organization","text":"<p>How does the MassIVE data differ from the GNPS spectral libraries?</p> <p>MassIVE datasets consist of raw data. GNPS spectral libraries consist of spectra that have been individually assigned an identification.</p>"},{"location":"faq/#spectral-libraries","title":"Spectral Libraries","text":"<p>How do I get access to the public spectral libraries?</p> <p>They will be shared with you by default and selected automatically when performing an analysis that requires spectral libraries. This is all included in shared user speclibs. If it does not show up, then do the following.</p> <p>On the select input files popup, click on the shared files tab, and enter speclibs as an import share.</p> <p></p> <p>Can I create my own private spectral libraries?</p> <p>Yes, but it is not recommended and we create these private libraries as a path to making them public. Please contact administrators for further details.</p>"},{"location":"faq/#analyzing-data","title":"Analyzing Data","text":"<p>Can I select more than one file at a time for each group in molecular networking?</p> <p>Yes. Within each group you can select multiple files, even folders of spectra. Simply highlight the multiple files/folders you want to select and then add to the appropriate group.</p> <p>What are the advantages and disadvantages of FBMN vs Classical Molecular Networking</p> <p>Feature Based Molecular Networking (FBMN) provides the following advantages: Area under the curve quantification, Isomer resolution, Filtration of MS/MS that come from chromatographic features, Potential inclusion of other types of edges (e.g. IIN) However, the downsides include: Requires feature finding pre-processing (e.g. MZMine2), Less sensitive to consider all MS/MS than classical, More parameters to set</p> <p>My Classical Molecular Networking Keeps Failing with the Error - Forcibly terminated by the computational backend</p> <p>This is most likely the workflow uses too much memory and you have too many spectra in your analysis. Simply increase the minimum cluster size from the default 2, to either 3 or 4. This will be less sensitive but it'll make possible for you analyze your data as a first pass. </p>"},{"location":"faq/#mass-spectrometry-types","title":"Mass Spectrometry Types","text":"<p>Does GNPS support data independent acquisition (DIA) data types such as MSe and SWATH?</p> <p>GNPS natively does not support these types of data with large isolation windows. We recommend that these data be preprocessed so that individual molecule fragmentation can be deconvoluted with tool such as DIA-Umpire or Progenesis QI (MSe) and you can find our documentation here.</p>"},{"location":"faq/#gnps-account_1","title":"GNPS Account","text":"<p>How can I reset my password</p> <p>For now please go ahead and contact our admins via this page.</p>"},{"location":"faq/#gnps-lexicon","title":"GNPS Lexicon","text":"<p>What is the definition of that word in the context of GNPS ?</p> <p>Please refer to the GNPS lexicon page. To suggest additional definition, please open up an issue on our GitHub.</p>"},{"location":"faq/#browser-support","title":"Browser Support","text":"<p>What Browsers Does GNPS Support</p> <p>We officially test on the latest Chrome browser. Other browsers, e.g. Firefox, Internet Explorer, Opera, Edge, are not officially supported but likely will not have any issues with GNPS.</p>"},{"location":"faq/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (92.96%), lfnothias (7.04%)</p>"},{"location":"fbmn-iin-msdial/","title":"IIN with MS-DIAL","text":""},{"location":"fbmn-iin-msdial/#introduction","title":"Introduction","text":"<p>In MS-DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. After the processing the Supplementary Pairs file can be exported and used for IIN.</p>"},{"location":"fbmn-iin-msdial/#development-and-installation","title":"Development and Installation","text":"<p>Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL.</p>"},{"location":"fbmn-iin-msdial/#citations","title":"Citations","text":"<p>This work builds on the efforts of our many colleagues, please cite their work:</p> <p>For IIMN: Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking for mass spectrometry-based metabolomics in the GNPS Environment. Nat. Comm. 12, 3832 (2021).</p> <p>For FBMN: Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>For GNPS: Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>For MS-DIAL 1): Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. &amp; Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015).</p> <p>For MS-DIAL 2): Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. &amp; Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018).</p>"},{"location":"fbmn-iin-msdial/#running-the-fbmn-iin-workflow-with-ms-dial","title":"Running the FBMN IIN workflow with MS-DIAL","text":"<p>The integration of MS-DIAL and IIN is supported since version 4.1 and support for FBMN from version 2.99. After a standard processing data with MS-DIAL, the \u201cAlignment results\u201d can be exported for IIN analysis.</p> <p>Step 1: Process your non-targeted LC-MS/MS data with MS-DIAL following the FBMN documentation guidelines.</p> <p>Step 2: After processing your data export the Supplementary Annotation/Pairs files from the \"Alignement results\" using the option \u201cGNPS export\u201d and \u201cExport GNPS edge files\u201d.</p> <p>Step 3: Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with MS-DIAL</p> <p>For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation.</p>"},{"location":"fbmn-iin-msdial/#tutorials","title":"Tutorials","text":"<p>See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample.</p>"},{"location":"fbmn-iin-msdial/#to-do-notes","title":"TO DO NOTES","text":"<ul> <li>Screenshots when new release available</li> <li>Batch file for the export ?</li> <li>Cytoscape documentation</li> <li>Tutorial IIN</li> </ul>"},{"location":"fbmn-iin-msdial/#acknowledgements","title":"Acknowledgements","text":"<p>This integration was made possible by Hiroshi Tsugawa (Riken).</p>"},{"location":"fbmn-iin-msdial/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (96.36%), lfnothias (3.64%)</p>"},{"location":"fbmn-iin-mzmine/","title":"IIN with MZmine","text":""},{"location":"fbmn-iin-mzmine/#introduction","title":"Introduction","text":"<p>Ion Identity Network (IIN) is a computational method based on LC-MS peak shape correlation analysis that allows to correlate different ions, including adducts, multimers and in-source fragmentation, that can be formed from the same molecule during the ESI ionization. This is an advanced option one might choose while processing data for Feature Based Molecular Network (FBMN). The supported tools for IIN are: MZmine, XCMS, and MS-DIAL.</p> <p>You can find more information about IIN in this playlist.</p>"},{"location":"fbmn-iin-mzmine/#development-and-installation","title":"Development and Installation","text":"<p>For Ion Identity Network with MZmine, download the MZmine software (MZmine-2.37.corr17.7_kai_merge2 version) available here.</p>"},{"location":"fbmn-iin-mzmine/#data-processing-with-mzmine-for-fbmn-and-iin","title":"Data Processing with MZmine for FBMN and IIN","text":"<p>The sequence of steps for data processing in MZmine are mostly shared with the data processing steps with MZmine for FBMN (from step 1. data import, to 7. gap filling / 8. normalization), however, before exporting to GNPS, some steps for IIN should be included to obtain edge annotations. The scheme below shows the steps involved in the IIN workflow with MZmine.</p> <p></p>"},{"location":"fbmn-iin-mzmine/#processing-steps-for-iin-with-mzmine","title":"Processing steps for IIN with MZmine","text":""},{"location":"fbmn-iin-mzmine/#start-the-process-with-fbmn-steps","title":"Start the process with FBMN steps","text":"<p>Process you data similarly to steps 1 to 7/8 of the FBMN workflow.</p>"},{"location":"fbmn-iin-mzmine/#perform-iin-specific-steps","title":"Perform IIN specific steps","text":""},{"location":"fbmn-iin-mzmine/#step-9-metacorrelate","title":"Step 9 - metaCorrelate","text":"<p>Once the last step of FBMN has been completed, the \"aligned peaklist\" must be selected to continue with IIN. Start by applying the metaCorrelate module, which will be used to search for correlating ions/features in different samples, scan events and MS levels.</p> <p>Go to Menu: Peak list methods &gt; Row grouping &gt; metaCorrelate.</p> <p></p> <p>Parameters are defined in the pop up window of the module, and information regarding the RT tolerance, mininmum height and noise level should be entered considering the sample set selected and equipment used. Select box \u201cCorrelation grouping\u201d and set the parameters according to what would fit better in the dataset.</p> <p>IMPORTANT: it is not recommended to use less than 5 data points. </p> <p>IMPORTANT: make sure that PEARSON measurement is selected. &lt;-- check it.</p> <p></p> <p>Click on OK and a new feature list will be generated on the right panel.</p> <p>At this point, the IIN should be built (it will be searching for adducts, in-source fragments and clusters in the dataset).</p>"},{"location":"fbmn-iin-mzmine/#step-10-ion-identity-networking","title":"Step 10 - Ion Identity Networking","text":"<p>Go to Menu: Peak list methods &gt; Identification &gt; Ion Identity Networks &gt; Ion Identity Networking. [IMPORTANT]: Make sure the aligned peaklist process with the metaCorrelate module is selected.</p> <p></p> <p>The \u201cCheck\u201d parameter presents three options that can be used to check for adduct identities. The ion identity library can be used to select the adducts of interest and the molecules\u2019 modifications. Click on \u201cReset Positive/Negative\u201d and on \u201cReset Mods\u201d to have access to the list available in MZmine. At this point, the ones more appropriate for each dataset should be selected.</p> <p></p> <p>In the case that, in addition to the most common adducts ([M+Na]+, [M+K]+, [M+H]+, [2M+H]+, etc), more specific ions are observed in the dataset and are not included in the software\u2019s list, it is possible to create new ones by clicking in \u201cAdd\u2026\u201d and filling the required information. It is also possible to combine adducts to create a new customized one clicking in \u201cCombine\u2026\u201d. In the case of a combination, the adducts present in the list should be added to the right panel, selected and then added again to the previous list.</p> <p></p> <p>This step can performed multiple times to append annotations from modifications that might be more specific ([M-H2O], [M-CO], etc) with different parameters.</p>"},{"location":"fbmn-iin-mzmine/#step-11-feature-export-for-gnps","title":"Step 11 - Feature export for GNPS:","text":"<p>In this step, the 3 files required for running a IIN job on GNPS are going to be exported. It is similar to the exporting step with the FBMN workflow. The three files are: \u00b7      The feature quantification table (.CSV file format), with LC-MS feature intensities; \u00b7      The MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum; \u00b7      The annotation edge file (.CSV file), containing the additional edges annotated by IIN.</p> <p>Go to Menu: Peak list methods &gt; Export/Import &gt; Export for/Submit to GNPS.</p> <p>Note that you can use the \"Submit to GNPS\" option to start automatically a job on GNPS. See the FBMN documentation for more details. </p> <p></p> <p>Name the filename in .mgf format and choose filter rows only with MS2 data.</p> <p></p> <p>[IMPORTANT]: The additional steps included in MZmine for IIN are currently note saved when you save your project, therefore, once the data was processed, you have to export and save the files, otherwise after reopening the project in the futur, it will possible to export only the feature quantification table (.CSV file format), and the MS/MS spectral summary (.MGF file).</p>"},{"location":"fbmn-iin-mzmine/#step-12-run-the-fbmnxiin-job-on-gnps","title":"Step 12 - Run the FBMNxIIN job on GNPS","text":"<p>If you used the option \"Submit to GNPS\" your job should have been launched automatically on GNPS. If needed, clone the job with different parameters.  Alternatively, you can upload your files via FTP and configure an FBMNxIIN job on GNPS.</p>"},{"location":"fbmn-iin-mzmine/#step-13-visualization-in-cytoscape","title":"Step 13 - Visualization in Cytoscape","text":"<p>The additional edges that IIN identified as adducts and in-source modifications are visualized in Cytoscape. See the the main FBMNxIIN page for more details.</p>"},{"location":"fbmn-iin-mzmine/#citations","title":"Citations","text":"<p>This work builds on the efforts of our many colleagues, please cite their work:</p> <p>For IIMN: Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking for mass spectrometry-based metabolomics in the GNPS Environment. Nat. Comm. 12, 3832 (2021).</p> <p>For FBMN: Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p>"},{"location":"fbmn-iin-mzmine/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (97.09%), lfnothias (2.91%)</p>"},{"location":"fbmn-iin-xcms/","title":"IIN with XCMS-CAMERA","text":""},{"location":"fbmn-iin-xcms/#introduction","title":"Introduction","text":"<p>The use of XCMS and CAMERA to generate IIN relies on two custom utility functions (<code>getFeatureAnnotations</code> and <code>getEdgelist</code>) to extract and export MS1 based feature and edge annotations (i.e. grouping of features to adduct/isotope groups of the same compound). In addition, the utility function <code>formatSpectraForGNPS</code> is also used to export MS2 spectra.</p>"},{"location":"fbmn-iin-xcms/#development","title":"Development","text":"<p>These custom functions are available in the GitHub repository https://github.com/jorainer/xcms-gnps-tools.</p> <p>Representative R-markdown documents and python scripts are available on http://ccms-ucsd.github.io/GNPSDocumentation/fbmn-iin-xcms. </p> <p>XCMS3 GitHub repository: https://github.com/sneumann/xcms This work builds on the efforts of our many colleagues, please cite their work: </p>"},{"location":"fbmn-iin-xcms/#citations","title":"Citations","text":"<p>For IIMN: Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking for mass spectrometry-based metabolomics in the GNPS Environment. Nat. Comm. 12, 3832 (2021).</p> <p>For FBMN: Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>For GNPS: Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>For XCMS 1) Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008).</p> <p>For XCMS 2) Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006).</p> <p>For CAMERA 1): Kuhl, C., Tautenhahn, R., B\u00f6ttcher, C., Larson, T. R. &amp; Neumann, S. CAMERA: an integrated strategy for compound spectra extraction and annotation of liquid chromatography/mass spectrometry data sets. Anal. Chem. 84, 283\u2013289 (2012)</p> <p>For CAMERA 2): Treutler, H. &amp; Neumann, S. Prediction, Detection, and Validation of Isotope Clusters in Mass Spectrometry Data. Metabolites 6, (2016)</p>"},{"location":"fbmn-iin-xcms/#running-the-fbmn-iin-workflow-with-xcms-camera","title":"Running the FBMN IIN workflow with XCMS-CAMERA","text":"<p>Step 1: Process your non-targeted LC-MS/MS data with XCMS-CAMERA following the FBMN documentation guidelines.</p> <p>Step 2: Export the Supplementary Annotations/Pairs:</p> <p>The use of XCMS and CAMERA to generate IIN relies on two custom utility functions:</p> <p><code>getFeatureAnnotations</code>: extracts and exports MS1 based feature annotation. It contains the adduct/isotope annotations generated by CAMERA.</p> <p><code>getEdgelist</code>: extracts and exports the Supplementary Pairs file that contains related pairs (i.e. from peak shape correlation analysis, etc) . </p> <p>Note that the utility function <code>formatSpectraForGNPS</code> of the FBMN must also be used to export MS2 spectra as MGF.</p> <p>Step 3: Run a FBMN job and add the Supplementary Pairs file following the main IIN documentation See an example of job with IIN job with XCMS-CAMERA</p> <p>For visualizing results in Cytoscape. Please refer to the main FBMNxIIN documentation.</p> <p>See our tutorial below for detailed example.</p>"},{"location":"fbmn-iin-xcms/#tutorials","title":"Tutorials","text":"<p>See our FBMN IIN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/.</p>"},{"location":"fbmn-iin-xcms/#acknowledgements","title":"Acknowledgements","text":"<p>This integration was made possible by Johannes Rainer (Eurac Research) and Mar Garcia-Aloy (Eurac Research). </p>"},{"location":"fbmn-iin-xcms/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (95.71%), lfnothias (4.29%)</p>"},{"location":"fbmn-iin/","title":"Ion Identity Molecular Networking (IIMN)","text":""},{"location":"fbmn-iin/#introduction","title":"Introduction","text":"<p>The Ion Identity Molecular Networking (IIMN) workflow complements the Feature-Based Molecular Networking (FBMN) by grouping MS2 spectra not only through similarity of MS2 spectra, but also of MS2 spectra whose precursor ions fulfill the retention time, peak shape, user-defined parameters. It enables the visualization of patterns of ion species and brings together subnetwork from the same molecule to create an ion identity molecular family. IIN can be performed with MZmine, XCMS-CAMERA, or MS-DIAL.</p> <p>You can find more information about IIN in this playlist and this video from an IIN Workshop. </p>"},{"location":"fbmn-iin/#citations","title":"Citations","text":"<p>This work builds on the efforts of our many colleagues, please cite their work:</p> <p>For IIMN: Schmid R., Petras D., Nothias LF, et al. Ion Identity Molecular Networking for mass spectrometry-based metabolomics in the GNPS Environment. Nat. Comm. 12, 3832 (2021).</p> <p>For FBMN: Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>For GNPS: Wang, M., Carver J, Phelan V.V., et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>And the tools you used to process your data.</p>"},{"location":"fbmn-iin/#running-the-iimn-workflow","title":"Running the IIMN workflow","text":"<p>The Ion Identity Networking workflow is run throught the FBMN workflow by providing Supplementary Annotation/Pairs files in the \"Advanced Extras\" panel of the standard FBMN workflow interface.</p> <p></p> <p>Alternatively, the quickstart interface for FBMN  can also be used:</p> <p></p> <p>Note that multiple Supplementary Pairs files can specified. Their content will be added.</p>"},{"location":"fbmn-iin/#generating-supplementary-pairs","title":"Generating Supplementary Pairs","text":"<p>The Supplementary Annotations/Pairs files can be generated with the following software:</p> <ul> <li>MZmine: See the documentation</li> <li>XCMS-CAMERA: See the documentation</li> <li>MS-DIAL: See the documentation</li> </ul> <p>Alternatively, the results of other software could be used as long as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file.</p>"},{"location":"fbmn-iin/#supplementary-pairs","title":"Supplementary pairs","text":"<p>The Supplementary Pairs is a .CSV format file (coma separated), and must contains the following columns:</p> Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation <p>See an example of the Supplementary Pairs used in the Ion Identity Networking (IIN) workflow</p> <p></p>"},{"location":"fbmn-iin/#iimn-networks-with-collapsed-ion-identity-edges","title":"IIMN networks with collapsed ion identity edges","text":"<p>The IIMN workflow on GNPS generates two network types and provides downloads as graphml for downstream analysis and  visualization. Both graphml networks are available in the \"download cytoscape data\" zip file provided on the job   results page. The standard network contains MS\u00b2 similarity edges from molecular networking combined with MS\u00b9 ion   identity networking edges (see a) in figure below). The alternative network b) collapses all ion identities    that originate from the same neutral molecule (connected by red edges) into a single \"molecular\" node. The example     below visualizes the relative ion abundances as pie charts on the collapsed nodes and uses the summed intensity      for the node sizes. The collapsed nodes inherit the \"shared name\" of one of the removed ion identity child nodes.      This node column can be used for a comparison between IIMN networks with or without collapsing or to compare       them to FBMN networks.  </p> <p></p>"},{"location":"fbmn-iin/#exploring-the-iimn-workflow-in-cytoscape","title":"Exploring the IIMN workflow in Cytoscape","text":"<p>The additional edges that IIMN identified as adducts and in-source modifications are visualized in Cytoscape.</p> <p>The different types of ions can be observed in different node colors if the Best Ion option is chosen in Fill Color, and Discrete Mapping type is selected.</p> <p></p> <p>The lines connecting the nodes can be deferred if the connection represents a cosine or a MS1 annotation from INN. In the Line Type option, select EdgeType with Discrete Mapping.</p> <p></p> <p>The annotation of the adducts or in-source fragmentations connected in the MS1 level can be annotated in the edges connecting the corresponding nodes. In the Label option, select Edge Annotation with Passthrough Mapping.</p> <p></p> <p>Specific types of adducts\u2019 edges can be colored differently by selecting Stroke Color (Unselected) section, and choosing Edge Annotation and Discrete Mapping.</p> <p></p>"},{"location":"fbmn-iin/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (4.04%), lfnothias (21.21%), Daniel Petras (61.62%), Robin Schmid (13.13%)</p>"},{"location":"featurebasedmolecularnetworking-cytoscape/","title":"FBMN export to Cytoscape","text":""},{"location":"featurebasedmolecularnetworking-cytoscape/#introduction-to-fbmn","title":"Introduction to FBMN","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>The documentation for FBMN using Cytoscape is provided below.</p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#feature-based-molecular-networking-in-cytoscape","title":"Feature-Based Molecular Networking in Cytoscape","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. Cytoscape is available for download from here. The instructions were created with Cytoscape 3.7.</p> <p>Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13(11), 2498-2504. doi:10.1101/gr.1239303</p> <p>The citations from the mass spectrometry processing tools you used [MZmine2, OpenMS, MS-DIAL, MetaboScape,XCMS, and mzTab-M format.   </p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#downloading-cytoscape-files-from-gnps","title":"Downloading Cytoscape Files from GNPS","text":"<p>The first step is to download the input file (.graphML file format) for import into Cytoscape. From the job status page in the Feature-Based Molecular Networking workflow, click on Download Cytoscape Data. Save and unzip the downloaded file.  </p> <p></p> <p>Unzip the file and the resulting folder will look like this:</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#import-the-molecular-network-in-cytoscape","title":"Import the molecular network in Cytoscape","text":"<p>To import the network file into Cytoscape: *    in Cytoscape click on Import Network from File System and then choose the .graphml file.  *   Alternatively, you can drag and drop the .graphml file into Cytoscape.</p> <p>The imported network will be displayed in the main window. In the Control Panel (left panel), in the Network tab, rename the network with right-click and select Rename Network.</p> <p></p> <p>You can import the table file into Cytoscape. Click Import Table from File System, navigate to the \u201cDB_result\u201d folder and select the .csv file. Lastly, click OK in the opened window.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#import-supplementary-annotations-in-cytoscape","title":"Import supplementary annotations in Cytoscape","text":"<p>Cytoscape allows to map additional annotations such as those produced by other workflows on GNPS. See the documentation for DEREPLICATOR, NAP, MS2LDA, MolNetEnhancer for more details.</p> <p>The FBMN workflow makes possible to map the annotations (molecular formula, cross collision section) made by the processing software used for FBMN (MZmine, XCMS, MetaboScape, MS-DIAL, Progenesis QI), or other third party software tool that processed the same .MGF/.MSP file. In addition it is possible to import any feature metadata and statistical results you are interested in.  </p> <p>Regardless of the tool and information to map, the importing procedure follows these steps:</p> <ul> <li>Obtain the annotation table that needs to be mapped. This table must contain a column that contains the identifier that matches the name column in the network. This identifier corresponds to the SCANS or FEATURE_ID in the .MGF/.MSP file. </li> <li>Verify that the identifier are indeed matching between the network and table.</li> <li>Import the table in Cytoscape. Go to Menu / Import / Import Table from File System.</li> <li>In the preview window, click on the header of the identifier column to set the meaning to Key (a key logo shows up)</li> <li>Import the table and map the annotation into the molecular network. [IMPORTANT] If columns already exist in the network, they will be replaced by the imported table ! Rename the header(s) of the imported table if necessary.</li> <li>Explore the annotation in the molecular network (see below).</li> </ul>"},{"location":"featurebasedmolecularnetworking-cytoscape/#rotation-of-the-network","title":"Rotation of the Network","text":"<p>To rotate the entire molecular network choose the Layout tab and click Node Layout tool. In the opened window, uncheck the Selected Only box to rotate the entire network and move the blue bar to 90. You can also select specific subnetworks and rotate them by checking Selected only.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#table-panel-visualization-data","title":"Table Panel Visualization Data","text":"<p>For advanced network visualisation and data analysis, you may click on Table Panel and select node or edge column information (network metadata) to be displayed. For example,  in the Node Table, you can select the \"Compound_name\" (name of the spectral library match), the \"parent mass\" (precursor ion mass), the \"RTconsensus\" (retention time for the node), \"MZErrorPPM\" (ppm error with the spectral library match) and any attributes of interest in your in Node Table (node metadata).</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#create-a-new-style","title":"Create a New Style","text":"<p>A style can be created by clicking on Create New Style and a style name can be specified (e.g. \"High vs Low Plant Consumer\"). The created style can be exported by going in the main menu to File &gt; Export &gt; Styles to File, or a previous style can be imported by clicking on Import &gt; Style From File in the File menu. </p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#edit-the-style","title":"Edit the Style","text":""},{"location":"featurebasedmolecularnetworking-cytoscape/#node-styling","title":"Node Styling","text":""},{"location":"featurebasedmolecularnetworking-cytoscape/#label","title":"Label","text":"<p>In the  Control Panel (left panel), go to the Style tab. Within the Node sub-tab, the properties of the node style can be modified. For example, you can choose the precursor mass as node label for the molecular networks [you need to select  Passthrough Mapping as the Mapping Type]. Go to Properties to display more style properties. </p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#size","title":"Size","text":"<p>In order to match the label size to the node size, go into Style panel, at Label Front Size option, select \u201cSumPeakIntensity\u201d or the \u201cnumber of spectra\u201d (as selected for node size) as Column and Continuous Mapping as Mapping Type. As described above, begin by setting the value for minimum and maximum node size value with the button Set Min and Max, then choose the same continuous mapping as used for the node size.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#pie-charts","title":"Pie charts","text":"<p>If you used a metadata table, the node table will contain group columns for each group specified in the metadata table. The group columns starts with \"_GNPSGROUP__\" and will consist of the mean (default and recommended) or summed intensity of the ion across the group's samples based on the MS1 feature table (LC-MS peak area). This group columns can be used to visualize groups as pie charts in the network.</p> <p>To start visualizing pie charts on node for the groups, click on the left box (Def column) for the Image/Chart1 node property. Choose the Charts tab and select the Pie Chart Icon. Now, in the Data sub-tab, select the group columns you are interested in visualizing in the Select Columns box (e.g. \"GNPSGROUP: Less_than 5\" (low plant consumers) and \"GNPSGROUP:More_than_30\" (high plant consumers)). Click on Options (under Data) to choose colors for the Groups (groups are numbered based on their position in the Selected Columns box). Click Apply when you are done with your selection.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#edge-styling","title":"Edge Styling","text":""},{"location":"featurebasedmolecularnetworking-cytoscape/#width","title":"Width","text":"<p>To aid in the visualization of individual node similarities within a cluster, the cosine score is displayed as an edge. The cosine scores define similarity between two MS/MS spectra. Scores ranging from 0 (totally dissimilar) to 1 (identical). The edge thickness can be used to visualize the cosine score value between related nodes. For this we will use the cosine-score-based continuous mapping for the edge thickness. Go to the Style tab, and the Edge sub-tab. From the Width property drop down menu, select \"cosine_score\" for the Column and Continuous Mapping for the Mapping Type. Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Optimise the minimum and maximum value for the continuous mapping.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#mining-information-in-the-network","title":"Mining information in the network","text":""},{"location":"featurebasedmolecularnetworking-cytoscape/#sub-network-creation","title":"Sub-network creation","text":"<p>To separate one or multilple specific desired network(s), press \u201cctrl\u201d or \u201ccommand\u201d (windows or MacOS, respectively) at the same time drag the mouse to select the network(s). Then, click on the symbol as shown below. Automatically, the sub-network is created. For going back to the main network, go into the Control Panel, select Network and then choose the main network.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#the-toolbar-function","title":"The Toolbar function","text":"<p>The Cytoscape's toolbar can be used to search nodes or edge metadata (e.g., \"shared name\"). Note that this feature is very slow, especially with large networks. The list of nodes in the Note Table will be updated. You can select nodes of interest, perform right-click for Select nodes and then click on the + magnifier in the main menu to perform a zoom on the selected node.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#the-select-function","title":"The Select function","text":"<p>The Select function can be used to create a selection of nodes and/or edges based on their metadata and/or network topology. Go to the Control Panel and click on Select tab. Then, click on the \"+\" button and choose between column, degree, or topology filter(s) to add different filter properties. The \"x\" button deletes the corresponding property. For each filter property, various options are provided depending on the column type (numeric column:  is, is not, between; for string column: contains and does not contain. Here, we create annotation filter that selects nodes by the spectral library match with 10 ppm maximum error between precursor ions (\"MZErrorPPM\" from 0 to 10). By default, the filter should be automatically applied to the network, otherwise click Apply. Under the Filter tab, the number of nodes meeting the filter property variables (here 160 nodes) will be selected. These nodes are automatically selected and highlighted in yellow in the network.</p> <p>Filters are very powerful network analysis tools that can be modified, saved and exported. To rename, remove, create a new filter, or other options, click on the right button beside the Filter list menu. The list of available Filters will appear in the top part of the panel. </p> <p>For more details and options, follow this link. </p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#bypass-mode-for-style-property","title":"Bypass mode for style property","text":"<p>A bypass could be applied to selected nodes and/or edged by going into the Style panel, and clicking on the Byp. column for the property you want to change such as Border paint and Border Width. For modifying or removing the bypass property, select the nodes of interest, click right and choose Remove Bypass or set Bypass option. </p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#drawing-structure-in-nodes","title":"Drawing structure in nodes","text":"<p>The chemical structures can be visualized in the node using chemViz2 bioinformatics plugin for Cytoscape (http://www.cgl.ucsf.edu/cytoscape/chemViz/). First, the chemViz2 plugin has to be installed. To do that, go to the Apps tab in the main menu, then open App Manager. In the Install Apps tab click on chemViz2 and install it by clicking Install. For more information about chemViz2, refer to the information available on the chemViz2 website. </p> <p></p> <p>Once installed, chemViz2 can be used to display chemical structures on nodes. First, you will have to verify that chemViz2 is properly parameterized. Select Apps in the main menu, go to Cheminformatics Tools and click Settings. In the Attribute Settings section, choose node.Smiles for SMILES Attribute and/or node.INCHI for InCHI Attribute. Apply it by clicking OK. </p> <p></p> <p>Finally, to draw structures in the nodes, return to Apps &gt; Cheminformatics Tools &gt; Paint Structures and select on all nodes or on selected nodes. Visualize the results. If needed, create a dedicated style to facilitate structure visualization. </p> <p></p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#mapping-other-node-information","title":"Mapping other node information","text":"<p>Cytoscape enables to map informations obtained from the other workflows/softwares. Visualize this annotation by creating novel styles and changing its properties.</p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#video-tutorial-fbmn-and-cytoscape","title":"Video Tutorial FBMN and Cytoscape","text":"<p>Our tutorial on running the FBMN analysis on GNPS including a Cytoscape demo.</p> <p>See our tutorial on using MZmine2 for the FBMN analysis of a cohort from the American Gut Project.</p>"},{"location":"featurebasedmolecularnetworking-cytoscape/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-cytoscape/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (5.75%), lfnothias (36.21%), irinakoester (50.0%), Ivan Protsyuk (8.05%)</p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/","title":"FBMN with MetaboScape","text":""},{"location":"featurebasedmolecularnetworking-with-metaboscape/#introduction","title":"Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below we describe how to use MetaboScape with the FBMN workflow on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#citations-and-development","title":"Citations and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#using-metaboscape-and-fbmn","title":"Using MetaboScape and FBMN","text":"<p>MetaboScape can be used to process LC-MS/MS Bruker Daltonics data files (i.e. *.d files). After the processing with MetaboScape, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the Superquick FBMN start page or the standard interface of the FBMN workflow (you need to be logged in to GNPS first).</p> <p>Requirements:  Install MetaboScape (version 2.0 or higher) and get a valid license.</p> <p>Note</p> <p>If you installed Metaboscape v5.0, then please skip to this section instead.  </p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#a-perform-feature-detection-with-profile-analysis","title":"A. Perform Feature Detection with Profile Analysis","text":""},{"location":"featurebasedmolecularnetworking-with-metaboscape/#nontargeted-lc-msms","title":"Nontargeted LC-MS/MS","text":"<ol> <li>Open Profile Analysis and perform feature detection on your data following Profile Analysis documentation to generate an ion feature bucket table.</li> <li>Define groups and/or attributes to enhance downstream data analysis (see 3.3.4 in the MetaboScape 2.0 tutorial documentation). The groups and/or attributes defined in Profile Analysis will be visualized in the molecular networks using pie chart diagram.</li> <li>IMPORTANT: Create one common group named 'SAMPLE' for all the samples. It will be used for molecular networking visualization.</li> <li>Export the bucket table to MetaboScape (see 3.1 in the MetaboScape 2.0 tutorial documentation).</li> </ol>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#b-use-metaboscape-to-annotate-msms-spectra","title":"B. Use MetaboScape to Annotate MS/MS spectra","text":"<ol> <li>Open MetaboScape.</li> <li>Open the project in MetaboScape (see 3.7 in MetaboScape 2.0 tutorial documentation).</li> <li>Assign MS/MS spectra to the bucket table (see 3.7 in MetaboScape 2.0 tutorial documentation).</li> <li>Sort buckets based on the presence of MS/MS.</li> <li>Select only the buckets that have MS/MS associated with them.</li> <li>Perform Automatic molecular formula generation using SmartFormula (see 3.11.1 in MetaboScape 2.0 tutorial documentation) on these buckets. Make sure to select Selected buckets only.</li> <li>Search molecular formula with SmartFormula.</li> </ol> <ol> <li>Right-click on the bucket table and select Export to GNPS format (.MGF/.CSV).</li> </ol> <ol> <li>Select Export all formats.</li> </ol> <ol> <li>The MS/MS spectral summary (.MGF file) and the feature quantification table (.CSV file) will be used to perform a FBMN job on GNPS (see below).</li> </ol>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#a2-perform-feature-detection-and-annotation-with-metaboscape-v50","title":"A2. Perform Feature Detection and Annotation with Metaboscape v5.0","text":"<ol> <li>Open Metaboscape and setup a new project, add an experiment, and then generate a bucket table containing ion features. This is outlined in the Metaboscape v5.0 User Manual - Section 3.</li> <li>If you wish to annotate your MS2 features using a custom feature list or by SmartFormula, first sort your features by clicking on the MS/MS column.  </li> </ol> <ol> <li>Next, select the buckets that contain MS/MS features  </li> </ol> <ol> <li>Finally perform feature annotation using SmartFormula by clicking on the <code>Annotation</code> button on the left and then setting appropriate parameters for annotation. Don't forget to click <code>Selected Buckets Only</code> at the bottom!  </li> </ol>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#b2-export-your-data-for-gnps-using-metaboscape-v50","title":"B2. Export your data for GNPS using Metaboscape v5.0","text":"<ol> <li>Click on the <code>Export</code> button on the left to export your data for GNPS.  </li> </ol> <ol> <li>Select a target directory to export the files. As shown below, this will export all the features required for GNPS analyses. </li> </ol> <ol> <li>You should have these files once you have successfully exported your bucket table.</li> </ol> <ol> <li>Finally, you will need to modify the <code>msmsonly.csv</code> file to ensure that it meets the requirements of the current FBMN workflow. This will be most likely be automated in a future version of FBMN. You will need a spreadsheet tool like MS Excel. Metaboscape v5.0 exports extra columns depending on the metadata you define during your experiment setup. For example, if you define a metadata grouping as <code>media</code> with different kinds of media, then your excel file will look somewhat similar to this (note the columns boxed in green):</li> </ol> <p>You must edit your file to get rid of these extra columns. In the screenshot shown below, the columns containing your sample intensities start at <code>DQ</code>. You must delete all columns between  <code>MaxIntensity</code> and your first sample column. In the screenshots, delete columns between <code>Column K</code> and <code>Column DQ</code>. Do not delete <code>MaxIntensity</code> or your sample columns! </p> <p>In the example below, delete the columns in red but keep the columns in green.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#processing-ims-data-pasef","title":"Processing IMS Data (PASEF)","text":"<p>The FBMN supports Ion Mobility Spectrometry (IMS) Data acquired in data-dependent acquisition mode using Parallel Accumulation-Serial Fragmentation (PASEF) and processed with MetaboScape (ver. 5.0). Process the IMS data following the MetaboScape documentation and do Export to GNPS format as indicated above. The cross collission section values and other annotations can be subsequently mapped in Cytoscape.</p> <p>See a representative FBMN job made from PASEF data (timsTOF) processed with MetaboScape (ver. 5.0). The Bruker files are available on the following MassIVE deposition (MSV000084402)</p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#c-perform-fbmn-job-on-gnps","title":"C. Perform FBMN Job on GNPS","text":"<p>Go to GNPS and perform a FBMN job. Refer to that documentation. For metadata format supported, see this page</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#d-map-metaboscape-annotation-in-cytoscape","title":"D. Map MetaboScape Annotation in Cytoscape","text":"<p>See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for more details.</p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#step-by-step-tutorial","title":"Step-by-Step Tutorial","text":"<p>See the step-by-step tutorial using MetaboScape 2.0 and the FBMN for the Coffee tutorial (part of the MetaboScape 2.0 documentation).</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-metaboscape/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (6.45%), lfnothias (33.87%), tamhdang (21.77%), Ivan Protsyuk (3.23%), Shaurya Chanana (34.68%)</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/","title":"FBMN with MS-DIAL","text":""},{"location":"featurebasedmolecularnetworking-with-ms-dial/#1-introduction","title":"1. Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below we are describing how to use MS-DIAL with the FBMN workflow on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#2-mass-spectrometry-processing-with-ms-dial","title":"2. Mass spectrometry processing with MS-DIAL","text":"<p>Download the latest version of MS-DIAL software at http://prime.psc.riken.jp/Metabolomics_Software/MS-DIAL.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#citations-and-development","title":"Citations and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>Tsugawa, H., et al A lipidome atlas in MS-DIAL 4. Nat. Biotechnol. 38, 1159\u20131163 (2020).</p> <p>Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. &amp; Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nat. Methods 12, 523-526 (2015).</p> <p>Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. &amp; Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nat. Methods 15, 53-56 (2018).</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#mass-spectrometry-data-processing-with-ms-dial","title":"Mass Spectrometry Data Processing with MS-DIAL","text":"<p>In MS-DIAL, a sequence of steps is performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). MS- DIAL can process LC-MS/MS data performed in non-targeted mode, but also in MSE and now with Ion Mobility Spectrometry. For convenience we also provide a batch file (XML format) that can be imported directly in MS-DIAL.</p> <p>IMPORTANT: MS-DIAL parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples studied. In this page we present a basic guideline for using MS-DIAL with the FBMN on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#documentation","title":"Documentation","text":"<p>Please consult these resources for more details on MS-DIAL processing:</p> <ul> <li>See the MS-DIAL documentation on LC-MS/MS data processing</li> <li>See the MS-DIAL documentation for MSE data processing</li> <li>See the MS-DIAL documentation on Ion Mobility Spectrometry data processing</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#video-presentation-and-tutorials","title":"Video Presentation and Tutorials","text":"<ul> <li>The presentation/tutorial about MS-DIAL from the Leibniz Institute of Plant Biochemistry.</li> <li>This video from the WCMC about MS-DIAL</li> <li>The video tutorial about MS-DIAL processing for FBMN on GNPS.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#convert-your-lc-msms-data-to-open-format","title":"Convert your LC-MS/MS Data to Open Format","text":"<p>MS-DIAL accepts different input formats. Note that we recommend first to convert your files to mzML format before doing MS-DIAL processing. See the documentation here.</p> <p>MS-DIAL releases later than ver 4.60 supports direct import of SCIEX (.wiff, .wiff2), Thermo (.raw). Agilent (.d), and Waters (.raw), so conversion is not required. See the release note</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#processing-steps-for-non-targeted-lc-msms","title":"Processing Steps for non-targeted LC-MS/MS","text":"<p>Below is a walk-through of all the steps</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#1-make-a-new-project","title":"1. Make a New Project","text":"<p>Go to Menu: File / New Project</p> <p></p> <p>Select appropriate parameters (ionization type / method type / data type / ion mode / target omics) for your dataset. Click \u201cNext\u201d.</p> <p>FBMN with Waters MSe data</p> <p>If you are processing with Waters MSe data, set MS method type to 'SWATH-MS or conventional All-ions method' and use this experiment file.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#2-import-files","title":"2. Import Files","text":"<p>Click \u201cbrowse\u201d and open the dropdown menu for file types, and select \u201cmzML file(*.mzml)\u201d. The other available options are .abf or .cdf files.</p> <p>[Note] Data files should be placed at the same folder with the project file.</p> <p>Select files and click \u201cOpen\u201d. You will see the list of selected files. Click \u201cNext\u201d.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#3-set-parameters-data-collection","title":"3. Set Parameters - Data Collection","text":"<p>Set the MS1/MS2 tolerance and data collection parameters. </p> <p>If you are dealing with a large dataset, you can reduce the running time by setting multithreading option in the \u201cAdvanced\u201d menu.</p> <p> </p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#4-set-parameters-peak-detection","title":"4. Set Parameters - Peak Detection","text":"<p>Set the MS1 peak detection parameters. You should set a peak height threshold that is adapted to the mass spectrometer.</p> <p>As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event.</p> <p>If you want to remove some specific ions (e.g. known contaminants), you can make an exclusion list here.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#5-set-parameters-ms2deconvolution","title":"5. Set Parameters - MS2Deconvolution","text":"<p>You should set an appropriate MS/MS abundance cutoff. Make sure to set an intensity threshold representative of the noise level in MS2 spectra.</p> <p>This is typically lower than for MS1. If you have any doubt, set it to 0.</p> <p></p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#6-set-parameters-alignment","title":"6. Set Parameters - Alignment","text":"<p>Set appropriate Retention time / MS1 tolerance for alignment.</p> <p>If you have any quality control (QC) sample data, it is a nice candidate to be the reference file.</p> <p>Click \u201cFinish\u201d, then MS-DIAL will perform all the feature detection and alignment process.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#processing-steps-for-mse-data","title":"Processing Steps for MSE data","text":"<ul> <li> <p>See the MS-DIAL documentation for MSE data processing, and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub.</p> </li> <li> <p>Here is an example MSe-based MS-DIAL networking job. MSe .Raw and converted ABF files can be downloaded in here.</p> </li> </ul>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#ion-mobility-spectrometry-data-experimental","title":"Ion Mobility Spectrometry data (Experimental)","text":"<ul> <li>See the MS-DIAL documentation on Ion Mobility Spectrometry data processing, and export the files as indicated below. If you encounter any issue, please contact the GNPS team on the forum or GitHub.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#export-the-files-for-gnps-fbmn","title":"Export the files for GNPS FBMN","text":"<p>To run FBMN after MS-DIAL processing, two files have to be exported:</p> <ul> <li> <p>The feature quantification table (TXT file) containing compound intensity and annotation.</p> </li> <li> <p>The MS/MS spectral summary (MGF file) containing the list of representative MS/MS spectra (the most intense MS/MS spectrum).</p> </li> </ul> <p>Go to Menu: Export / Alignment result</p> <p></p> <p>Make sure the \u201cGNPS export\u201d box is checked, and set the spectra type to \u201ccentroid\u201d.</p> <p>Set the directory and file name, then click \u201cExport\u201d. As a result, you will acquire a MS/MS spectral summary and the feature quantification table.</p> <p></p> <p>[Note] The GNPS export option of MS-DIAL will create a feature table based on MS1 peak height. If you want a feature table based on peak area, check the \u201cRaw data matrix (Area)\u201d.  The resulting file has a different structure from TXT file given by GNPS export, so you should reformat the area matrix file.</p> <p>See example of files generated by MS-DIAL and used for the FBMN by the export workflow here.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#3-running-the-fbmn-with-ms-dial","title":"3. Running the FBMN with MS-DIAL","text":"<p>After the processing with MS-DIAL, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first).</p> <p>See the main documentation for more details about the FBMN workflow on GNPS.</p> <p>Basically, you will need to upload the files produced by MS-DIAL:</p> <ul> <li>The feature quantification table (.TXT file)</li> <li>The MS/MS spetral summary file (.MGF file)</li> <li>(Optional) The metadata table - requirements are described here. </li> </ul> <p>IMPORTANT WHEN USING A METADATA TABLE WITH MS-DIAL: \"filename\" in the metadata files for FBMN with MS-DIAL should not contain file extensions (ex: \"sample1.mzML\" must be \"sample1\").</p> <p>Here is an example MS-DIAL networking job from a subset of the American Gut Project.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#tutorials","title":"Tutorials","text":"<p>See our MS-DIAL tutorial on using Feature Based Molecular Networking for the American Gut Project sample.</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul> <p>=======</p>"},{"location":"featurebasedmolecularnetworking-with-ms-dial/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (3.33%), lfnothias (41.67%), KyobinKang (52.22%), Ivan Protsyuk (2.78%)</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/","title":"FBMN with MZmine","text":""},{"location":"featurebasedmolecularnetworking-with-mzmine2/#introduction","title":"Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below we describe how to use MZmine2 v2.51 with the FBMN workflow on GNPS. We have previously written the documentation for v2.33 and have noted differences in the software versions. </p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#mass-spectrometry-processing-with-mzmine","title":"Mass spectrometry processing with MZmine","text":""},{"location":"featurebasedmolecularnetworking-with-mzmine2/#citations-and-development","title":"Citations and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>Katajamaa, M., Miettinen, J. &amp; Oresic, M. MZmine: toolbox for processing and visualization of mass spectrometry based molecular profile data. Bioinformatics 22, 634\u2013636 (2006).</p> <p>Pluskal, T., Castillo, S., Villar-Briones, A. &amp; Oresic, M. MZmine 2: modular framework for processing, visualizing, and analyzing mass spectrometry-based molecular profile data. BMC Bioinformatics 11, 395 (2010).</p> <p>The development of the features used in the pipeline is publicly accessible here.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#installation","title":"Installation","text":"<p>Download the latest version of MZmine software (version MZmine v2.33 minimum) at https://github.com/mzmine/mzmine2/releases.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#data-processing-with-mzmine-for-fbmn","title":"Data Processing with MZmine for FBMN","text":"<p>In MZmine, a sequence of steps are performed to process the mass spectrometry data. Here we will present key steps required to process LC-MS/MS data acquired in non-targeted mode (data dependent acquisition). For convenience we also provide a batch file (XML format) that can be imported directly in MZmine.</p> <p>Warning</p> <p>MZmine parameters will vary depending on the instrument used, the acquisition parameters, and samples studied. The following documentation serves a basic guideline for using MZmine with the FBMN workflow.</p> <p>Please consult the resources below for more details on MZmine processing:</p> <ul> <li>The official documentation http://mzmine.github.io/documentation.html,</li> <li>The MZmine tutorial by Pierre-Marie Allard and Joelle Houriet from the University of Geneva.</li> <li>ADAP User Manual</li> <li>The video tutorial below about MZmine2 processing for Feature Based Molecular Networking. Note that this video is slighlty outdatted, so please refer to the steps described in this documentation.</li> </ul> <ul> <li>The video tutorial below about Quick MZMine2 Export to GNPS for FBMN</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#convert-your-lc-msms-data-to-an-open-format","title":"Convert your LC-MS/MS Data to an Open Format","text":"<p>MZmine accepts different input formats. Note that we recommand to first convert your files to mzML format before doing MZmine2 processing. See the documentation here.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#processing-steps","title":"Processing Steps","text":"<p>Below is the schematic representation of the LC-MS/MS data processing steps with MZmine (thanks Daniel Petras !):</p> <p></p> <p>Below is the overview of the LC-MS/MS data processing steps in the MZmine batch mode:</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#batch-import","title":"Batch Import","text":"<p>Here are some MZmine batch that are compatible with the FBMN workflow. These batch files can be imported into MZMine (Batch mode):</p> Instrument Gradient Length Matrix Type Sample Size Download Bruker Maxis HD qTof 10 Min Stool 20 Batch Please contribute a send batch file for various instruments Batch"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#processing-steps_1","title":"Processing Steps","text":"<p>Below is a walk-through of all the steps</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#1-import-files","title":"1. Import Files","text":"<p>Go to Menu: Raw data methods &gt; Raw data import &gt; Select the files</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#2-mass-detection","title":"2. Mass Detection","text":"<p>This step creates mass lists from your raw LC-MS/MS data (non-targeted mode).</p> <p>Perform mass detection on MS level 1: Menu: Raw data methods &gt; Feature Detection &gt; Mass detection &gt; Set filters: MS level 1.</p> <p>(version 2.33) Menu: Raw data methods &gt; Mass detection &gt; Set filter : MS level 1</p> <p>Important</p> <p>Set an appropriate intensity threshold. You can use the preview window to assess the right threshold on your data. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. (Example: MAXIS-QTOF: 1E3, Q-Exactive 1E4)</p> <p>Perform mass detection on MS level 2. The same mass list name must be used.</p> <p>Go to Menu: Raw data methods &gt; Feature Detection &gt; Mass detection &gt; Set filters: MS level 2.</p> <p>(version 2.33) Go to: Raw data methods &gt; Mass detection &gt; Set filter : MS level 2.</p> <p>Important</p> <p>Make sure to set an intensity threshold representative of noise level in the MS2 spectra. This is typically lower than for MS1. (Example: maXis QTOF: 1E2; LTQ-XL Orbitrap 1E4, Q-Exactive: 0). If you have any doubt, set it to 0.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#3-build-chromatogram-lc-ms-feature-detection-part-1","title":"3. Build Chromatogram (LC-MS feature detection part 1)","text":"<p>Starting with MZmine 2.39, the original Chromatogram builder is considered deprecated. It has been replaced with the ADAP Chromatogram Builder. The ADAP Module includes parameters for the Min group size # of scans and Group intensity threshold. Further explanation for these parameters can be found in the ADAP Tutorial. If you use the ADAP Chromatogram Builder, please cite the publication below.</p> <p>Myers, O.D. et al, One Step Forward for Reducing False Positive and False Negative Compound Identifications from Mass Spectrometry Metabolomics Data: New Algorithms for Constructing Extracted Ion Chromatograms and Detecting Chromatographic Peaks. Anal. Chem. 89, 17, 8696-8703 (2017).</p> <p>Go to: Raw data methods &gt; Feature Detection &gt; Chromatogram builder OR ADAP Chromatogram builder</p> <p>(version 2.33) Go to: Raw data methods &gt; Chromatogram builder</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#4-deconvolve-the-chromatogram-lc-ms-feature-detection-part-2","title":"4. Deconvolve the Chromatogram (LC-MS feature detection part 2)","text":"<p>Go to Menu: Feature list methods &gt; Feature detection &gt; Chromatogram deconvolution</p> <p>(version 2.33) Go to Menu: Peak list methods &gt; Peak detection &gt; Chromatogram deconvolution</p> <p>Important</p> <p>tick both options \"m/z range for MS2 scan pairing (Da)\" and \"RT range for MS2 scan pairing (min)\". The values have to be defined according to your experimental setup (expected MS mass accuracy and chromatographic peak width).</p> <p>Example for a UHPLC colum (1.7 \u00b5m C18, 50 \u00d7 2.1 mm, flow rate of 0.5 mL/min):</p> <ul> <li> <p>maXis-QTOF: 12 min gradient, 0.02 Da and 0.15 min</p> </li> <li> <p>Q-Exactive: 5 min gradient, 0.01 Da and 0.1 min</p> </li> </ul> <p></p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#5-group-isotopes-and-co-eluting-ions","title":"5. Group isotopes and co-eluting ions","text":"<p>Use the \"Isotopic peaks grouper\" [recommended] or other alternative (such as the CAMERA module).</p> <p>Go to Menu: Feature list methods &gt; Isotopes &gt; Isotopic peaks grouper</p> <p>(version 2.33) Go to Menu: Peak list methods &gt; Isotopes &gt; Isotopic peaks grouper.</p> <p>Important</p> <p>This depends on your expected peak shapes, duty cycle time and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min gradient, 0.1 min, 0.02 m/z; Q-Exactive, 5 min gradient, 0.05 min, 0.01 m/z)</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#6-order-the-peaklists","title":"6. Order the peaklists","text":"<p>Go to Menu: Peak list methods &gt; Order peak lists.</p> <p>Important</p> <p>This is to ensure the reproducibility of the processing. Indeed, the aligned peak list will change slighlty if that step is not performed. </p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#7-lc-ms-feature-alignement-peaklist-alignement","title":"7. LC-MS feature alignement (Peaklist alignement)","text":"<p>In this step, the peak lists from each sample will be aligned in one aligned peak list. The alignement is performed iteratively using the first peak list selected (see MZmine documentation). For that reason, make sure the first sample is adapted (not a negative control) or to manually put an representative peaklist in the first position.</p> <p>Go to Menu: Feature list methods &gt; Alignment &gt; Join aligner</p> <p>(version 2.33) Go to Menu: Peak list methods &gt; Alignment &gt; Join aligner</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#8-optional-detect-missing-peaks-gap-filling","title":"8. (Optional) Detect Missing Peaks / Gap Filling","text":"<p>Gap filling enables to retrieve the intensity of a peak in all the samples, even if it was not detected in a previous processing step. Go to Menu: Feature list methods &gt; Gap filling &gt; Peak finder (multi-threaded).</p> <p>(version 2.33) Go to Menu: Peak list methods &gt; Gap filling &gt; Peak finder (multi-threaded).</p> <p>Important</p> <p>This step is optional. Use the multi-threaded peak finder for fast processing.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#9-optional-filter-the-peaklist-to-msms-peaks","title":"9. (Optional) Filter the Peaklist to MS/MS Peaks","text":"<p>Depending on the number of features in the aligned peaklist, it is possible to filter the peaklist to keep only features with minimum number of occurences (\"Minimum peaks in a row\") or a mininum number of isotopic peaks for the feature (\"Minimum peaks in an isotope pattern\"), or to \"Keep only peaks with MS2 scan (GNPS)\".</p> <p>Go to Menu: Feature list methods &gt; Filtering &gt; Feature list rows filter &gt; Select the filters</p> <p>(version 2.33) Go to Menu: Peak list methods &gt; Filtering &gt; Peak list row filter &gt; Select the filters</p> <p>Important</p> <p>if you use a filter, we recommend using the filter \"Reset the peak number ID\"</p> <p>Important</p> <p>Note that this step was mandatory in the prototype versions of FBMN with MZmine, now the filter \"Keep only peaks with MS2 scan (GNPS)\" is optional.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#10-use-the-gnps-export-module","title":"10. Use the GNPS Export module","text":"<p>Use the dedicated module \"Submit to/Export for GNPS\" in MZmine under Feature list methods &gt; Export/Import  to export the needed file:</p> <ul> <li>the feature quantification table (.CSV file format) with LC-MS feature intensities.</li> <li>the MS/MS spectral summary (.MGF file), with a representative MS/MS spectrum per LC-MS feature. The MS/MS spectrum correspond either to the most intense MS/MS found for the feature, or to the merged spectrum (new feature !)</li> </ul> <p>Select the lastest \"filtered aligned peaklist\" generated and Go to Menu: Peak list methods &gt; Export &gt; Export for/Submit to GNPS</p> <p></p> <p>See an example of files generated by the export module using the workflow: here.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#the-files-can-be-uploaded-to-the-gnps-web-platform-and-feature-based-molecular-networking-job-can-be-directly-launched","title":"The files can be uploaded to the GNPS web-platform and Feature-Based Molecular Networking job can be directly launched","text":"<p>IMPORTANT: While the possibility to submit the files directly to GNPS and launch a FBMN job on the fly is really convenient for quick data analysis, the files will not be saved in your personal account on GNPS and are periodically deleted, which will prevent future cloning of the jobs. If you do not provide username/password, and you are limited to basic presets of parameters. For that reason, we recommend to upload your files with the FTP uploader (see documentation) and prepare your job directly on GNPS (you must be logged in first).</p> <p></p> <p>In the \"Export for/Submit to GNPS\" module, select the option: \"Submit to GNPS\"</p> <ul> <li> <p>[Optional] Metadata file: specify the path to the metadata table in GNPS format. See documentation here</p> </li> <li> <p>Select the parameters presets for the GNPS job.</p> </li> <li> <p>[Optional] Email: specify the email to forward the job link</p> </li> <li> <p>[Optional] Annotation edges (Experimental feature that will described later).</p> </li> <li> <p>[Optional] Open website: if ticked, will open the job webpage.</p> </li> </ul> <p>ADDITIONAL NOTES: The feature table must contain at least the row ID, the row m/z, and row retention time, along with the sample columns. It is currently mandatory for the sample name headers to have the following format: \"filename Peak area\". Depending on the steps used in MZmine the sample name header can be \"filename baseline-corrected Peak area\", but this has to be changed back to \"filename Peak area\".</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#video-tutorial-quick-mzmine-export-to-gnps-for-fbmn","title":"Video Tutorial - Quick MZMine Export to GNPS for FBMN.","text":"<p>The workflow for Feature Based Molecular Networking in GNPS is different from the classic molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !)</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#fbmn-in-gnps","title":"FBMN in GNPS","text":"<p>The main documentation of the Feature Based Molecular Networking workflow on GNPS can be consulted on that page. The workflow for Feature Based Molecular Networking in GNPS is different from the \"classic\" molecular networking workflow. Access the FBMN workflow here (You need to be logged in first !).</p> <p>Basically, you will need to upload the files produced by MZmine (test files are accessible here):</p> <ul> <li>The feature quantification table (.CSV file format).</li> <li>The MS/MS spectral summary (.MGF file format)</li> <li>[Optional] The metadata table - described here</li> </ul> <p>There are several additional normalization options specifically for feature detection. We can normalize the features per LC/MS run and aggregate by groups with either a sum or average (recommended).</p> <p></p> <p>Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the American Gut Project.</p> <p>ADDITIONAL NOTES: In case you want to run the Feature-Based Molecular networking with just part of the samples you processed in MZmine, it is possible to filter the exported files (.csv and .mgf) to keep only the features of interest. In the case of the .csv file, the rows of specific features can just be deleted. Within FBMN in GNPS, the workflow will automatically only consider these set to of features in the csv file. </p> <p>For other purposes, if you would like to filter down the .mgf file, there are two options of Python scripts to filter the file. One of them can be run in the Terminal, while the other can be run in a Jupyter notebook.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#video-tutorial-analyze-fbmn-jobs-in-gnps","title":"Video Tutorial - Analyze FBMN jobs in GNPS","text":"<p>This video presents </p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#fbmn-in-cytoscape","title":"FBMN in Cytoscape","text":"<p>Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#tutorials","title":"Tutorials","text":"<p>See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project, and our tutorial on running a FBMN analysis on GNP.</p>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-mzmine2/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (12.22%), lfnothias (71.48%), Madeleine Ernst (0.37%), Ivan Protsyuk (1.85%), Cynthia Grim (13.33%), helenamrusso (0.74%)</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/","title":"Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below follows a description on how to use *mzTab-M format with the FBMN workflow on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#using-the-mztab-m-format-with-fbmn","title":"Using the mzTab-M format with FBMN","text":""},{"location":"featurebasedmolecularnetworking-with-mztab-m/#introduction_1","title":"Introduction","text":"<p>The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results.</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#citation-and-development","title":"Citation and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>Hoffman et al. mzTab-M: A Data Standard for Sharing Quantitative Results in Mass Spectrometry Metabolomics Anal. Chem. 2019 9153302-3310</p> <p>See the GitHub repository for jmzTab-M: https://github.com/lifs-tools/jmzTab-m</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#fbmn-with-mztab-m","title":"FBMN with mzTab-M","text":"<p>The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. </p> <p>Basically, the mzTab-M is used to retrieve for each LC-MS/MS feature:</p> <ul> <li>The abundance of the LC-MS/MS feature in each sample.</li> <li>The filename (mzML) and the index of the most intense associated MS/MS spectrum. </li> </ul> <p>After inputing the mzTab-M and mzML file(s), GNPS will automatically extract the MS/MS spectra from the mzML file and generate internally an MS/MS spectral summary that will be used for FBMN analysis.</p> <p>So far only mzTab-M from XCMS have tested, please let us know if you have difficulties running FBMN jobs from mzTab-M files exported with OpenMS, MS-DIAL, MZmine, and others.</p> <p>See an example job with mzTab-M and mzML files here.</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#running-fbmn-with-an-mztab-m","title":"Running FBMN with an mzTab-M","text":"<p>The mzTab-M file and the associated mzML file(s) can be uploaded to the GNPS web-platform and a FBMN job can be launched only from the standard interface of the FBMN workflow (you need to be logged in GNPS first).</p> <ul> <li>Select the mzML file(s). See the screenshot below.</li> <li>Select the mzTab-M file as Feature Quantification Table.</li> <li>(EXPERIMENTAL) Select the metadata table. Requirements are described here.  </li> </ul> <p></p> <p>More information on the FBMN on GNPS can be obtained at this documentation page.</p>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-mztab-m/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (11.48%), lfnothias (88.52%)</p>"},{"location":"featurebasedmolecularnetworking-with-openms/","title":"FBMN with OpenMS","text":""},{"location":"featurebasedmolecularnetworking-with-openms/#introduction-to-fbmn-with-openms","title":"Introduction to FBMN with OpenMS","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below we are describing how to use OpenMS with the FBMN workflow on GNPS. </p>"},{"location":"featurebasedmolecularnetworking-with-openms/#citations","title":"Citations","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>R\u00f6st, H. L. et al. OpenMS: a flexible open-source software platform for mass spectrometry data analysis. Nat. Methods 13, 741\u2013748 (2016). https://doi.org/10.1038/nmeth.3959</p>"},{"location":"featurebasedmolecularnetworking-with-openms/#development","title":"Development","text":"<p>The OpenMS website at https://www.openms.de/</p> <p>The GNPSExport TOPP tool code can be found on OpenMS GitHub repository and the lastest version on this fork repository.</p> <p>The code for the Open-GNPS pipeline (ProteoSAFe workflow and python wrapper) is available on this GitHub repository.</p>"},{"location":"featurebasedmolecularnetworking-with-openms/#feature-detection-with-openms-for-the-fbmn","title":"Feature Detection with OpenMS for the FBMN","text":"<p>We have developed an OpenMS-GNPS pipeline that can be used for the processing of metabolomics LC-MS data with OpenMS and Feature Based Molecular Networking (FBMN). This pipeline uses OpenMS tools and the GNPSExport (part of OpenMS TOPP tools).</p> <p>In brief, after running an OpenMS \"metabolomics\" pipeline, the GNPSExport TOPP tool can be used on the consensusXML file and corresponding mzML files to generate the files needed for FBMN on GNPS. These two files are:</p> <ul> <li>The feature quantification table (.TXT format) which is generated with the TextExport tool.</li> <li>The MS2 spectral summary file (.MGF format) which is generated with the GNPSExport tool.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-openms-gnps-pipeline-on-gnps-web-platform","title":"Running the OpenMS-GNPS pipeline on GNPS web-platform","text":"<p>The OpenMS-GNPS pipeline is an experimetal workflow deployed currently on proteomics2.ucsd.edu [https://proteomics2.ucsd.edu/ProteoSAFe/]). The job can be configured as follows:</p> <p></p> <ol> <li>Log into https://proteomics2.ucsd.edu (Create an account if necessary).</li> <li>Access the lastest version of the OpenMS + GNPS workflow (release 20) at this address.</li> <li>In Import Data Files, select the input mzML files (prefered) or mzXML files (not recommended, because the pipeline would have to perform conversion to mzML)</li> <li>[TO BE RELEASED] Select the parameters from the presets <code>HPLC-Q-Exactive, UHPLC-Q-Exactive, HPLC-QTOF, UHPLC-Q-Exactive</code>. The corresponding OpenMS configuration files (.INI files) are available from that [GitHub repository] (https://github.com/Bioinformatic-squad-DorresteinLab/openms-gnps-workflow/presets/)). Alternatively, you can upload your OpenMS TOPP tool parameter file (.INI files). Note that parameter files can be updated with a text editor or with the INIFileEditor TOPP tool.</li> <li>Wait for the job to complete. You will get a notification.</li> <li>Download the main output files with \"Download OpenMS Output Files\" and/or all the files with \"Download Workflow Files\".</li> <li>Unzip the archive.</li> <li>Examine the consensusXML file (in the filefilter folder) with TOPPAS.</li> <li>The <code>gnpsexport</code> folder contains the MS/MS spectral summary file (.MGF file)</li> <li>The <code>textexporter</code> folder contains the feature quantification table (.TXT file).</li> <li>Click a FBMN workflow on GNPS by clicking on \"Run a Feature-Based Molecular Networking at GNPS\" Note that you have to be logged in to GNPS first, https://gnps.ucsd.edu). See documentation for the FBMN workflow on GNPS.</li> <li>Alternatively, upload these files via FTP for FBMN on GNPS, or use them for other annotation tools (DEREPLICATOR, Mass2Motif, NAP.</li> </ol> <p></p>"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-openms-gnps-pipeline-with-openms-topp-tools","title":"Running the OpenMS-GNPS pipeline with OpenMS TOPP tools","text":""},{"location":"featurebasedmolecularnetworking-with-openms/#installation-and-requirement","title":"Installation and requirement","text":"<p>Installing OpenMS TOPP tools: See the OpenMS website at https://www.openms.de/</p>"},{"location":"featurebasedmolecularnetworking-with-openms/#representative-openms-gnps-workflow","title":"Representative OpenMS-GNPS workflow","text":"<p>A representative OpenMS-GNPS workflow would sequencially use these OpenMS TOPP tools:</p> <ol> <li>Input the mzML files.</li> <li>Run the FeatureFinderMetabo tool on the mzML files.</li> <li>Run the IDMapper tool on the featureXML and mzML files.</li> <li>Run the MapAlignerPoseClustering tool on the featureXML files.</li> <li>Run the MetaboliteAdductDecharger tool on the featureXML files.</li> <li>Run the FeatureLinkerUnlabeledKD tool or FeatureLinkerUnlabeledQT, on the featureXML files and output a consensusXML file.</li> <li>Run the FileFilter tool on the consensusXML file to keep only consensusElements with at least MS/MS scan (peptide annotation).  </li> <li>Run the GNPSExport tool on the \"filtered consensusXML file\" to export an .MGF file.</li> <li>Run the TextExport tool on the \"filtered consensusXML file\" to export a .TXT file.</li> <li>Upload your files to GNPS and run the Feature-Based Molecular Networking workflow. See the main documentation for using FBMN on GNPS.</li> </ol>"},{"location":"featurebasedmolecularnetworking-with-openms/#requirements-for-the-openms-gnps-pipeline","title":"Requirements for the OpenMS-GNPS pipeline","text":"<ul> <li>The IDMapper has to be run on the featureXML files, in order to associate MS2 scan(s) (peptide annotation) with each feature. These peptide annotations are used by the GNPSExport.</li> <li>The FileFilter has to be run on the consensusXML file, prior to the GNPSExport, in order to remove consensusElements without MS2 scans (peptide annotation).</li> <li>Note that mass accuracy and the retention time window for the pairing between MS2 scan(s) and a LC-MS feature or consensusElement is defined at the IDMapper tool step for features.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-openms/#the-gnpsexport-topp-tool","title":"The GNPSExport TOPP tool","text":"<p>The GNPSExport TOPP tool can be run on the consensusXML file and corresponding mzML files to generate a MS/MS spectral file (MGF format) and corresponding feature quantification table (.TXT format) that contains LC-MS peak area intensities.</p> <p>For each consensusElement in the consensusXML file, GNPSExport produces one representative consensus MS/MS spectrum (named peptide annotation in OpenMS jargon) saved to the MS/MS spectral summary file (.MGF file). Several modes for the generation of the consensus MS/MS spectrum are available and described below. Note that these parameters are defined in the GNPSExport parameters file (.INI file, available with that link).</p>"},{"location":"featurebasedmolecularnetworking-with-openms/#usage-and-options-for-gnpsexport-topp-tool","title":"Usage and Options for GNPSExport TOPP tool:","text":"<p><code>GNPSExport --help</code></p> <pre><code>GNPSExport -ini iniFile-GNPSExport.ini\n           -in_cm filefilter.consensusXML\n           -in_mzml inputFile0.mzML inputFile1.mzML\n           -out GNPSExport_output.mgf\n</code></pre>"},{"location":"featurebasedmolecularnetworking-with-openms/#options-for-the-consensus-msms-spectra-output_type","title":"Options for the consensus MS/MS spectra: <code>output_type</code>","text":"<ul> <li> <p>Most intense [default]: <code>most_intense</code> - For each consensusElement, the GNPSExport will output the most intense MS/MS scan (with the highest precursor ion intensity) as representative MS/MS spectrum.</p> </li> <li> <p>All MS/MS: <code>full_spectra</code> - For each consensusElement, the GNPSExport will output All MS/MS scans.</p> </li> <li> <p>Merge [Experimental]: <code>merged_spectra</code> - For each consensusElement, the GNPSExport will merge all eligible MS/MS scans into one representative MS/MS spectrum. Eligible MS/MS scans have a pairwise cosine similarity with the MS/MS scan of highest precursor intensity above the Cosine Similarity Treshold. The fragment ions of merged MS/MS scans are binned in m/z (or Da) range defined by the Binning width parameter.</p> <ul> <li>Cosine Similarity Treshold: <code>merged_spectra:cos_similarity</code> (float, default: 0.9) - Parameter that defines Cosine Similarity Treshold for the pairwise cosine similarity between the MS/MS scan with the highest precursor intensity and the other MS/MS scans.</li> <li>Binning width: <code>merged_spectra:ms2_binned_size</code> (float, default: 0.02 Daltons) -  Parameter that defines the Binning width of fragment ions during the merging of eligible MS/MS spectra.</li> </ul> </li> </ul>"},{"location":"featurebasedmolecularnetworking-with-openms/#running-the-fbmn-workflow-with-openms-files","title":"Running the FBMN workflow with OpenMS files","text":"<p>After the processing with OpenMS, the output files can be used to run the Feature-Based Molecular Networking workflow on GNPS either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first).</p> <p>Make sure to select the correct table source (OpenMS).</p> <p>The main documentation for FBMN can be accessed here. For metadata format requirements, see this page</p>"},{"location":"featurebasedmolecularnetworking-with-openms/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-openms/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (7.2%), lfnothias (84.0%), Ivan Protsyuk (8.8%)</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/","title":"FBMN with Progenesis QI","text":""},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#introduction","title":"Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below we describe how to use Progenesis QI with the FBMN workflow on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#using-progenesis-qi-and-the-feature-based-molecular-networking-on-gnps","title":"Using Progenesis QI and the Feature-Based Molecular Networking on GNPS","text":"<p>Progenesis QI is a proprietary LC-MS feature detection and alignment software developed by Nonlinear Dynamics that is compatible with Waters file format and other proprietary and open mass spectrometry format.</p> <p>Progenesis QI can perform feature detection, alignment and annotation of non-targeted LC-MS/MS data acquired either in data-dependent analysis (DDA) or MSE data independent analysis (DIA), and can also uses the ion mobility spectrometry (IMS) dimension. Feature-based molecular networking (FBMN) can be performed on any of these data types processed with Progenesis QI.</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#citations-and-development","title":"Citations and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#running-progenesis-qi-for-molecular-networking-on-gnps","title":"Running Progenesis QI for molecular networking on GNPS","text":"<p>For more information on Progenesis QI, please refer to the official documentation at: http://www.nonlinear.com/progenesis/qi/.</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#1-import-and-process-the-mass-spectrometry-data","title":"1. Import and process the mass spectrometry data","text":"<ul> <li>In Progenesis QI (ver. 2.4, Nonlinear Dynamics), import RAW data from Waters QTof data-independent acquisition (DIA) modes such as SONAR, MSE or HDMSE. </li> <li>Processed data with Progenesis QI and export the results for GNPS analysis as indicated below. See the Progenesis QI LC-MS tutorial and the tutorial videos for more informations.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#2-export-the-processing-results","title":"2. Export the processing results","text":"<p>In the menu, under the \u201cIdentify Compounds\u201d tab:</p> <ul> <li>Select \u201cExport Compound Measurement\u201d to export the feature quantification table (CSV file) containing compound intensity and annotation can be exported (see below).</li> <li>Select \u201cExport fragment database\u201d to the export the MS/MS spectral summary (MSP file) containing the list of representative MS/MS spectra (see below). NOTE: Do not select tags to export</li> </ul> <p></p> <p></p> <p>Note</p> <p>Alternatively, the Symphony software can be used the ion peaks in the entire RAW file can be detected, centroided, and deconvoluted, and converted to a suitable open-source data formats such as Mascot generic format (mgf), mzML, mzXML. More info on in the following note: See more information in the Nov. 2018 Waters Technology Brief. These files can be processed by other softwares supported FBMN, or can be used for classical molecular networking analysis. </p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#running-a-molecular-network-on-gnps","title":"Running a molecular network on GNPS","text":"<p>FBMN with Progenesis QI results can be performed using the using Superquick or the standard interface:</p> <ul> <li>Use the Superquick FBMN interface: <ul> <li>Go to https://gnps-quickstart.ucsd.edu/featurebasednetworking.</li> <li>Select the \"Progenesis QI\" option for the \"Feature Quantification Table Source\".</li> <li>Drag and drop the feature quantification table (.CSV file) into the left box.</li> <li>Drag and drop the MS/MS spectral summary (.MSP file) into the right box.</li> </ul> </li> </ul> <p></p> <ul> <li>Use the standard FBMN interface:<ul> <li>Refer to the main FBMN documentation for more informations.</li> </ul> </li> </ul> <p></p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#mapping-progenesis-qi-annotations-in-cytoscape","title":"Mapping Progenesis QI annotations in Cytoscape","text":"<p>Progenesis QI annotations or metadata can be mapped in Cytoscape as node attribute into the molecular networks. See the Cytoscape documentation for FBMN. For metadata format requirement, see this page.</p> <p>Helped is wanted to describe in detail the import procedure in Cytoscape.</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#acknowledgements","title":"Acknowledgements","text":"<p>Bindesh Shrestha (Waters), Giorgis Isaac (Waters) and Jonathan McSayles (Waters).</p>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-progenesisQI/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (15.85%), lfnothias (84.15%)</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/","title":"FBMN with XCMS","text":""},{"location":"featurebasedmolecularnetworking-with-xcms3/#introduction","title":"Introduction","text":"<p>The main documentation for Feature-Based Molecular Networking can be accessed here. See our article.</p> <p>Below follows a description on how to use XCMS (ver. &gt;= 3) with the FBMN workflow on GNPS.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#mass-spectrometry-processing-with-xcms","title":"Mass spectrometry processing with XCMS","text":""},{"location":"featurebasedmolecularnetworking-with-xcms3/#citations-and-development","title":"Citations and development","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>XCMS3 GitHub repository: https://github.com/sneumann/xcms</p> <p>Tautenhahn R, Boettcher C, Neumann S. Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008).</p> <p>Smith, C.A., Want, E.J., O'Maille, G., Abagyan,R., Siuzdak, G. XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification. Analytical Chemistry, 78, 779\u2013787 (2006).</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#installation","title":"Installation","text":"<p>1 - Install the latest version of XCMS3 from Bioconductor (ver. &gt;= 3.4) in R with:</p> <pre><code>install(\"BiocManager\")\nBiocManager::install(\"xcms\")\n</code></pre> <p>Alternatively, see the [xcms Bioconductor package] (https://www.bioconductor.org/packages/release/bioc/html/xcms.html).</p> <p>2 - Retrieve the custom utility function from the XCMS-GNPS-TOOLS GitHub repository https://github.com/jorainer/xcms-gnps-tools.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#mass-spectrometry-data-processing-with-xcms","title":"Mass Spectrometry Data Processing with XCMS.","text":""},{"location":"featurebasedmolecularnetworking-with-xcms3/#1-introduction","title":"1. Introduction","text":"<p>Below we are presenting the key steps required to process with XCMS non-targeted LC-MS/MS data collected using data dependent acquisition. For more information on XCMS, consult these resources:</p> <ul> <li>The official XCMS   tutorial   (also provided as <code>xcms</code> vignette with the <code>xcms</code> R package).</li> <li>XCMS workshop from the Metabolomics 2018 conference:   xcms-preprocessing   and github repository.</li> <li>The Canadian Bioinformatics Workshop video on XCMS at https://www.youtube.com/watch?v=cdIb7EyIiBI</li> </ul> <p>SCRIPT AVAILABILITY: Example of XCMS scripts are accessible as Jupyter notebook and RCommander script on https://github.com/DorresteinLaboratory/XCMS3_FeatureBasedMN.</p> <p>IMPORTANT: XCMS parameters will vary depending on the mass spectrometer, the acquisition parameters, and the samples investigated. The following documentation serves as a basic guideline for using XCMS with the Feature-Based Molecular Networking workflow.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#2-convert-your-data","title":"2. Convert your Data","text":"<p>XCMS accepts different input formats. Note that we recommand to convert your files to the mzML format before using XCMS for processing. See the documentation here. This will simplify the subsquent use of other mass spectrometry tools and data deposition on a public repository like MassIVE or MetaboLights.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#3-process-with-xcms","title":"3. Process with XCMS","text":"<p>These are typical steps used for the processing of non-targeted LC-MS/MS data with XCMS:</p> <ol> <li>Import data (<code>readMSData</code>)</li> <li>Peak picking (<code>findChromPeaks</code>)</li> <li>Retention time alignment (<code>adjustRtime</code>).</li> <li>Peak grouping (<code>groupChromPeaks</code>).</li> <li>Gap filling (<code>fillChromPeaks</code>).</li> <li>Run CAMERA for adduct annotation (<code>xsAnnotate</code>).</li> <li>Export the results file for FBMN on GNPS:<ul> <li>Option A - Export a feature quantification table and a MS/MS spectral summary file:<ul> <li>Export a feature quantification table with ion intensities (.TXT file format) (<code>write.table</code>).</li> <li>Export a MS/MS spectral summary file (.MGF file format). Note that it is recommended to use the maxTIC option for the MGF export. (<code>writeMgfData</code>)</li> </ul> </li> <li> <p>Option B - Export an mzTab-M file:</p> <ul> <li>Export and select the mzTab-M file in the interface. The use of the mzTab-M requires the subsequent upload of the mzML files used during the XCMS processing. See and cite this publication.</li> </ul> </li> </ul> </li> </ol>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#perform-fbmn-on-gnps","title":"Perform FBMN on GNPS","text":"<p>The files exported from XCMS3 can be uploaded to the GNPS web-platform and a Feature-Based Molecular Networking job can be launched.</p> <p>FBMN with XCMS3 can be performed either using the [Superquick FBMN start page] (http://dorresteinappshub.ucsd.edu:5050/featurebasednetworking) or the standard interface of the FBMN workflow (you need to be logged in GNPS first).</p> <p>More information on the Feature Based Molecular Networking workflow on GNPS can be obtained at this documentation page.</p> <p>Note that you can upload a metadata table with your job. See documentation.</p> <p></p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#representative-results-files-and-job","title":"Representative results files and job","text":"<p>Option A - With a feature quantification table and a MS/MS spectral summary file:</p> <ol> <li>The feature quantification table (.TXT file) - Download here</li> <li>The MS/MS spectral summary (.MGF file) - Download here</li> <li>(Optional) The metadata table - Download here</li> </ol> <p>Here is an example FBMN job with XCMS from a subset of the American Gut Project.</p> <p>Option B - With a mzTab-M file:</p> <p>TODO: Finish this section</p> <ol> <li>The mzTab-M file - Download here</li> <li>The corresponding mzML file(s) - Download here</li> </ol> <p>Here is an example FBMN job with XCMS using a mzTab-M file and mzML files from a subset of the American Gut Project.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#tutorials","title":"Tutorials","text":"<p>See our FBMN tutorial with XCMS using a subset of the American Gut Project samples on this repository DorresteinLaboratory/XCMS3_FeatureBasedMN/.</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#acknowledgements","title":"Acknowledgements","text":"<p>Johannes Rainer (Eurac Research), Madeleine Ernst (UCSD), Ricardo da Silva (UCSD), Michael Witting (Helmholtz Zentrum Munich)</p>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking-with-xcms3/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (7.14%), lfnothias (63.57%), Madeleine Ernst (16.43%), Ivan Protsyuk (0.71%), jorainer (12.14%)</p>"},{"location":"featurebasedmolecularnetworking/","title":"Feature-Based Molecular Networking (FBMN)","text":""},{"location":"featurebasedmolecularnetworking/#introduction","title":"Introduction","text":"<p>[NEW !!!] The FBMN allows to generate molecular networks from MSE and Ion Mobility Spectrometry (IMS) data with MS-DIAL, or Progenesis QI, MetaboScape.</p> <p>Feature-Based Molecular Networking (FBMN) is a computational method that bridges popular mass spectrometry data processing tools for LC-MS/MS and molecular networking analysis on GNPS. The supported tools are: MZmine, OpenMS, MS-DIAL, MetaboScape, XCMS, Progenesis QI, and the mzTab-M format.</p> <p>The main documentation for Feature-Based Molecular Networking is provided below. See our article and the preprint.</p> <p>The Feature-Based Molecular Networking (FBMN) workflow is available on GNPS via:</p> <ul> <li> <p>The Superquick Start page for FBMN. This page enables rapid submission of jobs with limited options. </p> </li> <li> <p>The standard GNPS interface page for FBMN (you need to be logged in GNPS first).</p> </li> <li> <p>For programmatic access to FBMN, contact Mingxun Wang at mingxun.wang@ucr.edu.</p> </li> </ul>"},{"location":"featurebasedmolecularnetworking/#citations","title":"Citations","text":"<p>Recommended Citations</p> <p>This work builds on the efforts of our many colleagues, please make sure to cite the papers for their processing tools and the following GNPS papers</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Wang, M. et al. Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 34, 828\u2013837 (2016).</p> <p>The citations from the mass spectrometry processing tools you used [MZmine2, OpenMS, MS-DIAL, MetaboScape,XCMS, and mzTab-M format. </p>"},{"location":"featurebasedmolecularnetworking/#mass-spectrometry-data-processing-for-the-fbmn","title":"Mass Spectrometry Data Processing for the FBMN","text":"<p>In brief, popular mass spectrometry processing programs have been adapted to export two files (feature quantification table and MS/MS spectral summary) files that can be used with the Feature Based Molecular Networking (FBMN) workflow on GNPS. Alternatively, the FBMN supports the mzTab-M format that can be inputted along witht the mzML file(s). The tools supported and their main features are presented in the table below along with a step-by-step documentation to use in FBMN on GNPS:</p> Processing tool Doc. Data supported Interface Platform Code Target user MZmine See doc. Non-targeted LC-MS/MS Graphical UI Any Open source Mass spectrometrists MS-DIAL See doc. Non-targeted LC-MS/MS, MSE, Ion Mobility Graphical UI Windows Open source Mass spectrometrists OpenMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers XCMS See doc. Non-targeted LC-MS/MS Commandline Any Open source Bioinformaticians and developers MetaboScape See doc. Non-targeted LC-MS/MS, Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists Progenesis QI See doc. Non-targeted LC-MS/MS, MSE, Ion Mobility Graphical UI Windows Proprietary code Mass spectrometrists mzTab-M See doc. Non-targeted LC-MS/MS Standardized format Multi-systems Open source All public <p>IMPORTANT: The software used for the LC-MS/MS data processing has to be configured and utilized as recommended by its documentation.</p>"},{"location":"featurebasedmolecularnetworking/#the-fbmn-workflow-in-gnps","title":"The FBMN Workflow in GNPS","text":"<p>There is a dedicated Feature-Based Molecular Networking workflow on GNPS that can be accessed here (you need to be logged in GNPS first).</p>"},{"location":"featurebasedmolecularnetworking/#requirement-for-the-fbmn-workflow","title":"Requirement for the FBMN workflow","text":"<p>After processing your LC-MS/MS data with the prefered software, it is possible to export the results following two methods:</p> <p>Three type of input files are needed (test files for each software are accessible here):</p> <p>Option A (RECOMMENDED) - Export the processing results using a feature table and an .MGF file:</p> <ol> <li>A feature table with the intensities of LC-MS ion features (TXT or CSV format).</li> <li>A MS/MS spectral summary file with a list of MS/MS spectra associated with the LC-MS ion features (.MGF File). (.MGF file format).</li> <li>[Optional] Metadata table - format described here</li> <li>[Optional] Original mzML Files - These are the original files used for feature finding - described here</li> <li>[Optional] \"Supplementary Pairs\" of additional edges - described here</li> </ol> <p>Option B - Export the processing results using an mzTab-M and mzML files:</p> <ol> <li> <p>Export a single mzTab-M file from the processed data. See and cite this publication.</p> </li> <li> <p>Use the mzML file(s) associated with mzTab-M file.</p> </li> <li> <p>[Optional] Metadata table - format described here</p> </li> </ol>"},{"location":"featurebasedmolecularnetworking/#superquick-feature-based-molecular-networking-workflow","title":"SuperQuick Feature Based Molecular Networking Workflow","text":"<p>A simplified interace for Super Quick web interace for FBMN is available here.</p> <p></p>"},{"location":"featurebasedmolecularnetworking/#running-the-superquick-fbmn","title":"Running the SuperQuick FBMN","text":"<ol> <li>Indicate your email and your GNPS Credentials.</li> <li>Select the 'Feature Generation tool'.</li> <li>Select the parameters preset.</li> <li>Option A. Drag and drop your \"feature quantification table\" and \"MS/MS spectral file\" (.MGF). See the respective documentation for FBMN each tool.</li> <li>Optional. Drag and drop a metadata table.</li> <li>Optional. Drag and drop a \"Supplementary Pairs\" csv file (see format) with additional edges</li> <li>Click on \"Analyze Uploaded Files with GNPS Molecular Networking\".</li> </ol> <p>While this SuperQuick FBMN interface is convenient for quick analysis, we recommend using the standard FBMN workflow. [IMPORTANT] The file uploaded along with the jobs submitted with Superquick start interface are deleted on monthly basis. Use the \"standard\" interface of the FBMN for persistant jobs and more options.</p>"},{"location":"featurebasedmolecularnetworking/#overview-of-the-standard-interface","title":"Overview of the standard interface","text":""},{"location":"featurebasedmolecularnetworking/#select-the-file-source","title":"Select the file source","text":""},{"location":"featurebasedmolecularnetworking/#molecular-networks-options","title":"Molecular Networks Options","text":""},{"location":"featurebasedmolecularnetworking/#basic-options","title":"Basic Options","text":"Parameter Description Default Precursor Ion Mass Tolerance (PIMT) Parameter used for MS-Cluster and spectral library search expressed in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 0.02 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.02"},{"location":"featurebasedmolecularnetworking/#advanced-molecular-network-options","title":"Advanced Molecular Network Options","text":"Parameter Description Default Notes Min Pairs Cos Minimum cosine score for a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. The minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, the mobile phase, etc.), and the collision-induced fragmentation settings of the molecules of interest within the samples. High molecular weight (MW) compounds and compounds with more hetero-atoms generally tend to produce more fragment ions. However, this rule cannot is not absolute. For example, some lipids with high MW generate only a few fragment ions. Maximum shift between precursors The maximum m/z difference between two precursors permitting their spectra to be considered as direct neighbors in a molecular network 500 The maximum mass difference between two connected nodes in a molecular network. Network TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes.  For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes.  Keeping this value low makes very large networks (many nodes) much easier to visualize. Maximum Connected Component Size Maximum number of nodes allowed in a single connected network 100 Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network."},{"location":"featurebasedmolecularnetworking/#advanced-spectral-library-search-options","title":"Advanced Spectral Library Search Options","text":"Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending on the molecules of interest, and the experimental conditions (such as the ionisation mode and the fragmentation conditions). For example, the collision-induced fragmentation of some lipids produce only a few fragment ions. A lower value will allow clustering of MS/MS spectra containing less  fragment ions, however it will also induce clustering of MS/MS spectra from different molecular types to be connected in one network. A higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Whether to search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between the library and putative analogs found 100 (Da) Top results to report per query Number of matches to report for each feature 1"},{"location":"featurebasedmolecularnetworking/#advanced-filtering-options-for-spectra","title":"Advanced Filtering Options (for Spectra)","text":"Parameter Description Default Minimum Peak Intensity All fragment ions in the MS/MS spectra below this raw intensity value will be deleted. By default, the filtering is disabled. 0 Filter Precursor  Window All peaks in a +/- 17 Da around precursor ion mass are deleted. Enabled by default. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not in the top 6 most intense peaks in a +/- 50Da window Filter"},{"location":"featurebasedmolecularnetworking/#advanced-quantification-options","title":"Advanced Quantification Options","text":"<p>There are additional normalization options specifically for the FBMN workflow:</p> Parameter Description Default Normalization Per File Total Ion Current (TIC) normalization can be applied to the ion intensities (LC-MS1 peak area) per sample (NOT RECOMMENDED AS DEFAULT) No Norm Aggregation Method for Peak Abundances Per Group The ion feature intensity (LC-MS1 peak area) can be aggregated by GROUPS from the metadatable with either a Sum or Average (RECOMMENDED, because it is more robust to the difference in the number of samples per GROUPS). Average <p></p>"},{"location":"featurebasedmolecularnetworking/#advanced-univariate-statistics-options","title":"Advanced Univariate Statistics Options","text":"<p>These options will enabling the calculation of statistics as well as draw box plots for exploring. </p> Parameter Description Default Metadata Column to Compare This is the column name in your metadata (e.g. ATTRIBUTE_condition) Empty Metadata Field to Compare This is the first field in the metadata data column to compare (e.g. CONTROL) Empty Metadata Field to Compare This is the second field in the metadata data column to compare (e.g. CASE) Empty Metadata Column to Facet This is another column where you can facet based on the terms (e.g. ATTRIBUTE_media) Empty"},{"location":"featurebasedmolecularnetworking/#advanced-extras","title":"Advanced Extras","text":"<p>\"Supplementary Pairs\" is an option to add extra edges to the resulting FBMN. It was initially implemented for the Ion Identity Networking (IIN) workflow. The IIN supports currently MZmine, XCMS-CAMERA, and MS-DIAL. However, this approach is designed to stimulate the development and testing of new workflows as the input is an edge file in a generic CSV format. An edge is described by the following table:</p> Header Description ID1 Node ID 1 matching the row IDs ID2 Node ID 2 matching the row IDs EdgeType Any string describing the type of edge Score A numerical value for the score (cannot be empty) Annotation A string annotation <p>Note that if Supplementary Pairs from other software are used, it is mandatory that the as the LC-MS feature identifier (ID) matches the \"SCANS=\" number in the MGF file.</p> <p>Example of the Supplementary Pairs used in the IIN workflow. </p> <p></p> <p></p>"},{"location":"featurebasedmolecularnetworking/#mzml-files-used-for-feature-finding","title":"mzML Files Used for Feature Finding","text":"<p>The original mzML/mzXML files that were used for feature finding can also be included. This provides a way for the workflow to link back to the original files and help people explore the data interactively. </p>"},{"location":"featurebasedmolecularnetworking/#inspecting-the-results-of-fbmn-on-gnps","title":"Inspecting the Results of FBMN on GNPS","text":"<p>After the completion of the FBMN job (this will take from 10 to 10 hours depending on your number of samples and instrument), you will receive an email notification with a link to the results page (see example below).</p> <p></p>"},{"location":"featurebasedmolecularnetworking/#spectral-library-match-and-network-topology-analysis","title":"Spectral Library Match and Network Topology Analysis","text":"<p>For more information about the inspection of the molecular networking results, please refer to the main documentation page.</p>"},{"location":"featurebasedmolecularnetworking/#web-browser-molecular-network-visualization","title":"Web-browser Molecular Network Visualization","text":"<p>Here is an example of web-browser view of molecular networks. Click on the link to view the interactive molecular networks.</p> <p></p>"},{"location":"featurebasedmolecularnetworking/#inspecting-the-results-of-fbmn-in-cytoscape","title":"Inspecting the Results of FBMN in Cytoscape","text":"<p>Cytoscape is an open source software platform used to visualize, analyze and annotate molecular networks from GNPS. See the documentation here.</p> <p></p>"},{"location":"featurebasedmolecularnetworking/#demo-gnps-job-of-fbmn","title":"Demo GNPS job of FBMN","text":"<p>Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/).</p>"},{"location":"featurebasedmolecularnetworking/#running-the-dereplicator","title":"Running the DEREPLICATOR","text":"<p>The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. This workflow is also included into the Feature Based Molecular Network workflow, then you have the option to use it by clicking into Advanced External tools. After your job has completed you can explore your results and even clone the Dereplicator job and modify the parameters.</p> <p>If you use that tool, please cite the DEREPLICATOR papers. See citations in the main DEREPLICATOR documentation.</p> <p></p>"},{"location":"featurebasedmolecularnetworking/#running-network-annotation-propagation","title":"Running Network Annotation Propagation","text":"<p>It is possible to use the results of FBMN to run Network Annotation Propagation (NAP). NAP uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. See the following documentation for NAP</p> <p></p> <p>If you use that tool, please cite the NAP paper. See citations in the main NAP documentation.</p>"},{"location":"featurebasedmolecularnetworking/#running-ms2lda-substructure-discovery","title":"Running MS2LDA Substructure Discovery","text":"<p>The results of FBMN can be directly analyzed with MS2LDA. For this, on the result page click on \"Advanced View\" &gt; \"Analyze with MS2LDA\". See the MS2LDA documentation.</p> <p></p> <p>MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families.</p> <p>If you use that tool, please cite MS2LDA papers. See citations in the main MS2LDA documentation.</p>"},{"location":"featurebasedmolecularnetworking/#running-molnetenhancer-with-fbmn","title":"Running MolNetEnhancer with FBMN","text":"<p>MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication.</p> <p>See the main documentation of MolNetEnh for informations about using it for FBMN. </p>"},{"location":"featurebasedmolecularnetworking/#viewing-the-pcoa-plot-with-emperor-in-qiime2","title":"Viewing the PCoA plot with EMPeror in Qiime2","text":"<p>EMPeror, is an open source and web browser enabled tool that allows researchers to perform rapid exploratory investigations of 3D visualizations of data. To view the PCoA plot (using Bray-Curtis dissimilarity metrics) with the EMPeror Qiime2 plugin, click on \"View qiime2 Emperor Plots\".</p> <p></p> <p>Citation for EMPeror: Yoshiki V\u00e1zquez-Baeza, Meg Pirrung, Antonio Gonzalez, and Rob Knight. Gigascience, 2(1):16, 2013. doi:10.1186/2047-217X-2-16.</p> <p>Citation for Qiime2: Bolyen, E. et al. QIIME 2: Reproducible, interactive, scalable, and extensible microbiome data science. (PeerJ Preprints, 2018). doi:10.7287/peerj.preprints.27295v2</p>"},{"location":"featurebasedmolecularnetworking/#video-tutorial-analyze-fbmn-in-gnps","title":"Video Tutorial - Analyze FBMN in GNPS","text":""},{"location":"featurebasedmolecularnetworking/#tutorials","title":"Tutorials","text":"<p>See our tutorial on using MZmine2 for FBMN analysis of a cohort from the American Gut Project, and our tutorial on running a FBMN analysis on GNPS.</p>"},{"location":"featurebasedmolecularnetworking/#development","title":"Development","text":""},{"location":"featurebasedmolecularnetworking/#source-code","title":"Source code","text":"<p>The FBMN source code can be found on the GNPS_Workflows GitHub repository.</p> <p>Requirements for the input files for each processing tool are described at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking and representative input files are provided at https://github.com/CCMS-UCSD/GNPS_Workflows/tree/master/feature-based-molecular-networking/test/reference_input_file_for_formatter.</p> <p>The \"formatter\" scripts that convert input files of the supported softwares are accessible in the script/ folder.</p>"},{"location":"featurebasedmolecularnetworking/#input-files-requirements","title":"Input files requirements","text":"<p>The FBMN workflow accepts as input files either:</p> <ul> <li>A MS/MS spectral summary and a feature quantification table.</li> <li>or an mzTab-M file and the associated mzML files.</li> </ul>"},{"location":"featurebasedmolecularnetworking/#msms-spectral-summary-and-feature-quantification-table","title":"MS/MS spectral summary and feature quantification table","text":"<p>Applicable for MZmine, OpenMS, MS-DIAL, XCMS, MetaboScape, and Progenesis QI.</p>"},{"location":"featurebasedmolecularnetworking/#msms-spectral-summary","title":"MS/MS spectral summary","text":"<p>The MS/MS spectral summary contains a list of representative spectra in the Mascot Generic Format (MGF file). An MGF file is a plain text file (ASCII) containing peak list information and spectra parameters (more information at http://www.matrixscience.com/help/data_file_help.html. Note that for Progenesis QI, instead of an MGF file, an MSP file (NIST spectral library format) is used instead.</p>"},{"location":"featurebasedmolecularnetworking/#feature-quantification-table","title":"Feature quantification table","text":"<p>The feature quantification table (TXT or CSV file) is specific for each supported processing tool and processed internally by GNPS. Yet, it needs to contain a Feature IDentifier (integer) for each LC-MS1 feature that must be unique and match the \"SCANS=\" header of the corresponding spectrum in the MS/MS spectral summary (MGF file). Note that the number of LC-MS1 features in the feature quantification table can be larger than the number of LC-MS1 features with a spectrum in the MS/MS spectral file, and the Feature IDentifier does not have to be sequencial. As a result, the feature quantification table can contain LC-MS1 feature that does not have an associated MS/MS scan in the MS/MS spectral file. The PCoA generated with qiime2 EMPeror in FBMN workflow uses the entire content of feature quantification table provided.</p> <p>For all the processing tools supported, the mapping between the \"Feature ID\" of the feature quantification table should be consistent with the \"SCAN\" header of the representative spectrum in the MS/MS spectral summary. See this page for example files. Note that internally, the feature quantification table file inputted by the user are converted to a standard internal format prior to FBMN analysis in GNPS. The python scripts used for the conversion feature quantification Table from various software are available here. If you want to add support for another LC-MS processing tool, please contact us.</p>"},{"location":"featurebasedmolecularnetworking/#support-for-mz-tab-m-format","title":"Support for mz-Tab-M format","text":"<p>The mzTab-M format is a standardized output designed for the report of metabolomics MS-data processing results. The FBMN workflow now supports the mzTab-M format (2.0, release 1.0.5). The mzTab-M file has to be inputed along with the related mzML files. </p> <p>Basically, the mzTab-M file is used to retrieve for each LC-MS/MS feature:</p> <ul> <li>The abundance of the LC-MS/MS feature in each sample.</li> <li>The filename (mzML) and the index of the most intense associated MS/MS spectrum. </li> </ul> <p>Note that currently, the mzTab-M has been tested only with XCMS. More informations in the FBMN with mzTab-M documentation.</p>"},{"location":"featurebasedmolecularnetworking/#programmatic-access-to-fbmn","title":"Programmatic Access to FBMN","text":"<p>For programmatic access to the FBMN workflow, contact Mingxun Wang at mingxun.wang@cs.ucr.edu.</p>"},{"location":"featurebasedmolecularnetworking/#join-the-gnps-community","title":"Join the GNPS Community !","text":"<ul> <li>For feature request, or to report bugs, please open an \"Issue\" on the CCMS-UCSD/GNPS_Workflows GitHub repository.</li> <li>To contribute to the GNPS documentation, please use GitHub by forking the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\" with the changes.</li> </ul>"},{"location":"featurebasedmolecularnetworking/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (25.71%), lfnothias (66.77%), Ivan Protsyuk (3.76%), Robin Schmid (2.51%), Laura-Isobel McCall (1.25%)</p>"},{"location":"fileconversion/","title":"Mass Spectrometry File Conversion","text":"<p>Supported Formats at GNPS</p> <p>GNPS supports mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If some of your files are in these formats, please use the following guide to convert them to open formats supported by GNPS.</p> <p>There is a specific guide for Waters data conversion. See here</p>"},{"location":"fileconversion/#data-conversion-super-easy","title":"Data Conversion (Super Easy)","text":"<p>Drag and drop files on our server here and hit convert. </p> <p>You will receive a download of all the converted files in a zip file that is ready to be analyzed! </p>"},{"location":"fileconversion/#data-conversion-easy","title":"Data Conversion (Easy)","text":"<p>This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzML or legacy mzXML). It is as easy as putting files into a folder and batch converting them all without any installation (well nearly so).</p> <ol> <li>Download the zip file here</li> <li>Unzip contents onto a folder on your computer (e.g. Desktop)</li> <li>Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here</li> <li>Put vendor formats in \"Input_Files\" not embedded in other folders</li> <li>Double click on Double-Click_To-Convert.bat - Download zip includes demo files for major vendor formats as a test.</li> <li>Wait patiently</li> <li>Check all the converted files in Output_Folder</li> <li>If there are errors, please check log.txt or read on how to convert files in a more traditional manner.</li> </ol>"},{"location":"fileconversion/#data-conversion-traditional","title":"Data Conversion (Traditional)","text":"<p>The .mzXML or .mzML formats are strongly preferred and will be discussed below.</p> Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA See more informations about the procedure in this Water Technology Brief Shimadzu .lcd MSConvert <p>For problems with MSConvert, please contact the ProteoWizard developers.</p> <p>If you are a vendor and think there are better methods to convert your files to work with GNPS, let us know by contacting us.</p>"},{"location":"fileconversion/#conversion-with-msconvert","title":"Conversion with MSConvert","text":"<p>Download and install ProteoWizard from here.</p> <p>Info</p> <p>Make sure to choose a Windows-compatible version (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed.</p> <p>After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert.</p> <ul> <li> <p>Click Browse and select file(s) for conversion. Then click Add to add them to the MSConvert workflow.</p> </li> <li> <p>Choose an Output Directory</p> </li> <li> <p>Under Options, choose mzML (prefered) or mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression.</p> </li> <li> <p>Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-2. Click Add to add the filter.</p> </li> </ul> Danger <p>Make sure the PeakPicking filter is the first filter in the list (top position), otherwise the conversion will not be centroided! </p> <ul> <li> <p>Save the parameters for the next conversion. This will save you some time and prevent misconfiguration. In Presets (left bottom), click on Save Presets, and select \"Save as default for the format\".</p> </li> <li> <p>Click on Start.  Check your folder for the new .mzML/.mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS).</p> </li> </ul>"},{"location":"fileconversion/#advanced-online-conversion-with-proteowizard-msconvert","title":"Advanced Online Conversion with Proteowizard (MSConvert)","text":"<p>It is possible to convert spectrum files online at the sister site - MassIVE. This site is able to handle thermo RAW and Sciex Wiff files. Please check it out here.</p>"},{"location":"fileconversion/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (80.0%), lfnothias (9.33%), KyobinKang (5.33%), Ivan Protsyuk (5.33%)</p>"},{"location":"fileconversion_waters/","title":"File Conversion (Waters)","text":""},{"location":"fileconversion_waters/#1-introduction","title":"1. Introduction","text":"<p>This page describes how you can convert raw data from Waters machines.</p> <p>One of the most frequent questions from Waters users is if they can use MSe data for molecular networking.  Bascially, MSe data is not available for classical molecular networking workflow, because it is a type of data-independent acquisition method so does not include precursor ion information. However, MSe data can be deconvoluted (currently MS-DIAL is the proper software for it) and applied to the FBMN workflow. You can find relevant information here.</p> <p>Currently, there are two different operating softwares for Waters machine, and they use entirely different file systems; thus, different data conversion pipelines are required.</p> <p>If you are using Waters machines operated by UNIFI software, see 2. How to convert UNIFI data for molecular networking</p> <p>If you have .Raw data files acquired by MassLynx software, see 3. How to convert Waters .Raw files to .mzML </p>"},{"location":"fileconversion_waters/#2-how-to-convert-unifi-data-for-molecular-networking","title":"2. How to convert UNIFI data for molecular networking","text":"<p>UNIFI keeps spectral data in Oracle database architecture, so you cannot get your raw data by simple copy and paste. Thus, as a first step of data conversion, you should export your data as MassLynx .Raw files. It can be done throught the file explorer, as shown below. Right-click on sample dataset will open the dropdown menu.</p> <p></p> <p>Supported GNPS Workflow for Waters UNIFI Machines</p> <p>There is a bug in the current version of UNIFI, so if you try to export DDA data as .Raw, precursor ion m/z values will disappear. Thus, as we know, the only option for building molecular networks with UNIFI-operated system is the MSDIAL-FBMN pipeline with MSe data. If anyone knows how to convert DDA data from UNIFI into mzML, let ue know.</p> <p>If you open the exported .Raw files using MassLynx or other softwares, you will find that m/z values are weird. This happens, because Lockspray correction will not be applied to the exported .Raw files. Thus, Lockspray correction will be the next step of the conversion.</p> <p>The Lockspray correstion can be done while you centroid your data, using MassLynx. UNIFI do not have any option for centroid mode acquisition, so your exported data will be continuum. You can perform both of centroiding and Lockspray correction via 'Accurate Mass Measure' module of MassLynx. You can find it here:</p> <p></p> <p></p> <ol> <li> <p>Select files by double-clicking, or Operations &gt; Select. If you want to move to other directory, close the module window, and open any datafile in MassLynx. Then the working directory will be changed.</p> </li> <li> <p>When files are selected, change the 'Process type' to 'Automatic Peak Detection'.</p> </li> <li> <p>go to Parameters &gt; Automatic Peak Detection Parameters, and select proper ion mode.</p> </li> </ol> <p></p> <ol> <li> <p>Check the both options 'Set Peak Detection Paramters Automatically' and \"perform Lock Mass Correction' on.</p> </li> <li> <p>Put a proper Lock Mass m/z value into the \"Lock Mass\" window. If you are using leucine enkephalin, 556.2771 for positive ion mode, and 554.2615 for negative ion mode.</p> </li> <li> <p>Click 'OK' to close the parameter setting window, then click \"Process\".</p> </li> </ol> <p>Centroiding and Lock mass correction does not support multithreading, so this will take a long time. We recommend to run this on high-performanced workstations.</p> <p>When the processing is finished, you are ready to apply the files into the FBMN with MS-DIAL workflow. You can find detailed guideline here.</p>"},{"location":"fileconversion_waters/#3-how-to-convert-waters-raw-files-to-mzml","title":"3. How to convert Waters .Raw files to .mzML","text":"<p>ProteoWizard msConvert has been updated several times, and the recent version resolved many problems known for Waters data conversion.</p> <p>Here is an updated version (with Proteowizard Release 3.0.21120) of the double-click converter we provided in our guideline. Convert files with 'Double-Click_To-Convert_waters.bat'.</p> <p>There is a known issue on precursor ion m/z values when Waters .Raw data are converted to .mzML. The precursor ion fields of MS/MS scans will have m/z values of quadrupole isolation windows, instead of accurate mass values. Unfortunately, we do not have any solution for this issue. Thus, if you will use converted .mzML files directly for classical MN, remember that every m/z values are drifted from the original data.</p> <p>If we will use the FBMN workflow, you can detour this issue by using .Raw files for MZmine processing, without converting them to .mzML files. However, the direct import of Waters .Raw into MZmine is not possible in MZmine ver 2.53 due to a bug; so try it with old releases.</p>"},{"location":"fileconversion_waters/#4-precursor-mz-values-drift-problem","title":"4. Precursor m/z values drift problem","text":"<p>As mentioned before, m/z values of precursor ions in .mzML and .mzXML files can be different from the real value. The script that can actually fix this problem on .mzXML files can be found there.</p>"},{"location":"fileconversion_waters/#page-contributors","title":"Page Contributors","text":"<p>KyobinKang (95.59%), elnurgar (4.41%)</p>"},{"location":"fileupload/","title":"GNPS File Upload","text":"<p>To upload files to GNPS for analysis, the preferred method is to use an FTP client. This provides a robust and batch manner to upload many files. The one big downside is that you have to have to install an FTP client if you don't already have one. We offer as an alternative an online browser drag and drop that is limited to small files.</p> <p>If you are looking for making your dataset publicly available on MassIVe please check the Create a Public Dataset section</p>"},{"location":"fileupload/#ftp-batch-file-uploads","title":"FTP Batch File Uploads","text":"<p>To upload data, this requires you to have already created a GNPS account. If you have not yet done so please follow these instructions.</p> <p>Once you have a GNPS  account, it is strongly recommended that you use FTP to upload your dataset files to your account, as opposed to the GNPS web interface. This is because the web-based upload interface is optimized for quick uploads of small files, whereas for the much larger files, FTP is much more stable and robust.</p> <p>To connect to your GNPS user account via FTP, simply log on to the FTP server at massive.ucsd.edu, using the same username and password as your GNPS web account.</p> GNPS FTP Server massive.ucsd.edu <p>Note</p> <p>On MacOS if you use Finder, make sure to connect with <code>ftp://massive.ucsd.edu</code></p> <p>To do this, you will need to use your preferred FTP client program. There are many good free FTP clients, but a few of the more popular ones that have been tested with MassIVE include:</p> <p>WinSCP (recommended and used for the example illustrations below) CoreFTP CoffeeCup Free FTP</p> <p>Warning</p> <p>We no longer recommend FileZilla, since it was found to contain malware in a recent update.</p> <p>Most FTP client programs use a similar interface. There is usually some sort of server or session management interface, allowing you to set up and store your connection information for a particular FTP server, and then re-connect to that server easily. For example, in WinSCP:</p> <p></p> <p>When setting up your FTP server connection, be sure to use plain FTP with no encryption. Then enter massive.ucsd.edu as the server or \u201chost\u201d name (port 21), followed by your GNPS username and password, and the client should connect you to your user file space.</p> <p>From there, you can upload files by finding them on your computer (usually in the left panel) and then dragging them over to the server (usually in the right panel), or you can download files from the server to your computer by dragging them in the reverse direction.</p> <p>You can also experiment with the FTP client interface to move and rename files and folders on the server, so as to reorganize your uploaded data in whatever manner you prefer.</p> <p></p> <p>Important:</p> <p>In case you experience slow file upload speed on the massive/gnps side (not your own internet upload speed), you can increase the number of paralel uploads through your FTP client. In WinSCP for exampel this can be doen by running uploads in background mode and increase the paralel uploads in the background preferences.</p>"},{"location":"fileupload/#browser-file-uploads","title":"Browser File Uploads","text":"<p>To upload files to GNPS using the browser, you can use our web drag and drop uploader.</p> <p>Note</p> <p>This browser upload is limited to 20 MB for each size</p> <p>This is not the recommended manner to upload files, but if you're in a hurry, we can't fault you.</p> <p>Located under the upload tab</p> <p></p> <p>To select the folder to upload files into, click on a single folder in the file structure tree.</p> <p></p> <p>Now drag and drop your files into the Drag and Drop area to upload.</p> <p></p>"},{"location":"fileupload/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (84.93%), Simone Zuffa (2.74%), Daniel Petras (12.33%)</p>"},{"location":"gc-ms-data-processing-MZmine2/","title":"GC-MS data processing with MZmine","text":"<p>Below, we describe briefly how to perform processing GC-MS data. To do that, the following steps are required:</p> <ol> <li> <p>The detection of masses from the .mzML files to build extracted ion chromatograms</p> </li> <li> <p>The detection of features/peaks from the built chromatograms</p> </li> <li> <p>The spectral deconvolution can be done with one of the following algorithms:</p> </li> </ol> <p>\u200b    - Hierarchical Clustering</p> <p>\u200b    - Multivariate Curve Resolution</p> <ol> <li> <p>The alignment of the peaklists</p> </li> <li> <p>The missing peaks search</p> </li> <li> <p>Exporting the files for GNPS</p> </li> <li> <p>Uploading the files to GNPS and run a the GC-MS workflow</p> </li> </ol> <p>For detailed instructions and more information about parameters used in the steps 1/2/4, see the section of pre-processing LC-MS data, and for the step 3, see the section pre-processing GC-MS data available in ADAP user manual. At each step, click on \"Help\" to see how to fell out the parameters correctly. </p> <p>Before starting, it is recommended to convert the files to .mzML format, but note that MZmine can also accept .netCDF and several proprietary vendor format. </p>"},{"location":"gc-ms-data-processing-MZmine2/#conversion-to-mzml-with-msconvert","title":"Conversion to mzML with MSConvert","text":"<p>The GC-MS data is in the profile mode, then it has to be centroided. To convert and centroid data, please see our conversion guide. </p>"},{"location":"gc-ms-data-processing-MZmine2/#installation-of-mzmine","title":"Installation of MZmine","text":"<p>Download the latest version of MZmine. Once you have your .mzML files and MZmine opened, import your raw data files into a project by following \u201cRaw data methods / raw data import\u201d and select your files. Your .mzML files are now in the \u201cRaw data\u201d window. </p> <p></p> <p>Save your current project by clicking on \u201cProject / Save project as\u201d. It is important to save your project regularly and for future access to the processing results. </p> <p>Reproducibility with the batch mode After having optimised the parameters in the GUI, it is strongly recommended to consolidate the parameters used for MZmine processing in a batch file (batch mode). This will ensure reproducibility of your analysis. </p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#detection-of-masses","title":"Detection of masses","text":"<p>The masses detection is going to detect individual ions in each scan and to generate a mass list of each scan. Select your .mzML files of interest on the \u201cRaw data\u201d window, then go to \u201cRaw data methods / Feature detection / Mass detection\u201d and set a Noise level as shown in the following picture. Make sure your threshold is not too high by clicking on \u201cShow preview\u201d. Then click \u201cok\u201d to process. </p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#detection-of-peaks","title":"Detection of peaks","text":"<p>Open the ADAP chromatogram builder window by following \u201cRaw data methods / Feature detection / ADAP Chromatogram builder\u201d. This module is going to connect data points from the previously created mass lists of each scan and generate an extracted ion chromatograms. Set the parameters accordingly to the instrument used. Click \u201cHelp\u201d at the bottom of the pop-up window, or go on each parameter to see the details and how to set the parameters properly. When it is finished, click \u201cOK\u201d.</p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#chromatogrampeak-deconvolution","title":"Chromatogram/Peak deconvolution","text":"<p>The chromatogram deconvolution consists of the detection and the separation of individual peaks in each chromatogram. After selecting your previously generated chromatograms in the \u201cFeature lists\u201d window, open the parameter window by following \u201cFeature list methods / Feature detection / Chromatogram deconvolution\u201d, then select Wavelets (ADAP) for the \u201cAlgorithm\u201d. </p> <p></p> <p>Then, by clicking on the ellipse, a parameter window opens. Choose Wavelet Coeff. SN and set the parameters accordingly to the instrument used and previous parameters used to generate chromatograms.  The RT wavelet range parameter is chosen by looking at the peak-detection results when clicking on \u201cShow preview\u201d. By trying several different values, see when the picks-detection (colored picks) is optimal in some Chromatogram for each Feature list. Then click on the \u201cok\u201d button. This step of peak-detection could take a while. </p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#spectral-deconvolution","title":"Spectral deconvolution","text":"<p>During the spectral deconvolution, similar peaks are combined and then, a pseudo fragmentation spectrum is built (also called deconvoluted spectrum), using peaks intensities. Two spectral deconvolution algorithms are available: Hierarchical Clustering and Multivariate Curve Resolution. </p> <p>\u200b       The Hierarchical Clustering is fast but requires users to specify multiple parameters. It can be run by following \u201cFeature list methods / Spectral deconvolution / Hierarchical Clustering\u201d when your previously generated chromatograms deconvoluted are selected. Check the box \u201cShow preview\u201d to preview the first clustering parameters (top right) and peaks that passed the filter with the second clustering parameters (bottom right), by selecting Cluster list from your Feature list. The first parameters Min cluster distance / Min cluster size / Min cluster intensity refer to the ability to combine peaks based on the proximity of their retention times. The filtering parameters are Find shared peaks / Min edge-to-height ratio / Min delta-to-height ratio / Min sharpness / Exclude m/z values. The last parameter Shape-similarity tolerance (0..90), involved in the second clustering step, refines the clusters by calculating the similarity of the peak\u2019s shapes. Finally, the module \u201cModel based on\u201d allows us to take the highest Sharpness or M/Z value passed peaks to propose as a model peak. When each parameter are set properly, process the spectral deconvolution by clicking on \u201cOK\u201d.</p> <p></p> <p>\u200b       The Multivariate Curve Resolution is slower but only a few parameters are used. Its model peaks that can have arbitrary shapes. Open the parameters window by following \u201cFeature list methods / Spectral deconvolution / Multivariate Curve Resolution\u201d. Because of the spectral deconvolution uses \u201cChromatograms\u201d and detected \u201cPeaks\u201d previously generated, the user must select them using the \u201cSpecific feature lists\u201d option for both, then click on the ellipsis button and check the boxes of the chromatograms and peaks list of interest, or using the \u201cFeature list name pattern\u201d option. After those parameters are set, click \u201cOk\u201d.</p> <p></p> <p>When the selection is finished, crossing \u201cShow preview\u201d allows to see the influence of the parameters on the Clusters for each Feature list. Look at the preview plot (top right) for the Deconvolution window tolerance width parameter and the model peaks (right bottom) for Retention time tolerance and Minimum Number of Peaks parameters. Process the spectral deconvolution with the \u201cOk\u201d button.</p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#alignment-of-the-peak-lists-accross-multiple-samples","title":"Alignment of the peak lists accross multiple samples","text":"<p>The ADAP alignment module calculates the similarity between fragmentation mass spectra to find the best alignment. When the previously generated spectral deconvolution lists are selected, set the alignment parameters in the window which opens when following \u201cFeature list method / Alignment / ADAP Aligner (GC)\u201d. Click \u201cOk\u201d, then the aligned feature list appears in the \u201cFeature lists\u201d window. </p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#missing-peaks-search","title":"Missing peaks search","text":"<p>Finally, a module named \u201cPeak finder (multithreaded)\u201d, available in \u201cFeature list methods / Gap filling / Peak finder (multithreaded)\u201d is used to search and find missing peaks in the feature list previously generated from the peaks in the raw data. Select your aligned feature list, then apply peak finder parameters by clicking \u201cOk\u201d.</p> <p></p> <p>Open the generated aligned table by double-clicking on it. Taking a look at this table can help to define if the used parameters are good enough. This table can, not only be ordered by the ID, giving information about the number of detected features, but also by the m/z or the RT.</p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#export-results","title":"Export results","text":"<p>A new module (introduced in MZmine 2.52) allows to export the GC-MS data processing results (feature quantification table as .CSV and a spectral summary file as .MGF) into the correct input format for the GNPS GC-MS library search workflow. The export module is available at \u201cFeature list methods / Export / Import / Export to GNPS-GC-MS (with ADAP)\u201d. In the open window, complete the filename and press \u201cOk\u201d.</p> <p></p> <p>The exported files are the .MGF file containing the deconvolved EI spectra and the .CSV feature quantification table. Those exported .MGF file and .CSV feature table can be used for the GNPS library search/molecular networking workflow directly, without any modifications. They need to be provided as input files by adding to the: \u201cDeconvolved EI Spectra MGF File\u201d and \u201cFeature Quantification Table\u201d correspondingly.</p> <p></p>"},{"location":"gc-ms-data-processing-MZmine2/#uploading-the-files-to-gnps-and-run-a-the-gc-ms-workflow","title":"Uploading the files to GNPS and run a the GC-MS workflow","text":"<p>Please refer to the following page for more information on the GC-GNPS workflow.</p>"},{"location":"gc-ms-data-processing-MZmine2/#kovats-ri-marker-file-in-mzmine","title":"Kovats RI marker file in MZmine","text":"<p>MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format.</p> <p>See tutorial video on Kovats RI marker file creation within MZmine.</p>"},{"location":"gc-ms-data-processing-MZmine2/#citation","title":"Citation","text":"<p>Jiang  W,  Qiu  Y,  Ni  Y,  Su  M,  Jia  W,  Du  X: An  automated  data  analysis  pipeline  for GC-TOF-MS metabonomics studies. J Proteome Res 2010, 9(11):5974-5981.</p> <p>Ni Y, Qiu Y, Jiang W, Suttlemyre K, Su M, Zhang W, Jia W, Du X: ADAP-GC 2.0:  deconvolution of coeluting metabolites from GC/TOF-MS data for metabolomics studies. Anal Chem 2012, 84(15):6619-6629.</p> <p>Ni Y, Su M, Qiu Y, Jia W, Du X: ADAP-GC 3.0: Improved Peak Detection and De-convolution of Co-eluting Metabolites from GC/TOF-MS Data for Metabolomics Studies. Anal Chem 2016, 88(17):8802-8811.</p>"},{"location":"gc-ms-data-processing-MZmine2/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (1.59%), MelissaESPOSITO (98.41%)</p>"},{"location":"gc-ms-data_processing_MS-DIAL/","title":"GC-MS data processing with MS-DIAL","text":""},{"location":"gc-ms-data_processing_MS-DIAL/#convert-data","title":"Convert data","text":"<p>To convert the Vendor specific files, go here to download and use msConvert or the default GNPS File converter on GNPS-quickstart (drag and drop).  </p> <p>Browse the RAW files from Vendor into MSConvert interface. Typically .mzML output format is chosen with binary code precision of 64 bit for high resolution spectra. Uncheck the \u201cUse zlib compression\u201d option and select msLevel 1. Also, .mzML format is amenable to MS-DIAL analysis. The MSConvert window looks like:  </p> <p></p> <p>Download the most updated version of MS-DIAL from RIKEN PRIMe site. MS-DIAL has an extensive tutorial  for step-by-step guidance here. Open MS-DIAL by clicking on the icon or shortcut.  </p> <p></p>"},{"location":"gc-ms-data_processing_MS-DIAL/#processing-data","title":"Processing data","text":"<p>In the MS-DIAL software interface pops up, import your file by clicking on \u201cFile\u201d option. As highlighted for the GC-EI-MS data, choose \u201cHard ionization\u201d and then choose \u201cCentroid\u201d or \u201cProfile\u201d based on your mass-spec vendor data. You may add other information under the \u201cAdvanced\u201d tag for more meta data.  </p> <p></p> <p>In this window, click on \u201cBrowse\u201d to open the folders where the converted .mzML files are stored. The project file path and where the converted files need to sit have to be identical, and assigns a project ID with .mtd suffix.</p> <p></p> <p>Hit \u201cNext\u201d to go to the next page.</p> <p>On the next page, click \u201cBrowse\u201d and choose the files that you need to analyze.</p> <p></p> <p>In this window, the user needs to associate correct File names with their types (standard, samples, QC, Blank etc...), and assign them a Class ID. Any analytical order information, various batches or different injection volume can be set if needed.  </p> <p></p> <p>Then, hit next. In the new window, provide \u201cData collection\u201d information such as mass range begin and end, depending on your data, Retention time (min), and Number of threads which could be left at the default value of 1.</p> <p></p> <p>In the \u201cPeak Detection\u201d Window, provide the Minimum peak height information, which is typically 10,000 or higher for high resolution instruments like QEGC-Orbitrap-MS. For accurate mass, the box must be check, and provide same values for the Mass slice width and Mass accuracy. \"Advanced\" option can be left as default.</p> <p></p> <p>In the \u201cMS1Dec\u201d tab, the \"Deconvolution parameters\" can be set as shown in the picture. </p> <p></p> <p>The \u201cIdentification\u201d tab should not be completed as the library search is performed on GNPS. </p> <p>Click on the \u201cAlignment\u201d tab, a default \u201cResult name\u201d is given to the alignment table, but the user can change it. Alignment can be based on RI or RT. An additional EI similarity tolerance can be set during alignment as well. The advanced parameters can be optionally changed.</p> <p></p> <p>The last tab named \u201cFiltering\u201d, allows the user to set certain filters depending on the question in hand or ignore it. Once all Tabs are filled with user specific/default options, the user can click \u201cFinish\u201d to start the process. </p> <p></p>"},{"location":"gc-ms-data_processing_MS-DIAL/#visualize-data","title":"Visualize data","text":"<p>A successfully finished job window on MS-DIAL looks like:  </p> <p></p> <p>By clicking on the \u201cAlignment navigator\u201d panel (bottom left) on the specific alignment result file, user can see the generated alignment table. This table can be sorted by ID, RT, RI, Quant mass, S/N, and other statistical values, and/or filtered by Metabolite name, m/z range, or RT range. </p> <p></p>"},{"location":"gc-ms-data_processing_MS-DIAL/#export-results","title":"Export results","text":"<p>To export the generated tables, click on the \u201cExport\u201d tab, and chose \u201cAlignment Result export\u201d. In the Alignment window, chose a \"Directory\" to save the results, and select the correct \u201cfile\u201d corresponding to your aligned table. The user should check Raw data matrix (Height and Area), Normalized data matrix, Representative spectra, Parameters, Peak ID matrix, Retention time matrix, m/z matrix, and S/N matrix export boxes. Spectra-type should be selected to \u2018centroid\u2019 and as \u201c.mgf\u201d format for the downstream GNPS analysis workflows. Then, the user can click \u201cExport\u201d. </p> <p></p> <p>A new module on GNPS allows to use the results of MS-DIAL processing (quantification table as area.TXT and a spectral summary file as .MGF) into the correct input format to lunch the GC-GNPS workflow.</p>"},{"location":"gc-ms-data_processing_MS-DIAL/#uploading-the-files-to-gnps-and-run-a-the-gc-ms-workflow","title":"Uploading the files to GNPS and run a the GC-MS workflow","text":"<p>Please refer to the following page for more information on the GC-GNPS workflow.</p>"},{"location":"gc-ms-data_processing_MS-DIAL/#citation","title":"Citation","text":"<p>Tsugawa, H., Cajka, T., Kind, T. et al. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nat Methods 12, 523\u2013526 (2015).</p>"},{"location":"gc-ms-data_processing_MS-DIAL/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (2.33%), MelissaESPOSITO (97.67%)</p>"},{"location":"gc-ms-deconvolution/","title":"GC-MS Deconvolution for GNPS","text":"<p>The GC-MS data have to be processed before performing the spectral library search and molecular networking workflow. See more information here. Below, we describe how to use the GC-MS deconvolution workflow on GNPS that uses MS-Hub. Alternatively, ADAP-MZmine or MS-DIAL can be used.</p>"},{"location":"gc-ms-deconvolution/#gc-ms-deconvolution-workflow-on-gnps-with-ms-hub","title":"GC-MS Deconvolution Workflow on GNPS with MS-Hub","text":""},{"location":"gc-ms-deconvolution/#configure-the-workflow","title":"Configure the Workflow","text":"<p>Log in to GNPS (gnps.ucsd.edu). If an account has to be created first, refer to GNPS documentation at the quickstart banner. Before starting, files from GC-MS analysis must be converted from proprietary vendor formats to .mzML, or .CDF file formats. To convert, please see our conversion guide. </p> <p>The GNPS home page includes two sections to launch GNPS GC-MS data analysis job, one for data processing - deconvolution and one for GC-MS library search/networking. By clicking on the \u201cProcess Raw GC-MS data\u201d icon, a job page opens.</p> <p></p> <p>(1) Start by entering the title of your job. </p> <p>(2) The \u201cSelect Files\u201d section allows importing existing or previously uploaded dataset(s) from MassIVE. Select the files that need to be processed by clicking on \u201cSelect Input Files\u201d. A pop-up window appears with three tabs: \u201cSelect Input Files\u201d, \u201cUpload Files\u201d, and \u201cShare Files\u201d. To upload files to GNPS using the browser (limited to 20MB), you can use our web drag and drop uploader in the \u201cUpload Files\u201d banner. See the documentation here for more information. </p> <p>(3) Readers following the tutorial can go to the \u201cShare Files\u201d tab, enter the MassIVE accession number for the dataset (e.g. MSV000084226) in the \u201cImport Data Share\u201d box.</p> <p>(4) Then click on \u201cImport\u201d. </p> <p>(5) This specific dataset is now available directly in your GNPS user workspace at the \u201cSelect Input Files\u201d section. </p> <p>(6) Select the input file, who appears highlighted in blue color, and click on \u201cSpectrum files\u201d. </p> <p>(7) When the selected files are visible in the \u201cSelected Spectrum Files\u201d box, click on the \u201cFinish Selection\u201d button.</p> <p></p> <p>Warning</p> <ul> <li>All of the data used for the job must be collected using the same GC protocol (temperature program, column, injection mode). Multiple datasets could be combined as long as the data have been collected using the same protocol. </li> <li>When creating a dataset on MassIVE (massive.ucsd.edu), include \u201cGNPS\u201d and \u201cGC\u201d in the name (As GNPS_GC_Name of the GNPS-MassIVE dataset). See the documentation about Dataset Creation/Sharing and an example of a MassIVE dataset MSV000084226 for more information.</li> <li>An insufficient volume of data causes unstable deconvolution resulting in spurious low-quality spectra. It is recommended for datasets smaller than ~10 files to use alternative deconvolution solutions such as MZMine2/ADAP, MS-Dial or XCMS. Increasing the number of files, for example, could be done by co-analyzing multiple datasets obtained with the same experimental protocol. </li> </ul> <p>The \u201cAdvanced MSHub Processing\u201d section displays some automatic setting parameters (related to peak symmetry and baseline adjustment) determined internally by MSHub. The user does not need to provide settings, although they can be set manually, should the user choose to do so. </p> <p>(8) In the \u201cAdvanced Clustering\u201d section, the cluster spectra have to be turned off (CLUSTER_SPECTRA = NO). The TIME_UNIT must be set as minutes or seconds, depending on the chromatography time units of your data (typically the default time units are seconds in NetCDF files and minutes in .mzML files). </p> <p>(9) Enter your email address.</p> <p>(10) Finish by clicking \u201cSubmit\u201d.</p> <p></p>"},{"location":"gc-ms-deconvolution/#inspect-the-results","title":"Inspect the Results","text":"<p>When the job has been completed, you will receive a notification email and the status \u201cDONE\u201d appears on your GNPS job. All submitted jobs appear under the \u201cjobs\u201d link from the GNPS main menu. </p> <p></p> <p>By selecting the job of interest and clicking on the \u201cDone\u201d button, the \u201cJob Status\u201d window opens with different options:</p> <p>(i) Explore deconvolution results with the \u201cView All Deconvolved Spectra\u201d option.</p> <p>(ii) Download/export quantification results and feature table by clicking on \u201cDownload Spectra as MGF\u201d, \u201cDownload Feature Table\u201d (MZmine formatted), \"Download MSHub Data Integral Table\", or \"Download MSHub Spectra Data\".</p> <p>(iii) Continue the process with the \u201cSearch Spectral Library and Molecular Network\u201d tool to conduct a library search and create a molecular network.</p> <p></p> <p>The first line of the MSHub data integral table indicates the retention time (in min.) with a balance score in parenthesis (in percentage). The \u201cRel. Max Integral\u201d and \u201cSample\\Best order\u201d values relate to the relative proportion of each peak in the data and the ranking of the feature in terms of its size, correspondingly.</p> <p></p> <p>The feature table is formatted as a MZmine table output. </p> <p></p>"},{"location":"gc-ms-deconvolution/#gc-ms-data-processing-with-adap-mzmine","title":"GC-MS data processing with ADAP-MZmine","text":"<p>Deconvolution of GC-EI-MS data can be performed within MZmine. User can follow the ADAP step-by-step documentation here or refer to the ADAP manual on the MZmine website for detailed instructions.</p>"},{"location":"gc-ms-deconvolution/#kovats-ri-marker-file-in-mzmine","title":"Kovats RI marker file in MZmine","text":"<p>MZmine (version 2.52 and later) also offers the extraction of Kovats RI markers into the GNPS GC-MS file format for this particular input.</p> <p>See tutorial video on Kovats RI marker file creation within MZmine.</p>"},{"location":"gc-ms-deconvolution/#gc-ms-data-processing-with-ms-dial","title":"GC-MS data processing with MS-DIAL","text":"<p>Deconvolution of GC-EI-MS data can be performed within MS-DIAL. User can follow the step-by-step documentation here or refer to the MS-DIAL documentation website for detailed introduction.</p>"},{"location":"gc-ms-deconvolution/#citation","title":"Citation","text":"<p>Aksenov AA, Laponogov I, Zhang Z, Doran SL, Belluomo I, Veselkov D, Bittremieux W, Nothias LF, Nothias-Esposito M, Maloney KN, Misra BB. Auto-deconvolution and molecular networking of gas chromatography\u2013mass spectrometry data. Nature Biotechnology. 2021 Feb;39(2):169-73. Auto-deconvolution and molecular networking of gas chromatography\u2013mass spectrometry data </p> <p>https://doi.org/10.1038/s41587-020-0700-3</p>"},{"location":"gc-ms-deconvolution/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (8.79%), MelissaESPOSITO (90.11%), Robin Schmid (1.1%)</p>"},{"location":"gc-ms-library-molecular-network/","title":"GC-MS Spectral Library Search and Molecular Networking","text":""},{"location":"gc-ms-library-molecular-network/#configure-the-workflow","title":"Configure the workflow","text":"<p>There are two options to open the job page for conducting a spectral library search and create a molecular network.</p> <ul> <li>By clicking on the link \u201cSearch Spectral Library and Molecular Network\u201d from the deconvolution job page status. See GC-MS Deconvolution for GNPS documentation. </li> <li>By clicking on the \u201cAnalyze\u201d icon from the GNPS home page.</li> </ul> <p></p> <p>The \"Search Option\" section in the job window allows importing files needed for the spectral library search and the molecular networking generation. By clicking on \"select Input Files\", a pop-up window appears, allowing to select every needed file.</p> <p>(1), (2) The .mgf file containing the deconvolved EI spectra and the .csv feature quantification table automatically (with balance score) adds if the spectral library search is launched from the deconvolution job performed with MS-Hub. Otherwise, they can be added by the user from others processing software (MS-DIAL, MZmine2, etc...). The right \"Quantification Table Source\" has to be selected.</p> <p></p> <p>(3) Select your metadata table formatted as a tab-separated .txt file. To create your metadata table properly, see the documentation here. </p> <p>(4) Public Libraries files are selected by default. However, user could add their libraries on GNPS by following the instructions here, or by uploading them in .mgf format (drag and drop on \u201cUpload File\u201d section). If the libraries are curated and could be shared with the community, it is encouraged to upload them to GNPS. </p> <p>(5) The carbon marker table should be added. This table must be formatted as a comma separated values (.csv) file in the following headers: Compound_Name - name of the compound (string), Carbon_Number - number of carbons (integer), RT - retention time in seconds (float). Example File. The file can also be created from the raw experimental chromatograms of the RI marker compounds using MZMine2 as described in this video tutorial. </p> <p>(6) Click on the \"Finish selection\" button to close the pop-up window. </p> <p></p> <p>Search Options </p> <ul> <li>Fragment Ion Mass Tolerance is the maximum mass deviation between the observed fragments and the ions selected within the libraries. The mass tolerance setting is related to the accuracy of the mass analyzer. Default value is \u00b1 0.025 Da for high-resolution mass spectrometers (q-TOF, q-Orbitrap) while \u00b1 2.0 Da is recommended for low-resolution MS/MS instruments (ion traps, triple-quadrupole/QqQ).</li> <li>Min Matched Peaks is the minimum number of common fragment ions that should share a spectra to be considered as a spectral library annotation. This parameter should be tuned depending on the molecules of interest and experimental conditions. It is recommended to perform several jobs modifying this parameter for testing possible outcomes variations in annotations. Typically high quality features contain more than 15 ions in EI data.</li> <li>Score Threshold is the minimum cosine score to be considered as an annotation in spectral library search. 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and it usually performs well with data obtained through experiments without derivatization, but that will depend on the quality of the mass spectra obtained. For derivatized compounds, the cosine value for good matches is generally lower by ~0.1 due to an inferior quality of the EI spectra.</li> </ul> <p>The job window proposed four fields of advanced search, filtering, network, and Kovats index calculation options. Click on the \u201cShow Fields\u201d button to show advanced options. The default parameters recommended for obtaining good results have been determined and pre-populated as described in the table Parameters for Library Search. However, users are encouraged to adjust the settings as appropriate for their analysis. </p> <p>(7) Enter your email address.</p> <p>(8) The job can be launched by clicking on the \u201cSubmit\u201d button.</p> <p></p> <p>Advanced Search Options</p> <ul> <li>Library Class is the level of library to include hits. Keep default of \u201cBronze\u201d to include all possible hits from libraries.</li> <li>Top Hits Per Spectrum is how many top hits ranked by the cosine score to be included into the results. It is recommended to keep this number relatively high (for example, 10 to include top 10 matches) to increase the possibility to have a correct annotation if it is not in the first top hit.</li> <li>Spectral Library allows to select spectral libraries to include in the search. </li> </ul> <p></p> <p>Advanced Filtering Options</p> <ul> <li>Filter StdDev Intensity , Filter Precursor Window and Filter Library are used for tandem MS data.  Leave defaults parameters, \"0\" and \"Don\u2019t Filter\", respectively.  </li> <li>Filter SNR Intensity and Min Peak Int. allow to delete all ions with a signal to noise ratio (SNR) or with  a signal, in the EI spectrum, below this value raw intensity. If raw intensities of your data are very low, use a default value of 0.  </li> <li>Filter peaks in 50Da Window removes peaks that are not on the top 6 most intense within a +/- 50 Da window. If fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signal.</li> </ul> <p></p> <p>Advanced Network Options</p> <ul> <li>Min Pairs Cos is the minimum cosine score required for an edge to be formed between nodes. Lower value will increase the size of the clusters by inducing the clustering of less related spectra, while higher value will be more restrictive. The value set as default is 0.7. This value has been determined to effectively delineate subclasses and Levels 6 and 7, and usually performs well with data obtained through experiments without derivatization. For derivatized compounds, the cosine value for good matches is generally lower due to an inferior quality of the EI spectra.</li> <li>Network TopK is the maximum of neighbor nodes for one single node. The edge between two nodes are kept only if both nodes are within each other's TopK most similar nodes. </li> <li>Maximum Connected Component Size is the maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size.</li> </ul> <p></p> <p>Advanced Kovats Index Calculation Options</p> <ul> <li>Perform Kovats Calculation is turn on if the user need to calculate Kovats RIs for the compounds during library search.</li> <li>Input Carbon Marker File (Optional) allows to import your carbon marker file, use for retention index estimation, if needed.</li> <li>MSHub Balance Score allows to import your file that contains information for the balance score. The balance score is an estimation of mass spectrum patterns reproducibility across the entire dataset only available if deconvolution is conducted using MSHub, if needed. </li> </ul> <p></p> <p>Advanced Dereplicated Options</p> <p>These options are only relevant if/when the parent mass information is available, so it is strongly recommended to leave the default values.</p>"},{"location":"gc-ms-library-molecular-network/#inspect-the-results","title":"Inspect the Results","text":"<p>After the job has been completed, the job status page gives access to several molecular networking results views:</p> <p>(i) \u201c View All Library Hits\u201d opens the interface that allows visualization of spectral matches to the reference database from selected libraries. It will display all of the top matches for each feature to different libraries and relevant information including retention time. </p> <ul> <li>The displayed columns could be edited by clicking the \u201cSelect columns\u201d link in the upper left corner. The possible annotations could be sorted by their cosine value to aid in selecting the best annotation using the researcher's judgment. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the \u201cNo\u201d field listed in the feature table. </li> <li>Clicking on the spectrum icon at the left side of the screen will show a mirror plot comparison between the query spectrum and the reference spectrum. This allows assessing the quality of matches between the deconvolution and the reference spectra. </li> <li>The results can be sorted by the match score, balance score, number of shared peaks in the spectrum (can also be set when launching the job), TIC, Kovats RI (if enabled by user), and used library(ies). To filter the results, type upper and/or lower boundary values in the text field underneath the corresponding column header and hit \"Enter\" or click \"Filter\" button on the left. Cosine and balance score can be jointly used as filters for processing of the final results: the highest quality annotations would require to pass thresholds for both metrics. To ensure highest quality/lowest FDR of the top match, we recommend using the cosine of &gt;0.9 and &gt;60% correspondingly. Alternatively, poor match scores can also be considered if they pass a conservative balance score value of &gt;80% . Note that the high match score simply reflects that a library spectrum exists that is highly similar to the query spectrum (an occurrence that is likely for large libraries and sparse patterns), while a high balance score is reflective of the high confidence in deconvolution of the spectral pattern. Higher values of both metrics would improve quality of matches, but the \u201coptimal\u201d thresholds are data-specific and may be dependent on the circumstances. However, we recommend to use the above values as a good starting point.</li> </ul> <p>(ii) The \u201cView Top Hits\u201d option accesses the list of: top hits (Compound_Name) with the corresponding Scan (feature number), matched library class, cosine, number of shared peaks between library entry and the spectral pattern, abundance as TIC, retention time given in units used in input raw files, and information from the reference library entry, for all annotated spectra.</p> <p>(iii) The \"View All Spectra With Annotations\" option gives access to all annotated spectra with the same information listed. In addition, the balance score and Kovats RI values are also listed (if available) to allow including this information into making decisions for feature annotations.</p> <p>The displayed columns could be edited by clicking the \"Select columns\" link and selecting/deselecting columns as needed. </p> <p>NOTE: Clicking the \"Download\" link in ether view would allow downloading the results as a table will all the associated information for each library hit (including InChi, SMILES and CAS, whenever available); the file with the name \"MOLECULAR-LIBRARYSEARCH-GC*.tsv\" is in the root of the downloadable compressed folder.</p> <p>The button at the top of the page \u201cBack to status page\u201d allows going back. To visualize molecular networks generated, the user has to download the input network files from the \u201cDownload Cytoscape Data\u201d link, save the folder, and unzip it.</p> <p>In the job status page, some advanced views are available to visualized qiime2 emperor plots or bi-plots, and to download the associated tables. For more information, follow this link.</p> <p></p>"},{"location":"gc-ms-library-molecular-network/#cloning-a-job","title":"Cloning a job","text":"<p>If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.  </p>"},{"location":"gc-ms-library-molecular-network/#sharing-data","title":"Sharing data","text":"<p>The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation.</p>"},{"location":"gc-ms-library-molecular-network/#addingcurating-reference-spectra","title":"Adding/Curating reference spectra","text":"<p>High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation. If the user wishes to upload &gt;50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help. The compliance of the file format can be verified using an online workflow.</p>"},{"location":"gc-ms-library-molecular-network/#visualization","title":"Visualization","text":""},{"location":"gc-ms-library-molecular-network/#network-visualization-in-cytoscape","title":"Network Visualization in Cytoscape","text":"<p>The network can be visualized in an external software such as Cytoscape [1], an open-source software platform used to visualize, analyze, and annotate molecular networks from GNPS. Cytoscape is available for download from here. This software allowed to encode any property of the network (i.e. node shape or color, edge thickness) with a metadata category (i.e. cohort, cosine score, compound family). An online tutorial, created with Cytoscape 3.7, used for molecular networking generated with LC-MS/MS data, can be accessed here. Many of these steps could be reproduced in the same way for molecular networking from GC-MS data. </p> <p>[1] Shannon, P., et al. (2003). Cytoscape: a software environment for integrated models of biomolecular interaction networks. Genome Res, 13(11), 2498-2504. doi:10.1101/gr.1239303</p> <p>(A) Here we show an example of molecular networks visualizing in Cytoscape, generated from a study of volatiles related to aging of IPA beer (GNPS link). In Cytoscape, the different aging times (0, 1, 2, 3, 4, 5, 6, 8, 12, and 20 days) are represented by different colors, and the metabolites present in the beer (each node) can be mapped on the molecular networks. The size of each node represents the total abundance of the feature and the colors in the pie chart shows the proportions of the compound at different aging duration times (gradient from green to yellow to red). </p> <p>(B) Zoom in a cluster of terpenes annotated with compounds name is shown as an example. Networking can facilitate the interpretation of data by visualizing chemical changes. In this example, the annotated compounds E-nerolidol and alpha-limonene-diepoxide, framed in pink, appear to be present only in fresh beer (0 days) and disappear as the beer ages. </p> <p>(C) Other information can be mapped onto the network, for example, the same zoom with cosine values between nodes is shown instead of compound name annotations.</p> <p>NOTE: The name of the node corresponds to the best match of the spectral pattern to the library across the entire dataset. Consequently, for some nodes the top match is not selected as the node's name as there exists other spectral pattern in the data that has better match to the same compound in the library. In such cases, the next best matching annotation is used. </p> <p></p> <p>The videos demonstrate some of the examples how the networks could be used. Using molecular networking to combine different datasets (https://www.youtube.com/watch?v=bDZj7NI-ZGw) Using molecular networks to find incorrect annotations (https://www.youtube.com/watch?v=r7DSsL03Hbk) Using networks to explore chemistry (https://www.youtube.com/watch?v=fWus3zhKbOA) Using molecular networks for new compound discovery (https://www.youtube.com/watch?v=eNLPrAjuX6w) Using of networking for biological function discovery (https://www.youtube.com/watch?v=cNPW6V3RJY4)</p>"},{"location":"gc-ms-library-molecular-network/#molecular-mapping-in-ili","title":"Molecular mapping in ili","text":"<p>Spatial distribution of different chemical features could be visualized in 2D or 3D using ili, a visualization app for 3D molecular cartography [2]. \u2018ili could be used either on the website or as a Chrome extension. For mapping, two files need to be uploaded (DRAG AND DROP): an image for 2D (PNG or JPG format) or model for 3D (STL format), and a .cvs file with the coordinates of the spots on the model that corresponds to the sampled locations. Examples of mapping applications are available on \u2018ili website. Here it is demonstrated how to map the volatile data on the same model as shown in the \u201cHuman skin metabolome\u201d example. </p> <p>[2] Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols, 13(1), 134.https://doi.org/10.1038/nprot.2017.122</p> <p></p> <p>To create the .csv table, download the quantification table from GNPS deconvolution (example GNPS job) output and add four columns with the x, y, z, and radius coordinates from the different sampling points as described [2].  For ease of navigation, the rows with feature descriptors could be deleted. The detailed instructions on creating the correctly formatted table with coordinates are given here. </p> <p></p> <p>To create chemical maps, drag and drop the example volatilome table human 3D model. Different parameters can be set such as the spots, the mapping color, or the angles of visualization. To display different features, click on the feature identifier value listed above the color scale on the bottom right corner of the screen and select features to display. To annotate molecular features of interest, refer to the GNPS library search job for the matching features.</p> <p></p>"},{"location":"gc-ms-library-molecular-network/#citation","title":"Citation","text":"<p>Aksenov, A. A. et al  Algorithmic Learning for Auto-deconvolution of GC-MS Data to Enable Molecular Networking within GNPS. </p> <p>https://doi.org/10.1101/2020.01.13.905091</p>"},{"location":"gc-ms-library-molecular-network/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (2.96%), MelissaESPOSITO (97.04%)</p>"},{"location":"gcanalysis/","title":"GC-MS EI Data Analysis","text":""},{"location":"gcanalysis/#introduction","title":"Introduction","text":"<p>GNPS now offers support for GC-MS data. Two workflows are available.</p> <p></p> <p>The video tutorial can be found here.</p>"},{"location":"gcanalysis/#gc-ms-deconvolution-workflow","title":"GC-MS Deconvolution Workflow","text":"<p>More information GC-MS online deconvolution workflow with MS-Hub, or ADAP-MZmine, or MS-DIAL. See here .</p>"},{"location":"gcanalysis/#gc-ms-library-search-and-molecular-networking-workflow","title":"GC-MS Library Search and Molecular Networking Workflow","text":"<p>More information on the GC-MS spectral library search and molecular networking workflow from MS-Hub, MS-DIAL, and ADAP-MZmine results. See here for more information. </p>"},{"location":"gcanalysis/#share-data-clone-job-and-add-reference-spectra","title":"Share Data, Clone Job, and Add Reference Spectra","text":""},{"location":"gcanalysis/#cloning-a-job","title":"Cloning a job","text":"<p>If the same analysis needs to be repeated, it is possible to clone the job by clicking \u201cclone\u201d on the job status page. Cloning a job allows users to view all parameters and files that were used and rerun the job with the same, or adjusted parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.  </p>"},{"location":"gcanalysis/#sharing-data","title":"Sharing data","text":"<p>The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. See the documentation.</p>"},{"location":"gcanalysis/#addingcurating-reference-spectra","title":"Adding/Curating reference spectra","text":"<p>High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. See documentation. If the user wishes to upload &gt;50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help. The compliance of the file format can be verified using an online workflow.</p>"},{"location":"gcanalysis/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (6.06%), MelissaESPOSITO (93.94%)</p>"},{"location":"gnps_community/","title":"Join the GNPS community","text":"<p>The GNPS community is always welcoming suggestions and contributions. Be part of the community and contribute!</p>"},{"location":"gnps_community/#github-repositories","title":"GitHub Repositories","text":"<p>Your are kindly invited to open \"issues\" on our GitHub repositories, and propose changes to our Documentation and Workflows. We are also welcoming direct pull request on the respective repository.</p> <p>GNPS_Documentation GitHub respository that points to the documentation website (https://ccms-ucsd.github.io/GNPSDocumentation).</p> <ul> <li>https://github.com/CCMS-UCSD/GNPSDocumentation</li> </ul> <p>GNPS_Workflows GitHub repository that contains the workflows available on GNPS (http://gnps.ucsd.edu):</p> <ul> <li>http://github.com/CCMS-UCSD/GNPS_Workflows</li> </ul>"},{"location":"gnps_community/#gnps-forum","title":"GNPS Forum","text":"<p>Discussions and suggestions can also take place on the GNPS forum at https://groups.google.com/forum/#!forum/molecular_networking_bug_reports.</p>"},{"location":"gnps_community/#updating-the-gnps-documentation-quick","title":"Updating the GNPS Documentation (Quick)","text":"<p>We'd love for the community to add, edit, and improve the documentation so it'll be even more helpful for everyone. You can even see all the contributors for each page at the bottom, so it's totally a community effort. To make things simpler, here is the step by step on how to edit the documentation. </p> <p>Make a GitHub Account </p> <p>You'll need to make a GitHub Account.</p> <p>Click Edit Button on Page You Want to Edit</p> <p></p> <p>Fork the Repository When Prompted (only the first time)</p> <p></p> <p>Make the Edits in MarkDown</p> <p></p> <p>Propose Changes</p> <p>Please describe the change you are making. </p> <p></p> <p>Create Pull Request</p> <p></p> <p>Finalize Pull Request with Description</p> <p></p>"},{"location":"gnps_community/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (90.0%), lfnothias (10.0%)</p>"},{"location":"gnpsanalysisoverview/","title":"GNPS Analysis Tools Overview","text":"<p>This highlights all the current production analysis tools at GNPS as well as some exciting up and coming tools in development.</p>"},{"location":"gnpsanalysisoverview/#recommended-analysis-tools","title":"Recommended Analysis Tools","text":""},{"location":"gnpsanalysisoverview/#molecular-networking","title":"Molecular Networking","text":"<p>Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This approach groups sets of spectra from related molecules (known as molecular families) even when the spectra themselves are not identified (do not match to any known compounds).</p> <p>Molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (similar fragmentation implying similar structure) between nodes. Nodes can be supplemented with metadata, including library matches matches or information that is provided by the user, e.g. abundance, origin of product, hydrophobicity, etc. These metadata attributes can be reflected in a node\u2019s size or color.</p>"},{"location":"gnpsanalysisoverview/#spectral-library-search","title":"Spectral Library Search","text":"<p>MS/MS data is searched against reference GNPS spectral libraries in a high throughput manner, scaling up to hundreds of files at a time. The spectral library search can be configured to either match exactly to known molecules or utilize variable dereplication to identify putative analogs of known compounds.</p>"},{"location":"gnpsanalysisoverview/#masst","title":"MASST","text":"<p>Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs as well as search a single MS/MS spectrum against all public spectral libraries.</p>"},{"location":"gnpsanalysisoverview/#advanced-analysis-tools","title":"Advanced Analysis Tools","text":""},{"location":"gnpsanalysisoverview/#dereplicator","title":"Dereplicator","text":"<p>The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree.</p>"},{"location":"gnpsanalysisoverview/#network-annotation-propogation","title":"Network Annotation Propogation","text":"<p>Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking.</p>"},{"location":"gnpsanalysisoverview/#analysis-tools-in-active-development","title":"Analysis Tools in Active Development","text":""},{"location":"gnpsanalysisoverview/#feature-based-molecular-networking","title":"Feature Based Molecular Networking","text":"<p>Feature Based Molecular Networking relies on feature detection to determine molecule abundances and aligns these abundances across a cohort of samples into consensus features. Corresponding MS/MS spectra are assigned to each consensus feature and analyzed with spectral library search and molecular networking. This approach enables</p> <ol> <li>More accurate quantification of molecules</li> <li>Resolution of isomeric compounds</li> <li>Reduction of redundancy of MS/MS molecules</li> </ol>"},{"location":"gnpsanalysisoverview/#ms2lda","title":"MS2LDA","text":"<p>MS2LDA is a method for the decomposition of sets of molecular fragment data derived from large metabolomics experiments. Check out the MS2LDA website here. At GNPS, we have worked with the MS2LDA team to curate a set of motifs that can help to annotate your MS/MS spectra.</p>"},{"location":"gnpsanalysisoverview/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"gnpsdatasetexplorer/","title":"GNPS Dataset Explorer","text":"<p>The GNPS Dataset Explorer is a simple interface to enable users to list out and select all files from a public dataset or analysis task. </p> <p>It current supports the following data sources:</p> <ol> <li>MassIVE Public Datasets</li> <li>GNPS Public Datasets</li> <li>Metabolights Public Datasets</li> <li>Metabolomics Workbench Public Datasets</li> <li>GNPS Analysis Data Files (LC and GC)</li> <li>PRIDE Proteomics Public Datasets</li> <li>ProteomXchange Public Datasets</li> </ol>"},{"location":"gnpsdatasetexplorer/#listing-dataset-files","title":"Listing Dataset Files","text":"<p>Once you have entered an accession, a set of files will appear in the table. You may select one or more files to visualize. You can select \"Visualize Files\" below to see them in the GNPS Dashboard of the underlying raw data. Or you can choose to network them in GNPS by clicking \"Molecular Network Files at GNPS\". </p> <p>Note</p> <p>You may select to visualize all files if you do not want to select them. It is limited to the first 50 in the table, so if you filter the table, the it will trim down this 50. </p>"},{"location":"gnpsdatasetexplorer/#metadata","title":"Metadata","text":"<p>We attempt to gather metadata from several sources for public mass spectrometry data in MassIVE/GNPS. </p> <ol> <li>Default (MS information from run)</li> <li>ReDU</li> <li>MassIVE Metadata Uploads</li> <li>Metabolights Study Information</li> </ol>"},{"location":"gnpsdatasetexplorer/#listing-gnps-tasks","title":"Listing GNPS Tasks","text":"<p>The Dataset Explorer will list out all the files selected in the gnps analysis and attempts to pull in the metadata from the analysis as well. </p>"},{"location":"gnpsdatasetexplorer/#comparing-two-files-for-lcms-viewer","title":"Comparing Two Files for LCMS Viewer","text":"<p>There are two tables with identical entries right above/below one another. This enables easily to select two sets of files to visualize in the GNPS Dashboard. Simply put a check mark next to the files in each table you want to compare and select the \"Visualize Files\" button below. </p>"},{"location":"gnpslibraries/","title":"GNPS MS/MS Spectral Libraries List","text":"<p>Pardon our dust this is a work in progress!</p> <p>Here are all spectral libraries at GNPS.</p> <p>To download the spectra, go to here.</p> View Title Description View All Public Spectra at GNPS This contains all available spectra available publically for search at GNPS. All interactively explore fragmentation with our new visualizations. View GNPS Community Library The GNPS library contains  compounds from user contributions. View FDA Library Pt 1 Approved drug library from Selleckchem Part 1 run by Sirenas MD. View FDA Library Pt 2 This set of reference compounds generated by the Dorrestein Lab contains 535 FDA natural product compounds complements part 1. View PhytoChemical Library 140 compounds from the Prestwick Phytochemical Library generated by the Dorrestein Lab. View NIH Clinical Collection 1 327 compounds from the NIH Clinical Collection 1 generated by the Dorrestein Lab. Further information about the collection can be found here. View NIH Clinical Collection 2 164 compounds from the NIH Clinical Collection 2 generated by the Dorrestein Lab. Further information about the collection can be found here. View NIH Natural Products Library Round 1 1256 compounds from the NIH Natural Products Library generated by the Dorrestein Lab. Further information about the collection can be found here. Positive Negative NIH Natural Products Library Round 2 The NIH Natural Products Library Round 2 was generated by the Dorrestein Lab (UC San Diego) from 4,545 compounds from the NIH ???ACONN??? Natural Products Library provided by Ajit Jadhav (NIH/NCATS) . The 2018 release contains fragmentation spectra collected on qTOF MS in positive (3,386) and negative (1,863) ionisation mode. The 2020 release includes additional MS/MS entries for the positive ionisation mode on qTOF (806) and Q-Exactive mass spectrometers (1,315) that were obtained using the Ion Identity Networking workflow. The spectral library was created by Louis-Felix Nothias, Mingxun Wang and Robin Schmid (UC San Diego). View Pharmacologically Active Compounds in the NIH Small Molecule Repository 1460 compounds from the Pharmacologically Active Compounds in the NIH Small Molecule Repository generated by the Dorrestein Lab. View Faulkner Legacy Library provided by Sirenas MD 127 compounds from the Faulkner natural product legacy library. View EMBL Metabolomics Core Facility (EMBL MCF) Standards run by EMBL Metabolomics Core Facility (EMBL MCF) Positive Negative Pesticides Pesticide MS/MS spectral library (204 compounds) generated by the Dorrestein Lab and the CNRS for the 3D-Plant2Cells project, funded under the European Commission Horizon2020 program (MSCA project 704786). Standards were run on Q-Exactive and Maxis (q-TOF) tandem mass spectrometer in both positive and negative ionisation mode. Positive Negative Medicines for Malaria Venture Pathogen Box 400 compounds analyzed on an Agilent 6538 Accurate Mass QTOF LC/MS in Positive/Negative ionization mode by Sirenas LLC. Funding generously provided by the Bill and Melinda Gates Foundation. Positive Negative LDB Lichen Database MS/MS spectra of 241 small molecules isolated from lichens collected in the chemical library of S. Huneck (Berlin Garden and Botanical Museum) provided by Harrie Sipman and Robert L??cking. The spectra were produced by three different LC-MS machines, ie and Agilent 6530 qToF (Pierre Le Pogam, University of Paris-Sud, University of Paris-Saclay, Joel Boustie, University of Rennes 1), a Waters Xevo G2-XS qToF (David Rondeau, Thomas Delhaye, University of Rennes 1) and a Thermo Q-Exactive Orbitrap (Jean-Luc Wolfender, Pierre-Marie Allard, University of Geneva). The LDB currently contains more than a thousand spectra across different machines, including diverse adduct spectra in addition to the [M+/-H]. The most common scaffolds in lichens are represented : depsidones, dibenzofuranes, pulvinic acids, paraconic acids, chromones, quinones, xanthones, monoaromatic compounds, quinones, xanthones and chromones. These spectra are not single energy but the consensus of spectra produced at different energies. For Agilent, these were 10, 25 and 40 eV in ESI-, (and also 2.5, 5.0 and 7.5 eV for the more fragile depsides), and 5, 20 and 35 eV in ESI+ or APCI+ for terpenes. For Waters, the collision energies were 10, 20, 30 and 40 eV in ESI- and ESI+. The Thermo spectra were acquired using Normalized Collision Energy (NCE) based on the measured m/z value and three energies : 15, 30, 45 eV. View GNPS Matches to NIST14 5,763 High confidence matches to NIST14 MS/MS library spectra. View GNPS Collections Miscellaneous Miscellaneous reference compounds run specifically for GNPS-Collections View GNPS Sigma's Mass Spectrometry Metabolite Library (MSMLS) This library contains 863 MS/MS from molecules in Sigma's Mass Spectrometry Metabolite Library. MSMLS is a collection of high quality small biochemical molecules that span a broad range of primary metabolism. These standards consisted of lipid-like molecules and water-soluble sugar compounds. The chemical standards were run on a Q-Exactive in positive and negative mode. View PSU Sigma's Mass Spectrometry Metabolite Library (MSMLS) This library contains 576 MS/MS spectra using small molecules from IROA's Mass Spectrometry Metabolite Library of Standards (MSMLS). These standard MS/MS spectra were generated from SCIEX 5600 TripleTOF with positive and negative mode at Metabolomics facility The Pennsylvania State University View GNPS Collections Bile Acid Library 2019 Reference MS2 spectra for 21 commercial bile acids and 4 synthesized amino acid conjugated bile acids run in positive and negative mode, including spectra of observed adducts. View Dereplicator Identified MS/MS Spectra MS/MS spectra identified in GNPS Public data automatically by dereplicator tool. Searching various compound databases, including marinlit, etc. and best matching MS/MS spectra with significant p-values. Positive Negative Pacific Northwest National Lab (PNNL) Lipids MS/MS spectra from 1790 Lipids provided by Thomas Metz's group at the Pacific Northwest National Lab (PNNL), collected in positive/negative ionisation mode and multiple collision energy. Most compounds were annotated using LIQUID tool in real samples. View MIADB Spectral Library MS/MS spectra from 172 monoterpene indole alkaloids provided by Mehdi Beniddir and coll. (Universite Paris-Sud, Universite Paris-Saclay). Compounds were collected from the chemical libraries of Universite Paris-Sud, Universite Paris-Descartes, Institut de Chimie des Substances Naturelles, Universite d'Angers, Museuum national d'Histoire Naturelle (France), Universite de Liege (Belgium), University of Malaya, (Malaysia), Institut of Chemical Research of Catalonia (Spain). For each compound an average MS/MS spectrum of three collision energies (30, 50 and 70 eV) was obtained, in the positive mode, using mono-charged molecular or pseudomolecular ions. View HCE Cell Lysate Lipids Spectral Library The spectra correspond to cell lipids extract of Human Corneal Epithelium cell. This lipids belong to phospholipids and sphingolipids classes. Positive Negative Nutri-Metabolomics This library is made with Orbitrap LTQ-XL mass spectrometer. Scan for full scan was of 30,000 while, MSMS were acquired at 7500 resolution. The CID of 35 eV was applied. References for operational conditions of Orbitrap and LC columns are here: DOI 10.1007/s11306-015-0935-z and DOI: 10.1002/mnfr.201901137.This library consists of different analytical standards which were purchased form Sigma Aldrich for Fondazione Edmund Mach (Italy), for Nutri-metabolomics research. Compounds that are included in this library are: small phenolic acids, organic acids, fatty acids, carnitines, indoles, some aroma compounds, endogenous human metabolites. They were purchased for two purposes: i) the confirmation at level I of some metabolites, ii) look for matching substructures between biomarkers in studies and analytical standards. View GNPS Sciex Library The Sciex dataset contains authentic standards from different compound libraries and single reference standards were used. Specifically, the Agilent LC/MS Pesticide Comprehensive mix, Sigma Aldrich Bile Acid/Carnitine/Sterol Metabolite Library of Standards, Sigma Aldrich Fatty Acid Metabolite Library of Standards and Sigma Aldrich Acid Metabolite Library of Standards were used. Standards were dissolved in suitable solvents and mixed in 43 mixtures in such way to avoid overlap of isomeric and isobaric substances. Standard mixtures were analyzed using a Sciex Exion AD liquid chromatography system coupled to a Sciex X500R QTOF-MS. Separation was achieved on a Phenomenex Kinetex F5 column (150 mm ?? 2.1 mm ID, 2.6 ??m particle size) with a gradient from eluent A (100 % H 2 O + 0.1 % formic acid) to eluent B (100 % acetonitrile + 0.1 % formic acid) using the following gradient: 100/0 at 0 min, 100/0 at 2.1 min, 5/95 at 14 min, 5/95 at 16 min, 100/0 at 16.1 min, and 100/0 at 20 min. Column temperature was set to 30 ??? C and flow rate to 200 ??L/min. Data was acquired by data dependent acquisition of MS/MS spectra using a collision energy ramp from 20 to 50 eV. The MS was automatically recalibrated every five injections in MS1 and MS/MS mode. View Lipids of human conjonctivals cells (IOBA-NHC) This library contains 200 MS/MS spectra of lipids from human conjonctival cells (IOBA-NHC cell line). The lipids belong to the sphingolipids, glycerophospholipids and glycerolipids subclasses.This library was generated by Orlane Lectez, Romain Magny and Nicolas Auzeil from Universit?? de Paris on a Waters Synapt G2 mass spectrometer operated in positive and negative ion mode in the Olivier Laprevote Lab. View Berkeley Lab MS/MS spectral library Berkeley Lab MS/MS spectral library of endogenous metabolites v0.1 (24,563 spectra) compiled and analyzed by the Northen Lab and DOE JGI with funding from the United States Department of Energy Office of Biological and Environmental Research under Contract No. DE-AC02-05CH11231 to Lawrence Berkeley National Laboratory. View IQAMDB IsoQuinoline and Annonaceous Metabolites Database MS/MS spectra of 220 isoquinoline alkaloids and some further annonaceous metabolites provided by Beniddir, Le Pogam and coll. (Universite Paris-Saclay, France). The spectra were generated using an Agilent 6546 qTof (Universite Paris-Saclay). Compounds were collected from the in-house chemical libraries of Universite Paris-Saclay (France), accumulated during decades of phytochemical investigations on annonaceous plants by Pr. M. Leboeuf and co-workers, and also from the Universite of Angers (France), and the Amazonas State University (Manaus, Amazonas, Brazil). The most common isoquinoline scaffolds are comprised in the library: benzylisoquinolines, bisbenzylisoquinolines featuring diverse assembly modes, protoberberines, berberines, proaporphines, aporphines, morphinanes, promorphinanes, benzophenanthridines, protopines, cularines, spirobenzylisoquinolines etc. View Sam Sik Kang Legacy Library MS/MS spectra of 233 phytochemicals (184 positive and 153 negative) from Prof. Sam Sik Kang (Seoul National University)'s legacy chemical library. The spectral library was created by Sang Hee Shim (Seoul National University) and Kyo Bin Kang (Sookmyung Women's University). View GNPS D2 Amino Lipid Library This library contains lipoamino acids, this class of biosurfactants was retrieved in an endophytic marine species belonging to the Pantoea genus. This spectral library was acquired and created by Giovanni Andrea Vitale. View GNPS Drugs of Abuse Library Drugs of Abuse Library View GNPS IIMN Propogated Spectral library entries extracted from experimental datasets by the IIMN workflow. Ion Identity Molecular Networking connects ions of the same molecule. Note: This library is by default not selected for search in GNPS and must be explicitly selected. View GNPS Suspect List Suspect list of propogated compounds - See preprint View MassBank Spectral Library (3rd Party) ESI Positive MS/MS spectra from Massbank. View MassBank EU MS/MS spectra from Massbank EU that are not included in Massbank JP. View Massbank NA Spectral Library (3rd Party) MS/MS spectra from Massbank NA that were not present in Massbank JP. View ReSpect Library (3rd Party) ESI Positive MS/MS spectra from ReSpect for Phytochemicals View HMDB Spectral Library (3rd Party) MS/MS spectra from HMDB View CASMI Spectral Library (3rd Party) MS/MS spectra from the CASMI challenges 2014 and 2016. The CASMI is an open contest on the identification of small molecules. View Sumner Spectral Library (3rd Party) The Bruker MetaboBASE Plant Library contains ~1300 spectra of ~300 plant metabolites, including flavonoids, phenolics, sapogenins and organic acids. This library was generated by Prof. Lloyd W. Sumner and Drs. Dennis Fine and Daniel Wherritt from the Plant Biology Division of the Noble Foundation, Ardmore, OK, USA. Positive Negative Birmingham UHPLC MS Library - View ECG acyl amides C4-C24 Library - View ECG acyl esters C4-C24 Library - View Bile Acid Modifications Library This library consists of 21,549 MS/MS spectra of highest intensity from from the clustered spectra of public data on GNPS/MassIVE recovered using MassQL queries designed for non-, mono-, di-, tri-, tetra- and penta-hydroxylated bile acids. Based on delta masses from unmodified bile acids, the library accounts for 5,576 modified bile acids. Molecular formulae for the delta masses are provided as predicted by two in silico tools, BUDDY and SIRIUS, along with putative explanations when available. In addition, this library also contains MS/MS spectra from synthetic standards of 38 amino acids and 28 polyamines conjugated to bile acids. If the end-users are interested in using this spectral library for structure annotation, they are encouraged to carefully inspect the MS/MS spectrum, perhaps in comparison to the MS/MS spectrum of the conjugate portion proposed to be appended onto the bile acids (if available), to match reporter ions between the two spectra. A very careful manual interpretation of the presence/absence and ratio of ions by bile acid MS/MS fragmentation experts, along with retention time inspection, may facilitate distinction between regioisomers or stereoisomers. This spectral resource can provide unprecedented insights into the new biology of bile acids. Note: This library is not selected by default for search in GNPS and must be explicitly selected in the GNPS workflow from CCMS_SpectralLibraries/GNPS_Propogated_Libraries/GNPS-BILE-ACID-MODIFICATIONS View LEAFBOT The Library Enabling Annotation of Botanical Natural Products (LEAF Bot) contains MS/MS spectra of plant metabolites comprising a diverse range of chemical classes. Data were collected on high-resolution instruments in both positive and negative modes.  Funding was provided in part by the National Institutes of Health through the Center for High Content Functional Annotation of Natural Products (HiFAN).  We welcome additions to this library of MS/MS spectra for additional plant metabolites. Those wishing to contribute should contact Nadja Cech (nadja_cech@uncg.edu; University of North Carolina at Greensboro) or Joshua Kellogg (jjk6146@psu.edu; Pennsylvania State University). View XANTHONES-DB -"},{"location":"isgnpsright/","title":"Is my data compatible with GNPS?","text":"<p>What kind of data goes GNPS support?</p> <p>GNPS supports the analysis of tandem mass (MS/MS or MS2) data and EI GC/MS data. Below are additional guidelines that describe the kinds of data that GNPS's analysis tools and shared knowledgebase handle.</p>"},{"location":"isgnpsright/#ionization-type","title":"Ionization Type","text":"<p>GNPS supports data from soft ionization sources, e.g. electro spray ionization (ESI), Atmospheric-pressure chemical ionization (APCI), Matrix-assisted laser desorption/ionization (MALDI).</p>"},{"location":"isgnpsright/#fragmentation","title":"Fragmentation","text":"<p>GNPS only accepts data dependent acquisition data (DDA), i.e. molecules were fragmented with collision induced dissociation (CID), Higher-energy collisional dissociation (HCD), or Electron-transfer dissociation (ETD). This produces tandem mass spectra (MS/MS) that can be identified via spectral library search and organized into families of molecules with molecular networking.</p>"},{"location":"isgnpsright/#data-sizes","title":"Data Sizes","text":"<p>GNPS was designed to process MS/MS datasets of entire LC/MS runs. Many of the analysis tools were meant for datasets with at least hundreds of MS/MS spectra. While it is feasible to analyze a small amount of MS/MS spectra, certain capabilities (e.g. Molecular Networking) will not be effective at such small scales.</p> <p>For extremely small datasets (e.g. single MS/MS spectra), we recommend utilizing our MASST search tool and not molecular networking.</p> <p>For datasets that at least include an entire LC/MS run of MS/MS spectra, all workflows will accept. For molecular networking, please refer to the parameters and presets.</p>"},{"location":"isgnpsright/#file-formats","title":"File Formats","text":"<p>Mass spectrometry files must be converted from proprietary vendor formats to open file formats. GNPS currently support .mzXML, .mzML, and .mgf formats for analysis. To convert, please see our conversion guide.</p> <p>Our tools do NOT support .mzData, .xml, .raw, .RAW, .wiff, .scan, .d, and .cdf formats.</p>"},{"location":"isgnpsright/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"lcms-dashboard/","title":"GNPS Dashboard","text":""},{"location":"lcms-dashboard/#gnps-dashboard","title":"GNPS Dashboard","text":"<p>The GNPS Dashboard Interface is designed to enable easy collaborative visualization of mass spectrometry data files directly in the browser.</p> <p></p> <p>Broadly the data can come from the following sources:</p> <ol> <li>MassIVE Public Datasets</li> <li>GNPS Public Datasets</li> <li>Metabolights Public Datasets</li> <li>Metabolomics Workbench Public Datasets</li> <li>GNPS Analysis Data Files (LC and GC)</li> <li>GNPS Quickstart Conversion</li> <li>PRIDE Proteomics Public Datasets</li> <li>ProteomXchange Public Datasets</li> <li>Manual data upload via Drag and Drop</li> </ol> <p>Note</p> <p>To get a file list for a public dataset or GNPS task, checkout out the GNPS Dataset Explorer Tool. </p> <p>We aim to enable the visualization without having users download a single file and to easy share visualizations as a url with all settings preserved and saved. The high level capabilities are:</p> <ol> <li>2D mz vs RT Heatmap</li> <li>XIC/EIC Plots of single and multiple files</li> <li>TIC Plots of single and multiple files</li> <li>Box Plots of XIC/EIC integration between two cohorts of samples</li> <li>Interactive Feature Finding with MZmine2 and Dinosaur</li> <li>Visualization of MS1/MS2 spectra within mass spec files</li> </ol>"},{"location":"lcms-dashboard/#selecting-input-data","title":"Selecting Input Data","text":""},{"location":"lcms-dashboard/#supported-input-data-file-types","title":"Supported Input Data File Types","text":"<ol> <li>mzML</li> <li>mzXML</li> <li>CDF</li> <li>Thermo RAW</li> </ol>"},{"location":"lcms-dashboard/#loading-your-data","title":"Loading your Data","text":"<p>Data must be specified as a universal spectrum identifier. This again can be sourced through several locations as mentioned above. The easiest ways are:</p> <ol> <li>Using GNPS Dataset Explorer that enables selecting public datasets - mzML, mzXML, CDF, mgf, Thermo RAW</li> <li>Direct links from GNPS analyses - mzML, mzXML, CDF, mgf files<ul> <li>Classical Molecular Networking</li> <li>Feature Based Molecular Networking</li> <li>GNPS-GC Analysis</li> <li>Spectral Library Search</li> <li>MASST</li> </ul> </li> <li>User uploads via the Drag and Drop (up to 2GB files) - mzML, mzXML, CDF</li> </ol> <p>A filled in USI selection can be seen below. </p> <p></p> <p>Warning</p> <p>If you upload your files via the drag and drop, they will be periodically removed after a few months. If you woudl like your data to be more permenant, please make a public MassIVE dataset. Checkout how to do that here.</p>"},{"location":"lcms-dashboard/#2d-mz-rt-heatmap","title":"2D m/z RT Heatmap","text":"<p>Once data is loaded, the first file is visualized as a 2D heatmap in USI1 on the left. When zooming in, the zoomed in data will sharpen.</p> <p>MS/MS events are indicated as blue crosses (and can be turned off). Feature finding results are marked as green boxes in the heatmap and can be overlayed with other information such as peak areas in gray circles.</p> <p></p> <p>Showing Two Heatmaps Side By Side</p> <p>Put a second USI in the GNPS USI2 field and then enable the \"Show USI2 LCMS Map\" toggle to show a second side by side. </p>"},{"location":"lcms-dashboard/#heatmap-interactivity","title":"Heatmap Interactivity","text":"<p>You may navigate around this heatmap interactively. You can zoom in and the visualization will automatically sharpen. Additionally, if you click on \"Advanced Visualization Options\" it will allow you to set the bounds of the zoom box manually. </p> <p>If you click on any of the MS2 markers, it will show the MS2 spectrum as well as add the precursor m/z to the XIC list to be visualized. </p> <p>Finally, if you click on any cell in the heatmap, it will add that m/z value to the XIC list to be visualized. </p> Changing Color Scales <p>You may change the color scales by clicking on \"Advanced Visualization Options\" and selecting the color scales you want to change. </p> Changing Quantization Map <p>You may change the quantization level by clicking on \"Advanced Visualization Options\". </p> Changing MS2 Marker Visualization <p>You may change the ms2 marker visualization by clicking on \"Advanced Visualization Options\". You can also enable or disable markers completely with the toggle. </p>"},{"location":"lcms-dashboard/#tic-plots","title":"TIC Plots","text":"<p>For every LCMS File that is selected, the LCMS Viewer shows the total ion current for the entire LCMS run. Here we have the option of choosing the sum (TIC) or base peak intensity (BPI). </p> <p></p> <p>!!! note 'Multiple TIC for multiple files'     This is possible by turning on the multiple TIC option. </p> <p>Interactivity</p> <p>If you click on a point in the TIC plot, we will attempt to find the closest MS1 spectrum and display it in the spectrum panel to the right. </p>"},{"location":"lcms-dashboard/#xiceic-plots","title":"XIC/EIC Plots","text":"<p>Obtain single or multiple XIC/EIC plots for one or more files. Masses and mass windows can be specified in the following field:</p> <p></p> <p>Note</p> <p>Default integration type is AUC but options MS1 Sum or MAXPEAKHEIGHT exist under XIC Integration Type dropdown menu</p> <p>After you specified m/z or multiple m/z separated by \";\" under XIC Options, XIC(s) will be plotted. MS/MS events will be displayed in the XIC (if only one file is selected) and can be displayed below the XIC plot. </p> <p></p> <p>Note</p> <p>If you would like to add labels to your xic values in the plotting, you can use the following example <pre><code>COMPOUND=500\n</code></pre></p> <p>Additionally to these XIC plots, we draw XIC heatmap plots. This helps when there are many files for a given XIC value. </p> <p>Retention Time Zooming</p> <p>You can set the retention time window (e.g. 5.5-7.2) or a single retention time value (e.g. 5.5 which implicitly means 5.0-6.0)</p>"},{"location":"lcms-dashboard/#srmmrm-plots","title":"SRM/MRM Plots","text":"<p>If your data is targeted and has SRM/MRM transitions in the data, that can be easily visualized as well. Check out this video the help from Michael Marty:</p>"},{"location":"lcms-dashboard/#teaching-mass-spectrometry-dataanalysis","title":"Teaching Mass Spectrometry Data/Analysis","text":"<p>We think this tool might be a good tool for teaching LC/MS visualization. The Leader/Follower options are a way for students to follow along to get started. Once the initial setup and instruction are done, they can stop syncing and build upon the visualization. We have tested this tool to scale up to a few dozen concurrent followers. If you do intend to use this for a class, please let us know so that we do not do maintenance during your class. </p>"},{"location":"lcms-dashboard/#collaborative-visualization","title":"Collaborative Visualization","text":"<p>You can share visualizations as URLs and interactively Collaborate. There are several ways to collaboratively view data:</p> <ol> <li>Visualize data and send others the visualization link</li> <li>Creating a follower/leader session where you may lead and others may follow (mirror) your activity</li> <li>Creating a fully interative sychronized session (think Google Docs for Mass Spec analysis)</li> </ol>"},{"location":"lcms-dashboard/#sychronized-leaderfollow-visualization-session","title":"Sychronized Leader/Follow Visualization Session","text":"<p>To create a visualization as a leader, you will need to do the following</p> <ol> <li>Click on Sychronization Options (\"Sync Options\") to bring up the sychronization modal pop up</li> <li>Select Under Dashboard Sychronization Type, select LEADER</li> <li>Click Get Token (this protects your session so others cannot hijack being leader)</li> <li>Copy the link under \"Follower URL\" and send to others to follow your work (Or have followers scan the QR Code)</li> </ol> <p>To initiate following a visualization, you will need to do the following</p> <ol> <li>Get a follower URL from your collaborator who will function as the leader (Or scan the QR Code)</li> <li>Watch for updates from your leader</li> </ol> <p>The synchronization will start automatically if you are a follower with the appropriate link.</p> <p>You may also stop syncing as a follower by clicking the \"Sync Terminate\" so that you do not receive any more updates. Then you may build upon the visualiation that has been done by the leader. </p> <p></p>"},{"location":"lcms-dashboard/#fully-sychronized-visualization-session","title":"Fully Sychronized Visualization Session","text":"<p>To create a fully sychronous visualization you can do it in the following ways</p> <ol> <li>Click on Sychronization Options (\"Sync Options\") to bring up the sychronization modal pop up</li> <li>Select Under Dashboard Sychronization Type, select COLLAB and click \"Set Sychronization\"</li> <li>Copy the Collab URL and send it to your collaborators</li> </ol> <p>Alternatively, if you click on this link, which will automatically initiate a new sychronization session. You can follow the following steps:</p> <ol> <li>Click on Sychronization Options</li> <li>Copy the Collab URL and send it to your collaborators</li> </ol>"},{"location":"lcms-dashboard/#sharing-visualizations","title":"Sharing Visualizations","text":"<p>Individual Images</p> <p>Once you are happy with the XIC or MS/MS plots you can export your XIC and spectra as vector graphics (.svg) and view and export values under XIC Integration. </p> <p>Full Visualization</p> <p>To share the interactive LCMS-Dashboard view, simply click \"Copy URL Link to this Visualization\" botton on the left and copy the new url. This link saves all the settings in your visualization. If you open it up, it will keep all the data and settings exactly the same. </p> <p>Short URLS</p> <p>If you are sharing with others over a medium like Zoom, this URL might be tool long. Simply click \"Copy Short Temporary URL\" to get a short version. But be aware this short URL (not the full expanded one) will expire after 1 hr so its good for immediate sharing but we would not recommend you store this in a presentation or send in an email. </p>"},{"location":"lcms-dashboard/#saving-visualizations","title":"Saving Visualizations","text":"<p>You may save the settings in several ways:</p> <ol> <li>Saving the \"Link to these plots\" as a url </li> <li>Clicking the \"Advanced Import Options\" and saving the JSON version of all the settings</li> <li>Clicking the \"Advanced Import Options\" and downloading the JSON version of all the settings as a file</li> </ol>"},{"location":"lcms-dashboard/#loading-visualization","title":"Loading Visualization","text":"<p>Conversely you can load settings in multiple ways, and in many ways the opposite of the above for save</p> <ol> <li>Clicking on url you saved</li> <li>Clicking the \"Advanced Import Options\" and update the JSON version of all the settings and clicking \"Manual Import\"</li> <li>Clicking the \"Advanced Import Options\" and dragging and dropping the JSON file of all the settings and clicking \"Manual Import\"</li> </ol>"},{"location":"lcms-dashboard/#box-plots","title":"Box Plots","text":"<p>Integratuion results of XIC(s) for all samples specified in the file selection section are automatically plotted as box-plots between the two default groups (USI1 and USI2)</p> <p></p>"},{"location":"lcms-dashboard/#integrated-feature-finding","title":"Integrated Feature Finding","text":"<p>The GNPS LCMS-Dashbaord, also offers live feature finding options for the first sample selected. To enable the feature finding option, simply select an feature finding tool in the \"Feature Finding (Beta)\" field. Once selcted a box should expand in which different parameters, such as MS tolerance, noise level and RT tolerance can be specified. </p> <p></p> <p>Once parameters are selcted hit the run/update feature finding botton. Once processed, features will be displayed in teh heatmap as green boxes. If you are happy with teh setting, there is a direct link for a GNPS workflow to run feature finding with the same settings for full datasets which is directly integrated into the Feature-based Molecular Networking Workflow.</p>"},{"location":"lcms-dashboard/#integrated-data-overlays","title":"Integrated Data Overlays","text":"<p>It is possible to overlay any information over the 2D MS Heatmap. The source of the data requires several inputs:</p> <ol> <li>A universal data identifier (UDI) - This currently sources data out of GNPS/MassIVE (e.g. mzspec:GNPS:TASK-c95481f0c53d42e78a61bf899e9f9adb-spectra/specs_ms.mgf)</li> <li>Column for the m/z</li> <li>Column for the retention time</li> <li>Optional - Column for the size</li> <li>Optional - Column for the color</li> </ol>"},{"location":"lcms-dashboard/#citation","title":"Citation","text":"<p>Soon we'll have a preprint and hopefully a more appropriate publication citation!</p> <p>Recommended Citation</p> <p>Petras, D., Phelan, V. V., Acharya, D. D., Allen, A. E., Aron, A. T., Bandeira, N., ... &amp; Wang, M. (2021). GNPS Dashboard: Collaborative Analysis of Mass Spectrometry Data in the Web Browser. bioRxiv.</p>"},{"location":"lcms-dashboard/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (79.03%), Daniel Petras (20.56%), mpanitch (0.4%)</p>"},{"location":"lexicon/","title":"GNPS Lexicon","text":""},{"location":"lexicon/#gnps-lexicon","title":"GNPS Lexicon","text":""},{"location":"lexicon/#molecular-networking","title":"Molecular Networking","text":"<p>Molecular Networking : a method that computes pairwise spectral similarity between fragmentation spectra (using a modified cosine score) and visualizes the results as a network. Spectra are represented as \"nodes\", and these nodes are connected by \"edge\" when their pairwise similarities are above a similarity threshold. Groups of connected nodes form a \"molecular family\". Two methods exist to generate molecular networks 1) classical molecular networking that is built on the fragmentation spectra level only, and the 2) feature-based molecular networking that is coupled with LC-MS feature detection and alignment.</p> <p>To disambiguate with the feature-based molecular networking, this method is also called Classical Molecular Networking abbreviated as CMN.</p> <p>Spectral similarity : refers to the quantitative measurement of the similarity degree between fragmentation spectra. In GNPS, this is done with the cosine score computation between nodes.</p> <p>Cosine score : refers to a normalized dot-product, a mathematical measure of spectral similarity between two fragmentation spectra. A cosine score of 1 represents identical spectra while a cosine score of 0 denotes no similarity at all.</p> <p>MS-Cluster : an algorithm used by GNPS to collapse nearly identical MS spectra with the same precursor ion m/z into a single \"consensus\" or \"clustered\" spectrum.</p> <p>Spectral cluster: refers to a fragmentation spectra resulting from the clustering of identical fragmentation spectra. They are also called \"clustered\", or \"consensus\" or \"representative\" spectrum in the GNPS environment. This is not to be confused with \"molecular network cluster\" that indicates a molecular or spectral family.</p> <p>Molecular family: a group of fragmentation spectra that have a high similarity degree. In the molecular network, they correspond to group/cluster of connected nodes.</p> <p>Feature-based molecular networking (FBMN): an advanced method for molecular networking that provides accurate ion abundance for statistical analysis and provides support for isomer resolution or ion mobility. FBMN requires the processing of the LC-MS/MS with tools such as MZmine or XCMS, prior to performing molecular networking. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/featurebasedmolecularnetworking/.</p> <p>Ion Identity Networking: a workflow that complements the molecular networking (FBMN workflow) by grouping fragmentation spectra using peak shape correlation analysis in addition to spectral similarity. This creates ion identity molecular families by adding new edges. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/fbmn-iin/</p> <p>Cytoscape: a software for network visualization and analysis. Molecular networks from GNPS can be imported in Cytoscape for interpretation. See the following page: https://ccms-ucsd.github.io/GNPSDocumentation/cytoscape/.</p> <p>Node table: a table summarizing molecular network node information (i.e m/z, retention time).</p> <p>Edge table: a table summarizing molecular network edge information (cosine score, delta m/z)</p> <p>(Ion) mass accuracy/tolerance: For a given ion, measured as mass-to-charge (m/z), corresponds to the m/z accuracy of the ion measurement. It is dependent upon the instrument properties/stability and is typically expressed in part per million (ppm). The mass tolerance is how much two m/z values can differ to be considered as matching (same mass or specific delta m/z searched). The mass tolerance can be applied for an ion(s) between consecutives spectra, or for an ion(s) between two spectra acquired on different compounds/samples/datasets/instruments. </p> <p>The table below shows the variation of ion mass accuracy (in ppm) for a given mass tolerance value (m/z) accross the m/z range (up to m/z 2000). This table can help you choosing the right precursor/fragment ion mass tolerance for your experiment/instrument.</p> 2.0 m/z 0.5 m/z 0.1 m/z 0.05 m/z 0.03 m/z 0.025 m/z 0.02 m/z 0.0175 m/z 0.015 m/z 0.01 m/z 0.0075 m/z m/z 200 10000 ppm 2500 ppm 500 ppm 250 ppm 150 ppm 250 ppm 100 ppm 87.5 ppm 75 ppm 50 ppm 37.5 ppm m/z 500 4000 ppm 1000 ppm 200 ppm 100 ppm 60 ppm 49 ppm 40 ppm 35 ppm 29 ppm 20 ppm 15 ppm m/z 1000 2000 ppm 500 ppm 100 ppm 50 ppm 30 ppm 25 ppm 20 ppm 17.5 ppm 15 ppm 10 ppm 7.5 ppm m/z 1500 1333 ppm 333 ppm 66 ppm 33 ppm 20 ppm 16 ppm 13 ppm 11.6 ppm 10 ppm 6.6 ppm 5.0 ppm m/z 2000 1000 pm 250 pm 50 ppm 25 ppm 15 ppm 12.5 ppm 10 ppm 8.75 ppm 7.4 ppm 5.0 ppm 3.75 ppm"},{"location":"lexicon/#data-processing-feature-based-molecular-networking","title":"Data processing - Feature-based molecular networking.","text":"<p>Data conversion: the process of converting the mass spectrometry data from a format to another. Many data processing and annotation tools require first to convert vendor format to an open source. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/fileconversion</p> <p>Raw data: Rawrefers to the \"unprocessed\" mass spectrometry data, although the spectra are often centroided. These include vendor specific formats (i.e. .raw, .d format) and open format (i.e. mzML).</p> <p>Processed data : refers to data processed with either MS-Cluster in classical molecular networking or when feature detection/alignment was performed with tools such as MZmine/XCMS/OpenMS.</p> <p>LC-MS feature : in the context of LC-MS processing, corresponds to the automated detection of a signal(s) for an ion/compound eluting from the chromatographic separation system and detected by the mass spectrometer. These are empirically referred to as chromatographic peaks.</p> <p>Feature detection : the process of detecting signal(s) of a molecule from mass spectrometry data. In LC-MS/MS, it includes chromatographic peak detection, isotopic grouping, and peak quantification (area under the curve or peak height), and indexing associated fragmentation spectra.</p> <p>Feature alignment : the process of aligning a set of LC-MS features across multiple samples for dataset-wide analysis.</p> <p>Feature quantification table: a table summarizing for each mass spectrometry feature the qualitative (m/z, retention time, adduct type, etc.) and quantitative information (area under the curve, peak height, spectral count).</p> <p>Metadata table: a table summarizing qualitative and experimental information associated with each sample. This table is a prerequisite for using many tools on GNPS. Additional information can be found here.</p>"},{"location":"lexicon/#annotation-of-fragmentation-spectra","title":"Annotation of fragmentation spectra","text":"<p>Spectral library search: the process of matching an experimental fragmentation spectrum (query spectrum) against reference spectra in public or commercial libraries. See more information on GNPS https://ccms-ucsd.github.io/GNPSDocumentation/librarysearch/.</p> <p>Passatutto: a method for estimating false discovery rate (FDR) of spectral match annotation against spectral libraries. More information athttps://www.nature.com/articles/s41467-017-01318-5.</p> <p>DEREPLICATOR tools: a dereplication algorithm designed for the annotation of known small peptidic molecules from fragmentation spectra. DEREPLICATOR VarQuest is a variant that can search for novel derivatives of known molecules that are differing by one amino acid residue. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/dereplicator/.</p> <p>Network Annotation Propagation (NAP): an annotation method for fragmentation spectra that relies on 1) an silico annotation tools (MetFrag), and 2) molecular networks topology, to rerank the list of candidates proposed by MetFrag. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/nap/.</p> <p>MS2LDA : a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs. Mass2Motifs refers to fragmentation patterns of co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/ms2lda/.</p> <p>ClassyFire : a tool that adds chemical class information to structures using a manually curated and hierarchical ontology. More information can be found here: http://classyfire.wishartlab.com.</p> <p>MolNetEnhancer : a workflow that combines the outputs from molecular networking and in-silico annotation tools such as MS2LDA, NAP, DEREPLICATOR, and ClassyFire. MolNetEnhancer provides a comprehensive chemical overview by annotating chemical classes for molecular families whilst summarizing structural details for each fragmentation spectrum in the molecular network. More information at : https://ccms-ucsd.github.io/GNPSDocumentation/molnetenhancer/</p> <p>Metaminer : a metabologenomic pipeline which integrates fragmentation spectra analysis and biosynthetic gene cluster analysis to identify novel Ribosomally synthesized and Post-translationally modified Peptides (RiPPs) and the biosynthetic gene clusters encoding them. More information at https://ccms-ucsd.github.io/GNPSDocumentation/metaminer/.</p> <p>Qemistree: a method that generates a tree of metabolites from fragmentation spectra analysis for enhanced comparison of chemical profiles using chemically-informed distance metrics. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/qemistree/.</p> <p>ClassyTree : a chemically-informed distance metric that uses ClassyFire chemical class information for enhanced comparison of chemical profiles. A tree of the annotated metabolites is constructed based on the hierarchy of their respective chemical classes. Using the UniFrac metric, the chemical structural relatedness of the annotated molecules in each sample is thus considered when comparing multiple samples. Samples that contain similar chemical class profiles will end up closer to each other even if the individual molecules are slightly different. The method is not published yet but more information can be found here [https://ccms-ucsd.github.io/GNPSDocumentation/molnetenhancer/] and here [https://github.com/madeleineernst/MetaboDistTrees].</p> <p>MotifTree : a chemically-informed distance metric that uses MS2LDA substructure information for enhanced comparison of chemical profiles. The substructures found in molecules of each sample are considered when comparing multiple samples, by constructing a tree of metabolites based on shared substructures. Samples that contain similar substructure profiles will end up closer to each other even if the individual molecules are slightly different. The method is not published yet but more information can be found here [https://ccms-ucsd.github.io/GNPSDocumentation/molnetenhancer/] and here [https://github.com/madeleineernst/MetaboDistTrees].</p>"},{"location":"lexicon/#gc-ms-on-gnps","title":"GC-MS on GNPS","text":"<p>GNPS-GC: anenvironment for GC-MS data processing and annotation on GNPS.</p> <p>GC molecular network: molecular network of \"deconvoluted\" or \"pure\" electron ionisation (EI) spectra. It uses a modified version of the cosine score employed in molecular networks for LC-MS/MS.</p> <p>GC-MS Deconvolution: data processing for GC-MS data obtained in electron ionisation (EI) mode. More information at: https://ccms-ucsd.github.io/GNPSDocumentation/gc-ms-deconvolution/.</p> <p>MSHub: a deconvolution algorithm that conducts dataset-wide deconvolution across all provided samples.</p>"},{"location":"lexicon/#sirius","title":"SIRIUS","text":"<p>SIRIUS: a software dedicated to the annotation of ions from fragmentation spectra. First, SIRIUS computes candidate molecular formula (MF) by 1) matching the MS1 experimental spectra against the predicted isotopic pattern and 2) establishing how much the fragmentation spectra can be explained by the candidate MFs using fragmentation trees. SIRIUS integrates other algorithms or models such as: ZODIAC for improved MF prediction; CSI:FingerID for putative annotation of structure and COSMIC for establishing the confidence in the match; or CANOPUS for putative chemical class annotation. SIRIUS has an advanced graphical user interface or the tools can be run in command line mode. More informations at: https://bio.informatik.uni-jena.de/software/sirius/</p> <p>Fragmentation tree (FT): a method explaining the fragment ions formula in a fragmentation spectrum via fragmentation cascades. SIRIUS uses the FT method for molecular formula prediction. More informations at: https://jcheminf.biomedcentral.com/articles/10.1186/s13321-016-0116-8</p> <p>Fingerprint: a vector encoding the chemical or structural properties for a molecule or a fragmentation spectrum. It can be computed directly from the molecular structure with RDKit or CDK libraries.</p> <p>CANOPUS: a method that is part of SIRIUS and that can predict the most likely chemical class for a fragmentation spectrum. https://www.nature.com/articles/s41587-020-0740-8</p> <p>ZODIAC: an algorithm for improved de novo (database independent) molecular formula prediction in SIRIUS. More information in the preprint: https://www.nature.com/articles/s42256-020-00234-6</p> <p>COSMIC: a method for computing the significance of the structure proposed by CSI:FingerID annotation. The method is experimental and not published yet.</p>"},{"location":"lexicon/#the-gnps-environment","title":"The GNPS environment","text":"<p>GNPS: a web-based mass spectrometry ecosystem for the processing, annotation, and interpretation of nontargeted metabolomics data. See https://gnps.ucsd.edu/.</p> <p>MassIVE: a community resource to promote the exchange of mass spectrometry data. See https://massive.ucsd.edu . Data from MassIVE can be directly imported into the GNPS environment.</p> <p>Proteomics2: the beta-test server for workflow in development at GNPS. See proteomics2.ucsd.edu</p> <p>ProteoSAFe: the workflow manager for job scheduling on the cluster from Center of Computational Mass Spectrometry (CCMS) hosting GNPS and MassIVE.</p> <p>Quickstart interface: a simplified web-interface of GNPS that accelerates GNPS job preparation for molecular networking, FBMN, and data conversion/deposition. See https://gnps-quickstart.ucsd.edu/featurebasednetworking.</p> <p>Continuous identification: an automatic workflow on GNPS that periodically reanalyses public datasets for novel matches between fragmentation spectra and new spectral library entries. More information at https://ccms-ucsd.github.io/GNPSDocumentation/continuousid/.</p> <p>Metabolomics Spectrum Identifier Resolver: a web-server that facilitates the accession and visualization of a defined fragmentation spectrum on a public repository, including GNPS. See https://metabolomics-usi.ucsd.edu/.</p> <p>GNPS tags : refers to community-curated tags associated to a fragmentation spectra in GNPS spectral libraries entries. More information at https://ccms-ucsd.github.io/GNPSDocumentation/tag_info/.</p>"},{"location":"lexicon/#datasets-wide-analysis-tools","title":"Datasets wide analysis tools","text":"<p>ReDU: an interface for meta-analysis of spectral matches of fragmentation spectra from public datasets available on GNPS.More information at: https://ccms-ucsd.github.io/GNPSDocumentation/ReDU/.</p> <p>MASST : a mass spectrometry equivalent of NCBI BLAST. MASST enables querying a given fragmentation spectrum against all fragmentation spectra in public datasets. More information at https://ccms-ucsd.github.io/GNPSDocumentation/masst/.</p>"},{"location":"lexicon/#data-analysis-and-multiomics-integration","title":"Data analysis and multiomics integration","text":"<p>MetaboAnalyst : a web-platform that offers a variety of commonly used procedures for metabolomic data processing, normalization, multivariate statistical analysis, as well as data annotation. More information at: https://www.metaboanalyst.ca/.</p> <p>mmvec: a method for estimating the conditional probability that each molecule is present given a specific micro-organism or DNA sequence. The method was published in https://www.nature.com/articles/s41592-019-0616-3.</p> <p>Qiita : an open-source web-based platform that enables to carry out microbiome analyses and meta-analyses easily using standardized pipelines such as QIIME2 and GNPS. More information at: https://qiita.ucsd.edu/.</p> <p>Molecular cartography : a method for the visualization of metabolomics data onto a 3D model. See https://doi.org/10.1038/nprot.2017.122.</p>"},{"location":"lexicon/#molecular-networks-statistics","title":"Molecular Networks Statistics","text":"<p>Number of Nodes : After applying the MS-Cluster algorithm and creating different consensus MS2 spectra, each consensus spectra is represented as a node inside the network.</p> <p>Number of pairs : Number of edges or connections inside a network. (Suggest changing for number of edges)</p> <p>Number of ID's clusternodes : Number of nodes with a consensus mass spectra that has a match with a reference compound found in LC-MS or GC-MS libraries. (Suggest changing for number of annotated nodes)</p> <p>Number of ID's clusternodes not in components: Number of singlets (nodes without connection) that have a match with a reference compound found in LC-MS or GC-MS libraries. (Suggest changing for number of singlets)</p> <p>Number of unidentified neighbors: Taking as a reference each ID node inside a subnetwork, is the total amount of connected nodes without a match with a reference compound found in LC-MS or GC-MS libraries.</p> <p>Number of connected components not single: Number of subnetworks (spectral families) found in a job. (Suggest changing for number of subnetworks)</p> <p>Number of clusternodes in network: Number of nodes connected to other nodes (not singlets). (Suggest changing for number of nodes inside a subnetwork)</p> <p>Number of connected components identified: Number of subnetworks (spectral families) that have at least one node that have a match with a reference compound found in LC-MS or GC-MS libraries. (Suggest changing for number of subfamilies with at least one annotation)</p> <p>Number of clusternodes in identified components: Total sum of nodes found in the subnetworks (spectral families) that have at least one node that have a match with a reference compound found in LC-MS or GC-MS libraries. (Suggest changing for number of nodes inside a subnetwork that has at least one annotation)</p> <p>Number of spectra in consideration: The total number of fragmentation mass spectra extracted from a GNPS job obtained from LC-MS or GC-MS platforms.</p> <p>Number of spectra in network: The total number of spectra clustered as different nodes inside the network.</p> <p>Number of ID's spectra: Number of spectra that has a match with a reference compound found in LC-MS or GC-MS libraries.</p> <p>Number of ID's spectra not in components: Number of spectra clustered as singlets (nodes without connection) that have a match with a reference compound found in LC-MS or GC-MS libraries.</p>"},{"location":"lexicon/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (5.88%), lfnothias (94.12%)</p>"},{"location":"librarysearch/","title":"Spectral Library Search","text":""},{"location":"librarysearch/#spectral-library-search","title":"Spectral Library Search","text":"<p>One of the major limitations in discovering new chemical entities is determining which metabolites are known compounds within complex biological samples. A way to overcome this limitation is to compare the MS2 spectra of the unknown metabolite with a library of MS/MS spectra generated from structurally characterized metabolites. Herein, this comparison is based upon the similarity cosine scoring of MS/MS spectra.  </p>"},{"location":"librarysearch/#dereplication-workflow","title":"Dereplication Workflow","text":"<p>From the main GNPS page, click the \"Match Search\" button.</p> <p></p> <p>This will bring you to the workflow input to start library searching your data.</p>"},{"location":"librarysearch/#selecting-input-files","title":"Selecting Input Files","text":"<p>Please refer to the file selection documentation from networking.</p>"},{"location":"librarysearch/#selecting-spectral-libraries-to-search","title":"Selecting Spectral Libraries to Search","text":"<p>By default all the public spectral libraries are selected under the folder \"speclibs\". This includes many different spectral libraries. You can read about and browse these libraries on GNPS.</p> <p>NOTE: Do not change the selection of libraries unless you are an advanced user. Proteomics Spectral libraries will not work with GNPS and cause problems.</p>"},{"location":"librarysearch/#parameters-walkthrough","title":"Parameters Walkthrough","text":""},{"location":"librarysearch/#search-options","title":"Search Options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6"},{"location":"librarysearch/#advanced-search-options","title":"Advanced Search Options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)"},{"location":"librarysearch/#advanced-filtering-options","title":"Advanced Filtering Options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted.  By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal."},{"location":"librarysearch/#exploration-of-results","title":"Exploration of Results","text":"<p>To access your data, either click the link in the email or click the DONE link under Status on the jobs menu page.</p> View Description View All Spectra Hits View all library matches View Top Hits View only top hit per query spectrum View All Compounds Unique set of compounds in matches"},{"location":"librarysearch/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"logos/","title":"GNPS Logos","text":"<p>Feel free to use any of the following logos for your presentations. The following logos are licensed as CC BY.</p> <p></p>"},{"location":"logos/#gnps-logo","title":"GNPS Logo","text":"<p>PNG with white background</p> <p></p> <p>PNG with transparent background</p> <p></p> <p>PNG with URL</p> <p></p> <p>Animated</p> <p></p>"},{"location":"logos/#masst-logo","title":"MASST Logo","text":""},{"location":"logos/#global-foodomics","title":"Global Foodomics","text":""},{"location":"logos/#redu-logo","title":"ReDU Logo","text":""},{"location":"logos/#molnetenhancer-logo","title":"MolNetEnhancer Logo","text":""},{"location":"logos/#chemdir-logo","title":"ChemDir Logo","text":""},{"location":"logos/#gnps-dashboard-logo","title":"GNPS Dashboard Logo","text":""},{"location":"logos/#food-masst","title":"Food MASST","text":""},{"location":"logos/#gnps-fbmn","title":"GNPS FBMN","text":""},{"location":"logos/#massql","title":"MassQL","text":"<p>Find the full documentation for MassQL here!</p> <p></p>"},{"location":"logos/#logos-for-zoom-background","title":"Logos for Zoom Background","text":""},{"location":"logos/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (95.24%), Madeleine Ernst (4.76%)</p>"},{"location":"masst/","title":"MASST Search (Mass Search Tool)","text":""},{"location":"masst/#overview","title":"Overview","text":"<p>Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including sample information) as well as search a single MS/MS spectrum against all public spectral libraries.</p>"},{"location":"masst/#workflow-selection","title":"Workflow Selection","text":"<p>To search a single spectrum to see where it occurs in all public GNPS datasets, there are three ways to populate the search.</p>"},{"location":"masst/#1-masst-web-interface","title":"1. MASST Web Interface","text":"<p>Click here for the standalone MASST search interface, to get this start page:</p> <p></p>"},{"location":"masst/#2-manual-workflow-entering","title":"2. Manual Workflow Entering","text":"<p>From the main GNPS page, click the \"Query Spectrum\" button.</p> <p></p>"},{"location":"masst/#3-from-molecular-networking","title":"3. From Molecular Networking","text":"<p>In analyzing your molecular networks, you can click the \"Search Spec\" button on the View ALL Clusters With IDs link to pre-populate parent mass and peaks.</p> <p></p>"},{"location":"masst/#parameters","title":"Parameters","text":"<p>The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks.</p> <p>The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an demonstration input spectrum.</p> <p></p>"},{"location":"masst/#search-options","title":"Search Options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.7 Min Matched Peaks Minimum matched peaks to make a match 6"},{"location":"masst/#advanced-search-options","title":"Advanced Search Options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)"},{"location":"masst/#advanced-filtering-options","title":"Advanced Filtering Options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted.  By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Library Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal."},{"location":"masst/#results","title":"Results","text":"<p>Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that documentation.</p> <p>The top scoring match to public GNPS datasets are listed in the \"Dataset Matches\".</p> <p></p> <p>The quality of the match can be inspected by clicking the \"plotting\" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking \"View File Matches in Dataset\".</p> <p></p> <p>This view provides the full file path for all the files from each dataset along with the associated metadata for each file.</p> <p>FAQ - What if I do not see any results?</p> <p>There are a few scenarios in which a MASST search will not yield any hits including the following: - The query spectrum has not been observed in public data avaliable as the public data is not comprehensive and certain sample types are better represented than others. - The chemical observed (specifically the query spectrum) could be genuinely unique to your data - great news, if you are looking for new drugs derived from natural products (for example).</p>"},{"location":"masst/#re-analysis-of-found-files","title":"Re-analysis of found files","text":"<p>Clicking on [Analyze Files Found With Molecular Networking] will select all of the individual files identified through the single spectrum search and place them into a group. </p> <p></p> <p>The window below will appear and you can then click on [Reanalyze with Molecular Networking] to launch a molecular networking job with the files that were found.</p> <p></p> <p>The files are located in the default group (G1). You can then name the job and adjust parameters as applicable for your search. You can also add additional files to your job into one of the other default groups by clicking on [Select input files]. </p> <p></p>"},{"location":"masst/#citation","title":"Citation","text":"<p>Recommended Citation</p> <p>Wang, M., Jarmusch, A.K., Vargas, F. et al. Mass spectrometry searches using MASST. Nat Biotechnol (2020) doi:10.1038/s41587-019-0375-9</p>"},{"location":"masst/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (66.36%), alan-jarmusch (11.21%), amcaraballor (0.93%), jgauglitz (21.5%)</p>"},{"location":"mergepolarity/","title":"Merge Network Polarity","text":"<p>Here we merge polarity between positive and negative networks. </p>"},{"location":"mergepolarity/#workflow","title":"Workflow","text":"<p>The workflow is available on GNPS here The merge polarity workflow can be performed on both classical and feature based molecular networking (FBMN) jobs.  </p> <p>A GNPS job is run on positive mode data and another job is run on negative mode data; the input is then the GNPS ID of both jobs. These jobs can be either classical or feature based molecular networking (FBMN) jobs. </p> <p>A retention time tolerance for aligning masses between the two jobs must be specified. Note that this time should be given in minutes for FBMN jobs and in seconds for classical molecular networking jobs. A ppm tolerance must also be specified for the merge.  </p>"},{"location":"mergepolarity/#interpreting-results","title":"Interpreting Results","text":"<p>A merged graphml file is created along with summary statistics and evaluations. To provide an assessment of accuracy of the edges inserted, new edges where both nodes in the respective positive and negative networks are identified with a structure (an annotation), a tanimoto score is calculated between the structures. Tanimoto scores range from 0-1 when the nodes from positive and negative jobs are annotated by library matching, where 1 represents perfect concordance of structure while 0 represents no concordance. If no structures are annotated, the tanimoto score is given as -1. We assume a tanimoto score of greater than 0.9 indicates concordance of structure. </p>"},{"location":"mergepolarity/#citation","title":"Citation","text":"<p>Source code is available on Github</p>"},{"location":"mergepolarity/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (68.18%), Allegra A (31.82%)</p>"},{"location":"metadata/","title":"Metadata","text":""},{"location":"metadata/#summary","title":"Summary","text":"<p>The metadata file used in GNPS describes the properties of a file/sample (e.g. sample type, year of analysis, and collection method). Metadata adhering to the accepted formatting for each tool enhances data analysis and visualization options. We strongly encourage you to prepare metadata files in advance and upload to the supplementary file folder in the corresponding MassIVE dataset. However, we understand that all of this information might not be available, so it is a suggest starting point. </p>"},{"location":"metadata/#metadata-formats","title":"Metadata Formats","text":"<p>There are two metadata formats we accept for the majority of GNPS workflows:</p> <ol> <li>tab separated tsv file</li> <li>Google Sheets shared link</li> </ol> <p>Google Sheets Supported Workflows</p> <ul> <li>Classical Molecular Networking Release 22 or later</li> <li>FBMN Release 23 or later</li> </ul>"},{"location":"metadata/#redu-metadata","title":"ReDU Metadata","text":"<p>The recommended starting point for both of these metadata is  ReDU Sample Information Template (additional documentation can be found here). Users can add an unlimited amount of additional columns to the ReDU Sample Information Template. To add additional columns that are recognized by GNPS workflows, you can prefix the column header with ATTRIBUTE_ (e.g. ATTRIBUTE_Organism). There are specific instructions on required columns and formatting detailed for GNPS tools below.</p> <p>Note</p> <p>This standard metadata format works for the following GNPS tools</p> <ol> <li>Classical Molecular Networking</li> <li>Feature Based Molecular Networking</li> <li>GC Molecular Networking</li> <li>Qemistree</li> </ol> <p>Metadata file used must be a tab-delimited text file. A .tsv can be downloaded from the ReDU Sample Information Template. Users that create a metadata file without using the ReDU Sample Information Template using a text editor (e.g. Microsoft Excel, Notepad++ for Windows, gedit for Linux, TextWrangler for Mac OS) should save as a .txt (tab-delimited). </p> <p>Warning</p> <p>Excel (xlsx), rich text (rtf) are not supported.</p>"},{"location":"metadata/#barebones-metadata","title":"Barebones Metadata","text":"<p>Starting from scratch, you can simply list the filenames for your mass spectrometry files and extra columns describing each file. </p> <p>Here is an example file without the ReDU Sample Information template in Google Sheets and as a tsv download if you Right-click, and Save link as to download. A text editor can be used to edit it as desired. </p> <p>Formatting metadata</p> <p>The only required columns in the metadata is \"filename\" and the file names should match those uploaded to GNPS and selected for analysis.       Capitalization matters.</p> <p>Formatting metadata</p> <p>To add additional columns that are recognized by GNPS workflows, you can prefix the column header with ATTRIBUTE_ (e.g. ATTRIBUTE_Organism). Columns without the ATTRIBUTE_ prefix will be ignored. </p>"},{"location":"metadata/#google-sheets-metadata","title":"Google Sheets Metadata","text":"<p>Using metadata in Google Sheets is a relatively new feature and we warn there might be some bumps in the road. You can find the a barebones example here. </p> <p>In order to use Google Sheets as your source of metadata you will need to accomplish the following steps. </p> Make sure you metadata is the first sheet of your Google Sheets <p></p> Share metadata so that others can view simply by having the link <p> </p> Paste Link into Metadata Field in GNPS <p></p>"},{"location":"metadata/#requirements-specific-to-molecular-networking","title":"Requirements Specific to Molecular Networking","text":"<p>The use of a metadata file is an alternative way to assign groups when selecting data input files within the workflow of GNPS. The current version of molecular networking allows to use the metadata table as an input. </p> <p>Tip</p> <p>Indicate which metadata columns should be considered in analysis by opening the file in a text editor and adding             \"ATTRIBUTE_\" to the header of the column.</p> <ul> <li>Save the file (must be tab-delimited text file)</li> <li>Users must upload their data file</li> <li>Users must select the metadata file and place it in the \"Metadata File\" folder</li> </ul> <p>Danger</p> <p>Although it is possible to use the legacy group mapping and attribute mapping file, we strongly advise against using this method.</p>"},{"location":"metadata/#requirements-specific-to-qiime2","title":"Requirements Specific to Qiime2","text":"<p>GNPS communicates with Qiime2. PCoA visualized using EMPeror and Qiime outputs (.qza/.qzv), including a BIOM formated output, can be generated. Microbe-metabolite interactions can also be studied with MMVEC. GNPS will parse any extra column in the metadata file and output them in the Qiime2 supported files (BIOM/qza files). Note that by default the mass spectrometry filename will be used as sample name for Qiime2 files. Alternatively, it is possible to specify an additional metada column called \"sample_name\" that will be used instead as sample name in Qiime2, to enable joint mass spectrometry - metabolomics analysis such as MMVEC.</p> <ul> <li>Save the file (must be tab-delimited text file)</li> <li>Users must upload their data file</li> <li>Users must select the metadata file and place it in the \"Metadata File\" folder</li> <li>Optional Add an extra column called \"sample_name\" to the metadata file using a text editor. The sample name will replaced the mass spectrometry filename in the Qiime2 output. For joint mass spectrometry - sequencing analysis with MMVEC, provide the sequencing sample name as indicated in the qiime2 file used (BIOM/qza file).</li> </ul>"},{"location":"metadata/#requirements-specific-to-qiita","title":"Requirements Specific to Qiita","text":"<p>GNPS communicates with Qiita. Specifically, you can use the output of GNPS to add metabolomics data into an existing Qiita dataset. This is handled through the Biom table output as a qiime2 qza artifact. The key feature is renaming the mass spectrometry file into a sample identifier so that the identifiers are concordant. </p> <p>A Qiita ID with corresponding information must first be created.</p> <ul> <li> <p>Add an extra column called \"sample_name\" to the metadata file using a text editor. The identifer must contain the Qiita ID prepended to the sample identifier using a period (e.g. 10317.000096815).</p> </li> <li> <p>Save the file (must be tab-delimited text file)</p> </li> <li>Users must upload their data file</li> <li>Users must select the metadata file and place it in the \"Metadata File\" folder</li> </ul> <p>If performing additional analysis in Qiime using the .qza, it is required to add a row indicating the type of variable.</p>"},{"location":"metadata/#requirements-specific-to-ili","title":"Requirements Specific to 'ili","text":"<p>The metadata can also be used to specify spatial coordinates for direct visualization of the data in 'ili toolbox. It creates really cool plots like this: </p> <p>Extra columns are required in the metadata file</p> <p>A text editor should be used to add the following columns in order (required):</p> <ol> <li>\"COORDINATE_X\" - X coordinate on the 2D/3D model</li> <li>\"COORDINATE_Y\" - Y coordinate on the 2D/3D model</li> <li>\"COORDINATE_Z\" - Z coordinate on the 2D/3D model</li> <li>\"COORDINATE_radius\" - radius for the spot in 'ili toolbox.</li> </ol> <p>\"filename\" must be the first column</p> <p></p> <ul> <li>Save the file (must be tab-delimited text file)</li> <li>Users must upload their data file</li> <li>Users must select the metadata file and place it in the \"Metadata File\" folder</li> <li>Users must upload the corresponding .STL file and place it in the \"STL Model for ili\" folder</li> </ul>"},{"location":"metadata/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (66.12%), alan-jarmusch (24.79%), emgentry (9.09%)</p>"},{"location":"metadatasetanalysis/","title":"Overview","text":"<p>The GNPS Metadata Analysis enables users to perform meta-analyses on all public data based upon the metadata.</p> <p>Easily select LC/MS files to compare based upon metadata attributes (e.g. Skin vs stool) with</p> <ol> <li>Molecular Networking at GNPS</li> <li>Find differentially identified compounds across these groups</li> </ol> <p>Try it out here. </p>"},{"location":"metadatasetanalysis/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"metaminer/","title":"MetaMiner","text":""},{"location":"metaminer/#introduction","title":"Introduction","text":"<p>MetaMiner is a metabologenomic pipeline which integrates metabolomic (tandem mass spectra) and genomic data to identify novel Ribosomally synthesized and Post-translationally modified Peptides (RiPPs) and the biosynthetic gene clusters encoding them. See Cao et al, Cell Systems, In press (2019) https://doi.org/10.1016/j.cels.2019.09.004 for more informations.</p> <p>MetaMiner is developed in collaboration of Carnegie Mellon University, Saint Petersburg State University and the University of California San Diego (CA, USA) under the Apache 2.0 License. </p> <p>The detailed documentation of MetaMiner can be accessed  here.</p> <p>Below we are describing how to use MetaMiner on GNPS.</p>"},{"location":"metaminer/#manuscripts-and-citations","title":"Manuscripts and Citations","text":"<p>If you used MetaMiner, please cite the corresponding manuscripts:</p> <p>MetaMiner: Cao et al, Cell Systems, In press (2019) https://doi.org/10.1016/j.cels.2019.09.004.</p> <p>DEREPLICATOR: Mohimani et al., Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology, 13, 30\u201337 (2017). https://doi.org/10.1038/nchembio.2219.</p>"},{"location":"metaminer/#development","title":"Development","text":"<p>The standalone version of MetaMiner and the latest version is available in the Natural Product Discovery toolkit (NPDtools) at https://github.com/ablab/npdtools.</p>"},{"location":"metaminer/#accessing-the-metaminer-workflow-on-gnps","title":"Accessing the MetaMiner Workflow on GNPS","text":"<p>The MetaMiner workflow is available on GNPS on the in silico tools page.</p>"},{"location":"metaminer/#step-1-go-to-gnps","title":"STEP 1: Go to GNPS","text":"<p>Go to http://gnps.ucsd.edu, and create/login to your account.</p>"},{"location":"metaminer/#step-2-access-metaminer","title":"STEP 2: Access MetaMiner","text":"<p>Find the \"In Silico Tools\" box and click on \"Browse Tools\".</p> <p>Open the MetaMiner workflow.</p>"},{"location":"metaminer/#step-3-select-your-files","title":"STEP 3: SELECT YOUR FILES","text":"<p>Select the Spectrum Files (Required): Select the tandem mass spectra file(s). The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload here. After getting done with selecting files, click on Finish Selection.</p> <p>Select the Sequence File (Required): Select the sequence file(s) or a directory with multiple sequence files inside. In the latter case, NPDtools recursively walks through the directory and picks up all files with appropriate extensions (.fna, .fasta, or .fa for nucleotide or amino acid FASTA files, .gbk for antiSMASH output, .txt for BOA output). You can specify an unlimited number of input sequence files/directories, they will be processed independently (see also --correspondence option below). We determine sequence file type by its extension. For separating between nucleotide and amino acid FASTA files, the content of a few first entries is analysed. At least one sequence file is required unless correspondence file with RefSeq IDs is specified. </p> <p>Select the Correspondence File:  Path to a file describing correspondence between sequence and spectra files. The file should be tab-separated and has two columns listing basenames of spectra and sequence files. Sequence column may include RefSeq IDs prefixed with <code>#RefSeq:</code>. In the latter case, the corresponding references are automatically downloaded from NCBI. </p> <p>Note that if a correspondence file not provided, the all-vs-all analysis is performed between the spectrum and sequences files.</p>"},{"location":"metaminer/#step-4-configure","title":"STEP 4: CONFIGURE","text":"<p>Configure the parameters for the MetaMiner job: Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.</p> <p></p>"},{"location":"metaminer/#basic-options","title":"BASIC OPTIONS:","text":"<p>-- Parent Mass Tolerance:  This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ).</p> <p>-- Product Ion Tolerance: This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ).</p> <p>-- Product Class: MetaMiner can search for multiple class of RIPPS. Select the class of interest or search for all class by selecting \"ALL\". </p>"},{"location":"metaminer/#advanced-options","title":"ADVANCED OPTIONS:","text":"<p>-- Search blind modification (slow): By default is deactivated. If activated will search for new post translational modifications with arbitrary mass shifts. The computation will slower but will generally produce more annotations.</p> <p>-- Max charge: Maximum charge allowed.</p>"},{"location":"metaminer/#step-5-view-results","title":"STEP 5: VIEW RESULTS","text":"<p>See the MetaMiner job status:</p> <p>The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done.</p> <p>The job can be Cloned, for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links. The job can also be cloned to the latest workflow version with \"Clone to the Latest Version\"</p>"},{"location":"metaminer/#significant-matches","title":"Significant Matches","text":"<p>Clic on View Unique Peptides (recommended), to have get the list of peptide-to-spectrum annotation.</p> <p>Clic on the View All PSM (Peptide-Spectrum Match) to have detailed view of the peptides-to-spectrum annotations.</p>"},{"location":"metaminer/#step-6-explore-the-metaminer-annotations","title":"STEP 6: Explore the MetaMiner annotations:","text":"<p>Each MetaMiner annotation is presented as row in the results table. Annotations can be sorted using various column (usually the score or the p-value), or a compound name can be searched with the filter function.</p> <p>The proposed peptide sequence is indicated \"FragmentSeq\" column. If you searched for blind modifications, the \"ModifiedSeq\" will display the amino acids that are modified and the modification. fragments table, lists the ion fragments that matched with the fragmentation tree, along with their mass error, charge and intensities.</p> <p>The score and p-value indicates the significance of the peptide-to-spectrum annotation. Significant annotations are found in View Unique Peptides. Unreliable annotations can be found in View All Matches (Including Unreliable Ones).</p>"},{"location":"metaminer/#step-7-validate","title":"STEP 7: VALIDATE","text":"<p>Validate a MetaMiner annotation: MetaMiner uses both the genome mining and tandem mass spectra annotation. This corresponds to a level 2 annotation based on Metabolomics Standard  Initiative, since the stereochemistry of peptide is uncharacterized. Nevertheless, the annotation should be supported by additional informations.</p>"},{"location":"metaminer/#validating-a-metaminer-annotation-to-msi-level-1","title":"Validating a MetaMiner annotation to MSI level 1.","text":"<ul> <li>A level 1 MSI identification can be achieved of the reference material is available for the compound, by ordering the compound and analyzing it with the same method LC-MS/MS. The MS/MS spectrum and retention time should be identical between the observed and reference MS/MS spectra (co-injection can be done to verify retention time).</li> </ul>"},{"location":"metaminer/#annotation-with-the-metaminer-msi-level-2-or-3","title":"Annotation with the MetaMiner (MSI level 2 or 3),:","text":"<ul> <li> <p>The MS/MS spectrum from the raw file must be inspected (consistency, noise level, ...)</p> </li> <li> <p>The adducts detected must be confirmed using the MS1 spectrum (mono-charged, di-charged ?, protonated adduct ?, ...). This can be done with MZmine or other feature detection software.</p> </li> <li> <p>The molecular formula must be verified. Sirius can be used for that (only for single-charged compounds).</p> </li> <li> <p>Look at the biological source(s) (species) for the peptidic natural product (Google scholar, Dictionnary of Natural Products, AntiMarin, MarinLit, ...), to see if it is consistent with the species analyzed.</p> </li> </ul>"},{"location":"metaminer/#step-8-optional-mapping-metaminer-annotation-on-molecular-networks","title":"STEP 8 (Optional): Mapping MetaMiner Annotation on Molecular Networks","text":"<p>Mapping MetaMiner Annotation on Molecular Networks is not trivial if multiple spectrum sequence files are used.</p> <p>When one sequence file is used, it is possible to use either the classical or feature-based molecular networking workflows as indicated below:</p> <p>[Option 1 - Classical Molecular Networking]</p> <ol> <li> <p>Run a classical molecular networks with the spectral data (Files format can be mzML/mzXML/MGF). See the following documentation.</p> </li> <li> <p>Download the molecular networks clustered data (.MGF file). Click on Download Clustered Spectra as MGF.</p> </li> </ol> <p>[Option 2 - Feature-Based Molecular Networking]</p> <ol> <li> <p>Run a feature-based molecular networking workflow. See the following documentation.</p> </li> <li> <p>Export the .MGF file to GNPS for MetaMiner analysis.</p> </li> <li> <p>Upload the .MGF file to GNPS, and run a MetaMiner job (see present documentation).</p> </li> <li> <p>When the job is completed click on View Unique Peptides.</p> </li> <li> <p>In the View unique Peptide page, download the .TSV annotation file. Click on download with Download button and unzip the file.</p> </li> <li> <p>Open the molecular networks with Cytoscape. See documentation here, and here for Feature-Based Molecular Networking</p> </li> <li> <p>In Cytoscape, import the .TSV table as attribute table. In Cytoscape go to File / Import / Table / File and select the .TSV annotation file for the dereplicator (see above).</p> </li> <li> <p>In the preview window, click on the Scan header to set the meaning to Key.</p> </li> <li> <p>Select/Unselect column as needed, and eventually change the name for table header if they are already in the molecular networks (otherwise, they will be replaced with the new table imported).</p> </li> </ol>"},{"location":"metaminer/#contribute-to-the-documentation","title":"Contribute to the Documentation","text":"<ul> <li>For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository.</li> <li>To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".</li> </ul> <p>Recommended Citation</p> <p>MetaMiner: A Scalable Peptidogenomics Approach for Discovery of Ribosomal Peptide Natural Products with Blind Modifications from Microbial Communities. Cao et al. Cell Systems 2019, 9(6), 600-608</p>"},{"location":"metaminer/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"microbemasst/","title":"microbeMASST","text":"<p>MicrobeMASST is a domain-specific MASST that allows users to search for one or multiple MS/MS spectra against a reference database of MS/MS data acquired from bacterial and fungal monocultures that have been deposited and made publicly available on GNPS-Massive (current version is updated to July 2022).</p> <p>Users are able to search for both known and unknown MS/MS spectra. </p>"},{"location":"microbemasst/#input","title":"INPUT","text":"<p>The input to any MASST search is a MS/MS spectrum. If the users want to search for already known molecules, which spectra have been deposited in the GNPS libraries, they can simply enter the known library spectrum associated with them (Figure 1). As of January 2023, the GNPS libraries contain ~600K spectra. </p> <p>Figure 1</p> <p></p> <p>Another way users can search for an MS/MS spectrum using an Universal Spectrum Identifiers (USI) is to deposit their data in Massive and inspect it using the GNPS Dashboard. Using the example already provided in the Dashboard (mzspec:MSV000084494:GNPS00002_A3_p), we can inspect a MS2 scan (54) and click on \u201cView Metabolomics USI\u201d (Figure 2A). A new prompt will open that allows to inspect the spectrum (Figure 2B). Under Spectrum USI is possible to retrieve the USI of the spectrum which can be then copied and pasted into microbeMASST for the search (Figure 2C).</p> <p>Figure 2A</p> <p></p> <p>Figure 2B</p> <p></p> <p>Figure 2C</p> <p></p> <p>Finally, users can search for MS/MS spectra by manually providing a list of ions and their intensities (Figure 3). In this case, the m/z of the precursor ion of interest must be specified while the charge is not required.</p> <p>Figure 3</p> <p></p>"},{"location":"microbemasst/#search","title":"SEARCH","text":"<p>Default search parameters are provided (Figure 4). These include a 0.05 Da tolerance for both the parent mass (precursor m/z) and the fragment ions. A cosine threshold of minimum 0.7 and at least 3 matching peaks. These parameters can be modified by the users. Users can also decide to include analogs in their search (default is analog search OFF) by providing delta mass boundaries for the precursor mass. </p> <p>Users will have to click on \u201cSearch microbeMASST by USI\u201d if they provided a USI for the search or \u201cSearch microbeMASST by Spectrum Peaks\u201d if they provided a list of fragment ions and their intensities for the search. The search job setting can be shared with other users by clicking on \u201cCopy Link\u201d, making each job reproducible. Finally, by clicking on \u201cOpen External MASST Search Results\u201d a new fastMASST webpage that will search for the spectrum of interest against the whole GNPS repository and report all samples in which that specific spectrum was found.</p> <p>Figure 4</p> <p></p>"},{"location":"microbemasst/#output","title":"OUTPUT","text":"<p>The primary output of the microbeMASST search consists of an interactive taxonomic tree (Figure 5).  All bacterial or fungal samples in which the spectrum of interest was found are categorized according to their taxonomy. By default, the tree is showing information up to Species level. This can be modified by changing the \u201cShow level\u201d parameter. Taxonomic ranks from Phylum to Species can be represented. The \u201cMinimum matches\u201d parameter indicates how many matches must be found for a specific node to be visualized. We advise to keep this to 1 since microbeMASST is intended to be a discovery tool, allowing the formation of hypothesis rather than unambiguous results. The full tree information can also be visualized by changing the \u201cTree\u201d setting from Matched to Full.</p> <p>Figure 5</p> <p></p> <p>By moving the cursor on each node, the contained information can be visualized (Figure 6). This includes not only the name of the taxon, but also its NCBI ID, its taxonomic rank, and the number of samples of this specific taxon that presented the MS/MS spectrum of interest. The total number of available samples for that specific taxon in the reference database is also reported. This information allows to calculate an occurrence ratio, which is also visualized in the form of the pie chart.</p> <p>Figure 6</p> <p></p> <p>By clicking the \u201cLibrary matches\u201d tab, a list of matching metabolites present in the GNPS libraries can be visualized (Figure 7). In this example case, we used the MS/MS spectrum of phenylalanine \u2013 cholic acid (Phe-CA) and obtained a near perfect match to the Phe-CA spectrum deposited in the GNPS library. Interactive links allow to further investigate the molecule. Moreover, the annotation process utilizes the also the GNPS Suspect Library, maximizing annotation rates when unknown molecules are investigated. It is worth noting that annotations from the GNPS Suspect Library are generally less reliable than matches to the classic libraries since they are predictions. Finally, result tables can be copied or exported in Excel.</p> <p>Figure 7</p> <p></p> <p>The \u201cDataset matches\u201d tab contains a table summarizing all matching samples (Figure 8). Here, not only the name, NCBI ID, and taxonomic rank of the taxon can be found but also the number of matching fragments. Raw files can be directly opened in the GNPS Dashboard by clicking \"Open file\" for further investigation. When the MS/MS spectrum of interest has been searched through USI of deposited samples in GNPS-Massive, a mirror plot between the matching spectra can be visualized following the link in the USI column.</p> <p>Figure 8</p> <p></p> <p>Finally, the \u201cTaxa matches\u201d tab returns a list of all the matching taxa at every taxonomic level (Figure 9). In this example, Phe-CA has been found in 18 samples out of the 44,836 bacterial samples present in microbeMASST, with an occurrence ratio of 0.0004. Nevertheless, when looking at sample acquired from Bifidobacterium adolescentis cultures, 4 out of the 15 deposited samples presented Phe-CA, giving an occurrence ratio of 0.2667</p> <p>Figure 9</p> <p></p>"},{"location":"microbemasst/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (2.47%), Simone Zuffa (56.79%), Simone Zuffa (40.74%)</p>"},{"location":"mmvec/","title":"MMVEC","text":"<p>mmvec is a tool for multi-omics integration between metabolomics and microbiome data. </p> <p>See the article: Morton, J.T., Aksenov, A.A., Nothias, L.F. et al. Learning representations of microbe\u2013metabolite interactions. Nat Methods 16, 1306\u20131314 (2019)</p> <p>And the repository at https://github.com/biocore/mmvec.</p> <p>Note that the present GNPS workflow allows to access only some functionalities of mmvec. So we recommend running mmvec as recommended in the github repository.</p>"},{"location":"mmvec/#input-formats","title":"Input Formats","text":""},{"location":"mmvec/#microbiome-metadata","title":"Microbiome Metadata","text":"<p>This is a tsv file that describes the taxonomy of hte input sequences. The required header is: FeatureID. </p>"},{"location":"mmvec/#microbiome-quantification-data","title":"Microbiome Quantification Data","text":"<p>This data can come from several locations:</p> <ol> <li>Import into qiime2 manually (see below)</li> <li>TODO</li> </ol>"},{"location":"mmvec/#metabolomics-metadata","title":"Metabolomics Metadata","text":"<p>This is a tsv file that describes the identification of the metabolites. The required header is featureid or sampleid that provides the identifier for each metabolite. </p>"},{"location":"mmvec/#metabolomics-quantification-data","title":"Metabolomics Quantification Data","text":"<p>This data can come from several locations:</p> <ol> <li>GNPS FBMN outputs a qza for this</li> <li>Import into qiime2 manually (see below)</li> </ol> <p>Note</p> <p>Sample identifiers will need to match between the microbiome and metabolomics quantification files. One of the ways to do this if you run your metabolomics in GNPS' FBMN, you can specify a sample_name column in the metadata to rewrite the sample identifiers for the metabolomics qza to line up with the metabolomics. </p>"},{"location":"mmvec/#running-the-workflow","title":"Running the Workflow","text":"<p>Lorem Ipsum</p>"},{"location":"mmvec/#exploring-the-results","title":"Exploring the Results","text":"<p>Lorem Ipsum</p>"},{"location":"mmvec/#demonstration-data","title":"Demonstration Data","text":"<p>Lorem Ipsum</p>"},{"location":"mmvec/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (82.35%), lfnothias (17.65%)</p>"},{"location":"molDiscovery/","title":"MolDiscovery","text":""},{"location":"molDiscovery/#moldiscovery-a-probabilistic-model-for-in-silico-database-search-of-msms","title":"molDiscovery - a probabilistic model for in silico database search of MS/MS","text":"<ul> <li>molDiscovery - a probabilistic model for in silico database search of MS/MS</li> <li>Introduction</li> <li>Manuscripts and Citations</li> <li>Development</li> <li>Accessing molDiscovery workflow on GNPS</li> <li>STEP 1: Go to GNPS and login</li> <li>STEP 2: Access molDiscovery</li> <li>STEP 3: Select input spectra</li> <li>STEP 4: Set up parameters<ul> <li>BASIC OPTIONS:</li> <li>ADVANCED OPTIONS:</li> </ul> </li> <li>STEP 5: Submit job</li> <li>STEP 6: View results</li> <li>Feedback and Bug Reports</li> <li>Contribute to the Documentation</li> <li>Page Contributions</li> </ul>"},{"location":"molDiscovery/#introduction","title":"Introduction","text":"<p>molDiscovery is a probabilistic model for in silico database search of small molecule MS/MS. It improves DEREPLICATOR+ by </p> <ol> <li>using an efficient fragmentation algorithm</li> <li>using log likelihood ratio as metabolite spectrum matching score</li> <li>an efficient implementation for indexing</li> </ol> <p>As a result, molDiscovery improves both efficiency and accuracy of the database search.</p> <p>molDiscovery model and software are developed in collaboration of Saint Petersburg State University (Russia) and Carnegie Mellon University (PA, USA).</p>"},{"location":"molDiscovery/#manuscripts-and-citations","title":"Manuscripts and Citations","text":"<p>Liu Cao et al. \"MolDiscovery: Learning Mass Spectrometry Fragmentation of Small Molecules.\" bioRxiv.</p>"},{"location":"molDiscovery/#development","title":"Development","text":"<p>The GitHub repository provides latest source code and release. </p>"},{"location":"molDiscovery/#accessing-moldiscovery-workflow-on-gnps","title":"Accessing molDiscovery workflow on GNPS","text":"<p>The molDiscovery are currently available on GNPS as a workflow.</p> <p></p>"},{"location":"molDiscovery/#step-1-go-to-gnps-and-login","title":"STEP 1: Go to GNPS and login","text":"<p>Go to http://gnps.ucsd.edu, and create/login to your account.</p> <p></p>"},{"location":"molDiscovery/#step-2-access-moldiscovery","title":"STEP 2: Access molDiscovery","text":"<p>Derectly go to the workflow page.</p> <p></p>"},{"location":"molDiscovery/#step-3-select-input-spectra","title":"STEP 3: Select input spectra","text":"<p>Select/Import a mass spectrometry file: The input format accepted are mzML/mzXML/MGF. Note that have the option to import an existing GNPS dataset (by clicking on \"Share Files\") or upload your own data (by clicking on \"Upload Files\"). See the corresponding GNPS documentation for FTP upload.</p> <p>After getting done with selecting files, click on Finish Selection.</p> <p></p> <p></p> <p></p>"},{"location":"molDiscovery/#step-4-set-up-parameters","title":"STEP 4: Set up parameters","text":"<p>Set up the parameters for the molDiscovery job: Select a title for your job, and adjust parameters depending on your data and the mass spectrometer used.</p> <p></p>"},{"location":"molDiscovery/#basic-options","title":"BASIC OPTIONS:","text":"<p>-- Precursor Ion Mass Tolerance:  This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.01 Da.</p> <p>-- Fragment ion Mass Tolerance: This value specifies how much fragment ions can be shifted from their expected m/z values. Default value is \u00b1 0.01 Da.</p>"},{"location":"molDiscovery/#advanced-options","title":"ADVANCED OPTIONS:","text":"<p>-- Predifined database: the default small molecule structure database is AllDB, which contains 720K compounds.</p> <p>-- Custom DB file: if a custom database is provided (via File selection or URL), the predefined DB choice is ignored.</p> <p>-- Max charge: Maximum charge allowed. The default is 2.</p> <p>-- Fragmentation Model: the default model is 2-1-3, which indicates there will be at most two bridges, one 2-cut, and three cuts in total.</p> <p>-- Min significant score: the minimum score to report a significant metabolite spectrum match. The default value is 10.</p>"},{"location":"molDiscovery/#step-5-submit-job","title":"STEP 5: Submit job","text":"<p>Add an email for notification. Then click on submit.</p> <p>You will get an email with the link to the results when your job is finished. You can also check the status of your job in \"Jobs\" section.</p> <p></p>"},{"location":"molDiscovery/#step-6-view-results","title":"STEP 6: View results","text":"<p>See the molDiscovery job status: The status of the job can be vizualized in your account job list, and through the link in provided in email you will received when the job is done.</p> <p>The job can be Cloned, for further parameters modifications. Summary Statistics and Workflow Parameters can be consulted on the respective links.</p> <p>Click on View Unique Metabolites (recommended), to have get the list of annotated molecules.</p> <p>Click on the View All MSM (Metabolites-Spectrum Match) to have detailed view of the Metabolites-spectrum matches.</p> <p>Explore the molDiscovery annotations: Annotations are sorted by molDiscovery score (default), mass, compound name, etc. These fields can also be searched with the filter function.</p> <p></p>"},{"location":"molDiscovery/#feedback-and-bug-reports","title":"Feedback and Bug Reports","text":"<p>We will be thankful if you help us make molDiscovery better by sending your comments, bug reports, and suggestions to npdtools.support@cab.spbu.ru or posting them on our GitHub repository tracker.</p>"},{"location":"molDiscovery/#contribute-to-the-documentation","title":"Contribute to the Documentation","text":"<ul> <li>For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository.</li> <li>To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".</li> </ul>"},{"location":"molDiscovery/#page-contributions","title":"Page Contributions","text":"<p>liucaomics</p>"},{"location":"moleculeexplorer/","title":"Molecule Explorer","text":""},{"location":"moleculeexplorer/#molecule-explorer","title":"Molecule Explorer","text":"<p>Building upon Continuous Identification, Molecule Explorer provides a portal for users to find exactly where each molecules occur in all public GNPS datasets. This powerful exploration tool enables users to understand the expected context where each molecule has been seen before to inform future analyses.</p> <p>Explore here.</p>"},{"location":"moleculeexplorer/#all-molecules-summary","title":"All Molecules Summary","text":"<p>This summary list includes all molecules identified in public GNPS datasets. The summary also includes the total number of datasets and files that each molecule has been found, to provide a sense of ubiquity of each molecule. For example, common known contaminants, e.g. Sodium Formate Clusters, are seen in almost all public datasets.</p>"},{"location":"moleculeexplorer/#datasets-per-molecule","title":"Datasets per Molecule","text":"<p>For each molecule, click on \"Datasets\" to view the specific datasets in which a molecule was found in. This view includes the accession and name of all datasets Continuous Identification found that molecule.</p>"},{"location":"moleculeexplorer/#files-per-molecule","title":"Files per Molecule","text":"<p>In the final level of granularity, the molecule can be traced down to the set of files per dataset. By clicking \"Dataset Files\" a set of files which contain the molecule is listed along with the metadata associated with each of the individual files.</p> <p>Here we can see that within the Skin Cartography Dataset, Avobenzone appears in only files from human swabs and not blanks:</p> <p></p>"},{"location":"moleculeexplorer/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"molnetenhancer/","title":"MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools","text":"<p>MolNetEnhancer is a workflow that enables to combine the outputs from molecular networking, MS2LDA, in silico structure annotation tools (such as Network Annotation Propagation or DEREPLICATOR) and the automated chemical classification through ClassyFire to provide a more comprehensive chemical overview of metabolomics data whilst at the same time illuminating structural details for each fragmentation spectrum. For more information refer to the main MolNetEnhancer publication. </p> <p>The MolNetEnhancer worflow consists of two steps:</p> <ol> <li>Integrate MS2LDA substructure information with mass spectral molecular networks </li> <li>Integrate chemical structural information from GNPS library matching, and in silico structure prediction with mass spectral molecular networks to retrieve most abundant chemical classes per molecular family</li> </ol> <p>MolNetEnhancer is freely availble as Python and R package and open to contributions from the community on Github. Additionally, it is now also possible to run MolNetEnhancer through the GNPS interface:</p> <ol> <li> <p>To run step 1 through the GNPS interface refer to the MS2LDA documentation or through MS2LDA.org.</p> </li> <li> <p>To run step 2 through the GNPS interface access this link, which will lead to the below displayed job entry page:</p> </li> </ol> <p></p> <p>In the following section, we explain what input files are needed, and what kind of output you'll get.</p>"},{"location":"molnetenhancer/#collecting-the-right-input-ids","title":"Collecting the right input IDs","text":"<p>After providing the GNPSs analysis with a title, you'll need at least one job ID and up to 3 job IDs from GNPS in silico structure annotation to start the MolNetEnhancer chemical class annotation, including:</p> <ul> <li>Required: GNPS Task ID</li> <li>Optional: NAP ID</li> <li>Optional: DEREPLICATOR ID</li> <li>Optional: VARQUEST ID</li> <li>Optional: MS2LDA.org Job ID</li> </ul>"},{"location":"molnetenhancer/#quick-start-from-processed-molecular-network","title":"Quick start from processed Molecular Network","text":"<p>To facilitate MolNetEnhancer analysis of processed Molecular Networking jobs, in the newest (V2) version under \"Advanced Views - Experimental Views\" there is a button Enhance with MolNetEnhancer that will bring you directly to the MolNetEnhancer chemical class annotation analysis page with the GNPS Task ID prefilled. See also the animated GIF below. Please note that you can adapt the title and you must add the relevant in silico structure annotation job IDs for your data set.</p> <p></p>"},{"location":"molnetenhancer/#molnetenhancer-output-files","title":"MolNetEnhancer output files","text":"<p>Upon succesful completion, you will be able to see the output job page as displayed below:</p> <p></p> <p>There are different files for download available:</p>"},{"location":"molnetenhancer/#download-network","title":"Download Network","text":"<p>This downloads the network with chemical class information mapped in the .graphml format. To visualize results import the .graphml output file into Cytoscape. To color nodes based on the chemical subclass for example select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass' as Column and 'Discrete Mapping' as Mapping Type: </p> <p>Each molecular family is associated with a classification score at each level of the chemical taxonomy. The figure below retrieved from Ernst and co-workers, illustrates how this classification score is calculated. A hypothetical molecular family consisting of 6 nodes, for which chemical structural information could be retrieved for a total of 4 nodes is shown in (a). MolNetEnhancer calculates the total number of nodes per chemical class and subsequently assigns the most abundant chemical class to the respective molecular family. The molecular family illustrated in (a), was classified as \u2018flavonoids\u2019 at the chemical class level by MolNetEnhancer, with a score of 0.375, which translates to the majority of the putative structural annotations within this molecular family (2.25 nodes out of 6) belong to the flavonoid structural class (b):</p> <p></p> <p>To color nodes based on the chemical subclass score select 'Fill Color' in the 'Node' tab to the left and choose 'CF_subclass_score' as Column and 'Continuous Mapping' as Mapping Type: </p> <p>All columns related to chemical class information are labeled with 'CF_', and chemical class information at other hierarchical levels of the chemical taxonomy can be mapped analogously (e.g. CF_superclass, CF_superclass_score, CF_class, etc.). </p>"},{"location":"molnetenhancer/#direct-cytoscape-previewdownload","title":"Direct Cytoscape Preview/Download","text":"<p>This downloads the network with chemical class information mapped in the .cys format. You can open this file directly with Cytoscape. Chemical class information at the superclass level is already mapped. You can change to different levels of the chemical taxonomy as described above.</p>"},{"location":"molnetenhancer/#view-qiime2-emperor-plots","title":"View qiime2 Emperor plots","text":"<p>This loads the principal coordinates plot within the Qiime2 platform using a beta version of a UniFrac-based, chemically informed distance metric. Chemically-informed distance trees are built from the MolNetEnhancer retrieved chemical class information (MetaboDistTree-ClassyTree), which is based on the ClassyFire chemical ontology.  For more information on the algorithm refer to this repository. </p>"},{"location":"molnetenhancer/#citations","title":"Citations","text":"<p>Have you found MolNetEnhancer to be useful for your data analysis? Please cite the relevant literature from below.</p>"},{"location":"molnetenhancer/#main-citation","title":"Main citation","text":"<p>Ernst, M.; Kang, K.B.; Caraballo-Rodr\u00edguez, A. M.; Nothias, L.-F.; Wandy, J.; Chen, C.; Wang, M.; Rogers, S.; Medema, M.H.; Dorrestein, P.C. and van der Hooft, J.J.J. MolNetEnhancer: Enhanced Molecular Networks by Integrating Metabolome Mining and Annotation Tools. Metabolites 2019, 9 (7): 144.</p>"},{"location":"molnetenhancer/#other-citations","title":"Other citations","text":"<p>MolNetEnhancer uses molecular networking through GNPS:  Wang, M.; Carver, J. J.; Phelan, V. V.; Sanchez, L. M.; Garg, N.; Peng, Y.; Nguyen, D. D.; Watrous, J.; Kapono, C. A.; Luzzatto-Knaan, T.; et al. Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking. Nat. Biotechnol. 2016, 34 (8), 828\u2013837.</p> <p>MolNetEnhancer uses untargeted substructure exploration through MS2LDA:  van der Hooft, J.J.J.; Wandy, J.; Barrett, M.P.; Burgess, K.E.V.; Rogers, S. Topic modeling for untargeted substructure exploration in metabolomics. PNAS 2016, 113 (48), 13738-13743.</p> <p>MolNetEnhancer uses Network Annotation Propagation (NAP):  da Silva, R. R.; Wang, M.; Nothias, L.-F.; van der Hooft, J. J. J.; Caraballo-Rodr\u00edguez, A. M.; Fox, E.; Balunas, M. J.; Klassen, J. L.; Lopes, N. P.; Dorrestein, P. C. Propagating Annotations of Molecular Networks Using in Silico Fragmentation. PLoS Comput. Biol. 2018, 14 (4), e1006089.</p> <p>MolNetEnhancer uses DEREPLICATOR:  Mohimani, H.; Gurevich, A.; Mikheenko, A.; Garg, N.; Nothias, L.-F.; Ninomiya, A.; Takada, K.; Dorrestein, P.C.; Pevzner, P.A. Dereplication of peptidic natural products through database search of mass spectra. Nat. Chem. Biol. 2017, 13, 30-37.</p> <p>MolNetEnhancer uses automated chemical classification through ClassyFire:  Feunang, Y. D.; Eisner, R.; Knox, C.; Chepelev, L.; Hastings, J.; Owen, G.; Fahy, E.; Steinbeck, C.; Subramanian, S.; Bolton, E.; Greiner, R.; Wishart, D.S. ClassyFire: automated chemical classification with a comprehensive, computable taxonomy. J. Cheminform. 2016, 8, 61.</p> <p>Principal coordinates plots are visualised through the Qiime2 platform using EMPeror: Bolyen, E.; Rideout, J. R.; Dillon, M. R.; et al. Reproducible, interactive, scalable and extensible microbiome data science using QIIME 2. Nat. Biotechnol. 2019, 37, 852-857. and V\u00e1zquez-Baeza,Y.; Pirrung, M.; Gonzalez, A.; Knight R. EMPeror: a tool for visualizing high-throughput microbial community data. Gigascience 2013, 2, 16.</p> <p>Chemically-informed distances are calculated using the UniFrac distance metric: Lazupone, C.; Knight R. UniFrac: a New Phylogenetic Method for Comparing Microbial Communities. Applied and Environmental Microbiology 2005, 71, 8228-8235.</p>"},{"location":"molnetenhancer/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (3.7%), KyobinKang (1.85%), Madeleine Ernst (94.44%)</p>"},{"location":"ms2lda/","title":"MS2LDA Substructure Discovery","text":""},{"location":"ms2lda/#introduction","title":"Introduction","text":"<p>MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to integrate both workflows which allows users to map Mass2Motif occurrences in their Molecular Families.</p> <p>It is now also possible to run MS2LDA analyses through the GNPS interface here which will lead to the below displayed job entry page.</p> <p></p> <p>In this section, it is explained what input files are needed, how the parameters can be chosen, and what kind of output you get. Finally, it is explained how the obtained MS2LDA model can be further explored on the MS2LDA website by uploading the generated dict file.</p>"},{"location":"ms2lda/#collecting-the-right-input-files","title":"Collecting the Right Input Files","text":"<p>After providing the GNPS analysis with a title, the right input files are needed to start an MS2LDA analysis. They can be obtained with the classical molecular network (MS-Cluster based, see documentation here) or from the Feature-Based Molecular Networking workflow (using for example MZmine2, see documentation here. These files are:</p> <ul> <li>Required: Spectral data (MGF file) which can be downloaded from a processed Molecular Networking job</li> <li>Required: Edges file including selfloops which can be downloaded from a processed Molecular Networking job (i.e., typically found in the networkedges_selfloop folder within the downloaded GNPS job folder)</li> <li>Optional: MS1 peak abundance information (CSV file generated by MZmine2). The format must be similar to the MZmine2 format used with the Feature based Molecular Networking. This will allow you to perform MS1 differential analysis within the MS2LDA web app to find discriminate Mass2Motifs between groups.</li> </ul> <p></p> <p>After selecting the input files, the right MGF Source needs to be selected: \"MSCluster\" for a classical Molecular Networking derived clustered MGF file, and \"MZmine2\" for a Feature based Molecular Networking derived MGF file.</p>"},{"location":"ms2lda/#quickstart-from-processed-molecular-network","title":"Quickstart from Processed Molecular Network","text":"<p>To facilitate MS2LDA analysis of processed Molecular Networking jobs, in the newest (V2) version and the Feature Based Molecular Networking job, under \"Advanced Views - Experimental Views\" there is a button Analyze with MS2LDA that will bring you directly to the MS2LDA analysis page prefilling the relevant input files (spectral MGF file and edge pair file including selfloops). See also the animated GIF below. Please note that you can adapt the title and you must check the relevant MS2LDA parameter settings for your data set.</p> <p></p>"},{"location":"ms2lda/#setting-the-ms2lda-parameters","title":"Setting the MS2LDA Parameters","text":"<p>There are three sections of parameters to fill out of which the first is the most important. Default values are provided for all settings, but each of them is dependent on the input data. We provide some guidelines here to ease your choice.</p>"},{"location":"ms2lda/#lda-parameters","title":"LDA Parameters","text":"<p>The \"Advanced MS2LDA parameters\" displays four parameter values to set. The first is the bin width used to bin the MS2 fragments and losses. Defaults for Q-Exactive (0.005 Da) and ToF (0.01 Da) Data are provided. For instruments like Ion Traps a larger bin width of 0.1 Da is recommended. The appropriate bin width to choose is dependent on the expected mass variation of mass fragments across mass spectra in your data.</p> <p></p> <p>The number of LDA iterations is set to 1000 by default which should work in most cases.</p> <p>The Minimum MS2 Intensity is meant to filter out the basic noise from the MS/MS spectra. It is recommended to open the inputted MGF file and check the noise levels. Typically they range from 25-200 (ToF Data) to 5000 (Q-Exactive Data). Inclusion of noise will unnecessarily lengten the analysis time and create non-informative Mass2Motifs.</p> <p>The LDA Free Motifs correspond to the number of \"free Mass2Motifs\" that are added on top of the prefixed annotated Mass2Motifs from MotifDB. This number depends on your data: if you input a larger number of fragmented molecules (i.e., &gt; 4,000) that includes lots of novel chemistry not present in MotifDB it is best to put the LDA Free Motifs on 300 - 500. If the data set is relatively small with a considerable amount of known chemistry, you best put this number to 50 - 150.</p>"},{"location":"ms2lda/#selecting-motifdb-motif-sets","title":"Selecting MotifDB Motif Sets","text":"<p>By default all Motif Sets will be imported from MotifDB. However, it is wise to exclude annotated motif sets of sources that are very distant from the source of your input data. Note that the GNPS and MassBank are annotated Mass2Motifs discovered in reference molecules.</p> <p></p>"},{"location":"ms2lda/#output-networking-file-thresholds","title":"Output Networking File Thresholds","text":"<p>After running MS2LDA, output files are created that include a new networking (edge) file that can be used to create an enriched Molecular Network including Mass2Motif distributions through the Molecular Families. To do so, cut-off values (thresholds) are needed for LDA scores to consider a Mass2Motif to be linked to a molecule or not and how many you want to show in the network. Default values are provided that were found to work well so far. In this publication the two scores are explained: probability and overlap score.</p> <p></p> <p>The Figure (from van der Hooft, Anal. Chem. 2017 89147569-7577) below illustrates the overlap score (O) and probability threshold (P) with two hypothetical molecular spectra and three hypothetical Mass2Motifs. In example A, molecule 1 has an overlap score of 1 with Mass2Motif 1 as the motif is in the molecule in its entirety. The probability of this connection is 0.5 as it accounts for half of the molecule\u2019s total intensity. In example B, the same molecule has an overlap score of (approximately) 0.5 with Mass2Motif 2 as it includes roughly half of the Mass2Motif. </p> <p></p> <p>Note that you will have to provide your email address in the appropriate field in order to be notified upon completion of your GNPS-MS2LDA job.</p>"},{"location":"ms2lda/#ms2lda-output-files","title":"MS2LDA Output Files","text":"<p>Upon succesful completion, you will be able to see the output job page as displayed below:</p> <p></p> <p>There are different views and files for download available:</p>"},{"location":"ms2lda/#view-motif-labels-for-spectra","title":"View Motif Labels for Spectra","text":"<p>This view displays all the fragmented molecules (scans) and each of the motifs linked to them [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file.</p> <p></p>"},{"location":"ms2lda/#individual-motif-details","title":"Individual Motif Details","text":"<p>This view displays all molecule-motif links [some molecules have more than one motif linked and will appear multiple times in this table] and also shows the annotation if available from MotifDB. It can be downloaded as a tab separated file.</p> <p></p>"},{"location":"ms2lda/#view-pairs-with-motif-edges","title":"View Pairs with Motif Edges","text":"<p>This view is the new edge file enriched with Motif interactions: note that in the \"Interact\" column apart from cosine now different Mass2Motifs are listed [above the set thresholds as specified in the Output Networking file thresholds]. It can be downloaded as a tab separated file - this can be used to create a new enriched Molecular Network in CytoScape.</p> <p></p>"},{"location":"ms2lda/#view-motif-pdf","title":"View Motif PDF","text":"<p>This displays a PDF report of all the Mass2Motifs. Each Mass2Motif spans two pages with the first page a graphical overview of the relevant mass fragments (red, on top, pointing up) and neutral losses (green, bottom, pointing down) with the y-axis being the intensity which equals the features' probability to be found in the Mass2Motif, and the x-axis being the m/z (rounded up to nominal values in the labels) in Daltons. The second page displays the top mass fragments and neutral losses with their probabilities.</p>"},{"location":"ms2lda/#download-motif-pdf","title":"Download Motif PDF","text":"<p>This downloads the PDF report as explained in \"View Motif PDF\".</p>"},{"location":"ms2lda/#download-pairs","title":"Download Pairs","text":"<p>This downloads the new edge file as explained in \"View Pairs with Motif Edges\".</p>"},{"location":"ms2lda/#download-ms2lda-dict","title":"Download MS2LDA Dict","text":"<p>This downloads the MS2LDA Dict file that houses all the relevant information on the MS2LDA experiment.</p>"},{"location":"ms2lda/#analysing-the-ms2lda-results","title":"Analysing the MS2LDA results","text":""},{"location":"ms2lda/#analysing-the-results-in-gnps","title":"Analysing the results in GNPS","text":"<p>The different available views enable a quick overview of the MS2LDA experiment. Especially when annotated Mass2Motifs are found, this could help in further downstream analysis. However, when no annotation is provided, the Mass2Motif is one of the \"free Motifs\" that was discovered by LDA. With the MS2LDA Dict file through the MS2LDA web app there are ways to analyse these Mass2Motifs further and also annotate them.</p> <p>In general, when analysing annotating or novel Mass2Motifs, it is important to keep this in mind!</p>"},{"location":"ms2lda/#taking-the-results-to-ms2lda-web-app","title":"Taking the results to MS2LDA web app","text":""},{"location":"ms2lda/#uploading-the-dictionary-to-ms2lda-web-app","title":"Uploading the dictionary to MS2LDA web app","text":"<p>After downloading the MS2LSA Dict file from the finished MS2LDA experiment, this can be uploaded into the MS2LDA web app. There is a User Guide available that covers the main functionalities of the MS2LDA web app.</p> <p>If it is your first time at the MS2LDA web app, make sure you get a login account before continuing. Once logged in, go to the experiments section:</p> <p></p> <p>By default, you arrive on the Create tab which lets you create an MS2LDA experiment from mass spectrometry data.</p> <p></p> <p>Click on the Upload tab, to continue:</p> <p></p> <p>Now, you will have to provide a unique name for the MS2LDA experiment and you can also provide relevant details. Most importantly, you will need to select the location of the downloaded MS2LDA Dict file under \"LDA output file\". Also, you will need to select the bin width as used in the GNPS-MS2LDA workflow (\"Bin Width\") from the available options.</p> <p></p> <p>After you are ready, you can click \"Upload Your Experiment\" and the upload will start.</p>"},{"location":"ms2lda/#viewing-the-experiment-results","title":"Viewing the Experiment Results","text":"<p>Once the MS2LDA dict file finished uploading, you can browse the MS2LDA experiment in the web app like a regular MS2LDa experiment. If you click on the experiment name, multiple tabs will appear:</p> <p></p> <p>Here, you can click on the Summary Page tab which leads you to the summary of the experiment that includes all relevant Tables. For example, the Motif Table can be browsed, sorted, searched, and downloaded as CSV:</p> <p></p>"},{"location":"ms2lda/#annotating-motifs","title":"Annotating Motifs","text":"<p>When clicking on the relevant \"free Motif\" name a Motif Page will appear where the relevant mass fragment and neutral losses are listed including their scores and a frequency plot. Also, all the spectra the Mass2Motif appears in can be browsed to analyse the nature of the fragmentation pattern. Importantly, if you can annote the motif with any structural information, this can be provided on top of the page with the Annotation field for the full annotation and the Short Annotation field for a label to display in graphics - make sure to save the Motif Page afterwards! After reloading the Summary Page or the Show Mass2Motif tabs, the annotation(s) will be displayed and are searchable.</p> <p></p> <p>Finally, on top of the summary page there is a toggle where you can make the entire MS2LDA experiment public. See for example the public MassBank Experiment.</p>"},{"location":"ms2lda/#ms1-differential-analyses-within-the-ms2lda-web-app","title":"MS1 Differential Analyses within the MS2LDA web app","text":"<p>If the Feature based Molecular Networking workflow was used, the MS1 peak information is available in the MS2LDA Dict file. This can be used to create MS1 analysis to find Mass2Motif that are discriminative between two sample groups. More information can be found in this publication and the MS2LDA web app User Guide explains how to set up such an analysis within your experiment.</p>"},{"location":"ms2lda/#uploading-annotated-motif-sets-into-motifdb","title":"Uploading annotated motif sets into MotifDB","text":"<p>This is a future feature that will become available in the course of this year. It will allow you to make your new annotations searchable and usable by the community.</p>"},{"location":"ms2lda/#future-directions","title":"Future Directions","text":"<p>At GNPS, we are working with the MS2LDA team to promote publication of curated sets of Mass2Motifs into MotifDB that can help to annotate your MS/MS spectra.</p>"},{"location":"ms2lda/#citations","title":"Citations","text":"<p>Have you found MS2LDA to be useful for your data analysis? Please cite the relevant literature from below.</p>"},{"location":"ms2lda/#introduction-of-ms2lda-substructure-discovery-algorithm","title":"Introduction of MS2LDA Substructure Discovery algorithm","text":"<p>van der Hooft, Justin J. J., Joe Wandy, Michael P. Barrett, Karl E.V. Burgess, and Simon Rogers. \"Topic modeling for untargeted substructure exploration in metabolomics.\" Proceedings of the National Academy of Sciences 113, no. 48 (2016): 13738-13743.</p>"},{"location":"ms2lda/#publication-of-the-ms2ldaorg-web-app-to-discover-and-analyse-mass2motifs","title":"Publication of the MS2LDA.org web app to discover and analyse Mass2Motifs","text":"<p>Wandy, Joe, Yunfeng Zhu, Justin J.J. van der Hooft, Ronan Daly, Michael P. Barrett, and Simon Rogers. \"Ms2lda.org: web-based topic modelling for substructure discovery in mass spectrometry.\" Bioinformatics 34, no. 2 (2018): 317-318.</p>"},{"location":"ms2lda/#extended-version-of-ms2lda-algorithm-to-handle-multiple-files-at-once","title":"Extended version of MS2LDA algorithm to handle multiple files at once","text":"<p>van der Hooft, Justin J. J., Joe Wandy, Francesca Young, Sandosh Padmanabhan, Konstantinos Gerasidimis, Karl E.V. Burgess, Michael P. Barrett, and Simon Rogers. \"Unsupervised Discovery and Comparison of Structural Families Across Multiple Samples in Untargeted Metabolomics.\" Analytical Chemistry 89, no. 14 (2017): 7569-7577.</p> <p>Latest developments in MS2LDA.org: introduction of MotifDB with annotated Mass2Motif sets and MAGMa integration for Mass2Motif annotation of reference compounds</p> <p>Rogers, Simon, Cher Wei Ong, Joe Wandy, Madeleine Ernst, Lars Ridder, and Justin J.J. van der Hooft. \"Deciphering complex metabolite mixtures by unsupervised and supervised substructure discovery and semi-automated annotation from MS/MS spectra.\" Faraday Discussions themed collection  Challenges in analysis of complex natural mixtures (2019).</p>"},{"location":"ms2lda/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (7.69%), lfnothias (16.35%), Justin van der Hooft (75.96%)</p>"},{"location":"msmschooser/","title":"Open-source Protocol for Community-created Public MS/MS Reference Library (MSMS-Chooser)","text":""},{"location":"msmschooser/#summary","title":"Summary","text":"<p>MSMS-Chooser is a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library. This specific step enables the finding of reference MS/MS spectra automatically in LC/MS data of pure standards given the structure of the pure standards. Its not fancy, but practically, its pretty beneficial. </p> <p>Info</p> <p>This is a community effort and welcome everyone to participate!</p> <p>Requirements for MSMS-Chooser Workflow and Subsequent Addition of Spectra to the GNPS Library</p> <ul> <li>Complete MSMS-Chooser Template</li> <li>Data containing MS/MS data convereted to open-file formats (.mzXML or .mzML)</li> <li>Validation of MSMS-Chooser output (using drag-and-drop validator) + visual inspection of MS/MS spectra</li> <li>Email contacting Dorrestein Lab with task ID (see contact information below)</li> </ul>"},{"location":"msmschooser/#step-by-step-instructions","title":"Step-by-Step Instructions","text":""},{"location":"msmschooser/#completion-of-msms-chooser-template-link-here","title":"Completion of MSMS-Chooser Template - Link Here","text":"<ol> <li>Make a copy of the MSMS-Chooser Workflow Basic Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained.</li> <li>Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Workflow Basic Template\" tab.  </li> <li>Download a copy of the MSMS-Chooser Basic Template tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\"</li> </ol>"},{"location":"msmschooser/#msms-chooser-v10-workflow-at-gnps","title":"MSMS-Chooser (v1.0) Workflow at GNPS","text":"<ol> <li>Navigate to ProteoSAFe - link here.</li> <li>Select all .mzXML/.mzML files from MassIVE (positive and negative mode should be selected into the same folder).</li> <li>Select the \"MSMS-Chooser Submission\" file (.tsv) from MassIVE (or uploaded via the drag-and-drop method in the 2nd tab over in the selection UI).</li> <li>The default mass error tolerance is 10 ppm. This value should be adjusted according to the instrumentation and experimental conditions used to collect the mass spectrometry data.</li> <li>Launch the Job.</li> </ol> <p>Basic Information about MSMS-Chooser</p> <p>This workflow selects MS/MS spectra, specifically product ion scans, based on precursor m/z (within 10 ppm error by default). Retention time is not taken into consideration given the provided MSMS-Chooser workflow method uses flow-injection. Several adducts are considered in the positive and negative mode for each chemical (tabulated below). If additional adducts are required, please contact us. | Ionization Mode | Adducts Supported | |:---:|:---:| |Positive|[M+H]+, [M+Na]+, [M+K]+, [2M+H]+, [2M+Na]+, [2M+K]+, [M-H2O+H]+, [M-2H2O+H]+| |Negative|[M-H]-, [2M-H]-, [2M-2H+Na]-|</p>"},{"location":"msmschooser/#interpretation-and-validation-of-msms-chooser-v10-results","title":"Interpretation and Validation of MSMS-Chooser (v1.0) Results","text":"<p>The results can be accessed by clicking the \"View Output Batch Table\" link and the \"View Spectrum\" button on the left-hand side of the table for each chemical. review of all data is strongly encouraged</p> <ol> <li>After review, if all look acceptable</li> <li>click the \u201cNext Step: Batch Anotation Validator on GNPS\u201d and run the validation workflow.</li> <li> <p>Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above.</p> </li> <li> <p>After review, if you would like to remove MS/MS for any reason</p> </li> <li>Download the \u201cDownload Output Batch Table\u201d and delete the rows you would like to exclude.</li> <li>You should then follow the \u201cBatch Upload of Annotated Spectra\" documentation (you will need to reselect the files and upload the modified \u201coutput batch table\u201d in the \u201cAnnotation Table\u201d option).</li> <li>Once complete, email Morgan (ccms-web@cs.ucsd.edu) and send her the completed job from above.</li> </ol>"},{"location":"msmschooser/#additional-information","title":"Additional Information","text":"<p>Data and Code Availability</p> <ul> <li>All public MS/MS spectra are avaliable for download and browsing in GNPS.</li> <li>Search for all MSMSChooser data in MassIVE by searching for \"GNPS - MSMS-Chooser -\" in the \"Title\" field</li> </ul> <p>Recommended Citation</p> <ul> <li>Peer-reviewed Publication - link here - Vargas, F, Weldon, KC, Sikora, N, et al. Protocol for Community\u2010created Public MS/MS Reference Spectra Within the Global Natural Products Social Molecular Networking Infrastructure. Rapid Commun Mass Spectrom. 2020. https://doi.org/10.1002/rcm.8725</li> <li>Preprint on bioRxiv - link here</li> </ul> <p>Can I use this method to run isolated, possibly impure, chemicals?</p> <ul> <li>Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates.</li> </ul> <p>Issues and Suggestions</p> <ul> <li>Please submit any issues or suggestions via GitHub.</li> <li>The use of the GNPS forum is encouraged.</li> </ul>"},{"location":"msmschooser/#contacts","title":"Contacts","text":"<ul> <li>Morgan Panitchpakdi(mpanitch@ucsd.edu)</li> <li>Mingxun Wang (UC Riverside) (mingxun.wang@cs.ucr.edu)</li> <li>Alan Jarmusch (ajarmusch@ucsd.edu)</li> </ul>"},{"location":"msmschooser/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (10.34%), alan-jarmusch (89.66%)</p>"},{"location":"msmschooserdataacquisitionQE/","title":"MSMS-Chooser: Data Acquisition - QExactive (v1.0)","text":""},{"location":"msmschooserdataacquisitionQE/#summary","title":"Summary","text":"<p>This document details an open-source protocol for the Thermo QExactive mass spectrometer coupled to the Thermo Vanquish UHPLC used to combination with MSMS-Chooser, a GNPS workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library.</p> <p>1-5 \u03bcL of sample is introduced into a flow of MeOH-Water (1:1) with ~0.1% formic acid at 0.5 mL/min via injection from the autosampler. The needle is washed for 3 s prior to injection, flow rate of 10 \u03bcL/sec. Data acquisition for each injection is 0.3 minutes with the majority of the sample arriving ~0.05 - 0.1 min after injection. Data-dependant acquisition is used to collect data on the top 5 precursors at a resolution of 35,000. MS/MS data are collected using an isolation width of m/z 1.7 and stepped normalized collision energy of 20, 30, and 40. Separate positive and negative ionization mode methods were created with differences in the ionization source parameters. Further details can be found in the method files.</p> <p>Data acquisition takes 0.3 min followed by 0.3 - 0.4 min of needle washing and drawing of the next sample before the next sample. The total processes taking ~45 - 50 s for one injection sequence. The flow continues during the needle washing and drawing time, effectively flushing the line for ~30 s in between samples. </p>"},{"location":"msmschooserdataacquisitionQE/#required-materials","title":"Required Materials","text":"<ol> <li>Vanquish UHPLC<ul> <li>Solvent A - water (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of water (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times.</li> <li>Solvent B - methanol (HPLC grade) w/ ~0.1% formic acid (v/v) = 4 L of methanol (HPLC grade) + 4 mL of formic acid using glass syringe, mix by inverting bottle 15 times.</li> </ul> </li> <li>Associated fittings and tubing</li> <li>QExactive</li> <li>Syringe pump and required fitting for instrument calibration (see instrument calibration SOP)</li> <li>MS calibration solution specific to calibration protocol</li> <li>MS tune and MS method files can be downloaded from MassIVE.</li> </ol>"},{"location":"msmschooserdataacquisitionQE/#step-by-step-instructions","title":"Step-by-Step Instructions","text":""},{"location":"msmschooserdataacquisitionQE/#data-acquisition","title":"Data Acquisition","text":"<ol> <li>Create a folder on the local computer following this standard \u201cD:\\SOPGNPSChemicaltoLibrary[insert barcode]\u201d</li> <li>Obtain the MSMS-Chooser sequence table and copy it to a folder on the local computer.</li> <li>If you are analyzing more than one plate, open the corresponding .csv files and copy and merge  them together in a spreadsheet editor. You will need to change the plate positions.</li> <li>Double check the barcode, the number of samples, and the plate position used (e.g. \u201cred\u201d; \u201cRA1\u201d).</li> <li>Calibrate the QExactive following instrument manufacturer directions in both negative and positive ion modes (using the appropriate tune file and source position).</li> <li>After calibration passes, load the \u201c20190520_SOP_chemicalreferencetoGNPSlibrary_positive.meth\u201d.</li> <li>the path to the tune file may need to be updated in the methods</li> <li>Place Solvent A and Solvent B onto the LC and purge the lines.</li> <li>Check all other solutions (e.g. needle wash) and ensure solvent level is sufficient.</li> <li>Place a zero-dead volume union (stainless steel) in the column compartment.</li> <li>Turn the instrument from \u201cstandby\u201d to \u201con\u201d.</li> <li>Flow the solvent 50% Solvent A and 50% Solvent B @ 0.5 mL / min.<ul> <li>The backpressure was observed to be between 30-50 bar depending on the temperature of the column compartment.</li> </ul> </li> <li>Import the appropriate sequence table (.csv) into Xcalibur, and double check the following:<ul> <li>The barcode matches</li> <li>The amount of rows in the sequence table matches the number of wells.</li> <li>The plate is positioned in the correct tray, (e.g. red if the injection position starts with \u201cR:\u201d)</li> <li>Ensure that the positive and negative mode methods are appropriately selected.</li> </ul> </li> <li>Save the sequence file and start data collection</li> </ol>"},{"location":"msmschooserdataacquisitionQE/#issues-and-suggestions","title":"Issues and Suggestions","text":"<p>Please submit any issues or suggestions via GitHub. The use of the GNPS forum is encouraged.</p>"},{"location":"msmschooserdataacquisitionQE/#page-contributions","title":"Page Contributions","text":"<p>Alan K. Jarmusch (UCSD)</p>"},{"location":"msmschooserdataacquisitioncomputational/","title":"Computational Preparation for Data Acquisition and MSMS-Chooser to Create Spectral Libraries","text":""},{"location":"msmschooserdataacquisitioncomputational/#summary","title":"Summary","text":"<p>These tools comprise an open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library.</p> <p>Here are the steps that aid in the creation of the proper templates to acquire data that is definitely compatible with MSMS-Chooser as well as templates to go directly into the MSMS-Chooser workflow. </p> <p>Info</p> <p>This is a community effort and welcome everyone to participate! - We encourage individuals to implement the protocols in their own laboratory.  - Individuals with chemical standards without access to instrumentation are encouraged to contact the Dorrestein lab to inquire about running standards in collaboration (see contact information on the MSMSChooser page).</p>"},{"location":"msmschooserdataacquisitioncomputational/#step-by-step-instructions","title":"Step-by-Step Instructions","text":""},{"location":"msmschooserdataacquisitioncomputational/#completion-of-msms-chooser-preparation-template-link-here","title":"Completion of MSMS-Chooser Preparation Template - Link Here","text":"<ul> <li>Make a copy of the MSMS-Chooser Preparation Template by selecting \u201cFile\u201d and then \u201cMake a copy\u201d. We strongly encourage users to continue working in Google Sheets as the formatting will be maintained.</li> <li>Fill out the MSMS-Chooser Template in the \"MSMS-Chooser Sample Template\" tab.</li> </ul> <p>Info</p> <ul> <li>The first tab describes what should be entered as well as an example and additional information is in documentation (GitHub). Important: You must record the position of each chemical in the 96-well plate.</li> <li>Only columns H-Q need to be complete if submitting samples to Dorrestein Lab - approval required before submitting samples.</li> <li>Please complete one row for each chemical in the positive mode and then copy and paste rows below and update the \u201cIONMODE\u201d column from \u201cPositive\u201d to \u201cNegative\u201d. </li> </ul> <ul> <li>Download a copy of the MSMS-Chooser Submission File tab as a .tsv file by selecting \"File\", \"Download\", and then \"Tab-separated value (.tsv, current sheet).\"</li> </ul> <p>Info</p> <p>The MSMS-Chooser File required for submission is automatically generated in the \"MSMS-Chooser Submission\" tab.</p> <ul> <li>Download a copy of the applicable Sequence Table using the Sequence Table Generator tab as a .csv file from Google Sheets by selecting \"File\", \"Download\", and then \"Comma-separated value (.csv, current sheet).\"</li> </ul> <p>Info</p> <p>Please double check the chemicals and well position indicated in the submission file match the sequence table.</p> <p>List of Suggested Materials for Sample Preparation</p> <ul> <li>HPLC grade solvents in all sample preparation steps (highly encouraged)</li> <li>96-well plates and corresponding well plate covers (autosampler compatible) | Manufacturer | Item Number | Item | Recommended Pairing | |:------------- |:-------------:|:-----:|:------:| | Eppendorf       | 951040048 | Microplate 96/U-PP with white border | 1 | |-|-|-| 1 | | Thermo Scientific | 12565368 | Microplate U96 PP-0.5ml, natural | 2 | | Thermo Scientific | 12565560 | 96 well cap, natural | 2 |</li> </ul>"},{"location":"msmschooserdataacquisitioncomputational/#sample-preparation-protocol","title":"Sample Preparation - Protocol","text":"<ul> <li>Generate a solution of your sample (standard) at a concentration of 10 \u00b5M.</li> </ul> <p>Note</p> <p>The amount of material needed for detection is not universal and will vary by chemical. The value is a suggested starting place.</p> <ul> <li>Transfer 10 \u00b5L of your sample (standard) into a well in the 96 well plate recording the well position and chemical added.</li> </ul> <p>Warning</p> <p>One sample should be added per well.</p> <ul> <li>Repeat transfer of 10 \u00b5L into wells</li> <li>Record plate number, well position, etc. in the sample submission template.</li> <li>Once all standards have been added to the 96-well plate, completely dry all solutions.</li> </ul> <p>Info</p> <p>Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or low pressure evaporation system (Centrivap systems are recommended).</p> <ul> <li>Seal plate using the previously mentioned 96 well plate cover.</li> <li>If analysis is to be performed in your laboratory, then we suggest storing the material dried in the 96 well plate, covered, at -20 \u00b0C prior to analysis. If you desired to collaborate with the Dorrestein lab, then the material must be dried in a 96 well plate and covered for shipping and should be stored at -20 \u00b0C.</li> </ul>"},{"location":"msmschooserdataacquisitioncomputational/#data-acqusition","title":"Data Acqusition","text":"<p>Please select the following link:</p> Vendor Instrument Version Revision Date Method Files Thermo QExactive - Link v1.0 Sept 4, 2019 Link - - - - - - - - - -"},{"location":"msmschooserdataacquisitioncomputational/#post-data-acqusition","title":"Post-Data Acqusition","text":"<ul> <li>It is recommended to completely dry all solutions.</li> </ul> <p>Info</p> <p>Evaporation of the liquid can be done using the following techniques: Nitrogen gas evaporation or Low pressure evaporation system (Centrivap systems are recommended).</p> <ul> <li>Place plates into a -20C freezer.</li> <li>Convert raw data to .mzXML</li> </ul> <p>Info</p> Vendor Instrument Recommended Conversion Software Settings Thermo QExactive MSconvert - Link mzXML and binary encoding precision as 32-bit - - - - - - - - <ul> <li>Create a GNPS/MassIVE Dataset<ul> <li>Upload the files to your GNPS account using an FTP client (preferred clients are WinSCP, CoreFTP, and CoffeeCup Free FTP)</li> <li>Name the MassIVE data set using the following format: \u201cGNPS - MSMS-Chooser - [insert barcodes]\u201d</li> <li>Upload all .raw files into the RAW folder and all .mzXML files into the PEAKS folder</li> <li>Upload the MSMS-CHOOSER Submission file (.tsv) and place in SUPPLEMENTAL folder</li> <li>Make data public</li> </ul> </li> <li>Run MSMS-Chooser workflow at GNPS to find the reference spectra in your data. See here for more details. </li> </ul> <p>Warning</p> <p>ALL data should be reviewed for accuracy. If chemical separation is performed prior to analysis, then special attention should be given to the MS/MS spectrum and retention time. MSMS-Chooser only matches on accurate mass (currently) and isobaric compounds eluting at different times might be confused.</p>"},{"location":"msmschooserdataacquisitioncomputational/#faqs","title":"FAQs","text":"<p>What if I alreadly have data collected, can MSMS-Chooser help me?</p> <ul> <li>Yes! MSMS-Chooser can be used as a shortcut and help you perform the steps of finding the MS/MS spectra in your files and format the data for inclusion in the GNPS MS/MS reference library. However, this was not the original intent of the MSMS-Chooser workflow. You should create a copy and completely fill the \"MSMS-Chooser Sample Template\" tab, download it, and include it with the files in the MSMS-Chooser workflow. The MSMS-Chooser workflow will go through your data and select a MS/MS spectrum for every chemical as indicated in the Sample Template. We have used MSMS-Chooser to help create the BILELIB19 library in GNPS.     </li> </ul> <p>Can I use this method to run isolated, possibly impure, chemicals?</p> <ul> <li>Yes! GNPS MS/MS spectral libraries allow any contribution even if the structure or identification is not fully confirmed. The GNPS community will help correct any inaccuracies over time with provenance of all edits and updates.</li> </ul>"},{"location":"msmschooserdataacquisitioncomputational/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (57.38%), alan-jarmusch (42.62%)</p>"},{"location":"nap/","title":"Network Annotation Propagation (NAP)","text":""},{"location":"nap/#network-annotation-propagation-overview","title":"Network Annotation Propagation Overview","text":"<p>Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. This workflow is currently in beta development stages so any feedback is welcome to improve analysis and usability. It is available here under 'NAP_CCMS' Workflow drop down menu.</p> <p>Check out the full documentation.</p>"},{"location":"nap/#nap-short-hands-on-tutorial","title":"NAP short hands on tutorial","text":"<p>The aim of this tutorial is to work as a guided tour through this documentation page and exploring the finding of Kang et al., (2018).</p> <ol> <li>Go to Structure database section, download the example in house database (two columns file), add the structure SN00230021 to the file and generate the formatted database. Make sure you use an excel like software and save as tab separated text file;</li> <li>Go to Running NAP section, open NAP input interface, make sure you are logged and run a job with example parameters present in the picture (including job id: '3b215c4b25594b9c85d92de547815c0a' and cluster index: 56), with the database you just created. Go here if need instructions to upload the database;</li> <li>When your job is processed, you should receive a link similar to that. Go to section Online Exploration and browse the results; </li> <li>Follow the same link above. Go to section NAP Visualization in Cytoscape and browse the results; </li> </ol>"},{"location":"nap/#data-input-preparation","title":"Data Input Preparation","text":"<p>The following inputs are used for NAP:</p> <ol> <li>Molecular network task id, see Molecular Networking (required)</li> <li>Identifier(s) of databases and/or user provided databases (required)</li> </ol>"},{"location":"nap/#structure-database","title":"Structure database","text":"<p>There are basically three options for database structure selection:</p> <ol> <li>Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Be aware that these databases are static and new changes on the source databases are not incorporated automatically.</li> <li>Input an in house generated database. See Molecular Networking documentation to learn how to use the drag and drop upload. A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as: </li> </ol> <p>Having an in house collection, before the use in NAP, the user has to first format the database, using the following webserver:</p> <p></p> <p>After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as:</p> <p></p> <ol> <li>The combination of the two databases above. NAP allows the combination of different databases, either through multiple database identifiers, or by the combination of identifiers and text file. While this feature allows flexibility, it is important narrow the search space for the system under study.</li> </ol>"},{"location":"nap/#running-nap","title":"Running NAP","text":""},{"location":"nap/#nap-workflow-selection","title":"NAP Workflow Selection","text":"<p>From the main GNPS page, you can access NAP clicking the banner</p> <p></p> <p>and then selecting NAP in the corresponding description. You can also directly open clicking \"here\".</p> <p>This will take you to the workflow input to start NAP. The image below shows an example of the most important parameters</p> <p></p> <p>The first parameter is the GNPS network task id, this id can be found in the results email sent by GNPS or in the url, as shown in the image below, the task id is '3b215c4b25594b9c85d92de547815c0a'</p> <p></p> <p>and the molecular family (connected component) containing the 'cluster index' 56 can be inspected in the molecular network. </p> <p>A detailed description of the parameters is provided below.</p>"},{"location":"nap/#parameter-walkthrough","title":"Parameter Walkthrough","text":"Parameter Description Default GNPS job ID GNPS molecular networking task id. Number of a cluster index Any cluster index of a connected component of interest in a Molecular Network. The propagation is limited by the connected component. Cosine value to subselect inside a cluster Used to disconnect nodes in very dense molecular networks and decrease the number of nodes to be analyzed. 0.5 N first candidates for consensus score Number of candidate structures of the neighbor nodes used for Consensus re-ranking. 10 Use fusion result for consensus Whether to use the result from Fusion re-ranking to perform Consensus re-ranking. 1 Accuracy for exact mass candidate search (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 Acquisition mode Mass spectrometry acquisition mode. Positive Adduct ion type Expected adduct type for the precursor ion mass. [M+H] Multiple adduct types Input one or more adducts, separated by \",\". Available options are: listed on the Adduct drop down menu. Structure databases Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Use none to select only user defined. Compound class to be selected ClassyFire class in the following format: \"class:name\". User provided database In house candidate structure database to be used in the search. Skip parent mass selection Should be used only in combination with class selection. 0 User provided MetFrag parameter file Check here for a template. Maximum number of candidate structures in the graph: Number od candidate structures to be exported in the Cytoscape graph. 10 Workflow type Standard or MZmine."},{"location":"nap/#online-exploration-of-nap-results","title":"Online Exploration of NAP results","text":"<p>After completing a NAP workflow, the results can be browsed in the web interface. The web interface provides a quick and easy way to perform initial analysis of your data, particularly if you are interested in a specific structure or class of structures and want to inspect in the results.</p> <p>To have access to the web interface click on the 'EXPERIMENTAL - NAPviewer' at the results page: </p> <p></p> <p>The result summaries can be divided in four sections.</p>"},{"location":"nap/#1-structure-view","title":"1. Structure view","text":"<p>NAP attempts to re-rank the candidate structures provided by MetFrag using the information provided by the molecular network. This first view shows the Structures ranked by MetFrag and the ones re-ranked by NAP to allow the user to quickly inspect if the propagation improved the ranking:</p> <p></p>"},{"location":"nap/#2-graph-view","title":"2. Graph view","text":"<p>As the re-ranking is performing obtaining information from neighbor nodes, the Graph view displays the direct neighbor's first candidate structures of a given re-ranked node to allow the user to inspect if the re-ranking is consistent in the network:</p> <p></p> <p>The node border colors indicate the source of structure: green - reference spectral library structure; magenta MetFrag's first candidate; blue Fusion's first candidate and red Consensus' first candidate.</p>"},{"location":"nap/#3-fragment-view","title":"3. Fragment view","text":"<p>Some important aspects of structural prediction are: how many fragments were predicted, which fragments and which substructures were assigned to the predictions. The Fragment view displays the direct fragments predicted for each structure in the candidate list of a given fragmentation spectrum (represented by a node in the network):</p> <p></p> <p>By hovering the mouse over the candidate fragment it is possible to see the substructure predicted for the fragment.</p>"},{"location":"nap/#4-full-candidate-list-view","title":"4. Full candidate list view","text":"<p>As structural prediction is very challenging. The correct candidate may not be the first in the list, therefore it is important to be able to browse the candidate list. The Link containing the full list of candidate structures found in NAP search is provided. The first column of the candidate's table contains a link out for the respective database where the structure was originated. The table also contains the ranking for MetFrag, Fusion and Consensus, the link for number of fragments predicted for each candidate structure, a link to fragment plot representation and a column with color coded structural similarity grouping that can be easily associated with candidate's ClassyFire class, when available:</p> <p></p>"},{"location":"nap/#nap-visualization-in-cytoscape","title":"NAP Visualization in Cytoscape","text":"<p>In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output from NAP.</p> <p>Cytoscape (we have used version &gt;= 3.4) is available for download from here. </p>"},{"location":"nap/#download-nap-cytoscape-files","title":"Download NAP Cytoscape files","text":"<p>To download NAP's Cytoscape file, go back to the results page of your task:</p> <p></p> <p>and download the compacted file containing the 'structure_graph_alt.xgmml' file.</p> <p></p> <p>After the download, remember to uncompress the file for downstream use.</p>"},{"location":"nap/#installing-the-chemviz-plugin","title":"Installing the ChemViz plugin","text":"<p>To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below:</p> <p></p>"},{"location":"nap/#load-nap-cytoscape-file-and-apply-layout","title":"Load NAP Cytoscape file and apply layout","text":"<p>Load the 'structure_graph_alt.xgmml' file:</p> <p></p> <p>and apply a layout to spread the nodes:</p> <p></p>"},{"location":"nap/#change-image-display-properties-and-paint-library-match-structure","title":"Change image display properties and paint library match structure","text":"<p>The 'structure_graph_alt.xgmml' file contains some pre-set elements to aid structure display. Nodes possessing a structure are empty squares. Node borders are either green (spectral library match) or blue (in silico prediction). In silico predictions can be a combination of MetFrag, Fusion and Consensus. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the columns MetFrag/Fusion/ConsensusSMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing:</p> <p></p> <p>After setting the desired source column to display the structure one can just 'paint' the structure on the node:</p> <p></p>"},{"location":"nap/#change-display-properties-and-paint-on-multiple-nodes","title":"Change display properties and paint on multiple nodes","text":"<p>As we described in the publications below we have a decreasing order of confidence on structural prediction spectral library match &gt; Fusion scoring &gt; Consensus scoring &gt; MetFrag scoring. To change for Fusion scoring structures you can do:</p> <p></p> <p>and paint the structures:</p> <p></p>"},{"location":"nap/#display-the-list-of-candidates","title":"Display the list of candidates","text":"<p>As discussed in the Online Exploration section, the most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters:</p> <p></p>"},{"location":"nap/#citation","title":"Citation","text":"<p>da Silva, Ricardo R., Mingxun Wang, Louis-F\u00e9lix Nothias, Justin JJ van der Hooft, Andr\u00e9s Mauricio Caraballo-Rodr\u00edguez, Evan Fox, Marcy J. Balunas, Jonathan L. Klassen, Norberto Peporine Lopes, and Pieter C. Dorrestein. \"Propagating annotations of molecular networks using in silico fragmentation.\" PLoS computational biology 14, no. 4 (2018): e1006089.</p> <p>Kyo Bin Kang, Eun Jin Park, Ricardo R. da Silva, Hyun Woo Kim, Pieter C. Dorrestein, Sang Hyun Sung. \"Targeted Isolation of Neuroprotective Dicoumaroyl Neolignans and Lignans from Sageretia theezans Using in Silico Molecular Network Annotation Propagation-Based Dereplication\" Journal of Natural Products, 2018, 81 (8), pp 1819\u20131828</p>"},{"location":"nap/#contribute-to-the-documentation","title":"Contribute to the Documentation","text":"<ul> <li>For informations/feature request, please open an \"Issue\" on the CCMS-UCSD/GNPSDocumentation GitHub repository.</li> <li>To contribute directly to the GNPS documentation, fork the CCMS-UCSD/GNPSDocumentation repository, and make a \"Pull Request\".</li> </ul>"},{"location":"nap/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (5.88%), lfnothias (1.96%), Ricardo Silva (88.24%), amcaraballor (2.94%), Ricardo (0.98%)</p>"},{"location":"networking/","title":"Molecular Networking","text":""},{"location":"networking/#molecular-networking-overview","title":"Molecular Networking Overview","text":"<p>Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This visualization approach can detect sets of spectra from related molecules (molecular networks), even when the spectra themselves are not matched to any known compounds.</p> <p>The visualization of molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (connections) between nodes. Nodes can be supplemented with metadata, including dereplication matches or information that is provided by the user, e.g. as abundance, origin of product, biochemical activity, or hydrophobicity, which can be reflected in a node\u2019s size or color. This map of all related molecules is visualized as a global molecular network.</p> <p>For more information about Molecular Networking check out the GNPS publication from 2016.</p>"},{"location":"networking/#data-input-preparation","title":"Data Input Preparation","text":"<p>The follow data is can be put into molecular networking.</p> <ol> <li>Mass Spectrometry data files (required)</li> <li>Metadata/Group Mapping (optional)</li> <li>`ili 3D mapping files (optional)</li> </ol>"},{"location":"networking/#mass-spectrometry-data-files","title":"Mass Spectrometry data files","text":"<p>Molecular networking supports mzXML, mzML, and mgf file formats. To convert your file to the appropriate formats, check out our documentation.</p>"},{"location":"networking/#metadata","title":"Metadata","text":"<p>More information provided here.</p>"},{"location":"networking/#running-molecular-networking","title":"Running Molecular Networking","text":""},{"location":"networking/#molecular-networking-workflow-selection","title":"Molecular Networking Workflow Selection","text":"<p>From the main GNPS page, click the \"Create Molecular Network\" button.</p> <p></p> <p>This will bring you to the workflow input to start networking.</p> <p></p> <p>Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.</p> <p></p>"},{"location":"networking/#selecting-files-to-analyze","title":"Selecting Files to Analyze","text":"<p>Select files for analysis by first clicking \"Select Input Files\".</p> <p></p> <p>This bring a popup window. We can select our own files to analyze.</p> <p></p> <p>Alternatively, we can import an existing public dataset if we know the dataset accession (Browse Datasets). From the Select Input Files popup, you will be a shares files tab. There you will find a box called Import Data Share. In this box you may enter an accession of a MassIVE dataset. Upon clicking import the dataset will appear in your workspace to select input files to analyze from.</p> <p></p> <p></p>"},{"location":"networking/#organizing-selected-files-into-groups","title":"Organizing Selected Files into Groups","text":"<p>By default, files can be categorized into separate groups (G1, G2, etc.). For example, case and control or two different microbes can be separate groups. Using the basic options, only six groups can be created. Individual files or entire folders can be selected.</p> <p>Click Finish Selection which will close the pop-up window.</p>"},{"location":"networking/#parameter-walkthrough","title":"Parameter Walkthrough","text":""},{"location":"networking/#basic-options","title":"Basic Options","text":"Parameter Description Default Precursor ion mass tolerance (PIMT) Parameter used for MS-Cluster and spectral library search. Specify the precursor ions mass tolerance, in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. See the ion mass accuracy/tolerance table for help choosing the values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 2.0 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. See the ion mass accuracy/tolerance table for help choosing the values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.5"},{"location":"networking/#advanced-network-options","title":"Advanced Network Options","text":"Parameter Description Default Notes Min Pairs Cos Minimum cosine score that must occur between a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network. 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will limit do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. Is the minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, and the mobile phase,  ...), and the collision-induced fragmentation behavior of the molecules of interest within the samples. High molecular weight (MW) compounds, and compounds with more hetero-atoms will generally tend to produce more fragment ions. However, this rule cannot be systematized. For example, some lipids with high MW generate only few fragment ions. Note that spectra with fewer than 5 fragment ions will by default not be considered for networking and result in single nodes. Node TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes.  For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes.  Keeping this value low makes very large networks (many nodes) much easier to visualize. Minimum Cluster Size Minimum number of MS/MS spectra in a consensus MS/MS spectra to be considered for molecular networking 2 Requires MS-Cluster to be on. This parameter should be tuned based on the dataset size. See presets below Run MSCluster Cluster MS/MS spectra before networking Yes MSCluster will analyze every MS/MS spectra resulting from ions that fall within the defined precursor ion mass tolerance, and will merge the nearly-identical MS/MS spectra (above the cosine score) into a single consensus MS/MS spectrum. Each consensus MS/MS spectrum usually consist of multiple MS/MS spectra from across multiple LC-MS runs (or data files) Maximum Connected Component Size Maximum size of nodes allowed in a single connected network 100 Maximum size of nodes allowed in a single connected network. Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Metadata File Text input to describe experimental setup Replaces both Group mapping and Attribute Mapping Group Mapping Input text file organizing input files into groups Input text file organizing input files into groups. used as a more flexible alternative to assigning groups during data input selection. Attribute Mapping Attribute mapping eases visualization of different groups within cytoscape Input text file organizing groups into attributes"},{"location":"networking/#advanced-library-search-options","title":"Advanced Library Search Options","text":"Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending of the molecule of interest, and the experimental conditions (such as the ionisation mode, and the fragmentation conditions, ...). For example, collision-induced fragmentation of some lipids produce only few fragment ions. A lower value will allow clustering of MS/MS spectra containing less  fragment ions, however it will also induce clustering of  MS/MS spectra from different molecular-type to be connected in one network. An higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)"},{"location":"networking/#advanced-filtering-options","title":"Advanced Filtering Options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted.  By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Filter Spectra from G6 as Blanks Before Networking Enables the filtering out of consensus clusters for consideration in the molecular network if it appears in any file in G6 Don't Filter"},{"location":"networking/#parameter-presets","title":"Parameter Presets","text":"<p>We have several parameter presets that seem to work well depending on the dataset size.</p> <ol> <li>Small datasets - up to 5 LC/MS files</li> <li>Medium Datasets - 5 to 400 LC/MS files</li> <li>Large Datasets - 400+ LC/MS files</li> <li>Big Data(sets) - Lets talk!</li> </ol>"},{"location":"networking/#status-page","title":"Status Page","text":"<p>Upon submission of the workflow, you will be brought to the status page. This will show you the progress of your molecular networking job.</p> <p></p> <p>Molecular networks usually take</p> <ul> <li>10 min for small datasets</li> <li>1 hour for medium datasets</li> <li>Several hours for large datasets</li> <li>FOREVER for big datasets</li> </ul> <p>If you find your molecular network is taking longer than this, please contact us.</p>"},{"location":"networking/#online-exploration-of-molecular-networks","title":"Online Exploration of Molecular Networks","text":"<p>After completing a Molecular Networking workflow utilizing GNPS, analysis can be done within the web interface. The GNPS web interface provides a quick and easy way to perform initial analysis of your data particularly if you want to view the MS2 spectra of the nodes/clusters/networks generated by the Molecular Networking workflow.</p>"},{"location":"networking/#networking-results-views-description","title":"Networking Results Views Description","text":"<p>Default Views to Explore Molecular Networks</p> View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View Unique Library Compounds All unique library spectrum matches View All Clusters With IDs All consensus MS/MS spectra created by MSCluster that were considered for library search and molecular networking. This does not include consensus MS/MS spectra that fell below the minimum cluster size threshold <p>Network Visualizations</p> View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Network Summarizing Graphs Brief statistics about the network such as number of spectra, number of nodes, number of spectral families, identification rates, etc. (legacy output) <p>Methods and Citation for Manuscripts</p> View Description Networking Parameters and Written Network Description Automatic description of molecular networking generation. This can be used in the methods section of manuscripts <p>Export/Download Network Files</p> View Description Download Clustered Spectra as MGF Download consensus MS/MS spectra as an MGF file Download GraphML for Cytoscape Download network files (graphML) for import into Cytoscape Download Bucket Table Download spectral abundance for all consensus spectra across all files (calculated within each file as the sum precursor abundance) Download BioM for Qiime/Qiita Download BioM for spectral counts for analysis in Qiime/Qiita multivariate statistics tools Download Metadata for Qiime Download Metadata file for analysis in Qiime Download ili Data Download the abundance information formatted for ili <p>Advanced Views - Global Public Dataset Matches</p> View Description View Matches to All Public Datasets View matches of consensus MS/MS spectra in the network to all public datasets <p>Advanced Views - Third Party Visualization</p> View Description View Emperor PCoA Plot in GNPS In browser visualization of all analyzed samples with PCoA View ili in GNPS Visualization of 3D ili mapping in GNPS <p>Advanced Views - Experimental Views</p> View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape"},{"location":"networking/#citation","title":"Citation","text":"<p>If you are using GNPS for analysis, please cite the manuscript</p> <p>Mingxun Wang, Jeremy J Carver, Vanessa V Phelan, Laura M Sanchez, Neha Garg, Yao Peng, et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking\" Nature Biotechnology 34.8 (2016): 828-837. PMID: 27504778</p> <p>If you use MS-Cluster in your molecular networks, cite the following as well:</p> <p>Frank, Ari M., et al. \"Clustering millions of tandem mass spectra.\" Journal of proteome research 7.01 (2007): 113-122.</p>"},{"location":"networking/#documentation-for-ili","title":"Documentation for \u00ccli","text":"<p>Spatial distribution of molecular features can be visualized in 2D or 3D throughout \u00ccli in GNPS, a Molecular cartography approach Protsyuk et al., 2017. For mapping, it is necessary to upload the metadata (.txt) containing the \u00ecli coordinates (x, y, z and radio) and the 2D or 3D model (STL format), along with the data files (mzXML format) for Classic Molecular Network.</p> <p>First, it is necessary to obtain the 2D/3D model. The 2D model may be a picture, a map or other, and the 3D model can be obtained by scanning the sample. The coordinates should be pointed in the 2D/3D model by Meshlab software before uploading in GNPS. A free Meshlab version can be downloaded from here. In Meshlab, use the PickPoint tool to point coordinates in the model as figure below.</p> <p></p> <p>A list with the coordinates will appear in the new box, and you can rename them according to your data. After that, a .csv table containing the coordinates and the .stl pointed model should be exported from Meshlab.</p> <p></p> <p>More details about how to create a .csv table with the coordinates can be found here. The coordinates must be added in the metadata (.txt format) according to ReDU format.</p> <p></p> <p>All files should be selected according to indicated below:</p> <p></p> <p>Finish selection and set the parameters to create the Molecular Network. More details regarding Classic Molecular Network can be found here.</p> <p>To create \u00ecli visualization you must go in the Advanced Output Options and change the \u00ecli Mapping Output to \u201cCreate\u201d. Submit the job.</p> <p></p> <p>Once the job was done, click on \u201cView \u00ecli in GNPS\u201d to visualize the feature mapping.</p> <p></p> <p>A window for visualization will open. You can explore your data changing the feature in the bottom right. You can also set different parameters in the right window, such as the size of the spot or the color of mapping. There, you will also find some more examples to explore.</p> <p></p> <p>More details about \u00ecli can be found here.</p>"},{"location":"networking/#references","title":"References","text":"<p>Protsyuk, I., et al. (2018). 3D molecular cartography using LC\u2013MS facilitated by Optimus and'ili software. Nature protocols, 13(1), 134. https://doi.org/10.1038/nprot.2017.122</p>"},{"location":"networking/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (81.32%), lfnothias (0.78%), alan-jarmusch (0.39%), Madeleine Ernst (0.39%), abauermeister (17.12%)</p>"},{"location":"networkingfiles/","title":"Molecular Networking Files","text":""},{"location":"networkingfiles/#molecular-networking-files-overview","title":"Molecular Networking Files Overview","text":"<p>This page gives an overview of all the files that can be downloaded from classic molecular networking and describes the relationships and meanings of the identifiers. </p>"},{"location":"networkingfiles/#clusterinfo","title":"ClusterInfo","text":"<p>Lorem Ipsum</p>"},{"location":"networkingfiles/#clustersummary","title":"ClusterSummary","text":"<p>Lorem Ipsum</p>"},{"location":"networkingfiles/#library-identifications","title":"Library Identifications","text":"<p>Lorem Ipsum</p>"},{"location":"networkingfiles/#graphml","title":"GraphML","text":""},{"location":"networkingfiles/#feature-based-molecular-networking","title":"Feature-based molecular networking","text":""},{"location":"networkingviews/","title":"Molecular Networking Views","text":""},{"location":"networkingviews/#view-all-library-hits","title":"View All Library Hits","text":"<p>This view shows all the library matches between the consensus MS/MS spectra and the GNPS MS/MS Spectral Libraries.</p> <p></p> <p>To view the quality of the MS/MS match, click \"View Mirror Match\" to display a mirror plot</p> <p></p>"},{"location":"networkingviews/#view-all-clusters-with-ids","title":"View All Clusters With IDs","text":"<p>View All Clusters allow a user to view the all consensus spectra in the molecular networking analysis.</p> <p></p> <p>While Molecular Networking matches to all public reference libraries, the majority of molecules detected in untargeted LC/MS runs are unidentified. To help annotate these unidentified spectra, click the \"AnnotatetoGNPS\" to be taken to the view that allows you to choose a specific MS/MS spectrum to annotate. Then Click \"AnnotatetoGNPS\" to be taken to the annotation page with the spectrum prepopulated. Check out the details about annotation - Annotation Documentation.</p> <p>To view all the input MS/MS spectra that went into the consensus spectrum, click the link in the \"ClusterIdx\" link</p> <p></p> <p>This brings up all the input MS/MS spectra. To visualize each spectrum, we can click the \"View Spectrum\" button.</p> <p></p>"},{"location":"networkingviews/#view-spectral-families","title":"View Spectral Families","text":"<p>View Spectra Families allows users to look at the molecular networks at a higher level. Users can see all the distinct spectral families that comprise the entire molecular network. These spectral families are all the nodes that are connected to each other. From here users can tell how big each component is, how many raw spectra are captured by the particular component, and also the libraries identifications of all the spectra in each component.</p> <p></p> <p>To visualize each network, click on the \"Visualize Network\" link</p> <p></p> <p>This brings up an in-browser visualization for a given spectral family</p> <p></p> <p>Here users can explore the specific spectral family in the molecular network. Each circle (node) in the left network panel represents a consensus spectrum and edge represents related fragmentation patterns. The default color of the nodes is gray, with blue nodes representing consensus MS/MS spectra that were identified by library search.</p> <p>There is a lot to unpack in this online interface to explore the molecular networks. The following is a quick guide to all the features in this interface</p> <ol> <li>Node Labels</li> <li>Edge Labels</li> <li>Edge Highlight</li> <li>Node Highlights by MS2 Peak Search</li> <li>Align MS/MS spectra in right panels</li> <li>Node Size/Color Selection</li> <li>Node Pie Chart Coloring</li> <li>Rerun Network Layout</li> <li>Expand Network Window</li> <li>Toggle UI Widgets (Show/Hide)</li> <li>Download Spectral Family GraphML for Cytoscape</li> <li>Download Spectrum Peaks</li> <li>Annotate Spectrum with Peptide Sequence</li> <li>Large Spectrum Plot</li> <li>Show Peak m/z annotations in Spectrum Viewer</li> </ol>"},{"location":"networkingviews/#network-labeling","title":"Network Labeling","text":"<p>The default labeling is the cluster/node index which is rather uninformative, but there are alternative labelings possible by selecting the appropriate node label from the Node Label legend box.</p> <p></p> <p>Node Labels</p> Label Description cluster index cluster index used globally for each cluster across all networking views parent mass precursor mass of the consensus spectrum LibraryID library identification name for the node if a library search were performed EvenOdd 1/0 for even or odd depending on the parent mass. Used for nitrogen rule Peptide peptide labeling None No Labeling <p>Edge Labels</p> Label Description Cosine Cosine score measuring fragmentation similarity between two nodes DeltaMZ The Delta MZ of the spectra None No Labeling"},{"location":"networkingviews/#node-pie-coloring","title":"Node Pie Coloring","text":"<p>An additional way to customize the view of the networks is to color the nodes. By default the nodes are gray, but users can color the nodes based upon spectra counts of the groups they came from. By default the coloring labels will be based upon the default groups G1, G2, G3, G4, G5, and G6. The coloring of each node will be a pie, and the proportion colored of that pie is the proportion of the spectral counts coming from each respective group. Additionally, the Node Coloring legend describes the color for each group. Users can also use their own group names if they defined their own arbitrary groups when creating the network.</p> <p>Custom Groups</p> <p>If you would like to display custom groups instead of G1 through G6, you will be able to enter your own group name in the fields next to the colors. However, you will need to prefix you group name with <code>GNPSGROUP:</code></p> <p>To draw the pies, click \"Draw Pies\"</p> <p></p>"},{"location":"networkingviews/#edge-highlights","title":"Edge Highlights","text":"<p>Edges by default include arrows pointing from low mass spectra to high mass spectra. Further, edges can also be colored. Users are able to enter a delta mz of their choice to highlight in the network. The highlighted edges will appear in red.</p> <p></p>"},{"location":"networkingviews/#edge-directions","title":"Edge Directions","text":"<p>The arrows between nodes in the molecular network point from higher m/z spectra to lower m/z spectra. This can facilitate tracking down identifying multiple extensions of a polymer or extension of a carbon chain.</p>"},{"location":"networkingviews/#edge-delta-histogram","title":"Edge Delta Histogram","text":"<p>This histogram shows the distribution of the edge deltas.</p> <p></p> <p>Clicking each peak in the histogram allows for highlighting the edges in the network.</p>"},{"location":"networkingviews/#node-sizingcolor","title":"Node Sizing/Color","text":"<p>The nodes size and color can be adjusted based upon several options:</p> <ol> <li>Spectrum counts</li> <li>Precursor intensity</li> <li>Number of Files</li> <li>Parent Mass</li> <li>Nitrogen Even/Odd</li> <li>Precursor Charge</li> </ol> <p></p>"},{"location":"networkingviews/#ms2-peak-search-in-molecular-network","title":"MS2 Peak Search in Molecular Network","text":"<p>To search for specific molecules in the molecular network that contain an MS2 fragment of interest, you can enter a product ion m/z you want to find.</p> <p>First, we need to grab all the MS/MS spectra into the browser by clicking this button:</p> <p></p> <p>Then, we can enter the m/z we want to search for and click the update button. This will highlight which molecules contain the specific product ion.</p> <p></p> <p>We can also see a histogram of all product ions from all MS2 spectra in the current network.</p> <p></p>"},{"location":"networkingviews/#detailed-interrogation-of-network-spectra","title":"Detailed Interrogation of Network Spectra","text":"<p>While its great to visualize the network properly, to truly make sense of the network users must be able to interrogate the network metadata and examine the actual spectra. To this end, users are able to find out information about a particular node by simply hovering their mouse over node. This will bring up a hover box describing the node information. At present the display shows like this:</p> <p></p> <p>This shows basic information about the node, as well as the structure if the node is identified by library search and the structure was provided in the library spectrum.</p> <p>To further investigate the network, users can left click on a node to plot the spectrum in the top right panel (right click to plot in bottom right panel), along with the spectrum information and structure if one is available.</p> <p></p> <p>The spectrum image is interactive so users can zoom in and look at precisely at the spectrum to make sense of the data. Additionally users can compare two spectra in the network by simple right clicking on a different node to render its information in the bottom right panel.</p> <p>Users can also click on an edge and both nodes that are connected to the edge are automatically displayed in the top and bottom right panels.</p>"},{"location":"networkingviews/#examining-spectrum-spectrum-alignment","title":"Examining Spectrum Spectrum Alignment","text":"<p>Users can quickly ascertain how two spectra align to each other at the peak level. By clicking the \"Align Spec\" button to obtain the score between the spectrum in the top and the spectrum in the bottom render panels.</p> <p></p> <p>Additionally, the plots of the spectra will update to reflect the alignments shown here:</p> <p></p> <p>with red peaks representing peaks that match at the exact same masses between the top and bottom spectra, and blue peaks representing peaks matching at shifted masses. Additionally, each peak is labeled with a unique identification number that shows the correspondence of peak matches between the top and bottom spectra.</p>"},{"location":"networkingviews/#network-spectra-library-matches","title":"Network Spectra Library Matches","text":"<p>To view how exactly a spectrum in the network has matched to a library spectrum, users can click the \"Show Library Match\" in the side panel on the far right. This will bring up this middle panel shown below comparing the spectrum in the network with the library spectrum in green.</p> <p></p>"},{"location":"networkingviews/#network-screen-shot","title":"Network Screen Shot","text":"<p>Download screenshot of the molecular network.</p>"},{"location":"networkingviews/#network-layout-re-run","title":"Network Layout Re-run","text":"<p>Rerun network layout to fit zoom and window.</p>"},{"location":"networkingviews/#network-window-size","title":"Network Window Size","text":"<p>Max network view bigger to see more of the network with more room.</p>"},{"location":"networkingviews/#pop-up-window","title":"Pop up Window","text":"<p>Pop out network visualizer into new window without top menu bars.</p>"},{"location":"networkingviews/#sub-network-graphml-for-cytoscape","title":"Sub-Network GraphML for Cytoscape","text":"<p>Download a GraphML of network and visualize in Cytoscape or other graph software.</p>"},{"location":"networkingviews/#hide-widgets","title":"Hide Widgets","text":"<p>Show or hide user interface widgets.</p>"},{"location":"networkingviews/#view-principle-coordinate-analysis-pcoa-plots","title":"View Principle Coordinate Analysis (PCoA) Plots","text":"<p>To view PCoA plots, please enable that output on the input page (default is on) in the \"Advanced Output Options\" section and enabling \"Create Cluster Buckets and BioM/PCoA Plots output\". This will create the appropriate data structures for PCoA analysis. To include additional metadata to color the nodes according to the sample types, include and add additional columns for metadata describing the experiment (see metadata documentation).</p> <p>To view the PCoA plots when the parameters are appropriately set, click the \"View Emporer PCoA Plot in GNPS\" under the section \"Advanced Views - Third Party Visualization\" on the results page of your GNPS job.</p> <p>This PCoA analysis measures the distance between each of the samples based on their overlapping molecules (by MSCluster). This emperor plot is generated by the Qiime software package. The distance metric is binary_jaccard.</p>"},{"location":"networkingviews/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"qemistree/","title":"Qemistree","text":"<p>QEMISTREE - a tool to represnt metabolomics data as trees to explore chemical diversity</p> <p>Introduction: Qemistree is a computation tool to build a tree of mass-spectrometry (LC-MS/MS) features to perform which enables the use of phylogeny-based tools to study chemical composition of samples. The article is available in Nat. Chem. Biol. (2020). This documentation aims to provide a user-guide on how to run a Qemistree workflow on GNPS. </p> <p>Please use this interim link to run Qemitree on your data after FBMN. This will be updated in the next GNPS release.</p> <p>STEP 1: Collecting the right input files</p> <p>Users can perform QEMISTREE analysis in GNPS after processing LC-MS/MS data through Feature-Based Molecular Networking or FBMN using MZmine2. The input files for Qemistree are:</p> <p>1. Required: A SIRIUS MGF file generated from the MZmine workflow. See the FBMN with MZmine2.</p> <p>2. Required: A quant table called <code>qiime2_table.qza</code> with all the identified features (an output of FBMN, and found  within the folder <code>qiime2_output</code>)</p> <p>3. Optional: A metadata file called <code>qiime2_metadata.tsv</code> (an output of FBMN, and also found in folder <code>qiime2_output</code>)</p> <p>4. Optional: A library identification file (TSV) (an output of FBMN, and found in the folder <code>clusterinfo_summary</code>)</p> <p>Follow the steps below to generate these files:</p> <p>a. Follow the documentation for Feature-Based Molecular Networking using MZmine2 to generate an aligned feature list for your LC-MS/MS data and export the necessary MGF and CSV files for FBMN GNPS workflow.</p> <p>b. While still in MZmine2, select your aligned feature list, then click on the tab for feature list methods and select Export/Import, followed by Export for SIRIUS.</p> <p>c. Choose the Mass list that you used to generate your feature list, and specify a path and filename for your SIRIUS file. Click OK.</p> <p>d. Go to GNPS server and run a FBMN job using the GNPS quant CSV, GNPS MGF (both generated in step a, above) and ReDU metadata file.</p> <p>e. The Qemistree task utilizes the output files from FBMN. These can be downloaded by clicking on <code>Download qiime2 Emperor qzv</code> (<code>qiime2_table.qza</code> and <code>qiime2_metadata.tsv</code> from folder <code>qiime2_output</code> and  <code>clusterinfo_summary</code> for the tsv file within). You can start a Qemistree task by clicking on <code>Visualize with Qemistree</code> link on your FBMN status page </p> <p>Note <code>Visualize with Qemistree</code> option is available for FBMN release version &gt;= 20. If your FBMN job was run using an older version, please re-run the job by clicking on <code>Clone to Latest Version</code> to follow the rest of the tutorial.</p> <p>STEP 2: Running a Qemistree job</p> <p>1. Go to the status page of your FBMN job:</p> <p></p> <p>Click on <code>Visualize with Qemistree</code> under the <code>Advanced Views - Experimental Views</code> to analyze your data using Qemistree. This method auto-populates the input fields <code>Quantification Table</code>, <code>Metadata Table</code> and <code>Library Identifications</code> from your corresponding FBMN job. Additionally, you need to upload your SIRIUS MGF file exported from Mzmine2 as describes in Step 1.</p> <p></p> <p>2. Make sure the correct files are included as described in the beginning:</p> <ol> <li>Sirius MGF Spectrum file</li> <li><code>qiime2_table</code> for Quantification Table</li> <li><code>qiime2_metadata</code> for Metadata Table</li> <li><code>clusterinfo_summary</code> file for Library Identifications</li> </ol> <p>3. Under the header: Advanced options select the following: 1. Instrument Type: <code>orbitrap</code> or <code>qtof</code> 2. Ionization Mode: <code>positive</code>, <code>negative</code> or <code>auto</code></p> <p>If you are signed in to the server the email address will auto-populate. If not, add your email address and click on submit. The runtime depends on the number of features in your dataset -- a typical dataset (few thousand features) can take a few hours. You will get an email once the job finishes and then you are ready to explore your molecular trees!</p> <p>STEP 3: Analysing the results from a Qemistree job from the status page</p> <p>Once the job is finished successfully, you will see the status page as below.</p> <p></p> <p>1. View Summary gives a list of the molecules, their structures and the chemical taxonomy assigned by ClassyFire taxonomic levels. It tabulates the annotations for all MS/MS spectra for which we could predict molecular fingerprint using Sirius and CSI:FingerID D\u00fchrkop et. al.</p> <p></p> <p>2. View Qemistree iTOL Tree to visualize the chemical tree based on similarity of molecular fingerprints predicted by Sirius and CSI:FingerID. Follow the <code>click here</code> button for Qemistree visualization in iTOL. Qemistree classifies the features/molecules based on ClassyFire chemical taxonomy into chemical kingdom, superclass, class, subclass, and direct_parent which can be visualized as tip labels in the tree. </p> <p>Note. The tree visualized above is the default visualization which includes all the molecules that had structural annotations from either spectral library matches or CSI:FingerID structural predictions. This tree is decorated with clade color and tip labels based on ClassyFire <code>class</code> assignment. This visualization can be interactively modified using <code>View Qemistree Dashboard</code> link (described in Step 4 below).</p> <p>Shown below is an example default tree.</p> <p></p> <p>We recommend you to download the tree and tree decoration files by clicking on the boxes: Qemistree, Labels, Colors, and Abundance. These provide the tree file of the features that have smiles (<code>qemistree.tree</code>), the label for each tip of the tree (<code>labels.txt</code>), the color of each clade (<code>colors.txt</code>), and the relative abundance of the feature in the metadata category chosen for the job (<code>barplots.txt</code>). This is because the auto-generated tree is only available for 30 days &amp; therefore it is recommended that you download the associated files and upload it on iTOL using your login credential for permanent storage.</p> <p>3. Under Advanced Views, click on <code>View qiime2 Emperor Plots</code> to visualize the Principal Coordinate Analysis result using weighted UniFrac distances based on the chemical relationships based on predicted molecular fingerprints.  </p> <p>4. Visualizing chemical trees using the View Qemistree dashboard. You can further explore and modify the Qemistree visualization interactively using the Qemistree dashboard. This dashboard is available as a link on your Qemistree job status page for direct access.</p> <p>The example Qemistree task on the dashboard provides is based on a subset of a global foodomics dataset. </p> <p></p> <p>For your own data visualization, enter the following information on the dashboard:</p> <ol> <li>Qemistree task ID: This is the unique ID of Qemistree job on GNPS. It can be found in your Jobs page in the <code>Description</code> column. Alternatively, click on <code>View Qemistree Dashboard</code> on the job status page, and this field will be auto-populated.</li> <li>Column to filter qemistree features: Enter the feature metadata column to prune the tree. This can be a chemical taxonomy level or structural annotation type (all structures, MS2 structures, CSI:FingerID structures).</li> <li>Column to label tree tips: Enter chemical taxonomic level that should be used to label each feature on the tree (tree tips).</li> <li>You can include additional options for labelling features by MS2 library match or parent m/z values, when a feature cannot be assigned a chemical taxonomy by ClassyFire.</li> <li>Choose metadata column by which to visualize the abundance of the features, and whether to normalize the abundance.</li> <li>Click on Submit. You can quickly generate many Qemistree-iTOL visualizations by changing the values entered in step 2-5 to explore your data.</li> <li>Click on <code>Datasets</code> tab in iTOL to visualize the relative abundance of each feature in the sample metadata category you chose in Step 5.</li> </ol> <p>You can interactively modify the aethetics of this visualization (such as colors, fonts, sizes etc) interactively by using the control panel in iTOL. </p> <p>5. You can download the .qzv file generated in the dashboard and drag and drop to https://view.qiime2.org/. Clicking on \u201cView this tree using iTol\u201d will build the tree with all the information contained in the Qemistree, Labels, Colors, and Abundance files. In this way, it will not be possible to trace the branches back to the fingerprints (and, consequently, to the Feature IDs) since the information you can get putting the cursor on the nodes is its branch length and the classification information. </p> <p>If you want to trace the branches back to the feature IDs, you can download the Qemistree.tree file, and upload it in iTol directly in your account. In this way, you will get a tree without any other information added, just the fingerprint information for each node.</p> <p></p> <p>On the job status window, you can click on \u201cview summary\u201d and download this entire table to check which feature ID corresponds to the fingerprint you are interested in (seen on the tree).</p> <p></p> <p>You can also just drag and drop to iTol the Labels, Colors, and Abundance files to have all this information in the tree again.</p> <p>STEP 4. Advanced analysis using QIIME2  For advanced users, we encourage you to download all the files generated from this analysis by clicking on <code>Download Qiime2 data</code> on the status page of the job and explore your data using tools available in QIIME2. Qemistree workflow formats all resulting files such that they are compatible with statistical and visualization tools in QIIME2 and we encourage users to leverage QIIME2 tools for data exploration.  </p> <p>Among the folders downloaded, the <code>output folder</code> contains <code>qemistree.qza</code> and <code>qemistree-pruned-smiles.qza</code> which are two tree files. The <code>qemistree.qza</code> file contains all the features for which molecular fingerprints could be predicted using Sirius+CSI:FingerID; <code>qemistree-pruned-smiles.qza</code> which contains the features that were annotated with molecular structures using spectral matching or CSI:FingerID. Moreover, <code>output_folder</code> also contains: 1. <code>merged-feature-table.qza</code> which has the abundances of features per sample and 2. <code>classified-feature-data.qza</code> which has feature metadata (parent mass, retention time, spectral library match, molecular structures and Classyfire chemical taxonomy for each feature). </p> <p>You can use these files to perform additional analyses in the QIIME2 which can be installed on your computer using the documentation here. Some suggested QIIME2 analytical tools are linked below: 1. Generate heatmap of features per sample 2. Alpha-diversity using Faith's PD for within sample chemical diversity  3. Beta-diversity using UniFrac for between sample chemical comparison 4. Songbird analysis for identifying differentially abundant molecules between sample groupings 5. mmvec analyses for microbe-metabolite interactions</p> <p>Additionally, we encourage you to explore the plethora of tools available here to guide further analyses of your metabolomics data.</p> <p>For detailed information on all the steps performed during Qemistree processing, please check out our source code and documentation here</p> <p>CITATIONS:</p> <p>Tripathi, A., V\u00e1zquez-Baeza, Y., Gauglitz, J.M. et al. Chemically informed analyses of metabolomics mass spectrometry data with Qemistree. Nat Chem Biol (2020)</p> <p>D\u00fchrkop, K., Shen, H., Meusel, M., Rousu, J. &amp; B\u00f6cker, S. Searching molecular structure databases with tandem mass spectra using CSI:FingerID. Proc. Natl. Acad. Sci. U. S. A. 112, 12580\u20135 (2015)</p> <p>Djoumbou Feunang, Y. et al. ClassyFire: automated chemical classification with a comprehensive, computable taxonomy. J. Cheminform. 8, 61 (2016)</p> <p>Letunic, I. &amp; Bork, P. Interactive Tree Of Life (iTOL) v4: recent updates and new developments. Nucleic Acids Research vol. 47 W256\u2013W259 (2019)</p>"},{"location":"qemistree/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (6.85%), lfnothias (7.53%), Deepa Acharya (45.89%), Anupriya Tripathi (30.82%), helenamrusso (8.9%)</p>"},{"location":"quickstart/","title":"Quick Start Guide","text":"<p>This is a quickstart guide that will enable you to prepare your data, create a GNPS account, upload to GNPS, and create your a molecular network on GNPS. While there are a wide variety of other tools at GNPS, molecular networking analysis is a great place to get your feet wet.</p>"},{"location":"quickstart/#converting-data","title":"Converting Data","text":"<p>Convert vendor formats to open formats using MSConvert locally. Checkout this documentation.</p>"},{"location":"quickstart/#create-a-gnps-account","title":"Create a GNPS Account","text":"<p>Account registration is a simple process, and completely private \u2013 GNPS will never use your contact information for any reason other than to email you the outcome of your dataset submissions and other workflows. To register an account, navigate to the GNPS web site. Here you will find a registration link in the upper right corner of the page, just below the login box.</p> <p></p> <p>Click on the registration link to bring up the account registration form.</p> <p></p>"},{"location":"quickstart/#upload-data-quick","title":"Upload data (Quick)","text":"<p>Open a ftp client such as WinSCP (Not Filezilla as it includes malware) client with the following input parameters; Host: ccms-ftp01.ucsd.edu followed by entering your user name and password for GNPS followed by enter.</p> <p></p> <p>Choose the location of your files within the local site drop down menu. Highlight the files or folders to upload and select upload by right clicking. You will then see the files being queued and transferred to GNPS.</p> <p></p> <p>Once all the files are uploaded using this method they will be available for you to use for your molecular networking workflows within GNPS.</p> <p>For a more detailed description of all the ways to upload data, please refer to our Upload Documentation</p>"},{"location":"quickstart/#molecular-networking-input","title":"Molecular Networking Input","text":"<p>Navigate to the molecular networking analysis page.</p>"},{"location":"quickstart/#molecular-networking-parameter-presets","title":"Molecular Networking Parameter Presets","text":"<p>There are three presets that set the parameters to approximately appropriate values depending on the size of your dataset.</p> <p></p> <p>Please select the appropriate one given the follow criteria:</p> <ol> <li>Small Dataset - up to 5 LC/MS files</li> <li>Medium Dataset - 5 to 400 LC/MS files</li> <li>Large Dataset - 400+ LC/MS files</li> </ol>"},{"location":"quickstart/#naming-your-analysis","title":"Naming your analysis","text":"<p>Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.</p> <p></p>"},{"location":"quickstart/#selecting-data-input-files","title":"Selecting Data Input Files","text":"<p>Within the Basic Options header; to input your spectrum files, select the input files tab next to the Spectrum files (required) field. A pop-up window with three tabs will appear; Select Input Files, Upload Files, Share Files. Proceed by selecting the files you want to analyze by clicking on the mass spectrometry file or an entire folder. Next click on the Spectrum Files G1 button to mark these files for analysis. You may select more files for analysis and put them in the separate groups (G1, G2, G3, G4, G5, G6) to reflect your experimental design. If you are performing an analysis with more than six groups, a metadata file may be used (see Networking Documentation).</p> <p></p> <p>Once you are done selecting files to analyze, close the pop-up and hit submit.</p>"},{"location":"quickstart/#view-analysis-results","title":"View Analysis Results","text":""},{"location":"quickstart/#browsing-identifications","title":"Browsing Identifications","text":"<p>To quickly glance at all the molecules in your data matching to the GNPS community knowledge of reference MS/MS spectra, click on \"View All Library Hits\".</p> <p></p>"},{"location":"quickstart/#viewing-network-quick","title":"Viewing Network (Quick)","text":"<p>To visualize the molecular networks in the browser, click the \"View Spectral Families (In Browser Network Visualization)\".</p> <p></p> <p>This brings you to a list of all the individual networks (connected components) that are in your data. Click on the \"Visualize Network\" link to explore each network individually. Your selection can be guided by the identifications within each network if there is a specific molecule of interest.</p> <p></p>"},{"location":"quickstart/#advanced-online-visualization","title":"Advanced Online Visualization","text":"<p>For a more detailed guide on how to explore the molecular networks online, please refer to our documentation</p>"},{"location":"quickstart/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang</p>"},{"location":"resultviews/","title":"Result Views Navigation","text":"<p>Here we highlight general properties of table result views in GNPS.</p>"},{"location":"resultviews/#filtering-tables","title":"Filtering Tables","text":""},{"location":"resultviews/#filtering-rows-for-substring","title":"Filtering Rows for Substring","text":"<p>If you want to find rows that include a substring that you are interested in, simply enter the value in the box and hit enter. For example, to find all the identifications that include the substring \"mycin\": link.</p> <p></p>"},{"location":"resultviews/#filtering-rows-with-a-single-column-and-operator","title":"Filtering Rows with a single column AND operator","text":"<p>If you want to filter a table in GNPS on a single column and the value in a given column must contain ALL of the substrings you define, you can use the \"&amp;&amp;\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1&amp;&amp;G2. See this link for an example.</p> <p>If you want to use negation, e.g. G1 AND not G2, you can use the carrot ^ like in this example G1&amp;&amp;^G2. </p>"},{"location":"resultviews/#filtering-rows-with-a-single-column-or-operator","title":"Filtering Rows with a single column OR operator","text":"<p>If you want to filter a table in GNPS on a single column and the value in a given column must contain at least one of the substrings you define, you can use the \"||\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1||G2. See this link for an example.</p>"},{"location":"resultviews/#downloading-table-results","title":"Downloading Table Results","text":"<p>In order to download the data for a result table in GNPS that you are currently viewing, click the download button:</p> <p></p> <p></p>"},{"location":"resultviews/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"shimadzu/","title":"Shimazdu Gotchas","text":""},{"location":"shimadzu/#shimazdu-gotchas","title":"Shimazdu Gotchas","text":""},{"location":"shimadzu/#conversion-using-machine-software","title":"Conversion using machine software","text":"<ol> <li>Select files needing to be converted</li> <li>Right click on files and select convert. This will open a window allowing you to choose the file type you want to change them to (e.g. mzML for later GNPS deconvolution)</li> </ol> <p>If this does not work, try the solution below</p>"},{"location":"shimadzu/#conversion","title":"Conversion","text":"<ol> <li>OpenChrom convert to mzXML</li> <li>MSConvert mzXML to mzML</li> </ol> <p>This gets around an issue where Shimazdu likes to write retention times in milliseconds and pymzML does not read it. </p>"},{"location":"sirius/","title":"SIRIUS","text":""},{"location":"sirius/#introduction","title":"Introduction","text":"<p>SIRIUS is an tool for the computational annotation of fragmentation spectra tool developed by the B\u00f6cker Lab at Jena University.</p>"},{"location":"sirius/#gnps-workflow","title":"GNPS Workflow","text":""},{"location":"sirius/#workflow-description","title":"Workflow description","text":"<p>We are working on deploying SIRIUS on GNPS to enable users to perform automated high throughput computational annotation. Various annotations using the SIRIUS modules:</p> <ol> <li>Molecular formula prediction with SIRIUS and ZODIAC.</li> <li>Structure assignment with CSI:FingerID and COSMIC.</li> <li>Compound class prediction with CANOPUS.</li> </ol> <p>Checkout the beta workflow here.</p> <p>For more information on SIRIUS, please refer to the official SIRIUS documentation.</p>"},{"location":"sirius/#with-the-feature-based-molecular-networking","title":"With the Feature-Based Molecular Networking","text":"<p>The MGF file from the Feature-Based Molecular Networking workflow can be used as input for the SIRIUS workflow. The results can then be mapped on the molecular networks. When using MZmine, for best results, uses the SIRIUSExport module from the same aligned peaklist.</p>"},{"location":"sirius/#with-the-sirius-mzml-parser","title":"With the SIRIUS mzML parser","text":"<p>SIRIUS has now a built-in mzML parser. The SIRIUS workflow on GNPS allows the selection of one mzML file. </p> <p>Warning</p> <p>Note this support is currently experimental and under development! </p>"},{"location":"sirius/#results","title":"Results","text":""},{"location":"sirius/#viewing-the-results","title":"Viewing the results","text":"<p>View Molecular Formula Summary: view molecular formula annotations results from SIRIUS and ZODIAC.</p> <p>View Compound Summary:  view structure assignment with CSI:FingerID and COSMIC.</p> <p>View CANOPUS results: view compound class prediction with CANOPUS.</p>"},{"location":"sirius/#mapping-the-results-onto-the-molecular-networks","title":"Mapping the results onto the molecular networks","text":"<p>If you used the Feature-Based Molecular Networking workflow, you can map SIRIUS annotation onto the molecular networks in Cytoscape.</p> <p>A quick way to do this can be found in this Notebook. Simply enter the FBMN task and Sirius task and you'll get a merged graphml that can be dragged into Cytoscape. </p>"},{"location":"sirius/#example-analysis","title":"Example Analysis","text":"<p>Checkout this analyis of this E Coli data found here. The steps we took were:</p> <ol> <li>Feature Finding with MZmine2</li> <li>Feature Based Molecular Networking</li> <li>Sirius in GNPS</li> </ol> <p>These jobs cannot be cloned and they function as an example. Use this workflow to submit your new job. You will have to provided an .mgf file (exported from MZmine) and select what type of instrument (orbitrap or QToF) have been used for the analysis to set the ppm error.</p> <p>Let us know what you think!</p>"},{"location":"sirius/#citations","title":"Citations","text":"<p>The GNPS workflow is brought to you Ming Wang and Louis Felix Nothias. If you found this workflow useful for your data analysis, please cite the relevant literature from below.</p>"},{"location":"sirius/#main-citations","title":"Main citations","text":"<ol> <li>SIRIUS: K. D\u00fchrkop, et al., SIRIUS 4: a rapid tool for turning tandem mass spectra into metabolite structure information. Nat. Methods 16, 299\u2013302 (2019).</li> <li>ZODIAC: M. Ludwig, et al., Database-independent molecular formula annotation using Gibbs sampling through ZODIAC. Nat. Machine Intelligence (2020).</li> <li>CSI:FingerID K. D\u00fchrkop, H. Shen, M. Meusel, J. Rousu, S. B\u00f6cker, Searching molecular structure databases with tandem mass spectra using CSI:FingerID. Proc. Natl. Acad. Sci. U. S. A. 112, 12580\u201312585 (2015).</li> <li>CANOPUS K. D\u00fchrkop, et al., Classes for the masses: Systematic classification of unknowns using fragmentation spectra. bioRxiv, 2020.04.17.046672 (2020).</li> </ol>"},{"location":"sirius/#additional-citations","title":"Additional citations","text":"<ol> <li>S. B\u00f6cker, M. C. Letzel, Z. Lipt\u00e1k, A. Pervukhin, SIRIUS: decomposing isotope patterns for metabolite identification. Bioinformatics 25, 218\u2013224 (2009).</li> <li>S. B\u00f6cker, K. D\u00fchrkop, Fragmentation trees reloaded. J. Cheminform. 8, 5 (2016).</li> </ol>"},{"location":"sirius/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (48.68%), lfnothias (46.05%), irinakoester (1.32%), Simone Zuffa (3.95%)</p>"},{"location":"spectrumcuration/","title":"Community Curated MS/MS Spectral Libraries","text":"<p>GNPS provides a platform for users to contribute their own annotated MS/MS spectra to the spectral libraries. There are several requirements for annotation: 1) the compound must be of known structure and 2) the MS/MS must be of sufficient quality to support the annotation of the compound. By contributing these spectra, users will expand the spectral libraries and allow dereplication of these compounds within other datasets.</p>"},{"location":"spectrumcuration/#library-quality-level","title":"Library Quality Level","text":"<p>The spectral libraries are categorized based upon quality of the data. The level indicates both the quality of the MS/MS spectra as well as the trust worthiness of the annotations. These reflect both quality of the MS/MS spectra as well as the trust worthiness of the annotations.</p> Quality Level Description Quality Number Gold  Synthetic, Complete structural characterization with NMR, crystallography or other standard methods as defined in the publication guidelines for Journal of Natural Products, Privileged users 1 Silver Isolated or lysate/crude, Published data showing presence of molecule in the sample 2 Bronze Any other putative, complete or partial annotation 3 Challenge  Unknown Identity, open to community to help annotate 10 <p>By default, users will have access to Bronze, but approval is required to contribute to silver and gold libraries. To obtain training and access please email Mingxun Wang.</p>"},{"location":"spectrumcuration/#adding-single-spectra","title":"Adding Single Spectra","text":""},{"location":"spectrumcuration/#input-formats","title":"Input Formats","text":"<p>mzXML, mzML, and mgf file formats are accepted.</p> <p>Additionally, spectra to be added to the library should be centroided. Profile data is not processed correctly by our algorithms. If you are unsure of how to convert spectra to these formats, please checkout the documentation here.</p>"},{"location":"spectrumcuration/#adding-spectrum","title":"Adding Spectrum","text":"<p>From the GNPS Splash Page, users can click on</p> <p></p> <p>to be brought to the Add Single Annotated Spectrum workflow. By default, users will contribute bronze quality reference spectra. Permission is required to contribute higher quality spectra to the gold and silver workflows.</p> <p>Select an input spectrum file.</p> <p>Note</p> <p>Do not change the spectral library that is selected.</p>"},{"location":"spectrumcuration/#annotation-fields","title":"Annotation Fields","text":"<p>For a full set of parameters, see this</p> <p>Sample Parameters</p> Field Description Default Required Ion Source Source of Ions LC-ESI Yes Instrument Mass Analyzer qTof Yes Ion Mode Ionization Mode Positive Yes Compound Source Sample source of compound Commercial Yes Principle Investigator PI overseeing compound acquisition and analysis N/A Yes Data Collector Individual Collecting Data N/A Yes <p>Annotation</p> Field Description Default Required Scan Spectrum Scan of Spectrum 0 Yes Adduct Adduct of Ion fragmented in MS2 M+H Yes Compound Name Compound Common Name N/A Yes Precursor MZ Experimental Precursor MZ for Compound 0 (will read from spectrum file if 0) Yes Charge Charge of Precursor 0 (will read from spectrum file if 0) Yes <p>Advanced Annotation</p> Field Description Default Required CAS Number Chemical Abstracts Service compound identification number N/A No Pubmed ID Pubmed ID where compound or data was published N/A No Exact Mass Compound Exact Mass 0 No Smiles Smiles Structure N/A No Inchi Inchi Structure N/A No Inchi Aux Inchi Auxiliary Structure N/A No"},{"location":"spectrumcuration/#guidance-on-providing-names-to-the-annotations-in-gnps","title":"Guidance on Providing Names to the Annotations in GNPS","text":"Source Structure Structural Position of Analog Mass Shift of Analog Guidance Example Chemical Standard Full Structure Known Known N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields. 7-Methylxanthine Your Data Full Structure Proposed Proposed based on MS/MS N/A please annotate with the common name and provide the SMILES and Inchi in the corresponding text fields (a bronze star rating will indicate a putative status) 7-Methylxanthine Your Data Incomplete Structure Proposed Cannot based on MS/MS N/A please annotate with the common name and indicate the position is unknown using \"X\" (X)-Methylxanthine Your Data No Structure Information No Position Information Mass shift provided via Molecular Networking please annotate with the common name of the chemical it is connected to and indicate mass shift. Mass shift indicated by nominal mass followed by putative formula difference (if the formula difference is unknown please enter \"X\"). No SMILES or Inchi should be provided. Caffeine +14(CH2)  Caffeine +52(X)"},{"location":"spectrumcuration/#license","title":"License","text":"<p>All GNPS Reference spectra contributed directly to GNPS by default will have the CC0 license.</p> <p>Third party libraries imported may not conform to the CC BY license and should be verified by users. </p>"},{"location":"spectrumcuration/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (85.87%), alan-jarmusch (9.78%), mpanitch (4.35%)</p>"},{"location":"superquickstart/","title":"Superquick Start Guide","text":"<p>The Superquick start interface enables you to rapidly explore your data without having to create an account or install any software besides your web browser and data conversion programs.</p>"},{"location":"superquickstart/#no-log-in-required","title":"No log-in required","text":"<p>Warning</p> <p>The limitations to this method is that the files uploaded will not reside in your own account (though no one else can see them) and will be removed on a monthly basis. Please create your own account for more persistent and reproducible analyses.</p> <p>You would be able to use the Super quickstart interface if you have the following requirements:</p> <ul> <li>The format of your files is mzXML/mzML/Thermo raw files.</li> <li>You have less than 3 cohorts of samples.</li> <li>Each analysis has a maximum of 50 spectrum files.</li> <li>Each file has less than 200MB. </li> </ul>"},{"location":"superquickstart/#super-quick-start-interface","title":"Super-Quick Start Interface","text":"<p>The Super-Quick Start Interface supports both Classical Molecular Networking and Feature-based Molecular Networking.</p> <p>On the GNPS homepage navigate to the super-quick start button</p> <p></p> <ol> <li>Classic Molecular Networking (see the detailed documentation) - Analyze a few dozen samples in up to 3 cohorts</li> <li>Feature Based Molecular Networking (see the detailed documentation) - Analyze molecular networks out of your favorite LC-MS feature detection/alignment software</li> </ol>"},{"location":"superquickstart/#classic-molecular-networking","title":"Classic Molecular Networking","text":"<p>Please navigate to the super quickstart page to begin with Classic Molecular Networking!</p> <p>The standard Classic Molecular Networking analysis start page can be accessed here</p>"},{"location":"superquickstart/#converting-data","title":"Converting Data","text":"<p>Convert vendor formats to open formats using MSConvert locally or using the GNPS format conversion tool. Checkout this documentation.</p>"},{"location":"superquickstart/#selecting-files","title":"Selecting Files","text":"<p>Simply drag and drop your mass spectrometry files (mzML, mzXML, or MGF) into the appropriate cohorts you want to compare. It is required to upload files to Cohort Group 1. Additional Groups can be used (to separate control and treatment samples, for example).</p> <p></p> <p>Wait until each file is loaded, as shown here:</p> <p></p>"},{"location":"superquickstart/#analyze-files","title":"Analyze Files","text":"<p>Once files have been uploaded into appropriate cohorts, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\". Entering your email will give you a means of retrieving the job at a later time or if you close the browser.</p> <p></p> <p>This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again.</p> <p>Warning</p> <p>If you drag vendor proprietary files (e.g. not mzML/mzXML) you will be able to start the job, however it will fail, as shown here:  </p>"},{"location":"superquickstart/#results","title":"Results","text":"<p>You will receive an email when the job is complete if you entered it prior to submission.  To understand the results, please refer to the analysis section of the standard quickstart guide.</p>"},{"location":"superquickstart/#feature-based-molecular-networking","title":"Feature Based Molecular Networking","text":"<p>Please navigate to the super quickstart page to begin with Feature Based Molecular Networking!</p> <p>The standard Feature Based Molecular Networking analysis start page can also be started here: Feature Based Molecular Networking </p> <p>Feature Based Molecular Networking Documentation </p>"},{"location":"superquickstart/#selecting-files_1","title":"Selecting Files","text":"<p>Simply drag and drop the files generated by your feature detection and alignment tool:</p> <ol> <li>the feature quantification table (.CSV file, or mzTab-M).</li> <li>the MS/MS spectral summary (MGF file or MSP file (Progenesis QI), or mzML (for mzTab-M).</li> <li>(Optional) Sample metadata file - The format can be found here</li> <li>(Optional) Additional features edge generated externally - See the documentation.</li> </ol>"},{"location":"superquickstart/#analyze-your-files","title":"Analyze your Files","text":"<p>Once files have been uploaded, enter your email and click \"Analyze Uploaded Files with GNPS Molecular Networking\".</p> <p></p> <p>This will bring you to a GNPS workflow status page. If you entered your email, you will receive a notification once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this will be the only way for you to find the analysis again. If you entered your GNPS log-in credentials then the job will be saved to your account.</p>"},{"location":"superquickstart/#results_1","title":"Results","text":"<p>To understand the results, please refer to the feature based molecular networking page.</p>"},{"location":"superquickstart/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (67.71%), lfnothias (6.25%), Ivan Protsyuk (3.12%), jgauglitz (20.83%), Mabel Gonzalez (2.08%)</p>"},{"location":"tag_info/","title":"GNPS Tag Contribution and Supported Analyses","text":"<p>Warning<p>Pardon our dust as this is documentation is a work in progress! We also welcome your contributions. </p> </p>"},{"location":"tag_info/#what-are-tags","title":"\"What are tags?\"","text":"<p>Tags are essentially metadata about chemicals. We utilize a set of ontologies and controlled vocabulary (the same shared with ReDU). Tags reflect high-level information about your data! The tagging system in GNPS aims to generate a high-level summary of the chemical annotations provided by spectral library matching (i.e. matching of acquired MS/MS product ion scans with reference MS/MS spectra). Our goal is to reduce the amount of expert knowledge and the amount of trivial research needed to provide initial context to chemicals annotated from data run through the GNPS platform.</p> <p>Supported Workflows in GNPS</p> <ol> <li>Molecular Networking (classic)</li> <li>Library Search</li> <li>Feature-based Molecular Networking</li> </ol>"},{"location":"tag_info/#how-to-contribute-to-gnps-tags","title":"How to Contribute to GNPS Tags","text":"<p>Required Items<ol> <li>Completed Task From a Supported GNPS Workflow.<ul> <li>Please sign-up at the GNPS homepage - link here</li> </ul> </li> <li>Completed GNPS Tag Template<ul> <li>GNPS Tag Template - link here.</li> <li>GNPS Tag Template for Large-scale Projects (&gt;2000 chemicals annotated) - link here.</li> </ul> </li> <li>Email of Completed GNPS Tag Template to GNPS Admin</li> </ol> </p>"},{"location":"tag_info/#detailed-step-by-step-instructions-for-completion-of-the-gnps-tag-template","title":"Detailed Step-by-step Instructions for Completion of the GNPS Tag Template","text":""},{"location":"tag_info/#1-navigate-to-the-gnps-tag-template-and-make-a-personal-copy","title":"1. Navigate to the GNPS Tag Template and Make a Personal Copy","text":"<ul> <li>GNPS Tag Template - link here.</li> <li>Save a copy of the sample information template by going to \"File - Make a copy\" into a personal google drive</li> </ul> how to make a copy of the GNPS Tag Template - .gif <p>Info<p>For projects with &gt;2000 annotations, please use the large-scale project version of the GNPS tag template - link here and complete it as described above.</p> </p>"},{"location":"tag_info/#2-obtain-the-annotation-information-from-the-supported-gnps-workflows","title":"2. Obtain the Annotation Information From the Supported GNPS Workflows","text":"<ul> <li>Download the annotation information from GNPS and open it in a spreadsheet program.</li> </ul> <p>!!!+ info \"where you can find the information to download\"     - Molecular Networking (Classic)         - Download the \"View all library hits\" table from the GNPS results page.                      - Library Search         - Download the \"View all spectra hits\" table from the GNPS results page.                      - Feature-based Molecular Networking         - Download the \"View all library hits\" table from the GNPS results page.                 </p>"},{"location":"tag_info/#3-setting-up-the-gnps-tag-template-with-your-annotation-information","title":"3. Setting up the GNPS Tag Template with Your Annotation Information","text":"<ul> <li>Copy and paste the entire table contents (including the header) into the \"Input_GNPS_LibraryHitsTable\" tab in the GNPS Tag Template.</li> <li>If done correctly, information relevant to tagging should appear in the \"GNPS Tag - Batch Tag Template\" tab in columns A-D.</li> </ul> <p>Info</p> <ul> <li>All columns in light grey are for reference only and should not be modified.</li> </ul> how to copy and paste into the template <p></p>"},{"location":"tag_info/#4-manual-completion-of-the-gnps-tag-template","title":"4. Manual completion of the GNPS Tag Template","text":""},{"location":"tag_info/#41-open-the-gnps-tag-batch-tag-template-tab-and-check-the-tag_status1-and-action1-columns","title":"4.1. Open the \"GNPS Tag - Batch Tag Template\" tab and check the \"Tag_Status1\" and \"Action1\" columns.","text":"<ul> <li>review the information in the \"Tag_Status1\" column and follow the next action indicated in \"Action1\" column.</li> </ul> Tag_Status1 Action1 Description of what to do Tags Present Check Current Tags and Add if Incomplete Check the Tags in the \"Current_Tags\", \"Current_NCBITaxonomy\", \"Current_UBERON\", and \"Current_Lifestyle\" columns. If you believe that the information is incomplete, then please add the tags you believe are missing to the \"Add_Tag 1-3\", \"Contribute-NCBITaxonomy 1-3\", \"Contribute-UBERONTag 1-3\", and \"Contribute-LifestyleTag 1-3\". Tags Missing Add Tags Please add the tags you believe are missing to the \"Add_Tag 1-3\", \"Contribute-NCBITaxonomy 1-3\", \"Contribute-UBERONTag 1-3\", and \"Contribute-LifestyleTag 1-3\". InChIKey-Planar Missing Add_InChIKey-Planar or Cannot_Add_InCHIKey-Planar then Check Action2 Please add the planar InChIKey to the \"Add_InCHIKey-Planar\" column - details on planar InChIKeys - or if an InChIKey cannot be created, then add \"No InChIKey-Planar\" using the dropdown in the \"Cannot_Add_InChIKey-Planar\" column. Check Tag_Status2 and Action2 <p>Info</p> <ul> <li>columns that should be ignored are colored grey.</li> <li>a maximum of 3 tags per category can be added.</li> <li>if additional terms are required, please submit an issue on GitHub - link here.</li> </ul> evalute action1 <p></p>"},{"location":"tag_info/#42-if-instructed-to-review-check-tag_status2-and-action2-in-the-previous-step","title":"4.2. IF instructed to review Check Tag_Status2 and Action2 in the previous step.","text":"<ul> <li>review the information and the following actions.</li> </ul> Tag_Status2 Action2 Description of what to do Tags Present Check Current Tags and Add if Incomplete Check the Tags in the \"Current_Tags\", \"Current_NCBITaxonomy\", \"Current_UBERON\", and \"Current_Lifestyle\" columns. If you believe that the information is incomplete, then please add the tags you believe are missing to the \"Add_Tag 1-3\", \"Contribute-NCBITaxonomy 1-3\", \"Contribute-UBERONTag 1-3\", and \"Contribute-LifestyleTag 1-3\". Tags Missing Add Tags Please add the tags you believe are missing to the \"Add_Tag 1-3\", \"Contribute-NCBITaxonomy 1-3\", \"Contribute-UBERONTag 1-3\", and \"Contribute-LifestyleTag 1-3\". <p>Warning</p> <ul> <li>make sure to include either a value in the \"Add_InCHIKey-Planar\" column or indicate that an InChIKey cannot be created in the \"No InChIKey-Planar\". </li> </ul> evalute action2 <p></p>"},{"location":"tag_info/#43-download-the-gnps-tag-batch-tag-template","title":"4.3 Download the \"GNPS Tag - Batch Tag Template\"","text":"<ul> <li>Download the \"GNPS Tag - Batch Tag Template\" as a .tsv</li> <li>Email file to admins ... (add contact info here).</li> </ul> how to download <p>Success</p> <p>Congrats and thank you for contributing tags to GNPS! This is a community effort and every contribution helps! </p>"},{"location":"tag_info/#current-supported-analyses","title":"Current Supported Analyses","text":"<ul> <li>under construction</li> </ul> <p>Data and Code Availability</p> <ul> <li>under construction</li> </ul> <p>Recommended Citation</p> <ul> <li>under construction</li> </ul> <p>Issues and Suggestions</p> <ul> <li>New Terms, Corrections, Suggestions = GitHub - link here</li> <li>The use of the GNPS forum is encouraged.</li> </ul>"},{"location":"tag_info/#page-contributions","title":"Page Contributions","text":"<p>Ming Wang (8.0%), alan-jarmusch (92.0%)</p>"},{"location":"toolindex/","title":"GNPS Tool Index","text":"<p>This is a global tool index for GNPS. Throughout this documentation we have very detailed information for how to use way more tools than we though we'd have, but its a good problem to have!</p> <p>However, we recognize it might be difficult for people to simply see what all is availble in GNPS as tool and web services. This table is always evolving and hope to make it easier for people to navigate. </p> <p>Please help us fill in more completely!</p>"},{"location":"toolindex/#gnps-workflows","title":"GNPS Workflows","text":"Category Workflow GNPS Link Beta Link Documentation Source Code Citation Networking Molecular Networking Workflow Workflow Documentation Github Citation Networking Feature-Based Molecular Networking Workflow Workflow Documentation Networking Merge Polarity Networks Workflow Workflow Documentation Networking MS2LDA Motif DB Workflow Workflow Documentation Github-ms2lda, Github-ms2ldaviz Citation-ms2lda, Citation-ms2ldaviz Networking MolNetEnhancer / MetaboDistTree Workflow Workflow Documentation Github-MolNetEnhancer, Github-MetaboDistTrees Citation Data Analysis MASST Workflow Workflow Documentation --- Citation Data Analysis MASST by USI Workflow Workflow Documentation --- Citation Data Analysis Microbiome-Metabolomics Association - mmvec Workflow - Inactive Workflow --- Annotation Large Scale Library Search Workflow Workflow --- Annotation Library Search/Molecular Networking GC Workflow Workflow Annotation Network Annotation Propogation (NAP) Workflow --- Documentation GitHub Citation Annotation Qemistree Workflow Workflow Annotation Dereplicator Workflow --- Documentation GitHub Citation Annotation Dereplicator+ Workflow --- Documentation GitHub Citation Annotation MetaMiner Workflow --- Documentation GitHub Citation Annotation MolDiscovery Workflow --- Documentation GitHub Citation Annotation Sirius --- Workflow Data Processing MSHub-GC Deconvolution Workflow Workflow Data Processing OpenMS Feature Detector for FBMN - Future Feature Workflow Workflow --- Data Processing LC - MZMine2 Workflow Workflow Data Processing MSMS-Chooser Workflow Workflow Documentation Github Citation Data Processing ChemProp --- Workflow Documentation --- --- Data Processing Spec2vec Workflow Workflow --- --- --- Data Processing MAGI 2 --- Workflow --- --- --- Data Processing Falcon Clustering Workflow Workflow --- --- --- Data Processing NP Classifier Batch Workflow Workflow --- --- --- Data Processing USI to MGF Conversion Workflow Workflow --- --- --- Data Processing Spectral Library Conversion --- Workflow --- --- --- Data Processing Retention Time Modeling --- Workflow --- --- ---"},{"location":"toolindex/#gnps-web-tools","title":"GNPS Web Tools","text":"<p>These are web tools that is run by the GNPS team and provides complementary funcationality to GNPS. </p> Tool Documentation Source Code Citation ReDU Documentation GitHub Citation GNPS Structure Server --- --- GNPS Quickstart/Batch Validator Documentation --- GNPS Cytoscape Documentation --- GNPS MASST Documentation TODO Citation Metabolomics Spectrum Resolver Documentation GitHub Citation GNPS2 Networking URL Formatter --- --- GNPS Mass Spec Calculator --- --- GNPS Usage Stats Dashboard --- GitHub --- GNPS2 Classical Networking Upset Plot Dashboard --- GitHub --- GNPS FBMN Upset Plot Dashboard --- --- NP Classifier --- GitHub --- GNPS LCMS Explorer Documentation --- GNPS Mass Defect Dashboard (Beta) --- --- GNPS Plotter Dashboard (Beta) --- --- GNPS Dataset File Explorer (Beta) --- --- GNPS Public Libraries Download List --- --- GNPS Public Data Index --- --- GNPS Spectral Similarity Hub --- --- Nature Journals Author Quick Entry --- --- Pubmed Co-Authors List --- ---"},{"location":"toolindex/#gnps-deprecated-web-tools","title":"GNPS Deprecated Web Tools","text":"Tool Documentation Source Code Citation GNPS Library Dash Explorer --- --- GNPS Task Esquisse Server (Beta) --- --- GNPS Result View Esquisse Server (Super Beta) --- --- GNPS Text Esquisse Server (Super Beta) --- --- Qemistree Dashboard Documentation --- ---"},{"location":"toolindex/#gnps-jupyter-notebooks","title":"GNPS Jupyter Notebooks","text":"<p>These are Jupyter Notebooks that interact with GNPS web resources and do further processing. They serve as a prototype for future built-in infrastructure, check it out!</p> Tool Documentation Source Code Binder Launch GNPS MASST Post Processing --- GitHub GNPS Bioactive Molecular Networks --- GitHub"},{"location":"toolindex/#community-tools-gnps-interfaces-with","title":"Community Tools GNPS Interfaces with","text":"Tool Publication MS2LDA.org Citation NPAtlas Citation MIBiG Citation ClassyFire Citation SMART NMR Citation MassBank Citation Cytoscape Citation ProteoWizard Citation SNAP-MS Citation and Documentation"},{"location":"toolindex/#gnps-tools-interoperability-graph","title":"GNPS Tools Interoperability Graph","text":"graph LR     InputGCData(GC Mass Spectrometry Data) --&gt; MSHUB[GNPS - MSHub Devonvolution]     Massive --&gt; InputGCData(GC Mass Spectrometry Data)     Metabolights --&gt; InputGCData(GC Mass Spectrometry Data)     MSHUB --&gt; GCLibrary[GNPS - GC Library Search and Networking]     GCLibrary --&gt; Qiime2PCOA     InputLCData(LC MS/MS Vendor Mass Spectrometry Data) --&gt; MSConvert[MSConvert]     InputLCData --&gt; Quickstart[GNPS - Quickstart]     Quickstart --&gt; OpenFormats(Open mzML Format)     MSConvert --&gt; OpenFormats     Massive(MassIVE Public Data) --&gt; InputLCData     Metabolights(Metabolights Public Data) --&gt; InputLCData     PrivateData(Private MS Data) --&gt; InputLCData     PrivateData --&gt; InputGCData     OpenFormats --&gt; GNPSDashboard     Massive --&gt; GNPSDashboard     Metabolights --&gt; GNPSDashboard     Massive --&gt; FBMN     Massive --&gt; ClassicalNetworking     OpenFormats --&gt; Dereplicator[GNPS - Dereplicator]     OpenFormats --&gt; Dereplicator+[GNPS - Dereplicator+]     OpenFormats --&gt; LibrarySearch(GNPS - Spectral Library Search)     OpenFormats --&gt; MSMS-Chooser(GNPS - MSMS-Chooser) --&gt; LibraryBatch[GNPS - Batch Library Addition]      LibraryBatch --&gt; GNPSLibrary[GNPS - Public Spectral Librarires]     OpenFormats --&gt; LibrarySingle[GNPS - Single Library Addition] --&gt; GNPSLibrary     OpenFormats --&gt; GNPSLibrary(GNPS - Public Spectral Libraries)     OpenFormats --&gt; LibraryBatch --&gt; GNPSLibrary     OpenFormats --&gt; ClassicalNetworking[GNPS - Classical Molecular Networking]     OpenFormats --&gt; MZmine2[MZmine2 Feature Finding] --&gt; FBMN     OpenFormats --&gt; OpenMS[OpenMS Feature Finding] --&gt; FBMN     OpenFormats --&gt; XCMS[XCMS Feature Finding] --&gt; FBMN     OpenFormats --&gt; MSDial[MSDial Feature Finding] --&gt; FBMN     OpenFormats --&gt; GNPSMZmine2[GNPS - MZmine2 Feature Finding] --&gt; FBMN     MZmine2 --&gt; FBMN[GNPS - Feature Based Molecular Networking]     ClassicalNetworking --&gt; MS2LDA[GNPS - MS2LDA Substructure Discovery]     MS2LDA --&gt; MS2LDAORG[MS2LDA.org Motif Exploration]     ClassicalNetworking --&gt; Qiime2PCOA[Qiime2 PCoA]     ClassicalNetworking --&gt; Cytoscape[Cytoscape Visualization]     FBMN --&gt; MS2LDA     FBMN --&gt; Cytoscape     FBMN --&gt; Qemistree     FBMN --&gt; Sirius     FBMN  --&gt; NAP     FBMN --&gt; Qiime2PCOA     ClassicalNetworking  --&gt; NAP[GNPS - Network Annotation Propogation]     ClassicalNetworking --&gt; MolNetEnhancer --&gt; Cytoscape     FBMN --&gt; MolNetEnhancer[GNPS - MolNetEnhancer/MetaboDistTree]     FBMN --&gt; MergePolarity     FBMN --&gt; Esquisse[GNPS - Interactive Plotting with Esquisse]     ClassicalNetworking --&gt; MergePolarity[GNPS - Merge Network Polarity]     Qemistree --&gt; QemistreeDashboard(GNPS - Qemistree Interactive Dashboard)     GNPSDashboard --&gt; GNPSMZmine2     GNPSDashboard --&gt; ClassicalNetworking     FBMN --&gt; GNPSDashboard     ClassicalNetworking --&gt; GNPSDashboard     MSHUB --&gt; GNPSDashboard     GCLibrary --&gt; GNPSDashboard     Quickstart --&gt; GNPSDashboard     GNPSDashboard --&gt; MetabolomicsUSI     GNPSLibrary --&gt; GNPSLibraryExporter     FBMN --&gt; Dereplicator[GNPS - Dereplicator]     FBMN --&gt; Dereplicator+[GNPS - Dereplicator+]      FBMN --&gt; MASST     ClassicalNetworking --&gt; MASST     GNPSDashboard --&gt; MASST     OpenFormats --&gt; MASST      FBMN --&gt; ChemProp      OpenFormats --&gt; Sirius      style GNPSDashboard fill:pink     style MetabolomicsUSI fill:pink     style MS2LDAORG fill:pink     style Qiime2PCOA fill:pink     style QemistreeDashboard fill:pink     style Esquisse fill:pink     style Cytoscape fill:pink     style GNPSLibraryExporter fill:pink      style InputGCData fill:lightblue     style InputLCData fill:lightblue     style OpenFormats fill:lightblue      style Massive fill:lightgrey     style Metabolights fill:lightgrey     style PrivateData fill:lightgrey"},{"location":"toolindex/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (91.18%), alan-jarmusch (5.88%), liucaomics (1.96%), Madeleine Ernst (0.98%)</p>"},{"location":"troubleshooting/","title":"Overview","text":"<p>This section addresses some common issues with the analysis workflows at GNPS. If you run into any of these common issues, hopefully this page will give you actionable steps to address them. If this page cannot help you, please refer to the forum to help answer your questions.</p>"},{"location":"troubleshooting/#gnps-jobs","title":"GNPS Jobs","text":"There was an error transferring this workflow's input files to computation storage <p>This error generally means there was a server error and not a user one. Please try re-running. If repeatedly it errors out, please send an email to system administrators (ccms-web@cs.ucsd.edu). </p>"},{"location":"troubleshooting/#molecular-networking","title":"Molecular Networking","text":""},{"location":"troubleshooting/#failed-molecular-networking-job","title":"Failed Molecular Networking Job","text":"Empty MS/MS <p>This means that your input data has no MS/MS spectra. This could mean one of several things</p> <ol> <li>The file format input is incorrect. Please make sure it is a supported file format for GNPS.</li> <li>The mass spectrometry files do not contain MS/MS spectra. These files cannot be analyzed by GNPS.</li> <li>The filtering criteria are too aggressive. Please use an appropriate preset for your data.</li> </ol> spectral library search exceeded memory <p>This means that the spectral library search step used too much memory and had to be terminated. This is likely caused by changing the set of spectral libraries used in search. It is not recommended to change the set of libraries included unless you are an advanced users. Please remove all libraries except for the default \"speclibs\" and rerun.</p> Missing filename in Metadata <p>The metadata file included for networking is formatted incorrectly. Please refer to metadata formatting to correct this.</p>"},{"location":"troubleshooting/#results-incorrect","title":"Results Incorrect","text":"No attributes or groups in output <p>Verify that file names match between metadata and data.</p> <p>Make sure the metadata file includes the appropriate columns and attributes are prefixed with ATTRIBUTE_ and that the metadata file is a tab separated text file.</p> <p>Avoid using special characters in metadata or file names.</p>"},{"location":"troubleshooting/#library-search-dereplication","title":"Library Search (Dereplication)","text":"No Results <ol> <li>Check that the parameters are correct</li> <li>Make sure you have the right format for input</li> <li>Make sure you have MS/MS spectra in your data, this is summarized in the file summary link. </li> </ol>"},{"location":"troubleshooting/#masst-single-spectrum-search","title":"MASST (Single Spectrum Search)","text":"Error: m/z and intensity not separated properly <p>A common error is missing intensities for masses. Simply masses are insufficient, intensities are also required.</p>"},{"location":"troubleshooting/#qiime2-errors","title":"Qiime2 errors","text":"Page not found output in qiime2 view for Emperor plots <p>You could have:</p> <ol> <li>Duplicate file names</li> <li>A column called \u201csample_name\u201d in your metadata, this column should be removed. </li> <li>Your filenames in the metadata do not align with the input data</li> <li>In cases of feature-based molecular networking, there can be negative values in quant table somehow. These cause error while calculating sample distances.</li> </ol>"},{"location":"troubleshooting/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (91.67%), KyobinKang (3.33%), Laura-Isobel McCall (5.0%)</p>"},{"location":"user/","title":"User Page","text":"<p>At GNPS, since there is so much power given to the user to affect the system, it is necessary for users to keep track of their own account. Specifically, in the user summary page, users can view the datasets that they have uploaded, browse the datasets they have subscribed to, spectra they have contributed to the GNPS spectral libraries, and the spectra that have been contributed to GNPS challenge spectra.</p>"},{"location":"user/#my-datasets","title":"My Datasets","text":"<p>Users are able to see all their own datasets, either public or private in a view like this:</p> <p></p> <p>From here users can view their private datasets and make them public if they wish or simply browse their own datasets. Additionally, users can share their datasets with the world via Twitter and Facebook.</p>"},{"location":"user/#my-subscriptions","title":"My Subscriptions","text":"<p>Users can see all datasets they are subscribed to</p> <p></p>"},{"location":"user/#my-library-spectra","title":"My Library Spectra","text":"<p>These are all the annotated MS/MS spectra you have contributed to the community GNPS library.</p> <p></p>"},{"location":"user/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"usi/","title":"Metabolomics Spectrum Resolver","text":"<p>You can find the Metabolomics Spectrum Resolver at https://metabolomics-usi.ucsd.edu/.</p>"},{"location":"usi/#universally-resolve-msms-data","title":"Universally Resolve MS/MS Data","text":"<p>This tool is meant to be able to show USIs from various sources. It will achieve the following goals:</p> <ol> <li>Enable creation of embeddable images in publications that will link out to viewable/interactable spectrum plots.</li> <li>3rd party embedding for visualization of spectra that exist in repositories (e.g. MassIVE, PRIDE, PeptideAtlas).</li> <li>3rd party embedding of QR code.</li> </ol>"},{"location":"usi/#data-sources","title":"Data Sources","text":""},{"location":"usi/#universal-spectrum-identifier","title":"Universal Spectrum Identifier","text":"<p>The following are supported</p> <ol> <li>GNPS Molecular Networking Clustered Spectra</li> <li>GNPS Spectral Libraries</li> <li>ProteoXchange Repository Data</li> <li>MS2LDA Reference Motifs</li> <li>MassBank Library Spectra</li> <li>MetaboLights Dataset Spectra</li> <li>Metabolomics Workbench Dataset Spectra</li> </ol> <p>Full details on formats of the identifiers can be found at Link. </p>"},{"location":"usi/#customization-of-visualization","title":"Customization of Visualization","text":"<ul> <li><code>mz_min</code>: Minimum m/z value.</li> <li><code>mz_max</code>: Maximum m/z value.</li> <li><code>annotate_peaks</code>: Defines which peaks in which spectrum (top or bottom) will be annotated. The parameters is a list of lists of m/z values of the peaks to be annotated. For a single spectrum plot it should be a single nested list (i.e. <code>[[m1, m2]]</code>), for a mirror plot it should be two nested lists for the top spectrum and the bottom spectrum (i.e. <code>[[s1m1,s1m2],[s2m1,s2m2]]</code>).</li> </ul>"},{"location":"usi/#web-api-endpoints","title":"Web API Endpoints","text":"<ol> <li>/png/</li> <li>/svg/</li> <li>/json/</li> <li>/api/proxi/v0.1/spectra</li> <li>/csv/</li> <li>/qrcode/</li> <li>/spectrum/</li> <li>/mirror/</li> <li>/svg/mirror</li> <li>/png/mirror</li> </ol>"},{"location":"usi/#source-code","title":"Source Code","text":"<p>Checkout the source code and contribute at GitHub.</p>"},{"location":"usi/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang</p>"},{"location":"workshops/","title":"GNPS Workshops/Training","text":""},{"location":"workshops/#upcoming-workshops-and-events","title":"Upcoming Workshops and Events","text":"Venue Description Dates Speakers/Instructors Material <p>If you would like to host a GNPS workshop together with the GNPS team, please reach out to Ming to organize the logistics!</p>"},{"location":"workshops/#host-your-own","title":"Host Your Own","text":"<p>If you would like to organize your own GNPS workshop to train new users, try getting started with our standard training modules. If you would like more advanced materials, please reach out to Ming and we'd be happy to help you. For promotional materials check out our logo page.</p>"},{"location":"workshops/#gnps-training-tutorial-modules","title":"GNPS Training Tutorial Modules","text":"<p>We have standard training tutorial modules on GNPS. These are available fully in GitHub. </p> <p>Here is a table to briefly browse them</p> Module Description Link Module 1 Classical Molecular Networking Link Module 2 Molecular Molecular Theory Link Module 3 Exploring Molecular Networks Link Module 4 Cytoscape Networks Link Module 5 Feature Based  Molecular Networking Link Module 6 MASST Link Module 7 Qiime2 Analysis Link Module 8 ReDU Link Module 10 In Silico Analysis Link Module 11 MolNetEnhancer Link Module 12 MS2LDA Link Module 13 Adding Reference Library Spectra Link Module 15 Merge Network Polarity Link Module 16 Metabolomics Spectrum Resolver Link Module 17 ChemProp Link Module 18 LCMS Dashboard Link"},{"location":"workshops/#previous-workshops","title":"Previous Workshops","text":"Venue Description Dates Speakers/Instructors Material Estimated Attendance Tuebingen, Germany International Summer School on Non-Targeted Metabolomics 2022 2022-08-22 to 26 Organizers of the Summer School Video 75+online CMFI Mass Spec Seminar Zoom Video Series 2022-02 Daniel Petras organized series Video 20-100+ CMFI Mass Spec Seminar Molecular Networking 2022-02-15 Pieter Dorrestein and Daniel Petras Video 35 Nature Microbiome 2021 GNPS Workshop Food, Diet, and Microbiome 2021-11-16 Pieter Dorrestein and Mingxun Wang Material Video 300+ UNIFAL-MG Brazil 2021 Virtual class and hands-on: Applications of Mass Spectrometry in Pharmacotherapeutics development - MS Fundamentals to GNPS 2021-11-05 Mauricio Caraballo Material 25 MANA 2021 GNPS Workshop - Networking, Dashboard, MASST 2021-10-18 Mingxun Wang and Pieter Dorrestein Material Video 100 Virtual Classroom Exploratory Data Analysis with brief primers on MASST, Library Matching, Molecular Networking, &amp; GNPS Dashboard 2021-05-27 &amp; 2021-05-12 Teaching Practical Guides as part of course No URL available 25 Zoom! GNPS Dashboard - Overview 5/12/2021 9AM PST Mingxun Wang and Daniel Petras Material Video 140 Zoom! Basic principles of metabolomics-based MS data and GNPS tools for data analysis in Portuguese - Part 1 04/28/2020 9AM PST Anelize Bauermeister, Tiago Le\u00e3o, Naydja M. Maimone, Danielle R. P. Barros Material Video 450 Zoom! Basic principles of metabolomics-based MS data and GNPS tools for data analysis in Portuguese - Part 2 04/29/2020 9AM PST Anelize Bauermeister, Tiago Le\u00e3o, Naydja M. Maimone, Danielle R. P. Barros, Ricardo Silva Material Video 320 Zoom! GNPS Feature Based Molecular Networking in Portuguese - Part 1 12/09/2020 9AM PST Anelize Bauermeister, Carlismari Grundmann, Helena Mannochio, Juliano Amaral, Tiago Le\u00e3o Material 200 Zoom! GNPS Feature Based Molecular Networking in Portuguese - Part 2 12/10/2020 9AM PST Anelize Bauermeister, Carlismari Grundmann, Helena Mannochio, Juliano Amaral, Tiago Le\u00e3o Material 200 Zoom! SIO262 Molecular Networking Intro 11/25/2020 15:30 PM PST Daniel Petras, Mingxun Wang, Video 20 Zoom! GNPS LCMS Browser Workshop 10/14/2020 9AM PST Mingxun Wang, Daniel Petras Material 20 Zoom! 1st GNPS User Meeting 8/26/2020 9AM PST GNPS Community Program Video 300 Zoom! GNPS GC - Part 2 7/29/2020 9AM PST Alexander Aksenov, Mabel Gonzalez Material Video 20 Zoom! GNPS Classical Molecular Networking in Portuguese 7/22/2020 9AM PST Anelize Bauermeister, Helena Mannochio Material Video 450 Zoom! GNPS ChemDir - Chemical Directionality for Longitudinal Molecular Networking 7/15/2020 9AM PST Daniel Petras, Mauricio Caraballo, Mingxun Wang Material 40 Zoom! GNPS Feature Based Molecular Networking in Espanol - Part 1 7/8/2020 9AM PST Mauricio Caraballo, Daniel Petras Material Video 40 Zoom! GNPS Feature Based Molecular Networking in Espanol - Part 2 7/9/2020 9AM PST Mauricio Caraballo, Daniel Petras Material Video 50 Zoom! Metabolomics Spectrum Resolver - Unifing spectrum rendering and customization 7/1/2020 9AM PST Mingxun Wang , Wout Bittremieux Materials Video 35 Zoom! GNPS - MS2LDA 6/24/2020 9AM PST Justin van der Hooft, Simon Rogers, Joe Wandy, Madeleine Ernst, Mingxun Wang Material Video 40 Zoom! GNPS Classical Molecular Networking in Espa\u00f1ol 6/17/2020 9AM PST Mauricio Caraballo, Mabel Gonzalez, Daniel Petras Material Video 60 Zoom! GNPS Merge Polarity Networks - Merging Networks from Positive and Negative Mode 6/11/2020 9AM PST Mingxun Wang, Allegra Aron Material Video 30 Zoom! GNPS MolNetEnhancer 6/3/2020 9AM PST Madeleine Ernst, Mauricio Caraballo, Mingxun Wang Material Video 47 Zoom! GC-MS deconvolution, library search and molecular networking 5/27/2020 9AM PST Alexander Aksenov, Mabel Gonzalez Material Video 44 YouTube Utilizing GNPS and MS2LDA for some molecular networking discovery 5/21/2020 6AM PST LiveStream --- Zoom! GNPS Ion-Identity Networking, Native Metabolomics 5/20/2020 9AM PST Robin Schmid, Daniel Petras, Allegra Aron Material Video 65 Zoom! GNPS Feature Based Molecular Networking (Job Submssions and Exploration) 5/14/2020 9AM PST Louis-Felix Nothias, Daniel Petras, Allegra Aron Material 103 Zoom! GNPS Feature Based Molecular Networking (MZmine2) 5/13/2020 9AM PST Daniel Petras, Allegra Aron Material Video 147 Zoom! GNPS ReDU 5/6/2020 9AM PST Alan Jarmusch, Mingxun Wang, Chrissy Aceves, Julia Gauglitz Material Video 40 Zoom! GNPS Classical Molecular Networking 4/29/2020 9AM PST Emily Gentry, Mingxun Wang, Morgan Panitchpakdi Material Video 60 Zoom! GNPS MASST 4/22/2020 9AM PST Mingxun Wang, Alan Jarmusch, Morgan Panitchpakdi, Emily Gentry Material Video 54 Zoom! GNPS Library Workshop/Hackathon April 8 9AM PST Mingxun Wang, Alan Jarmusch, Morgan Panitchpakdi, Emily Gentry Material Video 60 UFMT Brazil VI Workshop Etnofarmacologia - Use of the GNPS platform Nov 18 - 28 2019 Mauricio Caraballo Download 22 MIT Molecular Networking with MZmine and GNPS Dec 5 2019 Tomas Pluska, Daniel Petras, Robin Schmid ----- ASP 2019 GNPS Beginner/Advanced Workshop (3h) July 2019 Mingxun Wang, Pieter Dorrestein, Mauricio Caraballo Download 60 RFMF2019, France GNPS Beginner Workshop (4h) May 20 TBA Metabolomics 2019 GNPS Beginner Workshop (2h) June 22 Mingxun Wang, Madeleine Ernst, Zdenek Kamenik, Justin van der Hooft, Louis-Felix Nothias Download Prague GNPS Workshop (4h) June 28 Mingxun Wang, Louis-Felix Nothias, Robin Schmid, Justin van der Hooft TBA 20 NPS2019 - Symposia of Natural Products Natural Product Dereplication using GNPS Feb 5, 2019 Madeleine Ernst, Daniel Petras, Mauricio Caraballo, Pieter Dorrestein Coming Soon! CCMS School - Natural Product Training GNPS, Molecular Networking, Library Search, Quantitative Analysis, NP Database Search, De novo cyclopeptide sequencing Dec 12/13 2018 Louis-Felix Nothias, Daniel Petras Download EMSC Workshop 2018 This short course is aimed at explaining how to use the METASPACE and GNPS platforms for large scale data analysis in mass spectrometry (MS) based metabolomics experiments March 11, 2018 Daniel Petras, Pieter Dorrestein Download GNPS workshop in Grahamstown, South Africa (Rhodes University) GNPS introduction with Molecular Networking November 14, 2018 Emily Gentry, Allegra Aron, Daniel Petras N/A ASP 2018 GNPS Introduction, Molecular Networking - Natural Product Discovery in bacterial extraction, `ili 3D cartography, MASST - leveraging public datasets July 2018 Mingxun Wang, Pieter Dorrestein, Mauricio Caraballo, Kyo Bin Kang Download Metabolomics 2018 GNPS Introduction, Molecular Networking - Food Analysis, `ili 3D cartography of plants, MS2LDA July 2018 Coming Soon"},{"location":"workshops/#community-tutorials","title":"Community Tutorials","text":"Description Link MS-Dial and GNPS in Portuguese YouTube"},{"location":"workshops/#page-contributors","title":"Page Contributors","text":"<p>Ming Wang (61.0%), Daniel Petras (30.0%), alan-jarmusch (1.0%), Justin van der Hooft (1.0%), amcaraballor (2.0%), abauermeister (2.0%), Daniel Petras (1.0%), Robin Schmid (2.0%)</p>"},{"location":"massspecbackground/identification/","title":"Overview","text":"<p>Pardon our dust, this page is still under construction</p>"},{"location":"massspecbackground/networkingtheory/","title":"Molecular Networking","text":""},{"location":"massspecbackground/networkingtheory/#molecular-networking-theory","title":"Molecular Networking Theory","text":"<p>While there are many publications out there giving algorithmic and intuition into molecular networking, we attempt a cliff notes version here.</p>"},{"location":"massspecbackground/networkingtheory/#spectral-similarity-related-to-molecular-structure-similarity","title":"Spectral Similarity Related to Molecular Structure Similarity","text":"<p>A key concept in tandem mass spectrometry is that repeated MS/MS acquisitions of a molecule under the same experimental conditions (e.g. same instrument, collision energy, abundance, charge state) will yield highly similar MS/MS spectra. That is, fragmentation of molecules is consistent. This enables the identification of MS/MS spectra to libraries of reference compounds.</p> <p>Extending this concept, we have observed that structurally related molecules also exhibit similar fragmentation, with some caveats. Intuitively, two molecules that differ by the addition of a single chemical moiety, which does not contribute to a significant difference in molecule mass and not drastically change the bond energies of the molecule (e.g. Oxidation, methylation, glycosylation), will not drastically perturb the gas phase chemistry of fragmentation.  </p> <p>Given that relative bond strengths between the two molecules do not drastically differ, the same bonds will undergo similar fragmentation within the collision cell of the mass spectrometer. The resulting corresponding product ions in the MS/MS spectra from the two molecules will either include the additional chemical moiety or will not. In cases fragments do not, the chemical moiety could either have</p> <ol> <li>Not been part of the product ion substructure</li> <li>Cleaved off prior to product ion formation</li> </ol> <p>Since corresponding product ions between structurally similar molecules can either have moiety or not, the product ions can either</p> <ol> <li>Appear at the exact same mass for both molecules</li> <li>Appear shifted by the mass of the chemical moiety</li> </ol> <p></p> <p>Watrous et al. PNAS</p> <p>We consider both of these possibilities for each and every peak between two MS/MS spectra and explore how we do that below.</p>"},{"location":"massspecbackground/networkingtheory/#spectrum-alignment","title":"Spectrum Alignment","text":"<p>We will use a toy example here to demonstrate intuitively how we are able to consider an alignment between two MS/MS spectra.</p> <p>Given two molecules that differ by a single chemical moiety that each produce fragmentation as shown</p> <p></p> <p>We can consider that each peak from molecule A, could align at the same mass in molecule B, or at an offset of Mass(Delta). One possible alignment is all peaks in A, align at the same mass</p> <p></p> <p>Another, where the first peak aligns at the same mass, the second at an offset</p> <p></p> <p>Third, where the first peak aligns at an offset, and the second aligns at the same mass</p> <p></p> <p>Finally, where both peaks align at an offset</p> <p></p> <p>All of these potential alignments can be explored and the best scoring alignment is determined between the two MS/MS spectra and is called the alignment score.</p> <p>The total number of potential alignments is exponential (2 ^ N, where N is the number of peaks) and is computationally expensive. GNPS has implemented algorithms that can efficiently approximate this alignment.</p>"},{"location":"massspecbackground/networkingtheory/#alignment-of-entire-dataset","title":"Alignment of Entire Dataset","text":"<p>So far we've investigated how to align one MS/MS spectrum to another, but have not created molecular networks across an entire dataset of MS/MS spectra. Since we do not know a priori, which MS/MS spectra will be structurally similar to any others, we must try aligning all MS/MS spectra within a dataset to all others. GNPS calculates the score between all MS/MS spectra within a dataset that provides the starting point of a molecular network.</p>"},{"location":"massspecbackground/networkingtheory/#network-filtering-for-visualization","title":"Network Filtering for Visualization","text":"<p>The alignments between all MS/MS spectra must be filtered in order to produce molecular networks that can be visualized and interpretable.</p>"},{"location":"massspecbackground/networkingtheory/#alignment-score-filtering","title":"Alignment Score Filtering","text":"<p>The most basic filter is by alignment score between MS/MS spectra. Generally, the default of cosine of 0.7 and 6 minimum matches peaks reduces the number of false positive alignments tremendously.</p>"},{"location":"massspecbackground/networkingtheory/#neighbor-top-k","title":"Neighbor Top K","text":"<p>A pathological case in Molecular Networks are promiscuous MS/MS spectra that align to many other MS/MS spectra due to a low complexity of fragmentation. To counteract this, only retain alignments between alignments between MS/MS spectra that mutually rank each other highly in the alignment score. Just like in human relationships, who wants a best friend who has a million other best friends?</p>"},{"location":"massspecbackground/networkingtheory/#connected-component-max-size","title":"Connected Component Max Size","text":"<p>Even with the above filters, the occasional false positive connections causes hairball networks that make visualization/interpretation difficult. The connected component size filter limits the maximum size of a single molecular network to a parameterized number of nodes (100 by default). This process iteratively breaks up large hairball networks by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size.</p>"},{"location":"massspecbackground/networkingtheory/#limitation-of-molecular-networking","title":"Limitation of Molecular Networking","text":""},{"location":"massspecbackground/networkingtheory/#multiple-modifications","title":"Multiple Modifications","text":"<p>Molecular networking is unable to align spectra from molecules that differ by two distinct structural modifications. We have observed that this limitation is ameliorated in biological datasets because chemical modifications are enzymatically catalyzed. In the event that two molecules differ by two distinct chemical modification which cannot be connected by molecular networking, an intermediate molecule which differs by only a single chemical modification to the respective molecules and links all three molecules into a molecular family.</p>"},{"location":"massspecbackground/quantification/","title":"Overview","text":"<p>Pardon our dust, this page is still under construction</p>"},{"location":"massspecbackground/tandemms/","title":"Overview","text":"<p>Pardon our dust, this page is still under construction</p>"},{"location":"massspecbackground/targeteduntargeted/","title":"Overview","text":"<p>Pardon our dust, this page is still under construction</p>"},{"location":"tutorials/MSHUB-Kovats/","title":"MSHUB Kovats","text":"<p>In this tutorial you will be guided into running the MSHUB deconvolution integrating GC Library Search workflow on GNPS.</p>"},{"location":"tutorials/MSHUB-Kovats/#pipeline","title":"Pipeline","text":""},{"location":"tutorials/MSHUB-Kovats/#to-create-and-launch-gnps-feature-detection-job","title":"To create and launch GNPS feature detection job:","text":"<ol> <li>Log in to GNPS (gnps.ucsd.edu)</li> <li>Upload data to MassIVE (massive.ucsd.edu) or import an existing dataset. All of the data must be collected using the same GC protocol.</li> <li>How to reach GC interface (MSHub) or clone the job</li> <li>Select the files that need to be processed and click \u201cSubmit\u201d (no explicit settings need to be entered as MSHub determines optimal settings internally without user input).</li> <li>When the job has completed, the feature table and .mgf file for all detected features could be downloaded by clicking \u201c[ all_features_table ]\u201d and \u201c[Download Quant Table]\u201d.</li> </ol>"},{"location":"tutorials/MSHUB-Kovats/#to-create-and-launch-gnps-library-search-job","title":"To create and launch GNPS library search job:","text":"<ol> <li>When feature detection job is completed, the link \u201claunch library search\u201d will become available. Clicking this link will launch library search job. Alternatively, the .mgf file of all features downloaded from the feature detection workflow could be uploaded in the same way as the original data. The file can then be selected by clicking \u201cSpectrum Files\u201d under \u201cSearch Options\u201d tab and selecting the uploaded .mgf file. Once files have been selected, the popup window can be closed by clicking on \u201cFinish Selection\u201d. NOTE: The default parameters recommended for obtaining good results have been determined and prepopulated. However, users are encouraged to adjust the settings as appropriate for their analysis.</li> <li>After the appropriate settings are entered, the job can be launched by clicking Submit\u201d.</li> </ol>"},{"location":"tutorials/MSHUB-Kovats/#parameter-explanation","title":"Parameter Explanation","text":""},{"location":"tutorials/MSHUB-Kovats/#advanced-network-options","title":"Advanced Network Options","text":"Fillable Field Description Recommended User Input Min pairs cos Minimum cosine score required for an edge to be formed between nodes 0.85 value is set as default. This value has been determined to effectively delineate subclasses and Levels 6 and 7. Node TopK Pairs of nodes are reported only if they are found to be best matches in the topK in both directions that are above the minimum cosine score. Default is set to 10. This value enables the network to be more or less stringent. Maximum connected component size Maximum number of nodes that can be connected in a single sub-network of a molecular network. This process iteratively breaks up large \u2018hairball\u2019 networks (of false positives) by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Default setting is 100 \u2013 this value can be set to 0 to allow for an unlimited number of nodes or a higher setting can be used for larger data sets or for data sets containing many structurally-related molecules Maximum shift between precursors The maximum allowed difference in precursor m/z differences. Must be set to a large value for EI data since no precursor information is available (default value of 500) ### Advanced Search Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Library Class The level of library to include hits from. Keep default of \u201cBronze\u201d to include all possible hits including to public libraries. Top Hits Per Spectrum How many top hits ranked by the cosine score to include into the results. The default of 10. It is recommended to keep this number relatively high to allow for correct annotation selection if it is not a top hit. Spectral Library Selection of spectral libraries to include in the search. Make sure to select all appropriate EI libraries by selecting them and clicking \u201cLibrary Files\u201d. Click \u201cFinish Selection\u201d when completed. Search Analogs Used for tandem MS data. Keep default of \u201cDon\u2019t Search\u201d. Maximum Analog Search Mass Difference Maximum shift of the precursor m/z for analog search. Disabled when above option is set at \u201cDon\u2019t Search\u201d. ### Advanced Kovats Index Calculation Options Fillable Field Description Recommended User Input ------------- ------------- ------------- Perform Kovats Calculation Whether to perform calculation of Kovats retention index. Select to calculate Kovats RIs for the compounds during library search. The Input Carbon Marker File could be provided for Kovats markers as comma separated values for each of the carbon markers and its corresponding retention time. The analysis must be conducted with identical protocol as the rest of the experiment. If the Input Carbon Marker File is not provided, the Kovat\u2019s RIs will be estimated based on dataset-wide annotations. Input Carbon Marker File (Optional) If provided, this information will be used for RI estimation. The RI markers information should be submitted as a comma separated values (.csv) file in the following format (header followed by names or available reference compounds and their retention times in seconds) Cosine Threshold for Kovats Filter The minimal value of cosine score for the library match to be used for Kovats RI values assignment. Default value is set at 0.9 to limit inclusion of erroneous annotations that may introduce errors into calculation. Retention time window starts/ends (mins) The portion of chromatogram across the dataset to be used for selecting annotations for Kovats RI assignment. Select values according to specifics of experiment. The front end portion of chromatogram that contains dead volume elution, solvent delay, solvent peak or otherwise is unusable, as well as back end portion after all of the meaningful compounds have eluted (e.g. bakeout ramp) should be excluded. Kovats Index Filtering Window (+/- %) The allowable error window for the calculated/assigned Kovats RI for the annotation to be retained. Default of +/-10%. All of the annotations are shown when exploring results in the browser. The filtered results can be downloaded under \u201cDownload Filtered Computed Kovats Index Files\u201d link upon job completion. ### Advanced Filtering Option Fillable Field Description Recommended User Input ------------- ------------- ------------- Filter below std dev For use with tandem MS data. It is highly recommend to use a default value of 0 so that no filter is applied. Filter SNR Intensity All ions in the EI spectrum below this raw intensity will be deleted. Use a default value of 0 so that no filter is applied, especially if the raw intensities of your data are very low. Filter precursor window All peaks in a +/- 17 Da around precursor ion mass are deleted. This removes the residual precursor ion, which is frequently observed in tandem MS spectra in the comparison of all spectra for molecular networking. Don\u2019t Filter is set as default for the EI data. Filter library Applies the above precursor ion window filter to the library as well. Don\u2019t Filter is set as default for the EI data. Filter peaks in 50 Da window Removes peaks that are not one of the top 6 most intense within a +/- 50 Da window. Depending on the deconvolution results, this could be turned on or off: if fragmentation patterns contain a large number of small peaks, this filtering should be turned off, as it may filter out relevant peaks that could be signals."},{"location":"tutorials/MSHUB-Kovats/#assessing-the-results-of-library-search","title":"Assessing the results of library search","text":"<p>Once the job has completed, the putative matches to all selected libraries could be viewed under one of the links: \u201cView All Spectra DB\u201d; \u201cView All Compounds\u201d; \u201cView Kovats Calculation Result\u201d. The possible annotations could be sorted by their cosine value and/or RI error rate to aid in selecting best annotation using researcher\u2019s judgement. In addition, the results could be downloaded as a table for all of the matches (\u201cDownload Not Filtered Computed Kovats Index Files\u201d) or matches filtered by the Kovats RI window set when launching the job (\u201cDownload Filtered Computed Kovats Index Files\u201d). If clicking on the \u201cView Kovats Calculation Result\u201d results in an error: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d, this is indication that the dataset does not contain sufficient number of reference points for polynomial fitting to generate satisfactory regression (it does not pass internal quality check). In this case submitting the information for RI reference markers is necessary to generate Kovats estimates for the submitted data. The results can be visualized as a network (see \u201cMolecular Networking\u201d and the \u201cBiological Case Study\u201d sections below) by downloading and importing the GraphML file \u201cDownload GraphML\u201d. The detailed</p>"},{"location":"tutorials/MSHUB-Kovats/#view-all-spectra-db","title":"View All Spectra DB","text":"<p>This option will display all of the top matches for each feature and relevant information including retention time. The \u201cScan\u201d field corresponds to the feature number in the .mgf file generated at the feature detection step and corresponds to the number listed in the feature table. Clicking on the spectrum icon at the left side of the screen would show mirror plot that could be investigated.</p>"},{"location":"tutorials/MSHUB-Kovats/#view-all-compounds","title":"View All Compounds","text":"<p>This option will display only the cop hits for each feature of the top match.</p>"},{"location":"tutorials/MSHUB-Kovats/#view-kovats-calculation-result","title":"\u201cView Kovats Calculation Result\u201d","text":"<p>This option will display all of the top matches for each feature and in addition will list the information for the Kovats RI calculation or assignment. This information includes:</p>"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_lib_record","title":"Kovats_Index_Lib_Record","text":"<p>This is the library value of Kovats RI for the match. In no record available, \u201cNone\u201d is listed.</p>"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_calculated","title":"Kovats_Index_calculated","text":"<p>This is the value of calculated or assigned value of the RI.</p>"},{"location":"tutorials/MSHUB-Kovats/#kovats_index_error","title":"Kovats_Index_Error","text":"<p>This is the error between the calculated/assigned RI value and the library entry. If no library value was available, \u201cNone\u201d is listed.</p>"},{"location":"tutorials/MSHUB-Kovats/#capturing-information-by-adding-reference-spectra-from-your-data","title":"Capturing information by adding reference spectra from your data.","text":"<p>High confidence spectra from experimental data or pure standards could be added as a reference spectrum to GNPS for future reference. Single spectrum submission If the user wishes to upload &gt;50 reference spectra to GNPS, a batch upload should be used to as detailed in the online help documentation. The compliance of the file format can be verified using online tool.</p>"},{"location":"tutorials/MSHUB-Kovats/#data-sharing-and-cloning-a-job","title":"Data Sharing and Cloning a Job","text":"<p>The analysis conducted on GNPS as well as the deposited raw data could be shared as a hyperlink to the GNPS job(s) and the MassIVE accession number, correspondingly. GNPS stores data inputs and setting used for the analyses of the data, so the analysis could be shared and reproduced. If the same analysis needs to be repeated, it is possible to clone the job by clicking \u2018clone\u2019 on the job status page.  Cloning a job allows users to view all parameters and files that were used and rerun the job (feature detection or library search) with the same (or adjusted) parameters and files. Note that if data were imported from private user workspace and not from within MassIVE, other users will not have access to the data and consequently will not be able to rerun or reproduce the GNPS job.  </p>"},{"location":"tutorials/MSHUB-Kovats/#troubleshooting","title":"Troubleshooting","text":"Erro Description solution When clicking on \u201cView Kovats Calculation Result\u201d, error is displayed: \u201cThere was an error retrieving the result data for block \"main\" of workflow type \"MOLECULAR-LIBRARYSEARCH-GC\"\u201d The retention indices could not be reliably estimated from the annotations available within the dataset. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol could resolve the issue. Alternatively, the information for the reference mix needs to be supplied. A large number of spectra appear as a single peak. Insufficient volume of data cause unstable deconvolution resulting in spurious low-quality spectra. Increasing the number of files, for example, by co-analyzing multiple datasets obtained with the same experimental protocol would resolve the issue. Otherwise, an external deconvolution could be carried out to ensure that the high quality spectral pattern are obtained. GNPS job fails due to improper metadata format The metadata file must be formatted as a tab-separated .txt file"},{"location":"tutorials/MSHUB-Kovats/#example-files-for-gc-kovats-workflow","title":"Example Files for GC-KOVATS workflow","text":"<p>workflow raw data format result </p>"},{"location":"tutorials/americangut-ms-dial/","title":"FBMN with MS-DIAL - Microbiome Molecules in Fecal Samples in American Gut Project","text":""},{"location":"tutorials/americangut-ms-dial/#tutorial-introduction","title":"Tutorial introduction","text":"<p>In this tutorial you will be guided into running MS-DIAL for the Feature Based Molecular Network (FBMN)) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript.</p>"},{"location":"tutorials/americangut-ms-dial/#citations","title":"Citations","text":"<p>Recommended Citations</p> <p>This work builds on the efforts and tools from our many colleagues, please cite their work:</p> <p>Nothias, L.-F., Petras, D., Schmid, R. et al. Feature-based molecular networking in the GNPS analysis environment. Nat. Methods 17, 905\u2013908 (2020).</p> <p>Tsugawa, H., et al A lipidome atlas in MS-DIAL 4. Nat. Biotechnol. 38, 1159\u20131163 (2020).</p> <p>Tsugawa, H., Cajka, T., Kind, T., Ma, Y., Higgins, B., Ikeda, K., Kanazawa, M., VanderGheynst, J., Fiehn, O. &amp; Arita, M. MS-DIAL: data-independent MS/MS deconvolution for comprehensive metabolome analysis. Nature Methods 12, 523-526 (2015).</p> <p>Lai, Z., Tsugawa, H., Wohlgemuth, G., Mehta, S., Mueller, M., Zheng, Y., Ogiwara, A., Meissen, J., Showalter, M., Takeuchi, K., Kind, T., Beal, P., Arita, M. &amp; Fiehn, O. Identifying metabolites by integrating metabolome databases with mass spectrometry cheminformatics. Nature Methods 15, 53-56 (2018).</p> <p>McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18</p>"},{"location":"tutorials/americangut-ms-dial/#learning-objectives","title":"Learning Objectives","text":"<ol> <li>Learn how to download files from a GNPS/MassIVE Dataset. See instructions here.</li> <li>Run MS-DIAL feature detection on LC-MS/MS data. See tutorial here, and output a feature quantification table and a MS2 spectral file.</li> <li>Run the Feature Based Molecular Networking (FBMN) with MS-DIAL files on GNPS. See the tutorial here.</li> <li>Visualize the results of FBMN with Cytoscape See the tutorial here.</li> </ol>"},{"location":"tutorials/americangut-ms-dial/#experimental-setup","title":"Experimental Setup","text":"<p>We will use a subset of the LC-MS/MS analysis from the American Gut Project. The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MS-DIAL will be used to detect features and output a feature quantification table (TXT format) and a MS2 spectral file (MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak.</p>"},{"location":"tutorials/americangut-ms-dial/#data-and-files-needed-for-the-tutorial","title":"Data and Files Needed for the Tutorial","text":"<p>LC-MS/MS data can be found in the MassIVE dataset MSV000082678. Study metadata (.TXT format) can downloaded here.</p>"},{"location":"tutorials/americangut-ms-dial/#ms-dial-representative-output-files","title":"MS-DIAL representative output files","text":"<p>These files are not needed for the tutorial but are provided here as reference files, or if you wanna by pass the MS-DIAL processing.</p> File Type Download Link Feature quantification table (TXT format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download MS-DIAL project (created with version 3.64) TODO: Download"},{"location":"tutorials/americangut-ms-dial/#required-software-installs","title":"Required Software Installs","text":"<ol> <li>FTP Client (e.g. WinSCP, DO NOT FileZilla!). See instructions here.</li> <li>MS-DIAL for feature detection (available only on Windows).</li> <li>An account on GNPS.</li> <li>Cytocape for network visualization.</li> </ol>"},{"location":"tutorials/americangut-ms-dial/#video-tutorial-running-ms-dial-for-fbmn","title":"Video Tutorial - Running MS-DIAL for FBMN","text":""},{"location":"tutorials/americangut-ms-dial/#running-fbmn-on-gnps","title":"Running FBMN on GNPS","text":"<ul> <li>See the FBMN documentation.</li> </ul>"},{"location":"tutorials/americangut-ms-dial/#analyzing-the-results-of-fbmn-with-cytoscape","title":"Analyzing the Results of FBMN with Cytoscape","text":"<ul> <li>See the documentation for using Cytoscape for FBMN analysis.</li> </ul>"},{"location":"tutorials/americangut-ms-dial/#follow-up-tutorial-in-gnps","title":"Follow up Tutorial in GNPS","text":"<p>Checkout the follow up tutorial on how to do FBMN with MZmine2 and GNPS.</p> <p>Other tutorials are available from the main Feature Based Molecular Networking Workflow page.</p>"},{"location":"tutorials/americangutmzmine/","title":"Feature-Based Molecular Networking (FBMN) with MZmine2 - Microbiome Molecules in Fecal Samples in American Gut Project","text":"<p>In this tutorial you will be guided into running MZmine2 for the Feature Based Molecular Network (FBMN)) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript:</p> <p>McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18</p>"},{"location":"tutorials/americangutmzmine/#learning-objectives","title":"Learning Objectives","text":"<ol> <li>Learn how to download files from a GNPS/MassIVE Dataset.</li> <li>Run MZmine2 feature detection on LC-MS/MS data, and output a feature quantification table and a MS2 spectral file. See the tutorial here</li> </ol>"},{"location":"tutorials/americangutmzmine/#experimental-setup","title":"Experimental Setup","text":"<p>We will use a subset of the LC-MS/MS analysis from the American Gut Project. The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 will be used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format).  The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak.</p>"},{"location":"tutorials/americangutmzmine/#data-and-files-needed-for-the-tutorial","title":"Data and Files Needed for the Tutorial","text":"<p>LC-MS/MS data and files can be found in the MassIVE dataset MSV000082678, and can be retrieved from the table below:</p> File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download"},{"location":"tutorials/americangutmzmine/#required-software-installs","title":"Required Software Installs","text":"<ol> <li>FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here</li> <li>MZMine2 for feature detection</li> <li>Cytocape for network visualization</li> </ol>"},{"location":"tutorials/americangutmzmine/#video-tutorial-run-mzmine2","title":"Video Tutorial - Run MZmine2","text":"<p>IMPORTANT: MZmine2 processing for FBMN has been slightly updated since this video was produced. Please refer to this page for up-to-date informations on MZmine2 processing for the FBMN step-by-step documentation for MZmine2 processing. </p>"},{"location":"tutorials/americangutmzmine/#follow-up-tutorial-in-gnps","title":"Follow up Tutorial in GNPS","text":"<p>Checkout the follow up tutorial on how to take the output of MZMine2 to produce a molecular network at GNPS.</p> <p>Other tutorials are available from the main Feature Based Molecular Networking Workflow page. </p>"},{"location":"tutorials/bacterianetworking/","title":"Molecular Networking - Analog Discovery in Microbial Extracts","text":"<p>In this tutorial, we highlight how GNPS and molecular networking can help users uncover unique molecules being produced a new strain of bacteria.</p>"},{"location":"tutorials/bacterianetworking/#experimental-setup","title":"Experimental Setup","text":"<p>Microbial extracts from Streptomyces roseosporus and Streptomyces sp. DSM5940 were analyzed on an LTQ FT mass spectrometer. The mass spectrometer was operated in data dependent positive ion mode; automatically switching between full scan high resolution FT MS and low resolution LTQ MS/MS acquisitions. Full scan MS spectra were acquired in the FT and the top six most intense ions in a particular scan were fragmented using collision induced dissociation (CID) at a constant collision energy of 35eV, an activation Q of 0.25, and an activation time of 50 to 80 ms.</p>"},{"location":"tutorials/bacterianetworking/#data-availability","title":"Data Availability","text":"<p>MS/MS data can be found in the MassIVE dataset MSV000079204.</p> <p>There are a total of four mzXML mass spectrometry files that have already been converted for analysis.</p> filename Description ccms_peak/0518_s_BuOH.mzXML S. roseosporus extract ccms_peak/15998_nBuOH_FT_test01.mzXML S. roseosporus extract ccms_peak/DSM4950_BuOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract ccms_peak/DSM4950_MeOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract"},{"location":"tutorials/bacterianetworking/#running-molecular-networking","title":"Running Molecular Networking","text":"<p>Select molecular networking analysis.</p>"},{"location":"tutorials/bacterianetworking/#selecting-files","title":"Selecting Files","text":"<ol> <li>Click \"Select Input Files\" - Help</li> <li>Import MSV000079204 to analyze - Help</li> <li>Select S. roseosporus files into Group G1 and Streptomyces sp. DSM5940 into Group G2</li> </ol>"},{"location":"tutorials/bacterianetworking/#updating-parameters","title":"Updating parameters","text":"<p>These parameters were selected to be appropriate for a small dataset and a little on the loose side. The following are the updates that deviate from the default.</p> <ol> <li>Advanced Network Options - Min Pairs Cos: 0.65</li> <li>Advanced Network Options - Minimum Cluster Size: 1</li> <li>Advanced Filtering Options - Filter Precursor Window: Don't Filter</li> <li>Advanced Filtering Options - Filter peaks in 50Da Window: Don't Filter</li> <li>Advanced Filtering Options - Filter Library: Don't Filter</li> </ol>"},{"location":"tutorials/bacterianetworking/#pre-filled-example","title":"Pre-filled example","text":"<p>If you want to see a pre-filled example, see here.</p>"},{"location":"tutorials/bacterianetworking/#analyzing-results-in-browser","title":"Analyzing Results in Browser","text":"<p>This is an example completed molecular networking analysis.</p>"},{"location":"tutorials/bacterianetworking/#exploring-identified-compounds-in-data","title":"Exploring Identified Compounds in Data","text":"<p>Click the \"View All Library Hits\".</p> <p>This will list all library compounds that were matched. Here we can see many different antibiotics, e.g. Stenothricin, Arylomycin, Daptomycin, and Mureidomycin.</p> <p></p>"},{"location":"tutorials/bacterianetworking/#exploring-molecular-networks-including-stenothricin","title":"Exploring Molecular Networks including Stenothricin","text":"<p>Click the \"View All Clusters With IDs\". This brings you to a list of all MS/MS detected in your samples. We can filter on \"Stenothricin\" in the LibraryID column. Click on \"View Network\" for any of the Stenothricin compounds:</p> <p></p> <p>Here we can see the molecular network of related compounds to Stenothricin</p> <p></p> <p>To color the nodes by which species they came from, click the draw pies</p> <p></p> <p>We can now see all the compounds from S. roseosporus in red and Streptomyces sp. DSM5940 in blue.</p> <p>Further, we can highlight the compounds where are identified (blue border of nodes) and show the actual names</p> <p></p> <p>This network indicates to us that there are some unique compounds being produced by Streptomyces sp. DSM5940 that are related to Stenothricin.</p> <p>To highlight what might be different about these molecules, we can highlight the mass differences between connected (structurally related) molecules in the network.</p> <p></p> <p>We can see the Stenothricin-GNPS 2 is a molecule which we discovered using molecular networking. We can further interrogate the similarity at the fragmentation level by clicking the edge between the two nodes to visualize the MS/MS spectra and align the peaks</p> <p></p>"},{"location":"tutorials/bacterianetworking/#analyzing-global-network-with-cytoscape","title":"Analyzing Global Network with Cytoscape","text":"<p>Click the \"Direct Cytoscape Preview/Download\" to get a preformatted cytoscape file</p> <p></p> <p>In this preview you can even see from a high level the red and blue molecules that represent the G1 (roseosporus) and G2 (DSM5940) respectively. Download the Cytoscape file and view in cytoscape to dig further!</p> <p>Open network in Cytoscape (Help) to look at the entire network. Each molecule (node) has the pie charts already drawn with red (G1 - Rosesporus) and blue (G2 - DSM5940).</p> <p></p> <p>Good Luck!</p>"},{"location":"tutorials/bacterianetworking/#homework","title":"Homework","text":"<p>Look for putative analogs of other antibiotics such as Arylomycin and Daptomycin.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/","title":"FBMN with MetaboScape - Coffee Analysis","text":""},{"location":"tutorials/coffee-tutorial-metaboscape/#tutorial-using-metaboscape-and-gnps","title":"Tutorial Using MetaboScape and GNPS","text":"<p>In this tutorial you will be guided into running MetaboScape for the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the MetaboScape Coffee tutorial.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#learning-objectives","title":"Learning Objectives","text":"<ol> <li>Run MetaboScape feature detection on non-targeted LC-MS/MS data, and receive a feature quantification table and a MS2 spectral file as an output.</li> <li>Run GNPS and visualize MetaboScape annotation in Cytoscape.</li> </ol>"},{"location":"tutorials/coffee-tutorial-metaboscape/#experimental-setup","title":"Experimental Setup","text":"<p>We will use a subset of the LC-MS/MS analysis from the Coffee project. </p> <p>MetaboScape will be used to perform feature detection and alignment and output a feature quantification table (.CSV file) and a MS/MS spectral file (.MGF format). The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS/MS spectral file contains a single MS/MS representing each aligned peak.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#data-and-files-needed-for-the-tutorial","title":"Data and Files Needed for the Tutorial","text":"<p>LC-MS/MS data and files are part of the MetaboScape tutorial project.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#metaboscape-representative-output-files","title":"MetaboScape Representative Output Files","text":"<p>These files are not needed for the tutorial but are provided here as reference files, or if you want to bypass the MetaboScape processing.</p> File Type Download Link Feature quantification table (.csv format) Download MS2 spectral file (.mgf format) Download"},{"location":"tutorials/coffee-tutorial-metaboscape/#required-software-installations","title":"Required Software Installations","text":"<ol> <li>MetaboScape, commercially available from Bruker. </li> <li>Cytoscape for advanced network visualization.</li> </ol>"},{"location":"tutorials/coffee-tutorial-metaboscape/#process-the-data-with-metaboscape","title":"Process the data with MetaboScape","text":"<p>Refer to the detailed step-by-step procedure to run Metaboscape here.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#run-fbmn-on-gnps","title":"Run FBMN on GNPS","text":"<p>See the FBMN documentation here.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#run-cytoscape","title":"Run Cytoscape","text":"<p>See the documentation to perform visualization of the molecular networking on the data of the Coffee Project here.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#visualization-of-molecular-networks-with-cytoscape","title":"Visualization of Molecular Networks with Cytoscape","text":"<ol> <li>Open Cytoscape 3.4 (or more recent version).</li> <li>Install the Cytoscape App ChemViz2 - http://apps.cytoscape.org/apps/chemviz2.</li> <li>Import the molecular networking files downloaded from GNPS into Cytoscape.<ul> <li>Import the network topology. Go to File/Import/Network/File - select the .pairsinfo file in networkedges_selfloop folder. </li> <li>Import the node information table. Go to File/Import/Table/File - select the .tsv file in clusterinfosummarygroup_attributes_withIDs_withcomponentID folder.</li> <li>Import the MS/MS spectral library annotation table. Go to File/Import/Table/File - select the .tsv file in result_specnets_DB folder.</li> <li>Import the bucket table (MS/MS only) exported from MetaboScape. Go to File/Import/Table/File - select the .csv file.</li> </ul> </li> </ol> <p>Figure 1. Import the molecular network topology.</p> <p></p> <p>Figure 2. Node table import interface.</p> <ol> <li>Configure the Cytoscape style.<ul> <li>For the Label properties. Select the column MOLECULAR_FORMULA and click Passthrough Mapping for the mapping type.</li> <li>For the Size properties. Select the column SAMPLE and click Continuous Mapping for the mapping type.</li> </ul> </li> </ol> <p></p> <p>Figure 3. Configure the molecular network style.</p> <ol> <li>Visualizing the bucket table as a pie chart diagram. For the Image/Chart properties. Click on the Def. box. <ul> <li>Click on the Charts spreadsheet, and select the group for visualization.</li> <li>Click on the option Charts/option spreadsheet, and select the color-code for each group.</li> </ul> </li> </ol> <p></p> <p>Figure 4. Pie charts configuration. Data in Image/Chart properties.</p> <p></p> <p>Figure 5. Pie charts configuration. Options in Image/Chart properties.</p> <ol> <li>Visualize the MS/MS spectral library annotations (make sure ChemViz2 is installed).<ul> <li>Select the nodes with MS/MS spectral library annotation (column LibraryID in the Cytoscape node table).</li> <li>Right click on the nodes and select /Apps/Cheminformatics/Show compounds table, or alternatively /Apps/Cheminformatics/Show structures for selected nodes or /Apps/Cheminformatics/Paint structures for selected nodes.</li> </ul> </li> </ol> <p></p> <p>Figure 6. Molecular networks visualization with molecular formula annotation (node name).</p> <p></p> <p>Figure 7. View of compounds structures for spectral library MS/MS annotation in the molecular networks.</p> <p></p> <p>Figure 8. Molecular networks with MS/MS spectral annotation.</p>"},{"location":"tutorials/coffee-tutorial-metaboscape/#page-contributors","title":"Page contributors","text":"<p>Louis Felix Nothias (UCSD), Tam Dang (Tech. Univ. Berlin), Kevin Ngoc (UCSD).</p>"},{"location":"tutorials/featurebasedgnps/","title":"FBMN analysis at GNPS","text":"<p>In this tutorial you will be guided into running the Feature Based Molecular Network (FBMN) workflow on GNPS to reproduce some findings of the American Gut Project described in this manuscript:</p> <p>McDonald, D. et al. American Gut: an Open Platform for Citizen Science Microbiome Research. mSystems 3, (2018). http://dx.doi.org/10.1128/mSystems.00031-18</p>"},{"location":"tutorials/featurebasedgnps/#learning-objectives","title":"Learning Objectives","text":"<ol> <li>Run the Feature Based Molecular Networking using MZmine2 outputted files along with a metadata table. See the workflow here (Note that you must be logged in GNPS first).</li> <li>Explore Molecular Networking results briefly in GNPS</li> <li>Export Molecular Network to Cytoscape</li> </ol>"},{"location":"tutorials/featurebasedgnps/#prerequisites","title":"Prerequisites","text":"<p>The LC-MS/MS data have first to be processed with MZmine2. The resulting MZmine2 output files needed for FBMN are provided here. If you have not learned that process yet, refer to this MZmine2 tutorial.</p>"},{"location":"tutorials/featurebasedgnps/#experimental-setup","title":"Experimental Setup","text":"<p>We will use a subset of the LC-MS/MS analysis from the American Gut Project. The samples consist of fecal samples provided by participants and the subset selected consists of participants that have high and low consumption of plants. MZmine2 was used to detect features and output a feature quantification table (CSV format) and a MS2 spectral file (MGF format).  The feature quantification table contains the intensity values for every aligned peak accross the samples, while the MS2 spectral file contains a single MS2 representing each aligned peak. There is a dedicated MZmine2 tutorial describing that process.</p>"},{"location":"tutorials/featurebasedgnps/#data-availability","title":"Data Availability","text":"<p>The LC-MS/MS data can be found in the MassIVE dataset MSV000082678.</p>"},{"location":"tutorials/featurebasedgnps/#files-needed-for-tutorial","title":"Files Needed for Tutorial","text":"File Type Download Link Feature quantification table (CSV format) Download MS2 spectral file (MGF format) Download Study metadata (.TXT format) Download (Optional) MZmine2 batch file (.XML format) Download (Optional) MZmine2 project Download"},{"location":"tutorials/featurebasedgnps/#demo-gnps-job-of-feature-based-molecular-networking","title":"Demo GNPS job of Feature Based Molecular Networking","text":"<p>Here is an example FBMN job with files resulting from MZmine2 processing of a subset of the [American Gut Project] (http://humanfoodproject.com/americangut/).</p>"},{"location":"tutorials/featurebasedgnps/#required-software-installs","title":"Required Software Installs","text":"<ol> <li>FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here</li> <li>Cytocape for network visualization</li> </ol>"},{"location":"tutorials/featurebasedgnps/#for-step-by-step-tutorial-on-feature-based-molecular-networking","title":"For step-by-step tutorial on Feature Based Molecular Networking","text":"<p>IMPORTANT: Note that the Feature Based Molecular Networking workflow has been slightly updated since the following videos were produced. Please refer to this page for the most recent description of step-by-step MZmine2 processing for the FBMN workflow. </p>"},{"location":"tutorials/featurebasedgnps/#video-tutorial-analyze-feature-based-molecular-networking-in-gnps","title":"Video Tutorial - Analyze Feature Based Molecular Networking in GNPS","text":""},{"location":"tutorials/featurebasedgnps/#video-tutorial-quick-mzmine2-export-to-gnps-feature-based-molecular-networking","title":"Video Tutorial - Quick MZMine2 Export to GNPS Feature Based Molecular Networking","text":""},{"location":"tutorials/rdd/","title":"Reference Data-Driven Analysis of Untargeted Metabolomics Data","text":"<p>The key difference between a traditional untargeted metabolomics analysis and a reference data-driven analysis (RDD) is the inclusion of data from reference samples, composed of a complex mixture of MS/MS scans corresponding to hundreds or thousands of unique compounds of both known and unknown structure. A key attribute of reference samples is metadata describing characteristics such as source or environmental origin. This is in contrast to reference spectra (contained in compound libraries or reference databases), which are of known structure and have been previously annotated.</p> <p>Here we present a step by step tutorial for running a RDD analysis through the GNPS web infrastructure. All input files and outputs can also be found at the GNPS/Massive Repository, along with the data files at https://massive.ucsd.edu/ProteoSAFe/dataset.jsp?task=99830767e1524e489b1a0f62569b8ed9</p> <p>Follow the steps below or watch the Video Tutorial</p> <p>Tutorial folder: ftp://massive.ucsd.edu/MSV000086158/updates/2020-10-01_jgauglitz_6c7824e2/other/</p> <p>Outline of Steps:</p> <ol> <li>Passatuto workflow to determine min cosine score to use in the molecular networking analysis.</li> <li>Launch molecular networking analysis job, containing reference dataset.</li> <li>Download and visualization of GNPS molecular analysis results.</li> <li>Generate custom information based on the type of reference data used (Global FoodOmics specific).</li> </ol> <p></p>"},{"location":"tutorials/rdd/#step-1-determine-input-parameters-to-run-workflow-at-a-1-false-discovery-rate-fdr","title":"Step 1. Determine input parameters to run workflow at a 1% False Discovery Rate (FDR).","text":"<p>Citations: - Scheubert, Kerstin, Franziska Hufsky, Daniel Petras, Mingxun Wang, Louis-F\u00e9lix Nothias, Kai D\u00fchrkop, Nuno Bandeira, Pieter C. Dorrestein, and Sebastian B\u00f6cker. 2017. \"Significance Estimation for Large Scale Metabolomics Annotations by Spectral Matching.\" Nature Communications 8 (1): 1494. - Wang, Mingxun, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen, et al. 2016. \"Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking.\" Nature Biotechnology 34 (8): 828\u201337.</p>"},{"location":"tutorials/rdd/#step-11-navigate-to-the-gnps-webpage-and-sign-in","title":"Step 1.1 Navigate to the GNPS webpage and sign in.","text":""},{"location":"tutorials/rdd/#step-12-scroll-down-to-locate-additional-workflows","title":"Step 1.2 Scroll down to locate additional workflows.","text":""},{"location":"tutorials/rdd/#step-13-scroll-down-to-locate-additional-workflows","title":"Step 1.3 Scroll down to locate additional workflows.","text":""},{"location":"tutorials/rdd/#step-14-select-workflow-which-will-generate-a-job-launch-page-expand-full-menu","title":"Step 1.4 Select workflow, which will generate a job launch page. Expand full menu.","text":""},{"location":"tutorials/rdd/#step-15-fill-out-the-launch-page-information","title":"Step 1.5 Fill out the launch page information.","text":""},{"location":"tutorials/rdd/#step-16-select-datasets-in-your-workspace-and-add-to-selected-files","title":"Step 1.6 Select datasets in your workspace and add to selected files.","text":""},{"location":"tutorials/rdd/#step-17-add-datasets-to-your-workspace-using-the-massive-identifier","title":"Step 1.7 Add datasets to your workspace using the MassIVE identifier.","text":""},{"location":"tutorials/rdd/#step-18-select-files-from-newly-added-dataset-and-add-to-the-job","title":"Step 1.8 Select files from newly added dataset and add to the job.","text":""},{"location":"tutorials/rdd/#step-19-note-that-the-notification-that-the-job-is-complete-will-be-sent-to-the-email-address-provided","title":"Step 1.9 Note that the notification that the job is complete will be sent to the email address provided.","text":"<p>You can also check the \"Jobs\" tab to check on the status of the analysis. </p> <p></p>"},{"location":"tutorials/rdd/#step-110-the-status-page-will-look-like-this-and-will-update-when-the-job-has-completed","title":"Step 1.10 The status page will look like this and will update when the job has completed.","text":""},{"location":"tutorials/rdd/#step-111-navigating-the-completed-passatutto-workflow","title":"Step 1.11 Navigating the completed Passatutto Workflow.","text":"<ol> <li>Job will be saved, and can be accessed by clicking on DONE.</li> <li>Selecting \"View All Spectra DB with FDR\" will bring up the view in 3.</li> <li>Click on \"Download\".</li> <li>This opens up an additional set of options. Select \"Download\" again and a .zip folder will be downloaded, as shown on the left below. This folder can be extracted and the .tsv can either be opened in Excel or the cosine score for an appropriate FDR value can be extracted programmatically, such as with R, as in Step 1.12. </li> </ol>"},{"location":"tutorials/rdd/#step-112-extracting-the-mqscore-modified-cosine-score-needed-for-molecular-networking-to-achieve-a-1-fdr-with-the-min-number-of-matched-peaks-set-in-the-fdr-estimation-workflow-5-in-this-case","title":"Step 1.12 Extracting the MQScore (modified cosine score) needed for molecular networking to achieve a 1% FDR with the min number of matched peaks set in the FDR estimation workflow (5 in this case).","text":"<p>The result here is that 0.64 is the cutoff for Step 2 of the tutorial. </p> <p>Code for use in R: </p> <pre><code>tab &lt;- read.delim(\"ProteoSAFe-MOLECULAR-LIBRARYSEARCH-FDR-af0eb459-view_all_annotations_DB_fdr/MOLECULAR-LIBRARYSEARCH-FDR-af0eb459-view_all_annotations_DB_fdr-main.tsv\")\nfdr_5min &lt;- tab[,c(\"MQScore\",\"fdr\")]\nhead(fdr_5min)\nfdr_5min_cos0.01 &lt;- fdr_5min[fdr_5min$fdr &lt;= 0.01,]\nhead(fdr_5min_cos0.01)\n</code></pre>"},{"location":"tutorials/rdd/#step-2-launch-molecular-networking-analysis-job-containing-reference-dataset","title":"Step 2. Launch molecular networking analysis job, containing reference dataset","text":"<p>Citations:</p> <ul> <li>Wang, Mingxun, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen, et al. 2016. \"Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking.\" Nature Biotechnology 34 (8): 828\u201337.</li> <li>Watrous, Jeramie, Patrick Roach, Theodore Alexandrov, Brandi S. Heath, Jane Y. Yang, Roland D. Kersten, Menno van der Voort, et al. 2012. \"Mass Spectral Molecular Networking of Living Microbial Colonies.\" Proceedings of the National Academy of Sciences of the United States of America 109 (26): E1743\u201352.</li> </ul>"},{"location":"tutorials/rdd/#step-21-navigate-to-the-gnps-main-page-scroll-down-and-click-on-create-molecular-network","title":"Step 2.1 Navigate to the GNPS main page. Scroll down and click on \u2018Create Molecular Network\u2019.","text":""},{"location":"tutorials/rdd/#step-22-molecular-networking-start-page","title":"Step 2.2 Molecular Networking Start Page","text":"<p>Edit presets: Fill in the Title and under \"Basic Options\" --- select precursor ion mass tolerance and fragment ion mass tolerance based on the resolution of the data and reference data chosen. For high resolution QTOF data we chose 0.02.</p> <p></p>"},{"location":"tutorials/rdd/#step-23-dataset-selection-from-gnps-molecular-networking-analysis-homepage","title":"Step 2.3 Dataset selection from GNPS molecular networking analysis homepage","text":"<p>Data of interest can be added to \"Spectrum Files (Required)\" (G1) and reference data can be added to \"Spectrum Files G4\". </p> <p>In this tutorial, fecal data are added to G1, plasma data to G2, study specific foods (which are a part of Global FoodOmics) are added to G3, and the remainder of the Global FoodOmics dataset is added to G4.</p> <p>If using this reference dataset for your own analyses, the entire folder can be selected and added to G4. Begin by clicking on any of the \"Select Input Files\" tabs.</p> <p></p> <p>Here select the Stool-Food match to select the stool data. Click on \u2018Spectrum Files G1\u2019 and it will appear under Selected Files as shown. Repeat for plasma below, adding files to G2.</p> <p> </p> <p>Select reference data to include in the molecular networking job.</p> <p></p> <p>Below you can see how SSF have been placed in G3 and the remainder of the files in G4. If you make an error and add more folders than desired, you can click them one at a time and click on the small folder icon with the red x over it (seen towards the middle of the screen). </p> <p></p> <p>After clicking \"Finish selection\" you will return to the workflow launch page below and will observe the number of files or folders placed into each group.</p> <p></p> <p>Note: It is arbitrary which group is selected for each data type, however the groupings used above will require the least modification of the code found on GitHub.</p> <p>\"Spectrum Files G2\" is reserved for a second paired dataset, such as plasma if fecal data are in G1 (Required). \"Spectrum Files G3\" is reserved for study specific reference data, in contrast to public reference datasets (G4).</p>"},{"location":"tutorials/rdd/#step-24-selecting-molecular-networking-parameters","title":"Step 2.4 Selecting Molecular Networking parameters","text":"<p>Default view:</p> <p></p> <p>GNPS molecular networking analysis homepage: \"Advanced Library Search Options\": Set \"Library Search Min Matched Peaks\" to the value used in the Passatuto FDR estimation workflow and set \"Score Threshold\" to the value determined for a 1% FDR (the lower panel).</p> <p></p> <p>\"Advanced Network Options\": Set \"Min Pairs Cos\" to the value determined in the FDR estimation workflow and set \"Minimum Matched Fragment Ions\" to the corresponding value (the upper panel).</p> <p>Here we select 5, which is what we chose for the FDR estimation. The value determined at 1% FDR is 0.64.</p> <p>Lastly, if the datasets are large, it may be necessary to Select \"Don't Create\" for \"Create Cluster Buckets and qiime2/Biom/PCoA Plots output\". This will decrease the run time and may be necessary if the job times out / fails due to requiring too much compute time.</p> <p></p> <p>Note: If a job fails, you can select \"Clone\" and adjust needed parameters, rename if desired, and resubmit. It is not necessary to load all files and information from scratch.</p> <p></p>"},{"location":"tutorials/rdd/#step-3-downloading-results","title":"Step 3 Downloading results","text":"<p>Citations:</p> <ul> <li>Wang, Mingxun, Jeremy J. Carver, Vanessa V. Phelan, Laura M. Sanchez, Neha Garg, Yao Peng, Don Duy Nguyen, et al. 2016. \"Sharing and Community Curation of Mass Spectrometry Data with Global Natural Products Social Molecular Networking.\" Nature Biotechnology 34 (8): 828\u201337.</li> <li>Shannon, Paul, Andrew Markiel, Owen Ozier, Nitin S. Baliga, Jonathan T. Wang, Daniel Ramage, Nada Amin, Benno Schwikowski, and Trey Ideker. 2003. \"Cytoscape: A Software Environment for Integrated Models of Biomolecular Interaction Networks.\" Genome Research 13 (11): 2498\u20132504.</li> </ul>"},{"location":"tutorials/rdd/#step-31-click-on-direct-cytoscape-previewdownload-or-download-graphml-for-cytoscape-to-visualize-the-molecular-network-with-the-open-source-software-cytoscape","title":"Step 3.1 Click on \"Direct Cytoscape Preview/Download\" or \"Download GraphML for Cytoscape\" to visualize the molecular network with the open source software Cytoscape.","text":""},{"location":"tutorials/rdd/#step-32-downloading-results-part-2","title":"Step 3.2 Downloading results, part 2","text":"<p>Click on \"View All Clusters With IDs\", next click on \"Download\" which opens another menu, click on \"Download\". The .tsv file in the main directory contains information pertinent to further evaluations, and together with sample and reference metadata can be used to further interpret the untargeted metabolomic data.</p> <p> </p>"},{"location":"tutorials/rdd/#step-33-the-download-button-will-prompt-a-menu-to-save-a-zip-folder-click-save-and-then-extract","title":"Step 3.3 The download button will prompt a menu to save a .zip folder. Click save and then extract.","text":"<p>Save the extracted folder on a location on your computer that you can reach it using your analysis software --- RStudio, Jupyter Notebooks, Terminal, etc.</p> <p></p>"},{"location":"tutorials/rdd/#step-4-generate-custom-information-based-on-the-type-of-reference-data-used","title":"Step 4 Generate custom information based on the type of reference data used.","text":"<p>For analysis with the Global FoodOmics reference data, you can investigate several different types of outputs and visualizations based on the analyses produced above. Below are two examples. </p>"},{"location":"tutorials/rdd/#example-1-flow-diagram-to-visualize-ontology","title":"Example 1: Flow diagram to visualize ontology","text":"<p>Dependencies: - Follow the instructions for installation of floweaver here.</p> <p>Required files:</p> <ul> <li>Global FoodOmics metadata</li> <li>Sample_type_hierarchy.csv (color coded key for the foodomics ontology)</li> <li>Molecular networking analysis .tsv output from Step 2 of the tutorial </li> </ul> <p>Load packages required:</p> <pre><code>import math\n\nimport floweaver\nimport numpy as np\nimport pandas as pd\n</code></pre> <p>Download Global FoodOmics metadata and ensure that the data path is correct. </p> <pre><code>def get_sample_types(gfop_metadata, simple_complex=None):\n    if simple_complex is not None:\n        gfop_metadata = gfop_metadata[\n            gfop_metadata['simple_complex'] == simple_complex]\n    col_sample_types = [f'sample_type_group{i}' for i in range(1, 7)]\n    return (gfop_metadata[['filename', *col_sample_types]]\n            .set_index('filename'))\n\n\ngfop_metadata = pd.read_csv(\n    '../data/11442_foodomics_multiproject_metadata.txt', sep='\\t')\n# First row is empty.\ngfop_metadata = gfop_metadata.drop(index=0)\n# Remove trailing whitespace.\ngfop_metadata = gfop_metadata.apply(lambda col: col.str.strip()\n                                    if col.dtype == 'object' else col)\n</code></pre> <p>It will not be necessary to modify the next cells, however they must be run in order. </p> <pre><code>def _get_flows(gnps_network, sample_types, groups_included,\n               max_hierarchy_level):\n    # Select GNPS job groups.\n    groups = {f'G{i}' for i in range(1, 7)}\n    groups_excluded = groups - set(groups_included)\n    df_selected = gnps_network[\n        (gnps_network[groups_included] &gt; 0).all(axis=1) &amp;\n        (gnps_network[groups_excluded] == 0).all(axis=1)].copy()\n    filenames = (df_selected['UniqueFileSources'].str.split('|')\n                 .explode())#.unique())\n    # Select food hierarchy levels.\n    sample_types = sample_types[[\n        f'sample_type_group{i}' for i in range(1, max_hierarchy_level + 1)]]\n    # Match the GNPS job results to the food sample types.\n    sample_types_selected = sample_types.reindex(filenames)\n    sample_types_selected = sample_types_selected.dropna()\n    # Discard samples that occur less frequent than water (blank).\n    water_count = ((sample_types_selected['sample_type_group1'] == 'water')\n                   .sum())\n    sample_counts = sample_types_selected[\n        f'sample_type_group{max_hierarchy_level}'].value_counts()\n    sample_counts_valid = sample_counts.index[sample_counts &gt; water_count]\n    sample_types_selected = sample_types_selected[sample_types_selected[\n        f'sample_type_group{max_hierarchy_level}'].isin(sample_counts_valid)]\n    # Get the flows between consecutive food hierarchy levels.\n    flows, processes = [], []\n    for i in range(1, max_hierarchy_level):\n        g1, g2 = f'sample_type_group{i}', f'sample_type_group{i + 1}'\n        flow = (sample_types_selected.groupby([g1, g2]).size()\n                .reset_index().rename(columns={g1: 'source', g2: 'target',\n                                               0: 'value'}))\n        flow['source'] = flow['source'] + f'_{i}'\n        flow['target'] = flow['target'] + f'_{i + 1}'\n        flow['type'] = flow['target']\n        flows.append(flow)\n        process = pd.concat([flow['source'], flow['target']],\n                            ignore_index=True).to_frame()\n        process['level'] = [*np.repeat(i, len(flow['source'])),\n                            *np.repeat(i + 1, len(flow['target']))]\n        processes.append(process)\n    return (pd.concat(flows, ignore_index=True),\n            pd.concat(processes, ignore_index=True).drop_duplicates()\n            .rename(columns={0: 'id'}).set_index('id'))\n</code></pre> <pre><code>def plot_flows(gnps_network, sample_types, groups_included,\n               sample_type_hierarchy, max_hierarchy_level=4, filename=None):\n    flows, processes = _get_flows(\n        gnps_network, sample_types, groups_included, max_hierarchy_level)\n    dataset = floweaver.Dataset(flows, dim_process=processes)\n\n    labels = (sample_type_hierarchy\n              .reindex(set(flows['source']) | set(flows['target']))\n              .sort_values('order_num').index)\n    nodes, ordering, bundles = {}, [], []\n    for level in processes['level'].unique():\n        nodes[f'level {level}'] = floweaver.ProcessGroup(f'level == {level}')\n        nodes[f'level {level}'].partition = floweaver.Partition.Simple(\n            'process', labels[labels.str.endswith(f'_{level}')][::-1])\n\n        ordering.append([f'level {level}'])\n\n        if level + 1 in processes['level'].unique():\n            bundles.append(floweaver.Bundle(f'level {level}',\n                                            f'level {level + 1}'))\n\n    sdd = floweaver.SankeyDefinition(\n        nodes, bundles, ordering, flow_partition=dataset.partition('type'))\n    palette = sample_type_hierarchy['color_code'].dropna().to_dict()\n    return floweaver.weave(sdd, dataset, palette=palette)\n</code></pre> <pre><code>sample_types_simple = get_sample_types(gfop_metadata, 'simple')\nsample_types_complex = get_sample_types(gfop_metadata, 'complex')\n</code></pre> <p>In the next steps you will load the sample type hierarchy specific to the Global FoodOmics metadata and the dataset generated in step 2 (.tsv). Ensure that the file paths are correct.</p> <pre><code>sample_type_hierarchy = (\n    pd.read_csv('../data/sample_type_hierarchy.csv')\n    .set_index('descriptor').sort_values('order_num'))\n\ngnps_network = pd.read_csv(\n    '../data/METABOLOMICS-SNETS-V2-9a90bd12-view_all_clusters_withID_beta-main.tsv',\n    sep='\\t')\n</code></pre> <p>The next step will generate the flow diagram and automatically save it based on the selections made. In this case matches are only against \"simple\" foods, and matches are only between plasma data and the reference dataset in G4. The hierarchy is displayed out to level 5 of the sample type hierarchy. </p> <pre><code>dataset = 'onr'\nsimple_complex = 'simple'\ngroups = '2', '4'\nmax_level = 5\n\nif simple_complex == 'simple':\n    sample_types = sample_types_simple\nelif simple_complex == 'complex':\n    sample_types = sample_types_complex\nelse:\n    raise ValueError('Unknown sample type')\nsankey_data = plot_flows(\n    gnps_network, sample_types, [f'G{g}' for g in groups],\n    sample_type_hierarchy, max_level)\nwidth = max_level * 150 + 300\nheight = math.ceil(\n    sum([1 for node in sankey_data.nodes\n         if node.title.endswith(str(max_level))]) * 50 / 100) * 100\n(sankey_data.to_widget(width=width, height=height, margins={\n    'left': 150, 'right': 150, 'top': -50, 'bottom': -50})\n .auto_save_png(f'flow_{dataset}_g{\"\".join(groups)}_level{max_level}_'\n                f'{simple_complex}.png'))\n</code></pre> <p>Output visualization shows the types of food categories from which molecules were observed in human plasma samples for a sleep deprivation cohort.</p> <p></p>"},{"location":"tutorials/rdd/#example-2-food-count-generation","title":"Example 2: Food count generation","text":"<p>Generate a feature table containing spectral matches between each query sample and reference foods/food groups. Clone the gfop repository and follow instructions on the README.</p> <p>Required files:</p> <ul> <li>Study metadata</li> <li>Molecular networking analysis .tsv output from Step 2 of the tutorial </li> </ul> <p>Dependencies: Python 3.6 or newer.</p> <p>The matrix generated has this format:</p> <p></p> <p>The last step is to export the matrix as a .csv file.</p> <pre><code>f_counts.to_csv('Tutorial_plasma_file_food_count.csv')\n</code></pre>"}]}