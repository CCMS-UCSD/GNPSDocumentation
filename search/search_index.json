{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to GNPS Global Natural Products Social Molecular Networking (GNPS) is a web-based mass spectrometry ecosystem that aims to be an open-access knowledge base for community-wide organization and sharing of raw, processed or identified tandem mass (MS/MS) spectrometry data. GNPS aids in identification and discovery throughout the entire life cycle of data; from initial data acquisition/analysis to post publication. As there are many aspects to GNPS, it can be a bit overwhelming, so the primary functionality is: Identification/Dereplication/Quantification of MS/MS data utilizing computational tools (e.g. Molecular Networking , Spectral Library Search , etc.) Give MS/MS spectra biological/environmental context by searching against all public MS/MS datasets ( Molecular BLAST Search ) Annotate/curate identified MS/MS spectra in open-access GNPS reference spectra libraries Publish entire study datasets with the Mass Spectrometry Interactive Virtual Environment (MassIVE) data repository ( Dataset Submission ) Browse and Reanalyze over 700 public datasets at GNPS Automatic reanalysis of public datasets with automated reports of new identifications ( Continuous Identification ) Explore identifications of public datasets across entire repository ( Molecule Explorer ) For more detailed information, read on in the documentation, checkout the GNPS publication , and view some tutorial videos . Migration to New Documentation Pardon our dust as we are migrating to this new documentation. During the transition, throughout the documentation we will be linking to our legacy documentation that is still relevant. Thank you for your patience. Legacy Documentation To checkout our legacy documentation in its entirely, you can find it here .","title":"GNPS Introduction"},{"location":"#welcome-to-gnps","text":"Global Natural Products Social Molecular Networking (GNPS) is a web-based mass spectrometry ecosystem that aims to be an open-access knowledge base for community-wide organization and sharing of raw, processed or identified tandem mass (MS/MS) spectrometry data. GNPS aids in identification and discovery throughout the entire life cycle of data; from initial data acquisition/analysis to post publication. As there are many aspects to GNPS, it can be a bit overwhelming, so the primary functionality is: Identification/Dereplication/Quantification of MS/MS data utilizing computational tools (e.g. Molecular Networking , Spectral Library Search , etc.) Give MS/MS spectra biological/environmental context by searching against all public MS/MS datasets ( Molecular BLAST Search ) Annotate/curate identified MS/MS spectra in open-access GNPS reference spectra libraries Publish entire study datasets with the Mass Spectrometry Interactive Virtual Environment (MassIVE) data repository ( Dataset Submission ) Browse and Reanalyze over 700 public datasets at GNPS Automatic reanalysis of public datasets with automated reports of new identifications ( Continuous Identification ) Explore identifications of public datasets across entire repository ( Molecule Explorer ) For more detailed information, read on in the documentation, checkout the GNPS publication , and view some tutorial videos .","title":"Welcome to GNPS"},{"location":"#migration-to-new-documentation","text":"Pardon our dust as we are migrating to this new documentation. During the transition, throughout the documentation we will be linking to our legacy documentation that is still relevant. Thank you for your patience.","title":"Migration to New Documentation"},{"location":"#legacy-documentation","text":"To checkout our legacy documentation in its entirely, you can find it here .","title":"Legacy Documentation"},{"location":"api/","text":"GNPS API Overview Library Spectra API Get individual spectrum annotation history Dataset API Get all datasets Get dataset information Results List API Get results as json","title":"Api"},{"location":"api/#gnps-api-overview","text":"","title":"GNPS API Overview"},{"location":"api/#library-spectra-api","text":"Get individual spectrum annotation history","title":"Library Spectra API"},{"location":"api/#dataset-api","text":"Get all datasets Get dataset information","title":"Dataset API"},{"location":"api/#results-list-api","text":"Get results as json","title":"Results List API"},{"location":"batchupload/","text":"Batch Upload of Annotated Spectra While there is an interface to upload single spectra, users who wish to batch upload many spectra into the libraries might find adding one spectra at a time cumbersome. Here we provide a method to batch upload many spectra. Annotation Spread Sheet To batch upload, this template must be used: Template Spreadsheet Annotation are to be added one spectrum per line. Columns may not be added, or deleted or changed. Each column must have a value. Refer to the table below for default values to enter when not known. Export from this Excel file as a tab separated text file (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings). Batch File Annotation To check the validity of your batch file, check out our batch validator . Field Information The field requirements are the same as on the single spectrum upload form, the other columns can be ignored. FIeld description are listed below. Please note: Only letters, numbers and underscores are allowed in the filenames. Spaces and special characters are NOT allowed. Header Desc. Default Value to Put When Not Known Possible Values Required FILENAME Input Filename (mzXML, mzML, or mgf) REQUIRED only letters, numbers, underscores and periods are allowed Yes SEQ Peptide Sequence *..* Please enter *..* here only No COMPOUND_NAME Compound Common Name REQUIRED Yes MOLECULEMASS Corrected Precursor MZ for Compound 0 Entering 0 means we will attempt to read the mz value from file No INSTRUMENT Mass Analyzer Instrument REQUIRED qTof, QQQ, Ion Trap, Hybrid FT, Orbitrap, ToF Yes IONSOURCE Source of Ions REQUIRED LC-ESI, DI-ESI, EI, APCI, ESI Yes EXTRACTSCAN Spectrum Scan of Spectrum REQUIRED Yes SMILES Smiles Structure N/A No INCHI Inchi Structure N/A No INCHIAUX Inchi Auxiliary Structure N/A No CHARGE Charge of Precursor (0 to pull from the spectrum file) 0 No IONMODE Ionization Mode (Positive/Negative) Positive Positive, Negative Yes PUBMED Pubmed ID where compound or data was published N/A No ACQUISITION Sample source of compound Crude Crude, Lysate, Commercial, Isolated, Other Yes EXACTMASS Compound Exact Mass 0 No DATACOLLECTOR Individual collecting data REQUIRED Yes ADDUCT Adduct of Ion Fragmented in MS2 (M+H, M+2H, etc.) REQUIRED Yes INTEREST N/A N/A No LIBQUALITY Quality of Library (1 for Gold, 2 for Silver, 3 for Bronze) 3 1,2,3 Yes GENUS Genus N/A No SPECIES Species N/A No STRAIN Strain N/A No CASNUMBER Chemical Abstracts Service compound identification number N/A No PI PI overseeing compound acquisition and analysis Required Yes It must be noted that filenames must match exactly to those users are uploading. Filenames must also be unique, and can only contain numbers, letters, hyphens, underscores, and periods. All fields for each row must have some content -- blank fields are unacceptable. Fields other than filename also cannot contain return carriages or tabs. Spectrum Upload Users will need to upload their files into GNPS. To do this please refer to the upload documentation here . Spectrum Addition to Library To actually add the spectra to the libraries, users will Need to upload an empty mgf file to GNPS so that it appears in the file selector directory. Export excel file as a tab separated text file and uploaded to GNPS (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings). Users will then need to click here to utilize the batch workflow and select the mgf file created to hold the library, the input spectrum files, and the text version of the annotations. Addendum: Access to workflow is restricted - To request access please email Ming (ccms-web@cs.ucsd.edu) After the workflow completes, the mgf file will now be populated with the baych uploaded spectra. To contribute this library to the public GNPS library, please email Ming (ccms-web@cs.ucsd.edu), listing the location of the library and the public library it should be added to for approval.","title":"Reference Spectral Library Batch Addition"},{"location":"batchupload/#batch-upload-of-annotated-spectra","text":"While there is an interface to upload single spectra, users who wish to batch upload many spectra into the libraries might find adding one spectra at a time cumbersome. Here we provide a method to batch upload many spectra.","title":"Batch Upload of Annotated Spectra"},{"location":"batchupload/#annotation-spread-sheet","text":"To batch upload, this template must be used: Template Spreadsheet Annotation are to be added one spectrum per line. Columns may not be added, or deleted or changed. Each column must have a value. Refer to the table below for default values to enter when not known. Export from this Excel file as a tab separated text file (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings).","title":"Annotation Spread Sheet"},{"location":"batchupload/#batch-file-annotation","text":"To check the validity of your batch file, check out our batch validator .","title":"Batch File Annotation"},{"location":"batchupload/#field-information","text":"The field requirements are the same as on the single spectrum upload form, the other columns can be ignored. FIeld description are listed below. Please note: Only letters, numbers and underscores are allowed in the filenames. Spaces and special characters are NOT allowed. Header Desc. Default Value to Put When Not Known Possible Values Required FILENAME Input Filename (mzXML, mzML, or mgf) REQUIRED only letters, numbers, underscores and periods are allowed Yes SEQ Peptide Sequence *..* Please enter *..* here only No COMPOUND_NAME Compound Common Name REQUIRED Yes MOLECULEMASS Corrected Precursor MZ for Compound 0 Entering 0 means we will attempt to read the mz value from file No INSTRUMENT Mass Analyzer Instrument REQUIRED qTof, QQQ, Ion Trap, Hybrid FT, Orbitrap, ToF Yes IONSOURCE Source of Ions REQUIRED LC-ESI, DI-ESI, EI, APCI, ESI Yes EXTRACTSCAN Spectrum Scan of Spectrum REQUIRED Yes SMILES Smiles Structure N/A No INCHI Inchi Structure N/A No INCHIAUX Inchi Auxiliary Structure N/A No CHARGE Charge of Precursor (0 to pull from the spectrum file) 0 No IONMODE Ionization Mode (Positive/Negative) Positive Positive, Negative Yes PUBMED Pubmed ID where compound or data was published N/A No ACQUISITION Sample source of compound Crude Crude, Lysate, Commercial, Isolated, Other Yes EXACTMASS Compound Exact Mass 0 No DATACOLLECTOR Individual collecting data REQUIRED Yes ADDUCT Adduct of Ion Fragmented in MS2 (M+H, M+2H, etc.) REQUIRED Yes INTEREST N/A N/A No LIBQUALITY Quality of Library (1 for Gold, 2 for Silver, 3 for Bronze) 3 1,2,3 Yes GENUS Genus N/A No SPECIES Species N/A No STRAIN Strain N/A No CASNUMBER Chemical Abstracts Service compound identification number N/A No PI PI overseeing compound acquisition and analysis Required Yes It must be noted that filenames must match exactly to those users are uploading. Filenames must also be unique, and can only contain numbers, letters, hyphens, underscores, and periods. All fields for each row must have some content -- blank fields are unacceptable. Fields other than filename also cannot contain return carriages or tabs.","title":"Field Information"},{"location":"batchupload/#spectrum-upload","text":"Users will need to upload their files into GNPS. To do this please refer to the upload documentation here .","title":"Spectrum Upload"},{"location":"batchupload/#spectrum-addition-to-library","text":"To actually add the spectra to the libraries, users will Need to upload an empty mgf file to GNPS so that it appears in the file selector directory. Export excel file as a tab separated text file and uploaded to GNPS (recommended export from Windows office 2013 or newer. Verify that line endings are UNIX and not Windows line endings). Users will then need to click here to utilize the batch workflow and select the mgf file created to hold the library, the input spectrum files, and the text version of the annotations. Addendum: Access to workflow is restricted - To request access please email Ming (ccms-web@cs.ucsd.edu) After the workflow completes, the mgf file will now be populated with the baych uploaded spectra. To contribute this library to the public GNPS library, please email Ming (ccms-web@cs.ucsd.edu), listing the location of the library and the public library it should be added to for approval.","title":"Spectrum Addition to Library"},{"location":"browselibraries/","text":"GNPS Community Spectral Libraries The GNPS public spectral libraries can be browsed, explored, and downloaded. The list of all public spectral libraries is listed here . GNPS Community Library There are several spectral libraries available at GNPS. They are either imported from the community (e.g. Massbank ), provided directly to GNPS as a large collection of annotated spectra (e.g. Pesticide Library ), or aggregated from single MS/MS additions from the entire community (e.g. GNPS-Community ). Clicking on a library brings users to a list of all MS/MS spectra that are in that library. The most up to date annotation is listed. Most Recent Contributions At the bottom of the list of all spectral library, the most recent contributions of annotation library spectra are listed in reverse chronological order. These generous contributions from members of the community are just the latest amongst the thousands of MS/MS spectra deposited at GNPS. Library Spectrum List Users will be presented with a list of all spectra in the library. Each line represents a different entry in the library and displays the most recent annotation for that particular spectrum. Users are able to download the update to date version of each particular library by clicking the download icon next to the library header. Individual Spectrum View Users will be presented with a spectrum page that includes at the top an interactive spectrum viewer as well as the most recent spectrum information. Updating Spectrum Annotation In the event that annotations are incomplete or incorrect, users have the option to correct/update annotations of the library spectra. On each library spectrum page there is an update button to update the annotation. Spectrum Annotation History Revision history of the spectrum. Sorted in reverse chronological order, with most recent revisions first. To comment on a specific revision of the annotations, users can click the comment button for each annotation row. To view comments on each annotation, users can click the double down arrow at the left of the row.","title":"Browsing Reference Spectral Libraries"},{"location":"browselibraries/#gnps-community-spectral-libraries","text":"The GNPS public spectral libraries can be browsed, explored, and downloaded. The list of all public spectral libraries is listed here .","title":"GNPS Community Spectral Libraries"},{"location":"browselibraries/#gnps-community-library","text":"There are several spectral libraries available at GNPS. They are either imported from the community (e.g. Massbank ), provided directly to GNPS as a large collection of annotated spectra (e.g. Pesticide Library ), or aggregated from single MS/MS additions from the entire community (e.g. GNPS-Community ). Clicking on a library brings users to a list of all MS/MS spectra that are in that library. The most up to date annotation is listed.","title":"GNPS Community Library"},{"location":"browselibraries/#most-recent-contributions","text":"At the bottom of the list of all spectral library, the most recent contributions of annotation library spectra are listed in reverse chronological order. These generous contributions from members of the community are just the latest amongst the thousands of MS/MS spectra deposited at GNPS.","title":"Most Recent Contributions"},{"location":"browselibraries/#library-spectrum-list","text":"Users will be presented with a list of all spectra in the library. Each line represents a different entry in the library and displays the most recent annotation for that particular spectrum. Users are able to download the update to date version of each particular library by clicking the download icon next to the library header.","title":"Library Spectrum List"},{"location":"browselibraries/#individual-spectrum-view","text":"Users will be presented with a spectrum page that includes at the top an interactive spectrum viewer as well as the most recent spectrum information.","title":"Individual Spectrum View"},{"location":"browselibraries/#updating-spectrum-annotation","text":"In the event that annotations are incomplete or incorrect, users have the option to correct/update annotations of the library spectra. On each library spectrum page there is an update button to update the annotation.","title":"Updating Spectrum Annotation"},{"location":"browselibraries/#spectrum-annotation-history","text":"Revision history of the spectrum. Sorted in reverse chronological order, with most recent revisions first. To comment on a specific revision of the annotations, users can click the comment button for each annotation row. To view comments on each annotation, users can click the double down arrow at the left of the row.","title":"Spectrum Annotation History"},{"location":"changelog/","text":"Change Log 12/27/2018 GNPS quickstart support within MZMine2 updated 11/1/2018 Added UniqueFileCount to GraphML in Classic Molecular Networking Added GNPS Cluster Linkouts and GNPS Network Visualizer linkouts to GraphML in Classic Molecular Networking 10/28/2018 Feature based molecular networking is supported in the superquick start page Feature based molecular networking now supports MZMine2, OpenMS, Optimus, MS-DIAL, Metaboscape, and XCMS3 feature finding tools 10/26/2018 Adding UniqueFileSource attribute to GNPS Molecular Networking V2 Workflow (METABOLOMICS-SNETS-V2) 9/5/2018 Mirror plots include mz labels MASST supports dataset metadata display 8/1/2018 New Documentation and Splash Page are available Bug Fixes for Library Search to provide 10X increase in throughput for large datasets MASST is available to report MS/MS spectrum occurrences at a single file level with metadata reported if available 6/27/2018 Updating documentation 6/1/2018 New documentation website. Beta version of Molecular Networking provides stream lined results and cytoscape compliant output.","title":"Change Log"},{"location":"changelog/#change-log","text":"","title":"Change Log"},{"location":"changelog/#12272018","text":"GNPS quickstart support within MZMine2 updated","title":"12/27/2018"},{"location":"changelog/#1112018","text":"Added UniqueFileCount to GraphML in Classic Molecular Networking Added GNPS Cluster Linkouts and GNPS Network Visualizer linkouts to GraphML in Classic Molecular Networking","title":"11/1/2018"},{"location":"changelog/#10282018","text":"Feature based molecular networking is supported in the superquick start page Feature based molecular networking now supports MZMine2, OpenMS, Optimus, MS-DIAL, Metaboscape, and XCMS3 feature finding tools","title":"10/28/2018"},{"location":"changelog/#10262018","text":"Adding UniqueFileSource attribute to GNPS Molecular Networking V2 Workflow (METABOLOMICS-SNETS-V2)","title":"10/26/2018"},{"location":"changelog/#952018","text":"Mirror plots include mz labels MASST supports dataset metadata display","title":"9/5/2018"},{"location":"changelog/#812018","text":"New Documentation and Splash Page are available Bug Fixes for Library Search to provide 10X increase in throughput for large datasets MASST is available to report MS/MS spectrum occurrences at a single file level with metadata reported if available","title":"8/1/2018"},{"location":"changelog/#6272018","text":"Updating documentation","title":"6/27/2018"},{"location":"changelog/#612018","text":"New documentation website. Beta version of Molecular Networking provides stream lined results and cytoscape compliant output.","title":"6/1/2018"},{"location":"contact/","text":"GNPS Workflow Contact information If you have any questions about how to use GNPS please first ask the community at the GNPS forum located here . In the event that there is an issue with the GNPS website or workflows, please contact the administrators at ccms-web@cs.ucsd.edu . For more in-depth assistance, we invite you to attend the numerous GNPS workshops we offer at UCSD and at conferences throughout the year. Check out the upcoming workshops . GNPS Office Hours We are hosting online office hours on a bi-weekly basis online with Ming ( miw023@ucsd.edu via Zoom: https://zoom.us/j/854069972 In office hours we'll cover new and old features of GNPS and most importantly we'll take your personal questions about GNPS, computational mass spectrometry, and any science you want to chat about! Upcoming Office Hour Schedule Date/Time Subjects Covered 2PM PST Feb 11 GNPS Q and A / Additional Topic TBA 2PM PST Feb 25 GNPS Q and A / Additional Topic TBA","title":"Contact"},{"location":"contact/#gnps-workflow-contact-information","text":"If you have any questions about how to use GNPS please first ask the community at the GNPS forum located here . In the event that there is an issue with the GNPS website or workflows, please contact the administrators at ccms-web@cs.ucsd.edu . For more in-depth assistance, we invite you to attend the numerous GNPS workshops we offer at UCSD and at conferences throughout the year. Check out the upcoming workshops .","title":"GNPS Workflow Contact information"},{"location":"contact/#gnps-office-hours","text":"We are hosting online office hours on a bi-weekly basis online with Ming ( miw023@ucsd.edu via Zoom: https://zoom.us/j/854069972 In office hours we'll cover new and old features of GNPS and most importantly we'll take your personal questions about GNPS, computational mass spectrometry, and any science you want to chat about! Upcoming Office Hour Schedule Date/Time Subjects Covered 2PM PST Feb 11 GNPS Q and A / Additional Topic TBA 2PM PST Feb 25 GNPS Q and A / Additional Topic TBA","title":"GNPS Office Hours"},{"location":"continuousid/","text":"Continuous Identification GNPS' continuous identification aims to bring datasets to life. Traditionally, after manuscript publication, mass spectrometry datasets remain static and are never heard from again, silo'd in data cemeteries. GNPS' approach is different, we aim to Automatically make new discoveries within each dataset Aid future analyses by putting new data in the context of all previously existing datasets GNPS achieves the first goal by periodically reanalyzing each and every public dataset. With ever expanding reference spectral libraries, GNPS makes new identifications within datasets in an automatic fashion, recording this growth in identifications, and reports it back to the community. GNPS achieves the second goal by enabling users to \"BLAST\" MS/MS spectra against the entire GNPS set of datasets (see Molecular BLAST Search ). Exploring Current Continuous Identifications On each dataset page (See datasets ) the list of all continuous identifcations is listed under the \"Continuous Identification\" section. This list of all analyses shows the growth of identifications over time as well as how the identifications changed over time. For example, the 3D molecular skin cartography dataset (See MSV000078556 ) grew from 94 (April 9, 2014) identifications in the initial continuous identification to 860 (June 1, 2018). Dataset Subscriptions Whenever new identifications are made in a dataset, subscribers are automatically notified via email. To be subscribed to a dataset of interest, click the subscribe button on the dataset page: Continuous Identification Ratings Help us improve Continuous Identification by rating the matches returned on the \"All Identifications Page\". For each identification made, please rate each match according to the following rubric Rating Description 4 stars correct match as context is right (i.e., molecule is known/expected to be in the sample) 3 stars compound class match \u2013 at least part of the structure makes sense to match 2 stars cannot tell \u2013 might be correct from the spectrum match and context but there is not enough information to tell 1 star incorrect: molecule does not make sense in this context Users will be able to both add their own rating, add a comment for their given rating, as well as view the average rating of the identification. Continuous ID Subscription Email This example continuous identification email informs subscribers that the dataset of interest has more IDs in the most recent round of continuous identifications. It will first list the title of the dataset, then the changes in identification counts, and finally direct links to explore the data. Users can go directly to the search results and view the new, different, and deleted identifications as well as go straight to the dataset page itself.","title":"Continuous Identification"},{"location":"continuousid/#continuous-identification","text":"GNPS' continuous identification aims to bring datasets to life. Traditionally, after manuscript publication, mass spectrometry datasets remain static and are never heard from again, silo'd in data cemeteries. GNPS' approach is different, we aim to Automatically make new discoveries within each dataset Aid future analyses by putting new data in the context of all previously existing datasets GNPS achieves the first goal by periodically reanalyzing each and every public dataset. With ever expanding reference spectral libraries, GNPS makes new identifications within datasets in an automatic fashion, recording this growth in identifications, and reports it back to the community. GNPS achieves the second goal by enabling users to \"BLAST\" MS/MS spectra against the entire GNPS set of datasets (see Molecular BLAST Search ).","title":"Continuous Identification"},{"location":"continuousid/#exploring-current-continuous-identifications","text":"On each dataset page (See datasets ) the list of all continuous identifcations is listed under the \"Continuous Identification\" section. This list of all analyses shows the growth of identifications over time as well as how the identifications changed over time. For example, the 3D molecular skin cartography dataset (See MSV000078556 ) grew from 94 (April 9, 2014) identifications in the initial continuous identification to 860 (June 1, 2018).","title":"Exploring Current Continuous Identifications"},{"location":"continuousid/#dataset-subscriptions","text":"Whenever new identifications are made in a dataset, subscribers are automatically notified via email. To be subscribed to a dataset of interest, click the subscribe button on the dataset page:","title":"Dataset Subscriptions"},{"location":"continuousid/#continuous-identification-ratings","text":"Help us improve Continuous Identification by rating the matches returned on the \"All Identifications Page\". For each identification made, please rate each match according to the following rubric Rating Description 4 stars correct match as context is right (i.e., molecule is known/expected to be in the sample) 3 stars compound class match \u2013 at least part of the structure makes sense to match 2 stars cannot tell \u2013 might be correct from the spectrum match and context but there is not enough information to tell 1 star incorrect: molecule does not make sense in this context Users will be able to both add their own rating, add a comment for their given rating, as well as view the average rating of the identification.","title":"Continuous Identification Ratings"},{"location":"continuousid/#continuous-id-subscription-email","text":"This example continuous identification email informs subscribers that the dataset of interest has more IDs in the most recent round of continuous identifications. It will first list the title of the dataset, then the changes in identification counts, and finally direct links to explore the data. Users can go directly to the search results and view the new, different, and deleted identifications as well as go straight to the dataset page itself.","title":"Continuous ID Subscription Email"},{"location":"cytoscape/","text":"Network Visualization in Cytoscape While we do provide in-browser visualization for networks, these are limited to a single component at a time. Using Cytoscape, we can start visualizing the entire molecular network at once. Cytoscape is an open source software platform for visualization and annotation of networks. Cytoscape is available for download from here . The instructions below assume that you have installed Cytoscape 3.6.X. Cytoscape 3.6 Analysis (Quick) To quickly get started with your molecular network in Cytoscape, we have an easy export module from GNPS that previews the molecular network and provides a pre-formatted Cytoscape file. This feature is very much experimental, but from the status page, click the \"Direct Cytoscape Preview/Download\" This will bring you to a new interface where you will see a preview and a download link. Cytoscape 3.6 Analysis (Recommended) Downloading Cytoscape Import Files The first step is to download the correct input to import into Cytoscape. From the results page of molecular networking, you will need to download the graphML file for Cytoscape. Unzip the content of the zip file. The content will look like this: Importing Network into Cytoscape Now open Cytoscape 3.6.1. From the Toolbar go to File / Import / Network / File (or cmd + L) and then select the .graphml file in the root of the unzipped job folder. The network has been opened and will look like this. Creating a Cytoscape Style In Cytoscape 3.6.1, create a new Cytoscape style. As shown below, click on \"Create New Style\" and provide a name. Node Styling Node Label to Spectrum Property Within the Node menu, you will be able to apply a label to each of your nodes, you may select the Attribute from the drop down menu to use as a label and then select Passthrough Mapping as the Mapping Type. Typically Parent mass or Precursor mass is selected for node labels of networks generated using GNPS. Visualizing Group Abundances as Pie Charts If you organized your data into cohorts of samples, we can visualize the relative abundance (as measured by spectral counts which is psuedo-quantitative) with pie charts across these groups. Visualizing Structures The Cytoscape plugin ChemViz2 can visualize the chemical structure of GNPS spectral library annotation in the nodes. The ChemViz2 plugin can be be installed in the toolbar Apps /Apps manager / and type \"ChemViz2\" to find and install it. To visualize chemical structures, select the nodes of interest and do right-click, Apps / Cheminformatics tools / Paint structure on selected nodes. Also check out their website . Edge Styling Edge Thickness based on Spectral Similarity To aid in the visualization of individual node relatedness within a cluster, the cosine score is used. This value will determine the thickness of the edge between related nodes. The thicker the edge, the higher the cosine score and therefore the more related the two individual nodes are to each other. Again working within the Style Tab, select the Edge menu. From the Width drop down menu, select Cosine for the Column and Continuous Mapping for the Mapping Type. Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Below is a zoomed in portion of a network demonstrating the use of Cosine score for edge width determination. Cytoscape 2.8 Analysis (Legacy) See legacy documentation","title":"Molecular Networking in Cytoscape"},{"location":"cytoscape/#network-visualization-in-cytoscape","text":"While we do provide in-browser visualization for networks, these are limited to a single component at a time. Using Cytoscape, we can start visualizing the entire molecular network at once. Cytoscape is an open source software platform for visualization and annotation of networks. Cytoscape is available for download from here . The instructions below assume that you have installed Cytoscape 3.6.X.","title":"Network Visualization in Cytoscape"},{"location":"cytoscape/#cytoscape-36-analysis-quick","text":"To quickly get started with your molecular network in Cytoscape, we have an easy export module from GNPS that previews the molecular network and provides a pre-formatted Cytoscape file. This feature is very much experimental, but from the status page, click the \"Direct Cytoscape Preview/Download\" This will bring you to a new interface where you will see a preview and a download link.","title":"Cytoscape 3.6 Analysis (Quick)"},{"location":"cytoscape/#cytoscape-36-analysis-recommended","text":"","title":"Cytoscape 3.6 Analysis (Recommended)"},{"location":"cytoscape/#downloading-cytoscape-import-files","text":"The first step is to download the correct input to import into Cytoscape. From the results page of molecular networking, you will need to download the graphML file for Cytoscape. Unzip the content of the zip file. The content will look like this:","title":"Downloading Cytoscape Import Files"},{"location":"cytoscape/#importing-network-into-cytoscape","text":"Now open Cytoscape 3.6.1. From the Toolbar go to File / Import / Network / File (or cmd + L) and then select the .graphml file in the root of the unzipped job folder. The network has been opened and will look like this.","title":"Importing Network into Cytoscape"},{"location":"cytoscape/#creating-a-cytoscape-style","text":"In Cytoscape 3.6.1, create a new Cytoscape style. As shown below, click on \"Create New Style\" and provide a name.","title":"Creating a Cytoscape Style"},{"location":"cytoscape/#node-styling","text":"","title":"Node Styling"},{"location":"cytoscape/#node-label-to-spectrum-property","text":"Within the Node menu, you will be able to apply a label to each of your nodes, you may select the Attribute from the drop down menu to use as a label and then select Passthrough Mapping as the Mapping Type. Typically Parent mass or Precursor mass is selected for node labels of networks generated using GNPS.","title":"Node Label to Spectrum Property"},{"location":"cytoscape/#visualizing-group-abundances-as-pie-charts","text":"If you organized your data into cohorts of samples, we can visualize the relative abundance (as measured by spectral counts which is psuedo-quantitative) with pie charts across these groups.","title":"Visualizing Group Abundances as Pie Charts"},{"location":"cytoscape/#visualizing-structures","text":"The Cytoscape plugin ChemViz2 can visualize the chemical structure of GNPS spectral library annotation in the nodes. The ChemViz2 plugin can be be installed in the toolbar Apps /Apps manager / and type \"ChemViz2\" to find and install it. To visualize chemical structures, select the nodes of interest and do right-click, Apps / Cheminformatics tools / Paint structure on selected nodes. Also check out their website .","title":"Visualizing Structures"},{"location":"cytoscape/#edge-styling","text":"","title":"Edge Styling"},{"location":"cytoscape/#edge-thickness-based-on-spectral-similarity","text":"To aid in the visualization of individual node relatedness within a cluster, the cosine score is used. This value will determine the thickness of the edge between related nodes. The thicker the edge, the higher the cosine score and therefore the more related the two individual nodes are to each other. Again working within the Style Tab, select the Edge menu. From the Width drop down menu, select Cosine for the Column and Continuous Mapping for the Mapping Type. Double click on the Continuous Mapping area of the menu to adjust the thickness of the edge. Click OK to apply the setting changes. Below is a zoomed in portion of a network demonstrating the use of Cosine score for edge width determination.","title":"Edge Thickness based on Spectral Similarity"},{"location":"cytoscape/#cytoscape-28-analysis-legacy","text":"See legacy documentation","title":"Cytoscape 2.8 Analysis (Legacy)"},{"location":"datasets/","text":"MassIVE Datasets MassIVE is an online repository for publicly available datasets. MassIVE provides a location for researchers to access datasets that have been made available by others, oftentimes alongside publication. The datasets available remain alive long after publication. At GNPS, users will be able to Browse datasets - Explore all public GNPS datasets Download datasets - Download full dataset for offline processing/reanalysis Re-Analyze datasets - Online reanalysis with GNPS tools. Compare public data to your own Comment on datasets - Make public comments on public datasets to start a community discussion Subscribe to datasets - Subscribe to updates to datasets, e.g. Updated data from submitter, new identifications/analogs by Continuous Identification To enhance the analysis, datasets submitted to MassIVE through GNPS will be periodically searched against the ever growing annotated spectral libraries and new putative identifications within those datasets. Beyond new identifications within a dataset, subscribers will also be made aware of other datasets that exhibit chemical similarities to the subscribed dataset. This allows for users to be connected via their research interest to similar datasets. Submitting GNPS-MassIVE Datasets Here we will describe how to upload data into MassIVE specifically for GNPS. For more detailed information about general MassIVE dataset submission see here . At the GNPS splash screen , users can click this button to create a MassIVE dataset. Login with your GNPS login and hit Submit Data. GNPS Submission specifics The title is the display that users will use primarily to filter datasets. For GNPS datasets, a specific title format is required. GNPS - Title of Paper or Short Description The GNPS prefix is required for GNPS datasets. If this is not provided GNPS-MassIVE datasets are not shown to GNPS users. Example Recommended Description Paper title: Molecular networking as a dereplication strategy. Author List: Yang JY, Sanchez LM, Rath CM, Liu X, Boudreau PD, Bruns N, Glukhov E, Wodtke A, de Felicio R, Fenner A, Wong WR, Linington RG, Zhang L, Debonsi HM, Gerwick WH, Dorrestein PC. Citation: J Nat Prod. 2013 Sep 27;76(9):1686-99. doi: 10.1021/np400413s PubMedID: 24025162 Brief description of the data submitted: RAW Files used to generate Figure 4. Bacterial network with a cosine similarity score cutoff of 0.65. This network was generated from direct infusion of extracts or direct Making Dataset Public After submitting your dataset to MassIVE, you must explicity make the dataset public, by clicking the make public button: Continuous Identification A unique feature at GNPS is the continuous and automated reanalysis of public datasets. GNPS analyzes these datasets with molecular networking and library to make new identifications as the public community spectral libraries increase due to community contributions. Users may subscribe to datasets to receive email notifications of new identifications made to datasets of interest. Browsing Datasets To browse all public datasets, click the \"Datasets\" link at the top menu bar. This brings users to a list of all public GNPS-MassIVE datasets. Downloading Dataset Contents To download the contents of a dataset, you can reach the FTP url of each dataset by click the FTP link. Reanalyze Datasets Dataset data can be re-analyzed with the tools at GNPS. In order to import the dataset into your own workspace to select files, please refer to this documentation . Social Networking with Datasets Dataset Comments Users may make a comment on a dataset by clicking the \"Comment on Dataset Link\": To browse all comments per dataset, a table is shown Finding Related Datasets Users can find related MassIVE datasets to the current one. Currently relatedness of datasets is determine by the number of shared identified compounds between the two. Users can see a view like this:","title":"Dataset Creation/Sharing"},{"location":"datasets/#massive-datasets","text":"MassIVE is an online repository for publicly available datasets. MassIVE provides a location for researchers to access datasets that have been made available by others, oftentimes alongside publication. The datasets available remain alive long after publication. At GNPS, users will be able to Browse datasets - Explore all public GNPS datasets Download datasets - Download full dataset for offline processing/reanalysis Re-Analyze datasets - Online reanalysis with GNPS tools. Compare public data to your own Comment on datasets - Make public comments on public datasets to start a community discussion Subscribe to datasets - Subscribe to updates to datasets, e.g. Updated data from submitter, new identifications/analogs by Continuous Identification To enhance the analysis, datasets submitted to MassIVE through GNPS will be periodically searched against the ever growing annotated spectral libraries and new putative identifications within those datasets. Beyond new identifications within a dataset, subscribers will also be made aware of other datasets that exhibit chemical similarities to the subscribed dataset. This allows for users to be connected via their research interest to similar datasets.","title":"MassIVE Datasets"},{"location":"datasets/#submitting-gnps-massive-datasets","text":"Here we will describe how to upload data into MassIVE specifically for GNPS. For more detailed information about general MassIVE dataset submission see here . At the GNPS splash screen , users can click this button to create a MassIVE dataset. Login with your GNPS login and hit Submit Data.","title":"Submitting GNPS-MassIVE Datasets"},{"location":"datasets/#gnps-submission-specifics","text":"The title is the display that users will use primarily to filter datasets. For GNPS datasets, a specific title format is required. GNPS - Title of Paper or Short Description The GNPS prefix is required for GNPS datasets. If this is not provided GNPS-MassIVE datasets are not shown to GNPS users.","title":"GNPS Submission specifics"},{"location":"datasets/#example-recommended-description","text":"Paper title: Molecular networking as a dereplication strategy. Author List: Yang JY, Sanchez LM, Rath CM, Liu X, Boudreau PD, Bruns N, Glukhov E, Wodtke A, de Felicio R, Fenner A, Wong WR, Linington RG, Zhang L, Debonsi HM, Gerwick WH, Dorrestein PC. Citation: J Nat Prod. 2013 Sep 27;76(9):1686-99. doi: 10.1021/np400413s PubMedID: 24025162 Brief description of the data submitted: RAW Files used to generate Figure 4. Bacterial network with a cosine similarity score cutoff of 0.65. This network was generated from direct infusion of extracts or direct","title":"Example Recommended Description"},{"location":"datasets/#making-dataset-public","text":"After submitting your dataset to MassIVE, you must explicity make the dataset public, by clicking the make public button:","title":"Making Dataset Public"},{"location":"datasets/#continuous-identification","text":"A unique feature at GNPS is the continuous and automated reanalysis of public datasets. GNPS analyzes these datasets with molecular networking and library to make new identifications as the public community spectral libraries increase due to community contributions. Users may subscribe to datasets to receive email notifications of new identifications made to datasets of interest.","title":"Continuous Identification"},{"location":"datasets/#browsing-datasets","text":"To browse all public datasets, click the \"Datasets\" link at the top menu bar. This brings users to a list of all public GNPS-MassIVE datasets.","title":"Browsing Datasets"},{"location":"datasets/#downloading-dataset-contents","text":"To download the contents of a dataset, you can reach the FTP url of each dataset by click the FTP link.","title":"Downloading Dataset Contents"},{"location":"datasets/#reanalyze-datasets","text":"Dataset data can be re-analyzed with the tools at GNPS. In order to import the dataset into your own workspace to select files, please refer to this documentation .","title":"Reanalyze Datasets"},{"location":"datasets/#social-networking-with-datasets","text":"","title":"Social Networking with Datasets"},{"location":"datasets/#dataset-comments","text":"Users may make a comment on a dataset by clicking the \"Comment on Dataset Link\": To browse all comments per dataset, a table is shown","title":"Dataset Comments"},{"location":"datasets/#finding-related-datasets","text":"Users can find related MassIVE datasets to the current one. Currently relatedness of datasets is determine by the number of shared identified compounds between the two. Users can see a view like this:","title":"Finding Related Datasets"},{"location":"dereplicator/","text":"Dereplicator - Insilito Peptidic Natural Products Tool The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. Check out the full legacy documentation . You can choose a tool to run from the In Silico Page at GNPS . Citation Dereplicator: Hosein Mohimani, Alexey Gurevich, Alla Mikheenko, Neha Garg, Louis-Felix Nothias, Akihiro Ninomiya, Kentaro Takada, Pieter C. Dorrestein, Pavel A. Pevzner, Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology, 2016, 13, 30--37 (2017) Dereplicator with VarQuest: Gurevich, A.; Mikheenko, A.; Shlemov, A.; Korobeynikov, A.; Mohimani, H.; Pevzner, P. A. Increased Diversity of Peptidic Natural Products Revealed by Modification-Tolerant Database Search of Mass Spectra. Nat Microbiol 2018, 3 (3), 319--327.","title":"Dereplicator"},{"location":"dereplicator/#dereplicator-insilito-peptidic-natural-products-tool","text":"The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. Check out the full legacy documentation . You can choose a tool to run from the In Silico Page at GNPS .","title":"Dereplicator - Insilito Peptidic Natural Products Tool"},{"location":"dereplicator/#citation","text":"Dereplicator: Hosein Mohimani, Alexey Gurevich, Alla Mikheenko, Neha Garg, Louis-Felix Nothias, Akihiro Ninomiya, Kentaro Takada, Pieter C. Dorrestein, Pavel A. Pevzner, Dereplication of Peptidic Natural Products Through Database Search of Mass Spectra, Nature Chemical Biology, 2016, 13, 30--37 (2017) Dereplicator with VarQuest: Gurevich, A.; Mikheenko, A.; Shlemov, A.; Korobeynikov, A.; Mohimani, H.; Pevzner, P. A. Increased Diversity of Peptidic Natural Products Revealed by Modification-Tolerant Database Search of Mass Spectra. Nat Microbiol 2018, 3 (3), 319--327.","title":"Citation"},{"location":"downloadlibraries/","text":"Downloading GNPS Spectral Libraries Download GNPS Spectral libraries on each of the spectral library pages. Click the download icon to get an MGF version of the spectral library. MGF Format Each spectral library entry in the MGF follows this format. BEGIN IONS PEPMASS=561.365 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=DI-ESI-LTQ-FT-ICR FILENAME=Desferrioxamine_B_1H_561_3647.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-LIBRARY NAME=Desferrioxamine B M+H PI=Dorrestein DATACOLLECTOR=J Watrous SMILES=N/A INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=jdwatrou TAGS= LIBRARYQUALITY=3 SPECTRUMID=CCMSLIB00000072100 SCANS=1 161.0 2.216415 161.27272 3.386504 165.181824 94.756683 166.272736 38.394264 167.0 0.407026 168.363632 4.767616 169.272736 1.753857 170.363632 3.976861 171.181824 1.136681 172.181824 0.95803 175.090912 0.973687 177.363632 0.904491 181.181824 0.374121 181.454544 1.961724 182.363632 1.306631 183.272736 162.821075 184.272736 3.942838 185.272736 7.338296 186.363632 1.208049 190.181824 1.380652 190.545456 0.753061 191.0 0.477648 END IONS","title":"Downloading Reference Spectral Libraries"},{"location":"downloadlibraries/#downloading-gnps-spectral-libraries","text":"Download GNPS Spectral libraries on each of the spectral library pages. Click the download icon to get an MGF version of the spectral library.","title":"Downloading GNPS Spectral Libraries"},{"location":"downloadlibraries/#mgf-format","text":"Each spectral library entry in the MGF follows this format. BEGIN IONS PEPMASS=561.365 CHARGE=1 MSLEVEL=2 SOURCE_INSTRUMENT=DI-ESI-LTQ-FT-ICR FILENAME=Desferrioxamine_B_1H_561_3647.mzXML SEQ=*..* IONMODE=Positive ORGANISM=GNPS-LIBRARY NAME=Desferrioxamine B M+H PI=Dorrestein DATACOLLECTOR=J Watrous SMILES=N/A INCHI=N/A INCHIAUX=N/A PUBMED=N/A SUBMITUSER=jdwatrou TAGS= LIBRARYQUALITY=3 SPECTRUMID=CCMSLIB00000072100 SCANS=1 161.0 2.216415 161.27272 3.386504 165.181824 94.756683 166.272736 38.394264 167.0 0.407026 168.363632 4.767616 169.272736 1.753857 170.363632 3.976861 171.181824 1.136681 172.181824 0.95803 175.090912 0.973687 177.363632 0.904491 181.181824 0.374121 181.454544 1.961724 182.363632 1.306631 183.272736 162.821075 184.272736 3.942838 185.272736 7.338296 186.363632 1.208049 190.181824 1.380652 190.545456 0.753061 191.0 0.477648 END IONS","title":"MGF Format"},{"location":"faq/","text":"Data Privacy Q: Is the data I upload to analyze publicly visible? A: Data you upload to analyze at GNPS will remain private unless you explicitly make it public. The two ways to make your data public are to create MassIVE datasets that make entire datasets public or add individual annotated MS/MS spectra to GNPS spectral libraries. Q: Will MassIVE datasets that I create be public by default? A: No, when creating a MassIVE dataset, it is not public by default. On the input form page, you are able to set a password to access the MassIVE dataset. There is a Make Public link to make your dataset open to the public and documentation can be found here here. Such a feature is very useful because users can create a MassIVE dataset prior to publication submission that is private and password protected. The MassIVE dataset link can be provided to reviewers along with the password so to provide better transparency and increase probability of manuscript acceptance. Data Organization Q: How does the MassIVE data differ from the GNPS spectral libraries? A: MassIVE datasets consist of raw data. GNPS spectral libraries consist of spectra that have been individually assigned an identification. Q: Can I create my own private spectral libraries? A: Yes, but it is not recommended. Please contact administrators for further details. Spectral Libraries Q: How do I get access to the public spectral libraries? A: On the select input files popup, click on the shared files tab, and enter speclibs as an import share. Analyzing Data Q: Can I select more than one file at a time for each group in molecular networking? A: Yes. Within each group you can select multiple files, even folders of spectra. Simply highlight the multiple files/folders you want to select and then add to the appropriate group. Mass Spectrometry Types Q: Does GNPS support data independent acquisition (DIA) data types such as MSe and SWATH? A: GNPS natively does not support these types of data with large isolation windows. We recommend that these data be preprocessed so that individual molecule fragmentation can be deconvoluted with tool such as DIA-Umpire . Browser Support We officially test on the latest Chrome browser. Other browsers, e.g. Firefox, Internet Explorer, Opera, Edge, are not officially supported but likely will not have any issues with GNPS.","title":"Frequently Asked Questions"},{"location":"faq/#data-privacy","text":"Q: Is the data I upload to analyze publicly visible? A: Data you upload to analyze at GNPS will remain private unless you explicitly make it public. The two ways to make your data public are to create MassIVE datasets that make entire datasets public or add individual annotated MS/MS spectra to GNPS spectral libraries. Q: Will MassIVE datasets that I create be public by default? A: No, when creating a MassIVE dataset, it is not public by default. On the input form page, you are able to set a password to access the MassIVE dataset. There is a Make Public link to make your dataset open to the public and documentation can be found here here. Such a feature is very useful because users can create a MassIVE dataset prior to publication submission that is private and password protected. The MassIVE dataset link can be provided to reviewers along with the password so to provide better transparency and increase probability of manuscript acceptance.","title":"Data Privacy"},{"location":"faq/#data-organization","text":"Q: How does the MassIVE data differ from the GNPS spectral libraries? A: MassIVE datasets consist of raw data. GNPS spectral libraries consist of spectra that have been individually assigned an identification. Q: Can I create my own private spectral libraries? A: Yes, but it is not recommended. Please contact administrators for further details.","title":"Data Organization"},{"location":"faq/#spectral-libraries","text":"Q: How do I get access to the public spectral libraries? A: On the select input files popup, click on the shared files tab, and enter speclibs as an import share.","title":"Spectral Libraries"},{"location":"faq/#analyzing-data","text":"Q: Can I select more than one file at a time for each group in molecular networking? A: Yes. Within each group you can select multiple files, even folders of spectra. Simply highlight the multiple files/folders you want to select and then add to the appropriate group.","title":"Analyzing Data"},{"location":"faq/#mass-spectrometry-types","text":"Q: Does GNPS support data independent acquisition (DIA) data types such as MSe and SWATH? A: GNPS natively does not support these types of data with large isolation windows. We recommend that these data be preprocessed so that individual molecule fragmentation can be deconvoluted with tool such as DIA-Umpire .","title":"Mass Spectrometry Types"},{"location":"faq/#browser-support","text":"We officially test on the latest Chrome browser. Other browsers, e.g. Firefox, Internet Explorer, Opera, Edge, are not officially supported but likely will not have any issues with GNPS.","title":"Browser Support"},{"location":"featurebasedmolecularnetworking/","text":"The Feature Finding Molecular Networking brings together LC-MS feature detection tools (e.g. MZmine2, OpenMS, MS-DIAL, MetaboScape), molecular networking (GNPS, http://gnps.ucsd.edu), and other in silico annotation tools, such as Sirius, CSI:FingerID, or Network Annotation Propagation. What is Feature Based Molecular Networking Feature Based Molecular Networking is a new way to create molecular networks that utilizes feature detection tools to provide quantification information paired with molecular networking. This is in difference from classic molecular networking that Why Feature Based Molecular Networking The key improvements of the new Feature Finding Molecular Networking are: Importing quantitative information derived from the feature detection tools into the molecular networks Discriminate isomers by retention time and remove isotopic peak Allows the annotation MS/MS of spectra with in silico tools and mapping in the molecular networks Feature Detection In summary, these tools have been adapted by providing an .MGF export module for the result of LC-MS/MS feature detection. The data have to be processed as recommended by the developers. The spectral data from the aligned data can be exported as .MGF, the aligned quantification table has to be exported as well. The .MGF file can be used as input for any GNPS tools. The aligned quantification table can be imported into Cytoscape. The metadata table groups can be generated automatically with a dedicated workflow for MZmine2, or post-processed with other solutions (Jupyter notebooks, excel). Currently, we are recommending using the MZmine2 workflow, as it has been thoroughly tested. See the documentation below. Mass spectrometry data Feature Detection with MZmine2 Download MZmine2 software (version MZmine v2.33 minimum) at https://github.com/mzmine/mzmine2/releases . See documentation and videos here: http://mzmine.github.io/documentation.html , and the video tutorial about Feature Based Molecular Networking. Please make sure your files are converted to mzXML or mzML. MZMine Batch Steps In MZmine2, a sequence of steps must be performed. Here are several prototype for various instruments as a starting point: Instrument Gradient Length Matrix Type Sample Size Download Bruker Maxis HD qTof 10 Min Stool 20 Batch These batch files can be imported into MZMine2. The steps required for data pre-processing with MZmine2 for GNPS are shown in the screen capture below. See also the following video tutorial Below is a walk through of all the steps 1. Import Files Menu: Raw data methods / Raw data import / \"Select the files\" 2. Mass Detection Perform mass detection on MS level 1: Menu: Raw data methods / Mass detection / Set filter : MS level 1 [IMPORTANT] Set a appropriate intensity threshold. You cam use the preview window to asses your data. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. (Example: MAXIS-QTOF: 1E3, Q-Exactive 1E4) Perform mass detection on MS level 2. The same masslist name must be used: Menu: Raw data methods / Mass detection / Set filter : MS level 2. [IMPORTANT] Make sure to set an intensity threshold representative of noise level in the MS2 spectrum. This is typically lower than for MS1. Inappropriate intensity threshold could hamper the GNPS and Sirius export modules. (Example: MAXIS-QTOF: 1E2; Q-Exactive 1E3). If you have any doubt, set it to 0. 3. Build Chromatogram Menu: Raw data methods / Chromatogram builder 4. Deconvolve the Chromatogram Menu: Peak list methods / Peak detection / Chromatogram deconvolution [IMPORTANT] tick both options \"m/z range for MS2 scan pairing (Da)\" and \"RT range for MS2 scan pairing (min)\". Define the values according to your experimental setup. This depends on your expected chromatographic peak width and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min grdainet, 0.15 min, 0.02 m/z; Q-Eaxtive, 5 min gradient, 0.1 min, 0.01 m/z) 5. Group isotopes and co-eluting ions \"Isotopic peaks grouper module\" [recommended] or Camera module. Menu: Peak list methods / Isotopes / Isotopic peaks grouper. [IMPORTANT] This depends on your expected peak shapes, duty cycle time and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min grdainet, 0.1 min, 0.02 m/z; Q-Eaxtive, 5 min gradient, 0.05 min, 0.01 m/z) 6. Order the peaklists (Optional) Menu: Peak list methods / Order peak lists. This is to ensure reproducibility of results. Final output might change a little if this is not performed. 7. Align Features Menu: Peak list methods / Alignment / Join aligner 8. Detect Missing Peaks / Gap filling (Optional) Menu: Peak list methods / Gap filling / Peak finder 9. Filter to MS/MS Peaks Use both filters in the peaklist row filter module: 'Keep only peaks with MS2 scan (GNPS)\". Menu: Peak list methods / Filtering / Peak list row filter 10. Export Feature Abundances (filtered) Export the feature table containing filtered peaks in .CSV format. Menu: Peak list methods / Export / Export to CSV file. See an example of MZmine feature table here . The feature table must contain at least the row ID, the row m/z, and row retention time, along with the sample columns. It is currently mandatory for the sample name headers string to have the following format: \"filename Peak area\". Depending on Note that depending on the steps used in MZmine the sample name header can be \"filename baseline-corrected Peak area\", but this has to changed back to \"filename Peak area\". 11. Export MS/MS as MGF for GNPS Export the .MGF file for GNPS. Menu: Peak list methods / Export / Export for GNPS. See an example of MZmine .MGF file here . Feature Based Molecular Networking in GNPS There is a special molecular networking workflow to handle MzMine2 features outputs. Try it out here . You need to be logged in first! You will need three items (test files are accessible here ): Feature Table from above MGF for MS/MS from above Metadata table - described here There are several additional normalization options specifically for feature detection. We can normalize the features per LC/MS run and aggregate by groups with either a sum or average (recommended). Here is an example mzmine networking job from a subset of the American Gut Project. Video Tutorial Running Feature Based Molecular Network at GNPS Quick MZMine2 Export to GNPS Feature Based Molecular Networking Results Tables Once the molecular networking is finished, there are many views to explore the analysis. These views are very similar to classic molecular networking. Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View All Analog Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries With Analog Search View All Clusters With IDs All consensus MS/MS spectra created by Feature Detection Tool that were considered for library search and molecular networking. Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Export/Download Network Files View Description Download Cytoscape Data Download network files (graphML) for import into Cytoscape Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape Advanced Views - External Tools View Description View Dereplicator Results View Dereplicator identification results Visualizing Abundances in Cytoscape as Pie Charts To visualize different group average abundances in Cytoscape, we'll use pie charts between different groups we care about. Open up the Molecular Network in Cytoscape. Initially, all nodes will be blue Select the Style tab, and click the \"Def.\" column under the Image/Chart 1 Row: This brings up a panel to select which groups you would like to display in the pie charts: Select the specific groups you want to compare (e.g. Case vs Control) and hit apply. Now the network will be colored with pies relevant to the groups you wanted to compare. Tutorials See our tutorial on using MZmine2 to produce quantification/ms2 files for Feature Based Molecular Networking in the American Gut Project sample. See our tutorial on running Feature Based Molecular Networking within GNPS. Citation This work builds on the efforts of our many colleagues, please check out their work: MZmine 2: Modular framework for processing, visualizing, and analyzing mass spectrometry-based molecular profile data. Pluskal et. al.","title":"Feature Based Molecular Networking"},{"location":"featurebasedmolecularnetworking/#what-is-feature-based-molecular-networking","text":"Feature Based Molecular Networking is a new way to create molecular networks that utilizes feature detection tools to provide quantification information paired with molecular networking. This is in difference from classic molecular networking that","title":"What is Feature Based Molecular Networking"},{"location":"featurebasedmolecularnetworking/#why-feature-based-molecular-networking","text":"The key improvements of the new Feature Finding Molecular Networking are: Importing quantitative information derived from the feature detection tools into the molecular networks Discriminate isomers by retention time and remove isotopic peak Allows the annotation MS/MS of spectra with in silico tools and mapping in the molecular networks","title":"Why Feature Based Molecular Networking"},{"location":"featurebasedmolecularnetworking/#feature-detection","text":"In summary, these tools have been adapted by providing an .MGF export module for the result of LC-MS/MS feature detection. The data have to be processed as recommended by the developers. The spectral data from the aligned data can be exported as .MGF, the aligned quantification table has to be exported as well. The .MGF file can be used as input for any GNPS tools. The aligned quantification table can be imported into Cytoscape. The metadata table groups can be generated automatically with a dedicated workflow for MZmine2, or post-processed with other solutions (Jupyter notebooks, excel). Currently, we are recommending using the MZmine2 workflow, as it has been thoroughly tested. See the documentation below.","title":"Feature Detection"},{"location":"featurebasedmolecularnetworking/#mass-spectrometry-data-feature-detection-with-mzmine2","text":"Download MZmine2 software (version MZmine v2.33 minimum) at https://github.com/mzmine/mzmine2/releases . See documentation and videos here: http://mzmine.github.io/documentation.html , and the video tutorial about Feature Based Molecular Networking. Please make sure your files are converted to mzXML or mzML.","title":"Mass spectrometry data Feature Detection with MZmine2"},{"location":"featurebasedmolecularnetworking/#mzmine-batch-steps","text":"In MZmine2, a sequence of steps must be performed. Here are several prototype for various instruments as a starting point: Instrument Gradient Length Matrix Type Sample Size Download Bruker Maxis HD qTof 10 Min Stool 20 Batch These batch files can be imported into MZMine2. The steps required for data pre-processing with MZmine2 for GNPS are shown in the screen capture below. See also the following video tutorial Below is a walk through of all the steps","title":"MZMine Batch Steps"},{"location":"featurebasedmolecularnetworking/#1-import-files","text":"Menu: Raw data methods / Raw data import / \"Select the files\"","title":"1. Import Files"},{"location":"featurebasedmolecularnetworking/#2-mass-detection","text":"Perform mass detection on MS level 1: Menu: Raw data methods / Mass detection / Set filter : MS level 1 [IMPORTANT] Set a appropriate intensity threshold. You cam use the preview window to asses your data. As a rule of thumb, the value should at least correspond to the minimum value set for the triggering of the MS2 scan event. (Example: MAXIS-QTOF: 1E3, Q-Exactive 1E4) Perform mass detection on MS level 2. The same masslist name must be used: Menu: Raw data methods / Mass detection / Set filter : MS level 2. [IMPORTANT] Make sure to set an intensity threshold representative of noise level in the MS2 spectrum. This is typically lower than for MS1. Inappropriate intensity threshold could hamper the GNPS and Sirius export modules. (Example: MAXIS-QTOF: 1E2; Q-Exactive 1E3). If you have any doubt, set it to 0.","title":"2. Mass Detection"},{"location":"featurebasedmolecularnetworking/#3-build-chromatogram","text":"Menu: Raw data methods / Chromatogram builder","title":"3. Build Chromatogram"},{"location":"featurebasedmolecularnetworking/#4-deconvolve-the-chromatogram","text":"Menu: Peak list methods / Peak detection / Chromatogram deconvolution [IMPORTANT] tick both options \"m/z range for MS2 scan pairing (Da)\" and \"RT range for MS2 scan pairing (min)\". Define the values according to your experimental setup. This depends on your expected chromatographic peak width and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min grdainet, 0.15 min, 0.02 m/z; Q-Eaxtive, 5 min gradient, 0.1 min, 0.01 m/z)","title":"4. Deconvolve the Chromatogram"},{"location":"featurebasedmolecularnetworking/#5-group-isotopes-and-co-eluting-ions","text":"\"Isotopic peaks grouper module\" [recommended] or Camera module. Menu: Peak list methods / Isotopes / Isotopic peaks grouper. [IMPORTANT] This depends on your expected peak shapes, duty cycle time and the MS mass accuracy. (Example: MAXIS-QTOF, 10 min grdainet, 0.1 min, 0.02 m/z; Q-Eaxtive, 5 min gradient, 0.05 min, 0.01 m/z)","title":"5. Group isotopes and co-eluting ions"},{"location":"featurebasedmolecularnetworking/#6-order-the-peaklists-optional","text":"Menu: Peak list methods / Order peak lists. This is to ensure reproducibility of results. Final output might change a little if this is not performed.","title":"6. Order the peaklists (Optional)"},{"location":"featurebasedmolecularnetworking/#7-align-features","text":"Menu: Peak list methods / Alignment / Join aligner","title":"7. Align Features"},{"location":"featurebasedmolecularnetworking/#8-detect-missing-peaks-gap-filling-optional","text":"Menu: Peak list methods / Gap filling / Peak finder","title":"8. Detect Missing Peaks / Gap filling (Optional)"},{"location":"featurebasedmolecularnetworking/#9-filter-to-msms-peaks","text":"Use both filters in the peaklist row filter module: 'Keep only peaks with MS2 scan (GNPS)\". Menu: Peak list methods / Filtering / Peak list row filter","title":"9. Filter to MS/MS Peaks"},{"location":"featurebasedmolecularnetworking/#10-export-feature-abundances-filtered","text":"Export the feature table containing filtered peaks in .CSV format. Menu: Peak list methods / Export / Export to CSV file. See an example of MZmine feature table here . The feature table must contain at least the row ID, the row m/z, and row retention time, along with the sample columns. It is currently mandatory for the sample name headers string to have the following format: \"filename Peak area\". Depending on Note that depending on the steps used in MZmine the sample name header can be \"filename baseline-corrected Peak area\", but this has to changed back to \"filename Peak area\".","title":"10. Export Feature Abundances (filtered)"},{"location":"featurebasedmolecularnetworking/#11-export-msms-as-mgf-for-gnps","text":"Export the .MGF file for GNPS. Menu: Peak list methods / Export / Export for GNPS. See an example of MZmine .MGF file here .","title":"11. Export MS/MS as MGF for GNPS"},{"location":"featurebasedmolecularnetworking/#feature-based-molecular-networking-in-gnps","text":"There is a special molecular networking workflow to handle MzMine2 features outputs. Try it out here . You need to be logged in first! You will need three items (test files are accessible here ): Feature Table from above MGF for MS/MS from above Metadata table - described here There are several additional normalization options specifically for feature detection. We can normalize the features per LC/MS run and aggregate by groups with either a sum or average (recommended). Here is an example mzmine networking job from a subset of the American Gut Project.","title":"Feature Based Molecular Networking in GNPS"},{"location":"featurebasedmolecularnetworking/#video-tutorial","text":"Running Feature Based Molecular Network at GNPS Quick MZMine2 Export to GNPS Feature Based Molecular Networking","title":"Video Tutorial"},{"location":"featurebasedmolecularnetworking/#results-tables","text":"Once the molecular networking is finished, there are many views to explore the analysis. These views are very similar to classic molecular networking. Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View All Analog Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries With Analog Search View All Clusters With IDs All consensus MS/MS spectra created by Feature Detection Tool that were considered for library search and molecular networking. Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Export/Download Network Files View Description Download Cytoscape Data Download network files (graphML) for import into Cytoscape Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape Advanced Views - External Tools View Description View Dereplicator Results View Dereplicator identification results","title":"Results Tables"},{"location":"featurebasedmolecularnetworking/#visualizing-abundances-in-cytoscape-as-pie-charts","text":"To visualize different group average abundances in Cytoscape, we'll use pie charts between different groups we care about. Open up the Molecular Network in Cytoscape. Initially, all nodes will be blue Select the Style tab, and click the \"Def.\" column under the Image/Chart 1 Row: This brings up a panel to select which groups you would like to display in the pie charts: Select the specific groups you want to compare (e.g. Case vs Control) and hit apply. Now the network will be colored with pies relevant to the groups you wanted to compare.","title":"Visualizing Abundances in Cytoscape as Pie Charts"},{"location":"featurebasedmolecularnetworking/#tutorials","text":"See our tutorial on using MZmine2 to produce quantification/ms2 files for Feature Based Molecular Networking in the American Gut Project sample. See our tutorial on running Feature Based Molecular Networking within GNPS.","title":"Tutorials"},{"location":"featurebasedmolecularnetworking/#citation","text":"This work builds on the efforts of our many colleagues, please check out their work: MZmine 2: Modular framework for processing, visualizing, and analyzing mass spectrometry-based molecular profile data. Pluskal et. al.","title":"Citation"},{"location":"fileconversion/","text":"Supported Formats at GNPS At GNPS we support mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If your files are in not supported, please use the following guide to convert them to an open format that is supported by GNPS. Data Conversion (Easy) This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzXML). It is as easy as putting files into a folder and batch converting it all without any installation (well nearly so). Download the zip file here Unzip contents onto a folder on your computer (e.g. Desktop) Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here Put vendor formats in \"Input_Files\" not embedded in other folders Double click on Double-Click_To-Convert.bit - Download zip includes demo files for major vendor formats as a test. Wait patiently Check all files converted in Output_Folder If there are errors, please check log.txt or read on how to convert files in a more traditional manner. Data Conversion (Traditional) For files to be operated on in the GNPS workflows, they must be in the correct format. Only the following formats are acceptable: .mzXML, .mzML, and .mgf. The .mzXML or .mzML format is strongly preferred and will be discussed in this tutorial for data conversion. Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software and is detailed here ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA detailed instructions coming soon! Shimadzu .lcd MSConvert For problems with MSConvert, please contact the ProteoWizard developers . If you are a vendor and think there are better methods to convert your files to work with GNPS, let us know by contacting us . Conversion with MSConvert Download and install ProteoWizard from here . Important: make sure to choose the version Windows (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed. After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert. Click Browse and select file(s) for conversion. Then Click Add to add them to the MSConvert workflow. Choose an Output Directory Under Options, choose mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression. Note that mzML files are also supported. Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-. Click Add to add the filter. Click Start. Check your folder for the new .mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS) . Advanced Online Conversion with Proteowizard (MSConvert) It is possible to convert spectrum files online at the sister site - MassIVE. This site is able to handle thermo RAW and Sciex Wiff files. Please check it out here .","title":"Mass Spectrometry File Conversion"},{"location":"fileconversion/#supported-formats-at-gnps","text":"At GNPS we support mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If your files are in not supported, please use the following guide to convert them to an open format that is supported by GNPS.","title":"Supported Formats at GNPS"},{"location":"fileconversion/#data-conversion-easy","text":"This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzXML). It is as easy as putting files into a folder and batch converting it all without any installation (well nearly so). Download the zip file here Unzip contents onto a folder on your computer (e.g. Desktop) Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here Put vendor formats in \"Input_Files\" not embedded in other folders Double click on Double-Click_To-Convert.bit - Download zip includes demo files for major vendor formats as a test. Wait patiently Check all files converted in Output_Folder If there are errors, please check log.txt or read on how to convert files in a more traditional manner.","title":"Data Conversion (Easy)"},{"location":"fileconversion/#data-conversion-traditional","text":"For files to be operated on in the GNPS workflows, they must be in the correct format. Only the following formats are acceptable: .mzXML, .mzML, and .mgf. The .mzXML or .mzML format is strongly preferred and will be discussed in this tutorial for data conversion. Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software and is detailed here ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA detailed instructions coming soon! Shimadzu .lcd MSConvert For problems with MSConvert, please contact the ProteoWizard developers . If you are a vendor and think there are better methods to convert your files to work with GNPS, let us know by contacting us .","title":"Data Conversion (Traditional)"},{"location":"fileconversion/#conversion-with-msconvert","text":"Download and install ProteoWizard from here . Important: make sure to choose the version Windows (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed. After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert. Click Browse and select file(s) for conversion. Then Click Add to add them to the MSConvert workflow. Choose an Output Directory Under Options, choose mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression. Note that mzML files are also supported. Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-. Click Add to add the filter. Click Start. Check your folder for the new .mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS) .","title":"Conversion with MSConvert"},{"location":"fileconversion/#advanced-online-conversion-with-proteowizard-msconvert","text":"It is possible to convert spectrum files online at the sister site - MassIVE. This site is able to handle thermo RAW and Sciex Wiff files. Please check it out here .","title":"Advanced Online Conversion with Proteowizard (MSConvert)"},{"location":"fileupload/","text":"To upload files to GNPS for analysis, the preferred method is to use an FTP client. This provides a robust and batch manner to upload many files. The one big downside is that you have to have to install an FTP client if you don't already have one. We offer as an alternative an online browser drag and drop that is limited to small files. FTP Batch File Uploads Please checkout our Legacy Documentation on how to upload files via FTP. This requires you to have already created a GNPS account. If you have not yet done so please follow these instructions . Browser File Uploads To upload files to GNPS using the browser (limited to 20MB), you can use our web drag and drop uploader. This is not the recommended manner to upload files, but if you're in a hurry, we can't fault you. Located under the upload tab To select the folder to upload files into, click on a single folder in the file structure tree. Now drag and drop your files into the Drag and Drop area to upload.","title":"GNPS File Upload"},{"location":"fileupload/#ftp-batch-file-uploads","text":"Please checkout our Legacy Documentation on how to upload files via FTP. This requires you to have already created a GNPS account. If you have not yet done so please follow these instructions .","title":"FTP Batch File Uploads"},{"location":"fileupload/#browser-file-uploads","text":"To upload files to GNPS using the browser (limited to 20MB), you can use our web drag and drop uploader. This is not the recommended manner to upload files, but if you're in a hurry, we can't fault you. Located under the upload tab To select the folder to upload files into, click on a single folder in the file structure tree. Now drag and drop your files into the Drag and Drop area to upload.","title":"Browser File Uploads"},{"location":"gnpsanalysisoverview/","text":"This highlights all the current production analysis tools at GNPS as well as some exciting up and coming tools in development. Recommended Analysis Tools Molecular Networking Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This approach groups sets of spectra from related molecules (known as molecular families) even when the spectra themselves are not identified (do not match to any known compounds). Molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (similar fragmentation implying similar structure) between nodes. Nodes can be supplemented with metadata, including library matches matches or information that is provided by the user, e.g. abundance, origin of product, hydrophobicity, etc. These metadata attributes can be reflected in a node\u2019s size or color. Spectral Library Search MS/MS data is searched against reference GNPS spectral libraries in a high throughput manner, scaling up to hundreds of files at a time. The spectral library search can be configured to either match exactly to known molecules or utilize variable dereplication to identify putative analogs of known compounds. Molecular BLAST Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs as well as search a single MS/MS spectrum against all public spectral libraries. Advanced Analysis Tools Dereplicator The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree. Network Annotation Propogation Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. Analysis Tools in Active Development Feature Based Molecular Networking Feature Based Molecular Networking relies on feature detection to determine molecule abundances and aligns these abundances across a cohort of samples into consensus features. Corresponding MS/MS spectra are assigned to each consensus feature and analyzed with spectral library search and molecular networking. This approach enables More accurate quantification of molecules Resolution of isomeric compounds Reduction of redundancy of MS/MS molecules MS2LDA MS2LDA is a method for the decomposition of sets of molecular fragment data derived from large metabolomics experiments. Check out the MS2LDA website here . At GNPS, we have worked with the MS2LDA team to curate a set of motifs that can help to annotate your MS/MS spectra.","title":"GNPS Analysis Tools Overview"},{"location":"gnpsanalysisoverview/#recommended-analysis-tools","text":"","title":"Recommended Analysis Tools"},{"location":"gnpsanalysisoverview/#molecular-networking","text":"Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This approach groups sets of spectra from related molecules (known as molecular families) even when the spectra themselves are not identified (do not match to any known compounds). Molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (similar fragmentation implying similar structure) between nodes. Nodes can be supplemented with metadata, including library matches matches or information that is provided by the user, e.g. abundance, origin of product, hydrophobicity, etc. These metadata attributes can be reflected in a node\u2019s size or color.","title":"Molecular Networking"},{"location":"gnpsanalysisoverview/#spectral-library-search","text":"MS/MS data is searched against reference GNPS spectral libraries in a high throughput manner, scaling up to hundreds of files at a time. The spectral library search can be configured to either match exactly to known molecules or utilize variable dereplication to identify putative analogs of known compounds.","title":"Spectral Library Search"},{"location":"gnpsanalysisoverview/#molecular-blast","text":"Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs as well as search a single MS/MS spectrum against all public spectral libraries.","title":"Molecular BLAST"},{"location":"gnpsanalysisoverview/#advanced-analysis-tools","text":"","title":"Advanced Analysis Tools"},{"location":"gnpsanalysisoverview/#dereplicator","text":"The Insilico Peptidic Natural Products Dereplicator is a bioinformatic tool that allows the annotation of known peptidic natural products in MS/MS data using in silico fragmentation tree.","title":"Dereplicator"},{"location":"gnpsanalysisoverview/#network-annotation-propogation","text":"Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking.","title":"Network Annotation Propogation"},{"location":"gnpsanalysisoverview/#analysis-tools-in-active-development","text":"","title":"Analysis Tools in Active Development"},{"location":"gnpsanalysisoverview/#feature-based-molecular-networking","text":"Feature Based Molecular Networking relies on feature detection to determine molecule abundances and aligns these abundances across a cohort of samples into consensus features. Corresponding MS/MS spectra are assigned to each consensus feature and analyzed with spectral library search and molecular networking. This approach enables More accurate quantification of molecules Resolution of isomeric compounds Reduction of redundancy of MS/MS molecules","title":"Feature Based Molecular Networking"},{"location":"gnpsanalysisoverview/#ms2lda","text":"MS2LDA is a method for the decomposition of sets of molecular fragment data derived from large metabolomics experiments. Check out the MS2LDA website here . At GNPS, we have worked with the MS2LDA team to curate a set of motifs that can help to annotate your MS/MS spectra.","title":"MS2LDA"},{"location":"isgnpsright/","text":"GNPS supports the analysis of tandem mass (MS/MS or MS2) data. Below are additional guidelines that describe the kinds of data that GNPS's analysis tools and shared knowledgebase handle. Ionization Type GNPS supports data from soft ionization sources, e.g. electro spray ionization (ESI), Atmospheric-pressure chemical ionization (APCI), Matrix-assisted laser desorption/ionization (MALDI). Fragmentation GNPS only accepts data dependent acquisition data (DDA), i.e. molecules were fragmented with collision induced dissociation (CID), Higher-energy collisional dissociation (HCD), or Electron-transfer dissociation (ETD). This produces tandem mass spectra (MS/MS) that can be identified via spectral library search and organized into families of molecules with molecular networking. Data Sizes GNPS was designed to process MS/MS datasets of entire LC/MS runs. Many of the analysis tools were meant for datasets with at least hundreds of MS/MS spectra. While it is feasible to analyze a small amount of MS/MS spectra, certain capabilities (e.g. Molecular Networking) will not be effective at such small scales. For extremely small datasets (e.g. single MS/MS spectra), we recommend utilizing our molecular BLAST search tool and not molecular networking. For datasets that at least include an entire LC/MS run of MS/MS spectra, all workflows will accept. For molecular networking, please refer to the parameters and presets . File Formats Mass spectrometry files must be converted from proprietary vendor formats to open file formats. GNPS currently support .mzXML, .mzML, and .mgf formats for analysis. To convert, please see our conversion guide . Our tools do NOT support .mzData, .xml, .raw, .RAW, .wiff, .scan, .d, and .cdf formats.","title":"Is my data compatible with GNPS?"},{"location":"isgnpsright/#ionization-type","text":"GNPS supports data from soft ionization sources, e.g. electro spray ionization (ESI), Atmospheric-pressure chemical ionization (APCI), Matrix-assisted laser desorption/ionization (MALDI).","title":"Ionization Type"},{"location":"isgnpsright/#fragmentation","text":"GNPS only accepts data dependent acquisition data (DDA), i.e. molecules were fragmented with collision induced dissociation (CID), Higher-energy collisional dissociation (HCD), or Electron-transfer dissociation (ETD). This produces tandem mass spectra (MS/MS) that can be identified via spectral library search and organized into families of molecules with molecular networking.","title":"Fragmentation"},{"location":"isgnpsright/#data-sizes","text":"GNPS was designed to process MS/MS datasets of entire LC/MS runs. Many of the analysis tools were meant for datasets with at least hundreds of MS/MS spectra. While it is feasible to analyze a small amount of MS/MS spectra, certain capabilities (e.g. Molecular Networking) will not be effective at such small scales. For extremely small datasets (e.g. single MS/MS spectra), we recommend utilizing our molecular BLAST search tool and not molecular networking. For datasets that at least include an entire LC/MS run of MS/MS spectra, all workflows will accept. For molecular networking, please refer to the parameters and presets .","title":"Data Sizes"},{"location":"isgnpsright/#file-formats","text":"Mass spectrometry files must be converted from proprietary vendor formats to open file formats. GNPS currently support .mzXML, .mzML, and .mgf formats for analysis. To convert, please see our conversion guide . Our tools do NOT support .mzData, .xml, .raw, .RAW, .wiff, .scan, .d, and .cdf formats.","title":"File Formats"},{"location":"librarysearch/","text":"Spectral Library Search One of the major limitations in discovering new chemical entities is determining which metabolites are known compounds within complex biological samples. A way to overcome this limitation is to compare the MS2 spectra of the unknown metabolite with a library of MS/MS spectra generated from structurally characterized metabolites. Herein, this comparison is based upon the similarity cosine scoring of MS/MS spectra. See Legacy Documentation Dereplication Workflow From the main GNPS page , click the \"Match Search\" button. This will bring you to the workflow input to start library searching your data. Selecting Input Files Please refer to the file selection documentation from networking. Selecting Spectral Libraries to Search By default all the public spectral libraries are selected under the folder \"speclibs\". This includes many different spectral libraries. You can read about and browse these libraries on GNPS . NOTE: Do not change the selection of libraries unless you are an advanced user. Proteomics Spectral libraries will not work with GNPS and cause problems. Parameters Walkthrough Search Options Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6 Advanced Search Options Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Exploration of Results To access your data, either click the link in the email or click the DONE link under Status on the jobs menu page. View Description View All Spectra Hits View all library matches View Top Hits View only top hit per query spectrum View All Compounds Unique set of compounds in matches","title":"Spectral Library Search"},{"location":"librarysearch/#spectral-library-search","text":"One of the major limitations in discovering new chemical entities is determining which metabolites are known compounds within complex biological samples. A way to overcome this limitation is to compare the MS2 spectra of the unknown metabolite with a library of MS/MS spectra generated from structurally characterized metabolites. Herein, this comparison is based upon the similarity cosine scoring of MS/MS spectra. See Legacy Documentation","title":"Spectral Library Search"},{"location":"librarysearch/#dereplication-workflow","text":"From the main GNPS page , click the \"Match Search\" button. This will bring you to the workflow input to start library searching your data.","title":"Dereplication Workflow"},{"location":"librarysearch/#selecting-input-files","text":"Please refer to the file selection documentation from networking.","title":"Selecting Input Files"},{"location":"librarysearch/#selecting-spectral-libraries-to-search","text":"By default all the public spectral libraries are selected under the folder \"speclibs\". This includes many different spectral libraries. You can read about and browse these libraries on GNPS . NOTE: Do not change the selection of libraries unless you are an advanced user. Proteomics Spectral libraries will not work with GNPS and cause problems.","title":"Selecting Spectral Libraries to Search"},{"location":"librarysearch/#parameters-walkthrough","text":"","title":"Parameters Walkthrough"},{"location":"librarysearch/#search-options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6","title":"Search Options"},{"location":"librarysearch/#advanced-search-options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Search Options"},{"location":"librarysearch/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.","title":"Advanced Filtering Options"},{"location":"librarysearch/#exploration-of-results","text":"To access your data, either click the link in the email or click the DONE link under Status on the jobs menu page. View Description View All Spectra Hits View all library matches View Top Hits View only top hit per query spectrum View All Compounds Unique set of compounds in matches","title":"Exploration of Results"},{"location":"logos/","text":"Feel free to use any of the following logos for your presentations. GNPS Logo PNG with white background PNG with transparent background PNG with URL","title":"Logos"},{"location":"logos/#gnps-logo","text":"PNG with white background PNG with transparent background PNG with URL","title":"GNPS Logo"},{"location":"metadatasetanalysis/","text":"Overview The GNPS Metadata Analysis enables users to perform meta-analyses on all public data based upon the metadata. Easily select LC/MS files to compare based upon metadata attributes (e.g. Skin vs stool) with Molecular Networking at GNPS Find differentially identified compounds across these groups Try it out here .","title":"Overview"},{"location":"metadatasetanalysis/#overview","text":"The GNPS Metadata Analysis enables users to perform meta-analyses on all public data based upon the metadata. Easily select LC/MS files to compare based upon metadata attributes (e.g. Skin vs stool) with Molecular Networking at GNPS Find differentially identified compounds across these groups Try it out here .","title":"Overview"},{"location":"molblast/","text":"Overview Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including metadata) as well as search a single MS/MS spectrum against all public spectral libraries. Workflow Selection To search a single spectrum to see where it occurs in all public GNPS datasets, there are two ways to populate the search. Manual Workflow Entering From the main GNPS page , click the \"Query Spectrum\" button. From Molecular Networking In analyzing your molecular networks, you can click the \"Search Spec\" button on the View ALl Clusters With IDs link to pre-populate parent mass and peaks. Parameters The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks. The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an demonstration input spectrum. Search Options Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6 Advanced Search Options Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Results Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that documentation . The top scoring match to public GNPS datasets are listed in the \"Dataset Matches\". The quality of the match can be inspected by clicking the \"plotting\" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking \"View File Matches in Dataset\". This view provides the full file path for all the files from each dataset along with the associated metadata for each file. Citation In preparation. For the time being, please cite the GNPS publication.","title":"Molecular BLAST (MASST) Search"},{"location":"molblast/#overview","text":"Query a single MS/MS spectrum across all public GNPS datasets. The mass spectrometry equivalent of NCBI BLAST helps to put the query spectrum in context of where else it occurs (including metadata) as well as search a single MS/MS spectrum against all public spectral libraries.","title":"Overview"},{"location":"molblast/#workflow-selection","text":"To search a single spectrum to see where it occurs in all public GNPS datasets, there are two ways to populate the search.","title":"Workflow Selection"},{"location":"molblast/#manual-workflow-entering","text":"From the main GNPS page , click the \"Query Spectrum\" button.","title":"Manual Workflow Entering"},{"location":"molblast/#from-molecular-networking","text":"In analyzing your molecular networks, you can click the \"Search Spec\" button on the View ALl Clusters With IDs link to pre-populate parent mass and peaks.","title":"From Molecular Networking"},{"location":"molblast/#parameters","text":"The query parameters are similar library search, however, users are required to enter the precursor m/z and peaks. The peaks input requires a peak per line with mass followed my intensity, separated by a space or a tab. See an demonstration input spectrum.","title":"Parameters"},{"location":"molblast/#search-options","text":"Parameter Description Default Parent Mass Tolerance Parent mass peak tolerance 2.0 Ion Tolerance MS2 peak tolerance 0.5 Score Threshold Cosine score threshold to make a match 0.5 Min Matched Peaks Minimum matched peaks to make a match 6","title":"Search Options"},{"location":"molblast/#advanced-search-options","text":"Parameter Description Default Library Class Minimum Library Class to Consider in Search Bronze Top Hits Per Spectrum Number of results to return per query spectrum 1 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Search Options"},{"location":"molblast/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.","title":"Advanced Filtering Options"},{"location":"molblast/#results","text":"Query results are separated into two categories, spectral library search and GNPS dataset queries. Spectral library search results are presented in a similar fashion as the batch library search workflow, please refer to that documentation . The top scoring match to public GNPS datasets are listed in the \"Dataset Matches\". The quality of the match can be inspected by clicking the \"plotting\" icon at the left of each row. Further, we can drill down to the exact files within each dataset that spectrum matched to by clicking \"View File Matches in Dataset\". This view provides the full file path for all the files from each dataset along with the associated metadata for each file.","title":"Results"},{"location":"molblast/#citation","text":"In preparation. For the time being, please cite the GNPS publication.","title":"Citation"},{"location":"moleculeexplorer/","text":"Molecule Explorer Building upon Continuous Identification , Molecule Explorer provides a portal for users to find exactly where each molecules occur in all public GNPS datasets. This powerful exploration tool enables users to understand the expected context where each molecule has been seen before to inform future analyses. Explore here . All Molecules Summary This summary list includes all molecules identified in public GNPS datasets. The summary also includes the total number of datasets and files that each molecule has been found, to provide a sense of ubiquity of each molecule. For example, common known contaminants, e.g. Sodium Formate Clusters, are seen in almost all public datasets. Datasets per Molecule For each molecule, click on \"Datasets\" to view the specific datasets in which a molecule was found in. This view includes the accession and name of all datasets Continuous Identification found that molecule. Files per Molecule In the final level of granularity, the molecule can be traced down to the set of files per dataset. By clicking \"Dataset Files\" a set of files which contain the molecule is listed along with the metadata associated with each of the individual files. Here we can see that within the Skin Cartography Dataset, Avobenzone appears in only files from human swabs and not blanks:","title":"Molecule Explorer"},{"location":"moleculeexplorer/#molecule-explorer","text":"Building upon Continuous Identification , Molecule Explorer provides a portal for users to find exactly where each molecules occur in all public GNPS datasets. This powerful exploration tool enables users to understand the expected context where each molecule has been seen before to inform future analyses. Explore here .","title":"Molecule Explorer"},{"location":"moleculeexplorer/#all-molecules-summary","text":"This summary list includes all molecules identified in public GNPS datasets. The summary also includes the total number of datasets and files that each molecule has been found, to provide a sense of ubiquity of each molecule. For example, common known contaminants, e.g. Sodium Formate Clusters, are seen in almost all public datasets.","title":"All Molecules Summary"},{"location":"moleculeexplorer/#datasets-per-molecule","text":"For each molecule, click on \"Datasets\" to view the specific datasets in which a molecule was found in. This view includes the accession and name of all datasets Continuous Identification found that molecule.","title":"Datasets per Molecule"},{"location":"moleculeexplorer/#files-per-molecule","text":"In the final level of granularity, the molecule can be traced down to the set of files per dataset. By clicking \"Dataset Files\" a set of files which contain the molecule is listed along with the metadata associated with each of the individual files. Here we can see that within the Skin Cartography Dataset, Avobenzone appears in only files from human swabs and not blanks:","title":"Files per Molecule"},{"location":"ms2lda/","text":"MS2LDA MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to curate sets of Mass2Motifs that can help to annotate your MS/MS spectra. A first set based on Mass2Motifs found in GNPS and MassBank reference data is available now to decompose your data on through GNPS here . Citation van Der Hooft, Justin Johan Jozias, Joe Wandy, Michael P. Barrett, Karl EV Burgess, and Simon Rogers. \"Topic modeling for untargeted substructure exploration in metabolomics.\" Proceedings of the National Academy of Sciences 113, no. 48 (2016): 13738-13743.","title":"MS2LDA Deconvolution"},{"location":"ms2lda/#ms2lda","text":"MS2LDA is a tool that decomposes molecular fragmentation data derived from large metabolomics experiments into annotated Mass2Motifs or discovers Mass2Motifs from experimental data. Mass2Motifs are fragmentation patterns of often co-occurring mass fragment peaks and/or neutral losses that often represent molecular substructures. Check out the MS2LDA website here where you can find more information, browse through data sets, and sign up for an account to run the Mass2Motif discovery on your own data. At GNPS, we are working with the MS2LDA team to curate sets of Mass2Motifs that can help to annotate your MS/MS spectra. A first set based on Mass2Motifs found in GNPS and MassBank reference data is available now to decompose your data on through GNPS here .","title":"MS2LDA"},{"location":"ms2lda/#citation","text":"van Der Hooft, Justin Johan Jozias, Joe Wandy, Michael P. Barrett, Karl EV Burgess, and Simon Rogers. \"Topic modeling for untargeted substructure exploration in metabolomics.\" Proceedings of the National Academy of Sciences 113, no. 48 (2016): 13738-13743.","title":"Citation"},{"location":"nap/","text":"Network Annotation Propagation Overview Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. This workflow is currently in beta development stages so any feedback is welcome to improve analysis and usability. It is available here under 'NAP_CCMS' Workflow drop down menu. Check out the full documentation . NAP short hands on tutorial The aim of this tutorial is to work as a guided tour through this documentation page and exploring the finding of Kang et al., (2018) . Go to Structure database section, download the example in house database (two columns file), add the structure SN00230021 to the file and generate the formatted database. Make sure you use an excel like software and save as tab separated text file; Go to Running NAP section, open NAP input interface, make sure you are logged and run a job with example parameters present in the picture (including job id: '3b215c4b25594b9c85d92de547815c0a' and cluster index: 56), with the database you just created. Go here if need instructions to upload the database ; When your job is processed, you should receive a link similar to that. Go to section Online Exploration and browse the results; Follow the same link above. Go to section NAP Visualization in Cytoscape and browse the results; Data Input Preparation The following inputs are used for NAP: Molecular network task id, see Molecular Networking (required) Identifier(s) of databases and/or user provided databases (required) Structure database There are basically three options for database structure selection: Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Be aware that these databases are static and new changes on the source databases are not incorporated automatically. Input an in house generated database. See Molecular Networking documentation to learn how to use the drag and drop upload. A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as : Having an in house collection, before the use in NAP, the user has to first format the database, using the following webserver : After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as : The combination of the two databases above. NAP allows the combination of different databases, either through multiple database identifiers, or by the combination of identifiers and text file. While this feature allows flexibility, it is important narrow the search space for the system under study. Running NAP NAP Workflow Selection From the main GNPS page , you can access NAP clicking the banner and then selecting NAP in the corresponding description. You can also directly open clicking \"here\" . This will take you to the workflow input to start NAP. The image below shows an example of the most important parameters The first parameter is the GNPS network task id, this id can be found in the results email sent by GNPS or in the url, as shown in the image below, the task id is '3b215c4b25594b9c85d92de547815c0a' and the molecular family (connected component) containing the 'cluster index' 56 can be inspected in the molecular network . A detailed description of the parameters is provided below . Parameter Walkthrough Parameter Description Default GNPS job ID GNPS molecular networking task id. Number of a cluster index Any cluster index of a connected component of interest in a Molecular Network. The propagation is limited by the connected component. Cosine value to subselect inside a cluster Used to disconnect nodes in very dense molecular networks and decrease the number of nodes to be analyzed. 0.5 N first candidates for consensus score Number of candidate structures of the neighbor nodes used for Consensus re-ranking. 10 Use fusion result for consensus Whether to use the result from Fusion re-ranking to perform Consensus re-ranking. 1 Accuracy for exact mass candidate search (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 Acquisition mode Mass spectrometry acquisition mode. Positive Adduct ion type Expected adduct type for the precursor ion mass. [M+H] Multiple adduct types Input one or more adducts, separated by \",\". Available options are: listed on the Adduct drop down menu. Structure databases Input one or more databases, separated by \",\". Available options are: GNPS , HMDB , SUPNAT , CHEBI , DRUGBANK and FooDB . Use none to select only user defined. Compound class to be selected ClassyFire class in the following format: \"class:name\". User provided database In house candidate structure database to be used in the search. Skip parent mass selection Should be used only in combination with class selection. 0 User provided MetFrag parameter file Check here for a template. Maximum number of candidate structures in the graph: Number od candidate structures to be exported in the Cytoscape graph. 10 Workflow type Standard or MZmine . Online Exploration of NAP results After completing a NAP workflow, the results can be browsed in the web interface. The web interface provides a quick and easy way to perform initial analysis of your data, particularly if you are interested in a specific structure or class of structures and want to inspect in the results. To have access to the web interface click on the 'EXPERIMENTAL - NAPviewer' at the results page: The result summaries can be divided in four sections. 1. Structure view NAP attempts to re-rank the candidate structures provided by MetFrag using the information provided by the molecular network. This first view shows the S tructures ranked by MetFrag and the ones re-ranked by NAP to allow the user to quickly inspect if the propagation improved the ranking: 2. Graph view As the re-ranking is performing obtaining information from neighbor nodes, the G raph view displays the direct neighbor's first candidate structures of a given re-ranked node to allow the user to inspect if the re-ranking is consistent in the network: The node border colors indicate the source of structure: green - reference spectral library structure; magenta MetFrag's first candidate; blue Fusion's first candidate and red Consensus' first candidate. 3. Fragment view Some important aspects of structural prediction are: how many fragments were predicted, which fragments and which substructures were assigned to the predictions. The F ragment view displays the direct fragments predicted for each structure in the candidate list of a given fragmentation spectrum (represented by a node in the network): By hovering the mouse over the candidate fragment it is possible to see the substructure predicted for the fragment. 4. Full candidate list view As structural prediction is very challenging. The correct candidate may not be the first in the list, therefore it is important to be able to browse the candidate list. The Link containing the full list of candidate structures found in NAP search is provided. The first column of the candidate's table contains a link out for the respective database where the structure was originated. The table also contains the ranking for MetFrag, Fusion and Consensus, the link for number of fragments predicted for each candidate structure, a link to fragment plot representation and a column with color coded structural similarity grouping that can be easily associated with candidate's ClassyFire class, when available: NAP Visualization in Cytoscape In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output from NAP. Cytoscape (we have used version = 3.4) is available for download from here . Download NAP Cytoscape files To download NAP's Cytoscape file, go back to the results page of your task: and download the compacted file containing the 'structure_graph_alt.xgmml' file. After the download, remember to uncompress the file for downstream use. Installing the ChemViz plugin To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below: Load NAP Cytoscape file and apply layout Load the 'structure_graph_alt.xgmml' file: and apply a layout to spread the nodes: Change image display properties and paint library match structure The 'structure_graph_alt.xgmml' file contains some pre-set elements to aid structure display. Nodes possessing a structure are empty squares. Node borders are either green (spectral library match) or blue (in silico prediction). In silico predictions can be a combination of MetFrag, Fusion and Consensus. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the columns MetFrag/Fusion/ConsensusSMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing: After setting the desired source column to display the structure one can just 'paint' the structure on the node: Change display properties and paint on multiple nodes As we described in the publications below we have a decreasing order of confidence on structural prediction spectral library match Fusion scoring Consensus scoring MetFrag scoring. To change for Fusion scoring structures you can do: and paint the structures: Display the list of candidates As discussed in the Online Exploration section, the most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters : Citation da Silva, Ricardo R., Mingxun Wang, Louis-F\u00e9lix Nothias, Justin JJ van der Hooft, Andr\u00e9s Mauricio Caraballo-Rodr\u00edguez, Evan Fox, Marcy J. Balunas, Jonathan L. Klassen, Norberto Peporine Lopes, and Pieter C. Dorrestein. \"Propagating annotations of molecular networks using in silico fragmentation.\" PLoS computational biology 14, no. 4 (2018): e1006089. Kyo Bin Kang, Eun Jin Park, Ricardo R. da Silva, Hyun Woo Kim, Pieter C. Dorrestein, Sang Hyun Sung. \"Targeted Isolation of Neuroprotective Dicoumaroyl Neolignans and Lignans from Sageretia theezans Using in Silico Molecular Network Annotation Propagation-Based Dereplication\" Journal of Natural Products, 2018, 81 (8), pp 1819\u20131828","title":"Network Annotation Propagation (NAP)"},{"location":"nap/#network-annotation-propagation-overview","text":"Network Annotation Propagation (NAP) uses spectral networks to propagate information from spectral library matching, in order to improve in silico fragmentation candidate structure ranking. This workflow is currently in beta development stages so any feedback is welcome to improve analysis and usability. It is available here under 'NAP_CCMS' Workflow drop down menu. Check out the full documentation .","title":"Network Annotation Propagation Overview"},{"location":"nap/#nap-short-hands-on-tutorial","text":"The aim of this tutorial is to work as a guided tour through this documentation page and exploring the finding of Kang et al., (2018) . Go to Structure database section, download the example in house database (two columns file), add the structure SN00230021 to the file and generate the formatted database. Make sure you use an excel like software and save as tab separated text file; Go to Running NAP section, open NAP input interface, make sure you are logged and run a job with example parameters present in the picture (including job id: '3b215c4b25594b9c85d92de547815c0a' and cluster index: 56), with the database you just created. Go here if need instructions to upload the database ; When your job is processed, you should receive a link similar to that. Go to section Online Exploration and browse the results; Follow the same link above. Go to section NAP Visualization in Cytoscape and browse the results;","title":"NAP short hands on tutorial"},{"location":"nap/#data-input-preparation","text":"The following inputs are used for NAP: Molecular network task id, see Molecular Networking (required) Identifier(s) of databases and/or user provided databases (required)","title":"Data Input Preparation"},{"location":"nap/#structure-database","text":"There are basically three options for database structure selection: Input one or more databases, separated by \",\". Available options are: GNPS, HMDB, SUPNAT, CHEBI, DRUGBANK and FooDB. Be aware that these databases are static and new changes on the source databases are not incorporated automatically. Input an in house generated database. See Molecular Networking documentation to learn how to use the drag and drop upload. A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as : Having an in house collection, before the use in NAP, the user has to first format the database, using the following webserver : After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as : The combination of the two databases above. NAP allows the combination of different databases, either through multiple database identifiers, or by the combination of identifiers and text file. While this feature allows flexibility, it is important narrow the search space for the system under study.","title":"Structure database"},{"location":"nap/#running-nap","text":"","title":"Running NAP"},{"location":"nap/#nap-workflow-selection","text":"From the main GNPS page , you can access NAP clicking the banner and then selecting NAP in the corresponding description. You can also directly open clicking \"here\" . This will take you to the workflow input to start NAP. The image below shows an example of the most important parameters The first parameter is the GNPS network task id, this id can be found in the results email sent by GNPS or in the url, as shown in the image below, the task id is '3b215c4b25594b9c85d92de547815c0a' and the molecular family (connected component) containing the 'cluster index' 56 can be inspected in the molecular network . A detailed description of the parameters is provided below .","title":"NAP Workflow Selection"},{"location":"nap/#parameter-walkthrough","text":"Parameter Description Default GNPS job ID GNPS molecular networking task id. Number of a cluster index Any cluster index of a connected component of interest in a Molecular Network. The propagation is limited by the connected component. Cosine value to subselect inside a cluster Used to disconnect nodes in very dense molecular networks and decrease the number of nodes to be analyzed. 0.5 N first candidates for consensus score Number of candidate structures of the neighbor nodes used for Consensus re-ranking. 10 Use fusion result for consensus Whether to use the result from Fusion re-ranking to perform Consensus re-ranking. 1 Accuracy for exact mass candidate search (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 Acquisition mode Mass spectrometry acquisition mode. Positive Adduct ion type Expected adduct type for the precursor ion mass. [M+H] Multiple adduct types Input one or more adducts, separated by \",\". Available options are: listed on the Adduct drop down menu. Structure databases Input one or more databases, separated by \",\". Available options are: GNPS , HMDB , SUPNAT , CHEBI , DRUGBANK and FooDB . Use none to select only user defined. Compound class to be selected ClassyFire class in the following format: \"class:name\". User provided database In house candidate structure database to be used in the search. Skip parent mass selection Should be used only in combination with class selection. 0 User provided MetFrag parameter file Check here for a template. Maximum number of candidate structures in the graph: Number od candidate structures to be exported in the Cytoscape graph. 10 Workflow type Standard or MZmine .","title":"Parameter Walkthrough"},{"location":"nap/#online-exploration-of-nap-results","text":"After completing a NAP workflow, the results can be browsed in the web interface. The web interface provides a quick and easy way to perform initial analysis of your data, particularly if you are interested in a specific structure or class of structures and want to inspect in the results. To have access to the web interface click on the 'EXPERIMENTAL - NAPviewer' at the results page: The result summaries can be divided in four sections.","title":"Online Exploration of NAP results"},{"location":"nap/#1-structure-view","text":"NAP attempts to re-rank the candidate structures provided by MetFrag using the information provided by the molecular network. This first view shows the S tructures ranked by MetFrag and the ones re-ranked by NAP to allow the user to quickly inspect if the propagation improved the ranking:","title":"1. Structure view"},{"location":"nap/#2-graph-view","text":"As the re-ranking is performing obtaining information from neighbor nodes, the G raph view displays the direct neighbor's first candidate structures of a given re-ranked node to allow the user to inspect if the re-ranking is consistent in the network: The node border colors indicate the source of structure: green - reference spectral library structure; magenta MetFrag's first candidate; blue Fusion's first candidate and red Consensus' first candidate.","title":"2. Graph view"},{"location":"nap/#3-fragment-view","text":"Some important aspects of structural prediction are: how many fragments were predicted, which fragments and which substructures were assigned to the predictions. The F ragment view displays the direct fragments predicted for each structure in the candidate list of a given fragmentation spectrum (represented by a node in the network): By hovering the mouse over the candidate fragment it is possible to see the substructure predicted for the fragment.","title":"3. Fragment view"},{"location":"nap/#4-full-candidate-list-view","text":"As structural prediction is very challenging. The correct candidate may not be the first in the list, therefore it is important to be able to browse the candidate list. The Link containing the full list of candidate structures found in NAP search is provided. The first column of the candidate's table contains a link out for the respective database where the structure was originated. The table also contains the ranking for MetFrag, Fusion and Consensus, the link for number of fragments predicted for each candidate structure, a link to fragment plot representation and a column with color coded structural similarity grouping that can be easily associated with candidate's ClassyFire class, when available:","title":"4. Full candidate list view"},{"location":"nap/#nap-visualization-in-cytoscape","text":"In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output from NAP. Cytoscape (we have used version = 3.4) is available for download from here .","title":"NAP Visualization in Cytoscape"},{"location":"nap/#download-nap-cytoscape-files","text":"To download NAP's Cytoscape file, go back to the results page of your task: and download the compacted file containing the 'structure_graph_alt.xgmml' file. After the download, remember to uncompress the file for downstream use.","title":"Download NAP Cytoscape files"},{"location":"nap/#installing-the-chemviz-plugin","text":"To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below:","title":"Installing the ChemViz plugin"},{"location":"nap/#load-nap-cytoscape-file-and-apply-layout","text":"Load the 'structure_graph_alt.xgmml' file: and apply a layout to spread the nodes:","title":"Load NAP Cytoscape file and apply layout"},{"location":"nap/#change-image-display-properties-and-paint-library-match-structure","text":"The 'structure_graph_alt.xgmml' file contains some pre-set elements to aid structure display. Nodes possessing a structure are empty squares. Node borders are either green (spectral library match) or blue (in silico prediction). In silico predictions can be a combination of MetFrag, Fusion and Consensus. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the columns MetFrag/Fusion/ConsensusSMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing: After setting the desired source column to display the structure one can just 'paint' the structure on the node:","title":"Change image display properties and paint library match structure"},{"location":"nap/#change-display-properties-and-paint-on-multiple-nodes","text":"As we described in the publications below we have a decreasing order of confidence on structural prediction spectral library match Fusion scoring Consensus scoring MetFrag scoring. To change for Fusion scoring structures you can do: and paint the structures:","title":"Change display properties and paint on multiple nodes"},{"location":"nap/#display-the-list-of-candidates","text":"As discussed in the Online Exploration section, the most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters :","title":"Display the list of candidates"},{"location":"nap/#citation","text":"da Silva, Ricardo R., Mingxun Wang, Louis-F\u00e9lix Nothias, Justin JJ van der Hooft, Andr\u00e9s Mauricio Caraballo-Rodr\u00edguez, Evan Fox, Marcy J. Balunas, Jonathan L. Klassen, Norberto Peporine Lopes, and Pieter C. Dorrestein. \"Propagating annotations of molecular networks using in silico fragmentation.\" PLoS computational biology 14, no. 4 (2018): e1006089. Kyo Bin Kang, Eun Jin Park, Ricardo R. da Silva, Hyun Woo Kim, Pieter C. Dorrestein, Sang Hyun Sung. \"Targeted Isolation of Neuroprotective Dicoumaroyl Neolignans and Lignans from Sageretia theezans Using in Silico Molecular Network Annotation Propagation-Based Dereplication\" Journal of Natural Products, 2018, 81 (8), pp 1819\u20131828","title":"Citation"},{"location":"networking/","text":"Molecular Networking Overview Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This visualization approach can detect sets of spectra from related molecules (molecular networks), even when the spectra themselves are not matched to any known compounds. The visualization of molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (connections) between nodes. Nodes can be supplemented with metadata, including dereplication matches or information that is provided by the user, e.g. as abundance, origin of product, biochemical activity, or hydrophobicity, which can be reflected in a node\u2019s size or color. This map of all related molecules is visualized as a global molecular network. For more information about Molecular Networking check out the GNPS publication from 2016. Data Input Preparation The follow data is can be put into molecular networking. Mass Spectrometry data files (required) Metadata/Group Mapping (optional) `ili 3D mapping files (optional) Mass Spectrometry data files Molecular networking supports mzXML, mzML, and mgf file formats. To convert your file to the appropriate formats, check out our documentation . Metadata The metadata file describes the samples properties and allows more flexibility for data analysis and visualization. It is an alternative way to assign groups when selecting data input files within the workflow of GNPS. The current version of molecular networking allows to use the metadata table as an input. Although it is possible to use the legacy group mapping and attribute mapping file, we strongly advise to prepare metadata table instead. Format The metadata table is a text file (Tab separated) that users must create these file themselves using a text editor (e.g. Microsoft Excel, Notepad++ for Windows, gedit for Linux, TextWrangler for Mac OS). Using Metadata table can greatly ease the visualization and analysis of data within Cytoscape. We strongly encourage you to prepare those in advance and to share it publicly with your MassIVE data. You can download an example and edit it appropriately. Finally users will need to upload just as you would upload data input files and select it in the metadata table file upload selection. For a metadata table file template, you can use the following .txt file - Right-click, and Save link as . The only required columns in the metadata is \"filename\". NOTE: capitalization matters. Metadata columns that will be considered by molecular networking must be prefixed by \"ATTRIBUTE_\". Please ensure that the file is saved as a tab separated text file. Excel (xlsx), rich text (rtf) are not acceptable. For Qiita users that wish to reconcile sample identifiers so that the biom and metadata output are compatible with Qiita, please provide an extra column (#SampleID). GNPS will understand this extra metadata column and rewrite sample identifers for BIOM and metadata to this sample identifier rather than using the mass spectrometry filename by default. Pardon our dust as we are migrating this documentation, if we missed anything, please check out our Legacy Documentation . `ili 3D Mapping Files The metadata can also be used to specify spatial coordinates for direct visualization of the data in 'ili toolbox . Note that an .STL binary file must selected as an input in the workflow. The following headers are required: \"COORDINATE_X\" - X coordinate on the 2D/3D model \"COORDINATE_Y\" - Y coordinate on the 2D/3D model \"COORDINATE_Z\" - Z coordinate on the 2D/3D model \"COORDINATE_radius\" - radius for the spot in 'ili toolbox. Additionally, a 3D STL file will need to be provided to visualize all the molecule intensities onto. It creates really cool plots like this: Legacy Group and Attribute Mapping Format This format has been replaced by the above Metadata format. While it is still supported it is not recommended. Please see the details here . Running Molecular Networking Molecular Networking Workflow Selection From the main GNPS page , click the \"Create Molecular Network\" button. This will bring you to the workflow input to start networking. Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed. Selecting Files to Analyze Select files for analysis by first clicking \"Select Input Files\". This bring a popup window. We can select our own files to analyze. Alternatively, we can import an existing public dataset if we know the dataset accession ( Browse Datasets ). From the Select Input Files popup, you will be a shares files tab. There you will find a box called Import Data Share. In this box you may enter an accession of a MassIVE dataset. Upon clicking import the dataset will appear in your workspace to select input files to analyze from. Organizing Selected Files into Groups By default, files can be categorized into separate groups (G1, G2, etc.). For example, case and control or two different microbes can be separate groups. Using the basic options, only six groups can be created. Individual files or entire folders can be selected. Click Finish Selection which will close the pop-up window. Parameter Walkthrough Basic Options Parameter Description Default Precursor ion mass tolerance (PIMT) Parameter used for MS-Cluster and spectral library search. Specify the precursor ions mass tolerance, in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 2.0 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.5 Advanced Network Options Parameter Description Default Notes Min Pairs Cos Minimum cosine score that must occur between a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network. 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will limit do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. Is the minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, and the mobile phase, ...), and the collision-induced fragmentation behavior of the molecules of interest within the samples. High molecular weight (MW) compounds, and compounds with more hetero-atoms will generally tend to produce more fragment ions. However, this rule cannot be systematized. For example, some lipids with high MW generate only few fragment ions. Node TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Minimum Cluster Size Minimum number of MS/MS spectra in a consensus MS/MS spectra to be considered for molecular networking 2 Requires MS-Cluster to be on. This parameter should be tuned based on the dataset size. See presets below Run MSCluster Cluster MS/MS spectra before networking Yes MSCluster will analyze every MS/MS spectra resulting from ions that fall within the defined precursor ion mass tolerance, and will merge the nearly-identical MS/MS spectra (above the cosine score) into a single consensus MS/MS spectrum. Each consensus MS/MS spectrum usually consist of multiple MS/MS spectra from across multiple LC-MS runs (or data files) Maximum Connected Component Size Maximum size of nodes allowed in a single connected network 100 Maximum size of nodes allowed in a single connected network. Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Metadata File Text input to describe experimental setup Replaces both Group mapping and Attribute Mapping Group Mapping Input text file organizing input files into groups Input text file organizing input files into groups. used as a more flexible alternative to assigning groups during data input selection. Attribute Mapping Attribute mapping eases visualization of different groups within cytoscape Input text file organizing groups into attributes Advanced Library Search Options Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending of the molecule of interest, and the experimental conditions (such as the ionisation mode, and the fragmentation conditions, ...). For example, collision-induced fragmentation of some lipids produce only few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular-type to be connected in one network. An higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da) Advanced Filtering Options Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal. Parameter Presets We have several parameter presets that seem to work well depending on the dataset size. Small datasets - up to 5 LC/MS files Medium Datasets - 5 to 400 LC/MS files Large Datasets - 400+ LC/MS files Big Data(sets) - Lets talk! Status Page Upon submission of the workflow, you will be brought to the status page. This will show you the progress of your molecular networking job. Molecular networks usually take 10 min for small datasets 1 hour for medium datasets Several hours for large datasets FOREVER for big datasets If you find your molecular network is taking longer than this, please contact us . Online Exploration of Molecular Networks After completing a Molecular Networking workflow utilizing GNPS, analysis can be done within the web interface. The GNPS web interface provides a quick and easy way to perform initial analysis of your data particularly if you want to view the MS2 spectra of the nodes/clusters/networks generated by the Molecular Networking workflow. Networking Results Views Description Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View Unique Library Compounds All unique library spectrum matches View All Clusters With IDs All consensus MS/MS spectra created by MSCluster that were considered for library search and molecular networking. This does not include consensus MS/MS spectra that fell below the minimum cluster size threshold Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Network Summarizing Graphs Brief statistics about the network such as number of spectra, number of nodes, number of spectral families, identification rates, etc. (legacy output) Methods and Citation for Manuscripts View Description Networking Parameters and Written Network Description Automatic description of molecular networking generation. This can be used in the methods section of manuscripts Export/Download Network Files View Description Download Clustered Spectra as MGF Download consensus MS/MS spectra as an MGF file Download GraphML for Cytoscape Download network files (graphML) for import into Cytoscape Download Bucket Table Download spectral abundance for all consensus spectra across all files (calculated within each file as the sum precursor abundance) Download BioM for Qiime/Qiita Download BioM for spectral counts for analysis in Qiime/Qiita multivariate statistics tools Download Metadata for Qiime Download Metadata file for analysis in Qiime Download ili Data Download the abundance information formatted for ili Advanced Views - Global Public Dataset Matches View Description View Matches to All Public Datasets View matches of consensus MS/MS spectra in the network to all public datasets Advanced Views - Third Party Visualization View Description View Emperor PCoA Plot in GNPS In browser visualization of all analyzed samples with PCoA View ili in GNPS Visualization of 3D ili mapping in GNPS Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape Citation If you are using GNPS for analysis, please cite the manuscript Mingxun Wang, Jeremy J Carver, Vanessa V Phelan, Laura M Sanchez, Neha Garg, Yao Peng, et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking\" Nature Biotechnology 34.8 (2016): 828-837. PMID: 27504778 If you use MS-Cluster in your molecular networks, cite the following as well: Frank, Ari M., et al. \"Clustering millions of tandem mass spectra.\" Journal of proteome research 7.01 (2007): 113-122.","title":"Molecular Networking"},{"location":"networking/#molecular-networking-overview","text":"Molecular networks are visual displays of the chemical space present in tandem mass spectrometry (MS/MS) experiments. This visualization approach can detect sets of spectra from related molecules (molecular networks), even when the spectra themselves are not matched to any known compounds. The visualization of molecular networks in GNPS represents each spectrum as a node, and spectrum-to-spectrum alignments as edges (connections) between nodes. Nodes can be supplemented with metadata, including dereplication matches or information that is provided by the user, e.g. as abundance, origin of product, biochemical activity, or hydrophobicity, which can be reflected in a node\u2019s size or color. This map of all related molecules is visualized as a global molecular network. For more information about Molecular Networking check out the GNPS publication from 2016.","title":"Molecular Networking Overview"},{"location":"networking/#data-input-preparation","text":"The follow data is can be put into molecular networking. Mass Spectrometry data files (required) Metadata/Group Mapping (optional) `ili 3D mapping files (optional)","title":"Data Input Preparation"},{"location":"networking/#mass-spectrometry-data-files","text":"Molecular networking supports mzXML, mzML, and mgf file formats. To convert your file to the appropriate formats, check out our documentation .","title":"Mass Spectrometry data files"},{"location":"networking/#metadata","text":"The metadata file describes the samples properties and allows more flexibility for data analysis and visualization. It is an alternative way to assign groups when selecting data input files within the workflow of GNPS. The current version of molecular networking allows to use the metadata table as an input. Although it is possible to use the legacy group mapping and attribute mapping file, we strongly advise to prepare metadata table instead.","title":"Metadata"},{"location":"networking/#format","text":"The metadata table is a text file (Tab separated) that users must create these file themselves using a text editor (e.g. Microsoft Excel, Notepad++ for Windows, gedit for Linux, TextWrangler for Mac OS). Using Metadata table can greatly ease the visualization and analysis of data within Cytoscape. We strongly encourage you to prepare those in advance and to share it publicly with your MassIVE data. You can download an example and edit it appropriately. Finally users will need to upload just as you would upload data input files and select it in the metadata table file upload selection. For a metadata table file template, you can use the following .txt file - Right-click, and Save link as . The only required columns in the metadata is \"filename\". NOTE: capitalization matters. Metadata columns that will be considered by molecular networking must be prefixed by \"ATTRIBUTE_\". Please ensure that the file is saved as a tab separated text file. Excel (xlsx), rich text (rtf) are not acceptable. For Qiita users that wish to reconcile sample identifiers so that the biom and metadata output are compatible with Qiita, please provide an extra column (#SampleID). GNPS will understand this extra metadata column and rewrite sample identifers for BIOM and metadata to this sample identifier rather than using the mass spectrometry filename by default. Pardon our dust as we are migrating this documentation, if we missed anything, please check out our Legacy Documentation .","title":"Format"},{"location":"networking/#96ili-3d-mapping-files","text":"The metadata can also be used to specify spatial coordinates for direct visualization of the data in 'ili toolbox . Note that an .STL binary file must selected as an input in the workflow. The following headers are required: \"COORDINATE_X\" - X coordinate on the 2D/3D model \"COORDINATE_Y\" - Y coordinate on the 2D/3D model \"COORDINATE_Z\" - Z coordinate on the 2D/3D model \"COORDINATE_radius\" - radius for the spot in 'ili toolbox. Additionally, a 3D STL file will need to be provided to visualize all the molecule intensities onto. It creates really cool plots like this:","title":"`ili 3D Mapping Files"},{"location":"networking/#legacy-group-and-attribute-mapping-format","text":"This format has been replaced by the above Metadata format. While it is still supported it is not recommended. Please see the details here .","title":"Legacy Group and Attribute Mapping Format"},{"location":"networking/#running-molecular-networking","text":"","title":"Running Molecular Networking"},{"location":"networking/#molecular-networking-workflow-selection","text":"From the main GNPS page , click the \"Create Molecular Network\" button. This will bring you to the workflow input to start networking. Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.","title":"Molecular Networking Workflow Selection"},{"location":"networking/#selecting-files-to-analyze","text":"Select files for analysis by first clicking \"Select Input Files\". This bring a popup window. We can select our own files to analyze. Alternatively, we can import an existing public dataset if we know the dataset accession ( Browse Datasets ). From the Select Input Files popup, you will be a shares files tab. There you will find a box called Import Data Share. In this box you may enter an accession of a MassIVE dataset. Upon clicking import the dataset will appear in your workspace to select input files to analyze from.","title":"Selecting Files to Analyze"},{"location":"networking/#organizing-selected-files-into-groups","text":"By default, files can be categorized into separate groups (G1, G2, etc.). For example, case and control or two different microbes can be separate groups. Using the basic options, only six groups can be created. Individual files or entire folders can be selected. Click Finish Selection which will close the pop-up window.","title":"Organizing Selected Files into Groups"},{"location":"networking/#parameter-walkthrough","text":"","title":"Parameter Walkthrough"},{"location":"networking/#basic-options","text":"Parameter Description Default Precursor ion mass tolerance (PIMT) Parameter used for MS-Cluster and spectral library search. Specify the precursor ions mass tolerance, in Daltons. This value influences the aforementioned clustering of nearly-identical MS/MS spectra via MS-Cluster. Note that the value of this parameters should be consistent with the capabilities of the mass spectrometer and the specific instrument method used to generated the MS/MS data. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 2.0 Da for low-resolution instruments (ion traps, QqQ). 2.0 Fragment Ion Mass Tolerance (FIMT) Parameters used for MS-Cluster, molecular networking, and MS/MS spectral library searches. For every group of MS/MS spectra being considered for clustering (consensus spectrum creation), this value specifies how much fragment ions can be shifted from their expected m/z values. Recommended Values value is \u00b1 0.02 Da for high-resolution instruments (q-TOF, q-Orbitrap) and \u00b1 0.5 Da for low-resolution instruments (ion traps, QqQ). 0.5","title":"Basic Options"},{"location":"networking/#advanced-network-options","text":"Parameter Description Default Notes Min Pairs Cos Minimum cosine score that must occur between a pair of consensus MS/MS spectra in order for an edge to be formed in the molecular network. 0.7 Lower value will increase the size of the clusters by inducing the clustering of less related MS/MS spectra, higher value will limit do the opposite. Minimum Matched Fragment Ion (Min Matched Peaks) Parameters used for molecular networking. Is the minimum number of common fragment ions that are shared by two separate consensus MS/MS spectra in order to be connected by an edge in the molecular network 6 A low value will permit linkages between spectra of molecules with few similar fragment ions, but it will result in many more less-related spectra being connected to the network. An higher value will do the opposite. Default value is 6, but note that this parameters should be adjusted depending on the experimental conditions for mass spectra acquisition (such as mode of ionisation, fragmentation conditions, and the mobile phase, ...), and the collision-induced fragmentation behavior of the molecules of interest within the samples. High molecular weight (MW) compounds, and compounds with more hetero-atoms will generally tend to produce more fragment ions. However, this rule cannot be systematized. For example, some lipids with high MW generate only few fragment ions. Node TopK Maximum number of neighbor nodes for one single node 10 The edge between two nodes are kept only if both nodes are within each other's \u2018TopK\u2019 most similar nodes. For example, if this value is set at 20, then a single node may be connected to up to 20 other nodes. Keeping this value low makes very large networks (many nodes) much easier to visualize. Minimum Cluster Size Minimum number of MS/MS spectra in a consensus MS/MS spectra to be considered for molecular networking 2 Requires MS-Cluster to be on. This parameter should be tuned based on the dataset size. See presets below Run MSCluster Cluster MS/MS spectra before networking Yes MSCluster will analyze every MS/MS spectra resulting from ions that fall within the defined precursor ion mass tolerance, and will merge the nearly-identical MS/MS spectra (above the cosine score) into a single consensus MS/MS spectrum. Each consensus MS/MS spectrum usually consist of multiple MS/MS spectra from across multiple LC-MS runs (or data files) Maximum Connected Component Size Maximum size of nodes allowed in a single connected network 100 Maximum size of nodes allowed in a single connected network. Nodes within a single connected molecular network will be separated by increasing cosine threshold for that specific connected molecular network. Default value is 100. Use 0 to allow an unlimited number of nodes in a single network. Note that with large datasets, or when a great number of related molecules are in the dataset, this value should be higher (or turn to 0) to retain as much information as possible. Downstream, these larger networks can be visualized using Cytoscape layout algorithms that can increase the intra-network clustering, allowing to visualize spectral groups in the network despite the number of nodes in the network. Metadata File Text input to describe experimental setup Replaces both Group mapping and Attribute Mapping Group Mapping Input text file organizing input files into groups Input text file organizing input files into groups. used as a more flexible alternative to assigning groups during data input selection. Attribute Mapping Attribute mapping eases visualization of different groups within cytoscape Input text file organizing groups into attributes","title":"Advanced Network Options"},{"location":"networking/#advanced-library-search-options","text":"Parameter Description Default Library Search Min Matched Peaks Minimum number of common fragment ions that MS/MS spectra should contain in order to be considered for spectral library annotation. Default value is 6, but note that this parameters should be tuned depending of the molecule of interest, and the experimental conditions (such as the ionisation mode, and the fragmentation conditions, ...). For example, collision-induced fragmentation of some lipids produce only few fragment ions. A lower value will allow clustering of MS/MS spectra containing less fragment ions, however it will also induce clustering of MS/MS spectra from different molecular-type to be connected in one network. An higher value will do the opposite 6 Score Threshold Minimum cosine score that MS/MS spectra should get in spectral matching with MS/MS spectral libraries in order to be considered an annotation. 0.7 Search Analogs Will search data for analogs to library spectra Don't Search Maximum Analog Search Mass Difference Maximum mass shift between library and putative analog found 100 (Da)","title":"Advanced Library Search Options"},{"location":"networking/#advanced-filtering-options","text":"Parameter Description Default Notes Filter stdDev Intensity Deprecated 0 Not recommended to change Minimum Fragment Ion Intensity All fragment ions in the MS/MS spectrum below this raw intensity will be deleted. By default, no filter. 0 Reduce to 0 if your data's raw intensities are very low. Filter Precursor Ion Window All peaks in a +/- 17 Da around precursor ion mass are deleted. By default, yes filter. This removes the residual precursor ion, which is frequently observed in MS/MS spectra acquired on qTOFs. Filter Filter library Apply peak filters to library Filter Filter peaks in 50Da Window Filter out peaks that are not top 6 most intense peaks in a +/- 50Da window Filter Turn off if your data is very small molecules as it might filter out a lot peaks in the lower mass ranges that might be signal.","title":"Advanced Filtering Options"},{"location":"networking/#parameter-presets","text":"We have several parameter presets that seem to work well depending on the dataset size. Small datasets - up to 5 LC/MS files Medium Datasets - 5 to 400 LC/MS files Large Datasets - 400+ LC/MS files Big Data(sets) - Lets talk!","title":"Parameter Presets"},{"location":"networking/#status-page","text":"Upon submission of the workflow, you will be brought to the status page. This will show you the progress of your molecular networking job. Molecular networks usually take 10 min for small datasets 1 hour for medium datasets Several hours for large datasets FOREVER for big datasets If you find your molecular network is taking longer than this, please contact us .","title":"Status Page"},{"location":"networking/#online-exploration-of-molecular-networks","text":"After completing a Molecular Networking workflow utilizing GNPS, analysis can be done within the web interface. The GNPS web interface provides a quick and easy way to perform initial analysis of your data particularly if you want to view the MS2 spectra of the nodes/clusters/networks generated by the Molecular Networking workflow.","title":"Online Exploration of Molecular Networks"},{"location":"networking/#networking-results-views-description","text":"Default Views to Explore Molecular Networks View Description View All Library Hits All spectral library matches between consensus MS/MS spectra and the selected libraries View Unique Library Compounds All unique library spectrum matches View All Clusters With IDs All consensus MS/MS spectra created by MSCluster that were considered for library search and molecular networking. This does not include consensus MS/MS spectra that fell below the minimum cluster size threshold Network Visualizations View Description View Spectral Families (In Browser Network Visualizer) List of all Spectral Families (i.e. connected components in the network) as well as view the network visualized in the browser Network Summarizing Graphs Brief statistics about the network such as number of spectra, number of nodes, number of spectral families, identification rates, etc. (legacy output) Methods and Citation for Manuscripts View Description Networking Parameters and Written Network Description Automatic description of molecular networking generation. This can be used in the methods section of manuscripts Export/Download Network Files View Description Download Clustered Spectra as MGF Download consensus MS/MS spectra as an MGF file Download GraphML for Cytoscape Download network files (graphML) for import into Cytoscape Download Bucket Table Download spectral abundance for all consensus spectra across all files (calculated within each file as the sum precursor abundance) Download BioM for Qiime/Qiita Download BioM for spectral counts for analysis in Qiime/Qiita multivariate statistics tools Download Metadata for Qiime Download Metadata file for analysis in Qiime Download ili Data Download the abundance information formatted for ili Advanced Views - Global Public Dataset Matches View Description View Matches to All Public Datasets View matches of consensus MS/MS spectra in the network to all public datasets Advanced Views - Third Party Visualization View Description View Emperor PCoA Plot in GNPS In browser visualization of all analyzed samples with PCoA View ili in GNPS Visualization of 3D ili mapping in GNPS Advanced Views - Experimental Views View Description Direct Cytoscape Preview/Download Preview entire molecular network and download direct cys file to open in Cytoscape","title":"Networking Results Views Description"},{"location":"networking/#citation","text":"If you are using GNPS for analysis, please cite the manuscript Mingxun Wang, Jeremy J Carver, Vanessa V Phelan, Laura M Sanchez, Neha Garg, Yao Peng, et al. \"Sharing and community curation of mass spectrometry data with Global Natural Products Social Molecular Networking\" Nature Biotechnology 34.8 (2016): 828-837. PMID: 27504778 If you use MS-Cluster in your molecular networks, cite the following as well: Frank, Ari M., et al. \"Clustering millions of tandem mass spectra.\" Journal of proteome research 7.01 (2007): 113-122.","title":"Citation"},{"location":"networkingviews/","text":"View All Library Hits This view shows all the library matches between the consensus MS/MS spectra and the GNPS MS/MS Spectral Libraries. To view the quality of the MS/MS match, click \"View Mirror Match\" to display a mirror plot View All Clusters With IDs View All Clusters allow a user to view the all consensus spectra in the molecular networking analysis. While Molecular Networking matches to all public reference libraries, the majority of molecules detected in untargeted LC/MS runs are unidentified. To help annotate these unidentified spectra, click the \"AnnotatetoGNPS\" to be taken to the view that allows you to choose a specific MS/MS spectrum to annotate. Then Click \"AnnotatetoGNPS\" to be taken to the annotation page with the spectrum prepopulated. Check out the details about annotation - Annotation Documentation . To view all the input MS/MS spectra that went into the consensus spectrum, click the link in the \"ClusterIdx\" link This brings up all the input MS/MS spectra. To visualize each spectrum, we can click the \"View Spectrum\" button. View Spectral Families View Spectra Families allows users to look at the molecular networks at a higher level. Users can see all the distinct spectral families that comprise the entire molecular network. These spectral families are all the nodes that are connected to each other. From here users can tell how big each component is, how many raw spectra are captured by the particular component, and also the libraries identifications of all the spectra in each component. To visualize each network, click on the \"Visualize Network\" link This brings up an in-browser visualization for a given spectral family Here users can explore the specific spectral family in the molecular network. Each circle (node) in the left network panel represents a consensus spectrum and edge represents related fragmentation patterns. The default color of the nodes is gray, with blue nodes representing consensus MS/MS spectra that were identified by library search. There is a lot to unpack in this online interface to explore the molecular networks. The following is a quick guide to all the features in this interface Node Labels Edge Labels Edge Highlight Node Highlights by MS2 Peak Search Align MS/MS spectra in right panels Node Size/Color Selection Node Pie Chart Coloring Rerun Network Layout Expand Network Window Toggle UI Widgets (Show/Hide) Download Spectral Family GraphML for Cytoscape Download Spectrum Peaks Annotate Spectrum with Peptide Sequence Large Spectrum Plot Show Peak m/z annotations in Spectrum Viewer Network Labeling The default labeling is the cluster/node index which is rather uninformative, but there are alternative labelings possible by selecting the appropriate node label from the Node Label legend box. Node Labels Label Description cluster index cluster index used globally for each cluster across all networking views parent mass precursor mass of the consensus spectrum LibraryID library identification name for the node if a library search were performed EvenOdd 1/0 for even or odd depending on the parent mass. Used for nitrogen rule Peptide peptide labeling None No Labeling Edge Labels Label Description Cosine Cosine score measuring fragmentation similarity between two nodes DeltaMZ The Delta MZ of the spectra None No Labeling Node Pie Coloring An additional way to customize the view of the networks is to color the nodes. By default the nodes are gray, but users can color the nodes based upon spectra counts of the groups they came from. By default the coloring labels will be based upon the default groups G1, G2, G3, G4, G5, and G6. The coloring of each node will be a pie, and the proportion colored of that pie is the proportion of the spectral counts coming from each respective group. Additionally, the Node Coloring legend describes the color for each group. Users can also use their own group names if they defined their own arbitrary groups when creating the network. To draw the pies, click \"Draw Pies\" Edge Highlights Edges by default include arrows pointing from low mass spectra to high mass spectra. Further, edges can also be colored. Users are able to enter a delta mz of their choice to highlight in the network. The highlighted edges will appear in red. Edge Directions The arrows between nodes in the molecular network point from higher m/z spectra to lower m/z spectra. This can facilitate tracking down identifying multiple extensions of a polymer or extension of a carbon chain. Edge Delta Histogram This histogram shows the distribution of the edge deltas. Clicking each peak in the histogram allows for highlighting the edges in the network. Node Sizing/Color The nodes size and color can be adjusted based upon several options: Spectrum counts Precursor intensity Number of Files Parent Mass Nitrogen Even/Odd Precursor Charge MS2 Peak Search in Molecular Network To search for specific molecules in the molecular network that contain an MS2 fragment of interest, you can enter a product ion m/z you want to find. First, we need to grab all the MS/MS spectra into the browser by clicking this button: Then, we can enter the m/z we want to search for and click the update button. This will highlight which molecules contain the specific product ion. We can also see a histogram of all product ions from all MS2 spectra in the current network. Detailed Interrogation of Network Spectra While its great to visualize the network properly, to truly make sense of the network users must be able to interrogate the network metadata and examine the actual spectra. To this end, users are able to find out information about a particular node by simply hovering their mouse over node. This will bring up a hover box describing the node information. At present the display shows like this: This shows basic information about the node, as well as the structure if the node is identified by library search and the structure was provided in the library spectrum. To further investigate the network, users can left click on a node to plot the spectrum in the top right panel (right click to plot in bottom right panel), along with the spectrum information and structure if one is available. The spectrum image is interactive so users can zoom in and look at precisely at the spectrum to make sense of the data. Additionally users can compare two spectra in the network by simple right clicking on a different node to render its information in the bottom right panel. Users can also click on an edge and both nodes that are connected to the edge are automatically displayed in the top and bottom right panels. Examining Spectrum Spectrum Alignment Users can quickly ascertain how two spectra align to each other at the peak level. By clicking the \"Align Spec\" button to obtain the score between the spectrum in the top and the spectrum in the bottom render panels. Additionally, the plots of the spectra will update to reflect the alignments shown here: with red peaks representing peaks that match at the exact same masses between the top and bottom spectra, and blue peaks representing peaks matching at shifted masses. Additionally, each peak is labeled with a unique identification number that shows the correspondence of peak matches between the top and bottom spectra. Network Spectra Library Matches To view how exactly a spectrum in the network has matched to a library spectrum, users can click the \"Show Library Match\" in the side panel on the far right. This will bring up this middle panel shown below comparing the spectrum in the network with the library spectrum in green. Network Screen Shot Download screenshot of the molecular network. Network Layout Re-run Rerun network layout to fit zoom and window. Network Window Size Max network view bigger to see more of the network with more room. Pop up Window Pop out network visualizer into new window without top menu bars. Sub-Network GraphML for Cytoscape Download a GraphML of network and visualize in Cytoscape or other graph software. Hide Widgets Show or hide user interface widgets. View Principle Coordinate Analysis (PCoA) Plots To view PCoA plots, please enable that output on the input page (default is on) in the \"Advanced Output Options\" section and enabling \"Create Cluster Buckets and BioM/PCoA Plots output\". This will create the appropriate data structures for PCoA analysis. To include additional metadata to color the nodes according to the sample types, include and add additional columns for metadata describing the experiment (see metadata documentation ). To view the PCoA plots when the parameters are appropriately set, click the \"View Emporer PCoA Plot in GNPS\" under the section \"Advanced Views - Third Party Visualization\" on the results page of your GNPS job. This PCoA analysis measures the distance between each of the samples based on their overlapping molecules (by MSCluster). This emperor plot is generated by the Qiime software package. The distance metric is binary_jaccard.","title":"Molecular Networking Views"},{"location":"networkingviews/#view-all-library-hits","text":"This view shows all the library matches between the consensus MS/MS spectra and the GNPS MS/MS Spectral Libraries. To view the quality of the MS/MS match, click \"View Mirror Match\" to display a mirror plot","title":"View All Library Hits"},{"location":"networkingviews/#view-all-clusters-with-ids","text":"View All Clusters allow a user to view the all consensus spectra in the molecular networking analysis. While Molecular Networking matches to all public reference libraries, the majority of molecules detected in untargeted LC/MS runs are unidentified. To help annotate these unidentified spectra, click the \"AnnotatetoGNPS\" to be taken to the view that allows you to choose a specific MS/MS spectrum to annotate. Then Click \"AnnotatetoGNPS\" to be taken to the annotation page with the spectrum prepopulated. Check out the details about annotation - Annotation Documentation . To view all the input MS/MS spectra that went into the consensus spectrum, click the link in the \"ClusterIdx\" link This brings up all the input MS/MS spectra. To visualize each spectrum, we can click the \"View Spectrum\" button.","title":"View All Clusters With IDs"},{"location":"networkingviews/#view-spectral-families","text":"View Spectra Families allows users to look at the molecular networks at a higher level. Users can see all the distinct spectral families that comprise the entire molecular network. These spectral families are all the nodes that are connected to each other. From here users can tell how big each component is, how many raw spectra are captured by the particular component, and also the libraries identifications of all the spectra in each component. To visualize each network, click on the \"Visualize Network\" link This brings up an in-browser visualization for a given spectral family Here users can explore the specific spectral family in the molecular network. Each circle (node) in the left network panel represents a consensus spectrum and edge represents related fragmentation patterns. The default color of the nodes is gray, with blue nodes representing consensus MS/MS spectra that were identified by library search. There is a lot to unpack in this online interface to explore the molecular networks. The following is a quick guide to all the features in this interface Node Labels Edge Labels Edge Highlight Node Highlights by MS2 Peak Search Align MS/MS spectra in right panels Node Size/Color Selection Node Pie Chart Coloring Rerun Network Layout Expand Network Window Toggle UI Widgets (Show/Hide) Download Spectral Family GraphML for Cytoscape Download Spectrum Peaks Annotate Spectrum with Peptide Sequence Large Spectrum Plot Show Peak m/z annotations in Spectrum Viewer","title":"View Spectral Families"},{"location":"networkingviews/#network-labeling","text":"The default labeling is the cluster/node index which is rather uninformative, but there are alternative labelings possible by selecting the appropriate node label from the Node Label legend box. Node Labels Label Description cluster index cluster index used globally for each cluster across all networking views parent mass precursor mass of the consensus spectrum LibraryID library identification name for the node if a library search were performed EvenOdd 1/0 for even or odd depending on the parent mass. Used for nitrogen rule Peptide peptide labeling None No Labeling Edge Labels Label Description Cosine Cosine score measuring fragmentation similarity between two nodes DeltaMZ The Delta MZ of the spectra None No Labeling","title":"Network Labeling"},{"location":"networkingviews/#node-pie-coloring","text":"An additional way to customize the view of the networks is to color the nodes. By default the nodes are gray, but users can color the nodes based upon spectra counts of the groups they came from. By default the coloring labels will be based upon the default groups G1, G2, G3, G4, G5, and G6. The coloring of each node will be a pie, and the proportion colored of that pie is the proportion of the spectral counts coming from each respective group. Additionally, the Node Coloring legend describes the color for each group. Users can also use their own group names if they defined their own arbitrary groups when creating the network. To draw the pies, click \"Draw Pies\"","title":"Node Pie Coloring"},{"location":"networkingviews/#edge-highlights","text":"Edges by default include arrows pointing from low mass spectra to high mass spectra. Further, edges can also be colored. Users are able to enter a delta mz of their choice to highlight in the network. The highlighted edges will appear in red.","title":"Edge Highlights"},{"location":"networkingviews/#edge-directions","text":"The arrows between nodes in the molecular network point from higher m/z spectra to lower m/z spectra. This can facilitate tracking down identifying multiple extensions of a polymer or extension of a carbon chain.","title":"Edge Directions"},{"location":"networkingviews/#edge-delta-histogram","text":"This histogram shows the distribution of the edge deltas. Clicking each peak in the histogram allows for highlighting the edges in the network.","title":"Edge Delta Histogram"},{"location":"networkingviews/#node-sizingcolor","text":"The nodes size and color can be adjusted based upon several options: Spectrum counts Precursor intensity Number of Files Parent Mass Nitrogen Even/Odd Precursor Charge","title":"Node Sizing/Color"},{"location":"networkingviews/#ms2-peak-search-in-molecular-network","text":"To search for specific molecules in the molecular network that contain an MS2 fragment of interest, you can enter a product ion m/z you want to find. First, we need to grab all the MS/MS spectra into the browser by clicking this button: Then, we can enter the m/z we want to search for and click the update button. This will highlight which molecules contain the specific product ion. We can also see a histogram of all product ions from all MS2 spectra in the current network.","title":"MS2 Peak Search in Molecular Network"},{"location":"networkingviews/#detailed-interrogation-of-network-spectra","text":"While its great to visualize the network properly, to truly make sense of the network users must be able to interrogate the network metadata and examine the actual spectra. To this end, users are able to find out information about a particular node by simply hovering their mouse over node. This will bring up a hover box describing the node information. At present the display shows like this: This shows basic information about the node, as well as the structure if the node is identified by library search and the structure was provided in the library spectrum. To further investigate the network, users can left click on a node to plot the spectrum in the top right panel (right click to plot in bottom right panel), along with the spectrum information and structure if one is available. The spectrum image is interactive so users can zoom in and look at precisely at the spectrum to make sense of the data. Additionally users can compare two spectra in the network by simple right clicking on a different node to render its information in the bottom right panel. Users can also click on an edge and both nodes that are connected to the edge are automatically displayed in the top and bottom right panels.","title":"Detailed Interrogation of Network Spectra"},{"location":"networkingviews/#examining-spectrum-spectrum-alignment","text":"Users can quickly ascertain how two spectra align to each other at the peak level. By clicking the \"Align Spec\" button to obtain the score between the spectrum in the top and the spectrum in the bottom render panels. Additionally, the plots of the spectra will update to reflect the alignments shown here: with red peaks representing peaks that match at the exact same masses between the top and bottom spectra, and blue peaks representing peaks matching at shifted masses. Additionally, each peak is labeled with a unique identification number that shows the correspondence of peak matches between the top and bottom spectra.","title":"Examining Spectrum Spectrum Alignment"},{"location":"networkingviews/#network-spectra-library-matches","text":"To view how exactly a spectrum in the network has matched to a library spectrum, users can click the \"Show Library Match\" in the side panel on the far right. This will bring up this middle panel shown below comparing the spectrum in the network with the library spectrum in green.","title":"Network Spectra Library Matches"},{"location":"networkingviews/#network-screen-shot","text":"Download screenshot of the molecular network.","title":"Network Screen Shot"},{"location":"networkingviews/#network-layout-re-run","text":"Rerun network layout to fit zoom and window.","title":"Network Layout Re-run"},{"location":"networkingviews/#network-window-size","text":"Max network view bigger to see more of the network with more room.","title":"Network Window Size"},{"location":"networkingviews/#pop-up-window","text":"Pop out network visualizer into new window without top menu bars.","title":"Pop up Window"},{"location":"networkingviews/#sub-network-graphml-for-cytoscape","text":"Download a GraphML of network and visualize in Cytoscape or other graph software.","title":"Sub-Network GraphML for Cytoscape"},{"location":"networkingviews/#hide-widgets","text":"Show or hide user interface widgets.","title":"Hide Widgets"},{"location":"networkingviews/#view-principle-coordinate-analysis-pcoa-plots","text":"To view PCoA plots, please enable that output on the input page (default is on) in the \"Advanced Output Options\" section and enabling \"Create Cluster Buckets and BioM/PCoA Plots output\". This will create the appropriate data structures for PCoA analysis. To include additional metadata to color the nodes according to the sample types, include and add additional columns for metadata describing the experiment (see metadata documentation ). To view the PCoA plots when the parameters are appropriately set, click the \"View Emporer PCoA Plot in GNPS\" under the section \"Advanced Views - Third Party Visualization\" on the results page of your GNPS job. This PCoA analysis measures the distance between each of the samples based on their overlapping molecules (by MSCluster). This emperor plot is generated by the Qiime software package. The distance metric is binary_jaccard.","title":"View Principle Coordinate Analysis (PCoA) Plots"},{"location":"quickstart/","text":"This is a quickstart guide that will enable you to prepare your data, create a GNPS account, upload to GNPS, and create your a molecular network on GNPS. While there are a wide variety of other tools at GNPS, molecular networking analysis is a great place to get your feet wet. Converting Data Convert vendor formats to open formats using MSConvert locally. Checkout this documentation . Create a GNPS Account Account registration is a simple process, and completely private \u2013 GNPS will never use your contact information for any reason other than to email you the outcome of your dataset submissions and other workflows. To register an account, navigate to the GNPS web site . Here you will find a registration link in the upper right corner of the page, just below the login box. Click on the registration link to bring up the account registration form. Upload data (Quick) Open a ftp client such as WinSCP (Not Filezilla as it includes malware) client with the following input parameters; Host: ccms-ftp01.ucsd.edu followed by entering your user name and password for GNPS followed by enter. Choose the location of your files within the local site drop down menu. Highlight the files or folders to upload and select upload by right clicking. You will then see the files being queued and transferred to GNPS. Once all the files are uploaded using this method they will be available for you to use for your molecular networking workflows within GNPS. For a more detailed description of all the ways to upload data, please refer to our Upload Documentation Molecular Networking Input Navigate to the molecular networking analysis page . Molecular Networking Parameter Presets There are three presets that set the parameters to approximately appropriate values depending on the size of your dataset. Please select the appropriate one given the follow criteria: Small Dataset - up to 5 LC/MS files Medium Dataset - 5 to 400 LC/MS files Large Dataset - 400+ LC/MS files Naming your analysis Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed. Selecting Data Input Files Within the Basic Options header; to input your spectrum files, select the input files tab next to the Spectrum files (required) field. A pop-up window with three tabs will appear; Select Input Files, Upload Files, Share Files. Proceed by selecting the files you want to analyze by clicking on the mass spectrometry file or an entire folder. Next click on the Spectrum Files G1 button to mark these files for analysis. You may select more files for analysis and put them in the separate groups (G1, G2, G3, G4, G5, G6) to reflect your experimental design. If you are performing an analysis with more than six groups, a metadata file may be used (see Networking Documentation ). Once you are done selecting files to analyze, close the pop-up and hit submit. View Analysis Results Browsing Identifications To quickly glance at all the molecules in your data matching to the GNPS community knowledge of reference MS/MS spectra, click on \"View All Library Hits\". Viewing Network (Quick) To visualize the molecular networks in the browser, click the \"View Spectral Families (In Browser Network Visualization)\". This brings you to a list of all the individual networks (connected components) that are in your data. Click on the \"Visualize Network\" link to explore each network individually. Your selection can be guided by the identifications within each network if there is a specific molecule of interest. Advanced Online Visualization For a more detailed guide on how to explore the molecular networks online, please refer to our documentation","title":"Quick Start Guide"},{"location":"quickstart/#converting-data","text":"Convert vendor formats to open formats using MSConvert locally. Checkout this documentation .","title":"Converting Data"},{"location":"quickstart/#create-a-gnps-account","text":"Account registration is a simple process, and completely private \u2013 GNPS will never use your contact information for any reason other than to email you the outcome of your dataset submissions and other workflows. To register an account, navigate to the GNPS web site . Here you will find a registration link in the upper right corner of the page, just below the login box. Click on the registration link to bring up the account registration form.","title":"Create a GNPS Account"},{"location":"quickstart/#upload-data-quick","text":"Open a ftp client such as WinSCP (Not Filezilla as it includes malware) client with the following input parameters; Host: ccms-ftp01.ucsd.edu followed by entering your user name and password for GNPS followed by enter. Choose the location of your files within the local site drop down menu. Highlight the files or folders to upload and select upload by right clicking. You will then see the files being queued and transferred to GNPS. Once all the files are uploaded using this method they will be available for you to use for your molecular networking workflows within GNPS. For a more detailed description of all the ways to upload data, please refer to our Upload Documentation","title":"Upload data (Quick)"},{"location":"quickstart/#molecular-networking-input","text":"Navigate to the molecular networking analysis page .","title":"Molecular Networking Input"},{"location":"quickstart/#molecular-networking-parameter-presets","text":"There are three presets that set the parameters to approximately appropriate values depending on the size of your dataset. Please select the appropriate one given the follow criteria: Small Dataset - up to 5 LC/MS files Medium Dataset - 5 to 400 LC/MS files Large Dataset - 400+ LC/MS files","title":"Molecular Networking Parameter Presets"},{"location":"quickstart/#naming-your-analysis","text":"Provide a detailed title for your molecular network. This title will be helpful when you retrieve your data after the workflow is completed.","title":"Naming your analysis"},{"location":"quickstart/#selecting-data-input-files","text":"Within the Basic Options header; to input your spectrum files, select the input files tab next to the Spectrum files (required) field. A pop-up window with three tabs will appear; Select Input Files, Upload Files, Share Files. Proceed by selecting the files you want to analyze by clicking on the mass spectrometry file or an entire folder. Next click on the Spectrum Files G1 button to mark these files for analysis. You may select more files for analysis and put them in the separate groups (G1, G2, G3, G4, G5, G6) to reflect your experimental design. If you are performing an analysis with more than six groups, a metadata file may be used (see Networking Documentation ). Once you are done selecting files to analyze, close the pop-up and hit submit.","title":"Selecting Data Input Files"},{"location":"quickstart/#view-analysis-results","text":"","title":"View Analysis Results"},{"location":"quickstart/#browsing-identifications","text":"To quickly glance at all the molecules in your data matching to the GNPS community knowledge of reference MS/MS spectra, click on \"View All Library Hits\".","title":"Browsing Identifications"},{"location":"quickstart/#viewing-network-quick","text":"To visualize the molecular networks in the browser, click the \"View Spectral Families (In Browser Network Visualization)\". This brings you to a list of all the individual networks (connected components) that are in your data. Click on the \"Visualize Network\" link to explore each network individually. Your selection can be guided by the identifications within each network if there is a specific molecule of interest.","title":"Viewing Network (Quick)"},{"location":"quickstart/#advanced-online-visualization","text":"For a more detailed guide on how to explore the molecular networks online, please refer to our documentation","title":"Advanced Online Visualization"},{"location":"resultviews/","text":"Here we highlight general properties of table result views in GNPS. Filtering Tables Filtering Rows for Substring If you want to find rows that include a substring that you are interested in, simply enter the value in the box and hit enter. For example, to find all the identifications that include the substring \"mycin\": link . Filtering Rows with a single column AND operator If you want to filter a table in GNPS on a single column and the value in a given column must contain ALL of the substrings you define, you can use the \" \" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1 G2. See this link for an example. If you want to use negation, e.g. G1 AND not G2, you can use the carrot ^ like in this example G1 ^G2. Filtering Rows with a single column OR operator If you want to filter a table in GNPS on a single column and the value in a given column must contain at least one of the substrings you define, you can use the \"||\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1||G2. See this link for an example. Downloading Table Results In order to download the data for a result table in GNPS that you are currently viewing, click the download button:","title":"Result Views Navigation"},{"location":"resultviews/#filtering-tables","text":"","title":"Filtering Tables"},{"location":"resultviews/#filtering-rows-for-substring","text":"If you want to find rows that include a substring that you are interested in, simply enter the value in the box and hit enter. For example, to find all the identifications that include the substring \"mycin\": link .","title":"Filtering Rows for Substring"},{"location":"resultviews/#filtering-rows-with-a-single-column-and-operator","text":"If you want to filter a table in GNPS on a single column and the value in a given column must contain ALL of the substrings you define, you can use the \" \" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1 G2. See this link for an example. If you want to use negation, e.g. G1 AND not G2, you can use the carrot ^ like in this example G1 ^G2.","title":"Filtering Rows with a single column AND operator"},{"location":"resultviews/#filtering-rows-with-a-single-column-or-operator","text":"If you want to filter a table in GNPS on a single column and the value in a given column must contain at least one of the substrings you define, you can use the \"||\" between substrings you want to search. For example, for a molecular network, if you want to find all the nodes that are from G1 AND G2, you can use the following syntax: G1||G2. See this link for an example.","title":"Filtering Rows with a single column OR operator"},{"location":"resultviews/#downloading-table-results","text":"In order to download the data for a result table in GNPS that you are currently viewing, click the download button:","title":"Downloading Table Results"},{"location":"spectrumcuration/","text":"Community Curated MS/MS Spectral Libraries GNPS provides a platform for users to contribute their own annotated MS/MS spectra to the spectral libraries. There are several requirements for annotation: 1) the compound must be of known structure and 2) the MS/MS must be of sufficient quality to support the annotation of the compound. By contributing these spectra, users will expand the spectral libraries and allow dereplication of these compounds within other datasets. Library Quality Level The spectral libraries are categorized based upon quality of the data. The level indicates both the quality of the MS/MS spectra as well as the trust worthiness of the annotations. These reflect both quality of the MS/MS spectra as well as the trust worthiness of the annotations. Quality Level Description Quality Number Gold Synthetic, Complete structural characterization with NMR, crystallography or other standard methods as defined in the publication guidelines for Journal of Natural Products, Privileged users 1 Silver Isolated or lysate/crude, Published data showing presence of molecule in the sample 2 Bronze Any other putative, complete or partial annotation 3 Challenge Unknown Identity, open to community to help annotate 10 By default, users will have access to Bronze, but approval is required to contribute to silver and gold libraries. To obtain training and access please email Mingxun Wang . Adding Single Spectra Input Formats mzXML, mzML, and mgf file formats are accepted. Additionally, spectra to be added to the library should be centroided. Profile data is not processed correctly by our algorithms. Adding Spectrum From the GNPS Splash Page , users can click on to be brought to the Add Single Annotated Spectrum workflow. By default, users will contribute bronze quality reference spectra. Permission is required to contribute higher quality spectra to the gold and silver workflows. Select an input spectrum file. NOTE: do not change the spectral library that is selected. Annotation Fields Sample Parameters Field Description Default Required Ion Source Source of Ions LC-ESI Yes Instrument Mass Analyzer qTof Yes Ion Mode Ionization Mode Positive Yes Compound Source Sample source of compound Commercial Yes Principle Investigator PI overseeing compound acquisition and analysis N/A Yes Data Collector Individual Collecting Data N/A Yes Annotation Field Description Default Required Scan Spectrum Scan of Spectrum 0 Yes Adduct Adduct of Ion fragmented in MS2 M+H Yes Compound Name Compound Common Name N/A Yes Precursor MZ Experimental Precursor MZ for Compound 0 (will read from spectrum file if 0) Yes Charge Charge of Precursor 0 (will read from spectrum file if 0) Yes Advanced Annotation Field Description Default Required CAS Number Chemical Abstracts Service compound identification number N/A No Pubmed ID Pubmed ID where compound or data was published N/A No Exact Mass Compound Exact Mass 0 No Smiles Smiles Structure N/A No Inchi Inchi Structure N/A No Inchi Aux Inchi Auxiliary Structure N/A No Validation Spectra Selection To validate the input file and scan a user has selected, there is a plotting section that will attempt to plot the spectrum selected. To plot the spectrum, click \"Plot It!\". Additionally, if users would like to see the annotation with a peptide fragment highlights, users can enter a peptide in the Peptide field, but this will not be stored in the annotation. If the plotting succeeded and a spectrum appears, then the selection for the spectrum is done correctly. If there was an error, check the original file was converted correctly and the scan number is not 0.","title":"Reference Spectral Library Curation"},{"location":"spectrumcuration/#community-curated-msms-spectral-libraries","text":"GNPS provides a platform for users to contribute their own annotated MS/MS spectra to the spectral libraries. There are several requirements for annotation: 1) the compound must be of known structure and 2) the MS/MS must be of sufficient quality to support the annotation of the compound. By contributing these spectra, users will expand the spectral libraries and allow dereplication of these compounds within other datasets.","title":"Community Curated MS/MS Spectral Libraries"},{"location":"spectrumcuration/#library-quality-level","text":"The spectral libraries are categorized based upon quality of the data. The level indicates both the quality of the MS/MS spectra as well as the trust worthiness of the annotations. These reflect both quality of the MS/MS spectra as well as the trust worthiness of the annotations. Quality Level Description Quality Number Gold Synthetic, Complete structural characterization with NMR, crystallography or other standard methods as defined in the publication guidelines for Journal of Natural Products, Privileged users 1 Silver Isolated or lysate/crude, Published data showing presence of molecule in the sample 2 Bronze Any other putative, complete or partial annotation 3 Challenge Unknown Identity, open to community to help annotate 10 By default, users will have access to Bronze, but approval is required to contribute to silver and gold libraries. To obtain training and access please email Mingxun Wang .","title":"Library Quality Level"},{"location":"spectrumcuration/#adding-single-spectra","text":"","title":"Adding Single Spectra"},{"location":"spectrumcuration/#input-formats","text":"mzXML, mzML, and mgf file formats are accepted. Additionally, spectra to be added to the library should be centroided. Profile data is not processed correctly by our algorithms.","title":"Input Formats"},{"location":"spectrumcuration/#adding-spectrum","text":"From the GNPS Splash Page , users can click on to be brought to the Add Single Annotated Spectrum workflow. By default, users will contribute bronze quality reference spectra. Permission is required to contribute higher quality spectra to the gold and silver workflows. Select an input spectrum file. NOTE: do not change the spectral library that is selected.","title":"Adding Spectrum"},{"location":"spectrumcuration/#annotation-fields","text":"Sample Parameters Field Description Default Required Ion Source Source of Ions LC-ESI Yes Instrument Mass Analyzer qTof Yes Ion Mode Ionization Mode Positive Yes Compound Source Sample source of compound Commercial Yes Principle Investigator PI overseeing compound acquisition and analysis N/A Yes Data Collector Individual Collecting Data N/A Yes Annotation Field Description Default Required Scan Spectrum Scan of Spectrum 0 Yes Adduct Adduct of Ion fragmented in MS2 M+H Yes Compound Name Compound Common Name N/A Yes Precursor MZ Experimental Precursor MZ for Compound 0 (will read from spectrum file if 0) Yes Charge Charge of Precursor 0 (will read from spectrum file if 0) Yes Advanced Annotation Field Description Default Required CAS Number Chemical Abstracts Service compound identification number N/A No Pubmed ID Pubmed ID where compound or data was published N/A No Exact Mass Compound Exact Mass 0 No Smiles Smiles Structure N/A No Inchi Inchi Structure N/A No Inchi Aux Inchi Auxiliary Structure N/A No","title":"Annotation Fields"},{"location":"spectrumcuration/#validation-spectra-selection","text":"To validate the input file and scan a user has selected, there is a plotting section that will attempt to plot the spectrum selected. To plot the spectrum, click \"Plot It!\". Additionally, if users would like to see the annotation with a peptide fragment highlights, users can enter a peptide in the Peptide field, but this will not be stored in the annotation. If the plotting succeeded and a spectrum appears, then the selection for the spectrum is done correctly. If there was an error, check the original file was converted correctly and the scan number is not 0.","title":"Validation Spectra Selection"},{"location":"superquickstart/","text":"This is a superquick start guide that will enable you to analyze your data in the following ways without having to create an account or install any software besides your web browser and conversion software. Classic Molecular Networking - Analyze a few dozen samples in up to 3 cohorts Feature Based Molecular Networking - Analyze with Molecular Networks out of your favorite feature detection software The limitations to this method is that the files uploaded will not reside in your own account (though no one else can see them) and will eventually disappear from GNPS. Classic Molecular Networking Please navigate to the super quickstart page to begin with Classic Molecular Networking! Converting Data Convert vendor formats to open formats using MSConvert locally. Checkout this documentation . Selecting Files Simply drag and drop your mass spectrometry files (mzML, mzXML, or mgf) into the appropriate cohorts you want to compare. Files are required to be uploaded to Cohort Group 1. Analyze Files Once files have been uploaded into the appropriate cohort, enter your email and click the \"Analyze Uploaded Files with GNPS Molecular Networking\" button. This will bring you to a GNPS workflow status page. If you entered an email, you will receive an email once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this is the only way for you to find analysis again. Results To understand the results, please refer to the analysis section of the standard quickstart guide . Feature Based Molecular Networking Please navigate to the super quickstart page to begin with Feature Based Molecular Networking! Selecting Files Simply drag and drop the files out of your feature finding tool: Feature Quantification Table Feature MS/MS MGF file Sample Metadata (Optional) - Format can be found here Additional Pairs Externally Generated (Optional) - Format pending Analyze Files Once files have been uploaded, enter your email and click the \"Analyze Uploaded Files with GNPS Molecular Networking\" button. This will bring you to a GNPS workflow status page. If you entered an email, you will receive an email once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this is the only way for you to find analysis again. Results To understand the results, please refer to the feature based molecular networking page .","title":"Superquick Start Guide"},{"location":"superquickstart/#classic-molecular-networking","text":"Please navigate to the super quickstart page to begin with Classic Molecular Networking!","title":"Classic Molecular Networking"},{"location":"superquickstart/#converting-data","text":"Convert vendor formats to open formats using MSConvert locally. Checkout this documentation .","title":"Converting Data"},{"location":"superquickstart/#selecting-files","text":"Simply drag and drop your mass spectrometry files (mzML, mzXML, or mgf) into the appropriate cohorts you want to compare. Files are required to be uploaded to Cohort Group 1.","title":"Selecting Files"},{"location":"superquickstart/#analyze-files","text":"Once files have been uploaded into the appropriate cohort, enter your email and click the \"Analyze Uploaded Files with GNPS Molecular Networking\" button. This will bring you to a GNPS workflow status page. If you entered an email, you will receive an email once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this is the only way for you to find analysis again.","title":"Analyze Files"},{"location":"superquickstart/#results","text":"To understand the results, please refer to the analysis section of the standard quickstart guide .","title":"Results"},{"location":"superquickstart/#feature-based-molecular-networking","text":"Please navigate to the super quickstart page to begin with Feature Based Molecular Networking!","title":"Feature Based Molecular Networking"},{"location":"superquickstart/#selecting-files_1","text":"Simply drag and drop the files out of your feature finding tool: Feature Quantification Table Feature MS/MS MGF file Sample Metadata (Optional) - Format can be found here Additional Pairs Externally Generated (Optional) - Format pending","title":"Selecting Files"},{"location":"superquickstart/#analyze-files_1","text":"Once files have been uploaded, enter your email and click the \"Analyze Uploaded Files with GNPS Molecular Networking\" button. This will bring you to a GNPS workflow status page. If you entered an email, you will receive an email once the analysis job is complete. If you did not enter an email, save the URL of the analysis as this is the only way for you to find analysis again.","title":"Analyze Files"},{"location":"superquickstart/#results_1","text":"To understand the results, please refer to the feature based molecular networking page .","title":"Results"},{"location":"troubleshooting/","text":"Overview This section addresses some common issues with the analysis workflows at GNPS. If you run into any of these common issues, hopefully this page will give you actionable steps to address them. If this page cannot help you, please refer to the forum to help answer your questions. Molecular Networking Failed Job \"Empty MS/MS\". - This means that your input data has no MS/MS spectra. This could mean one of several things The file format input is incorrect. Please make sure it is a supported file format for GNPS. The mass spectrometry files do not contain MS/MS spectra. These files cannot be analyzed by GNPS. The filtering criteria are too aggressive. Please use an appropriate preset for your data. \"spectral library search exceeded memory\" - This means that the spectral library search step used too much memory and had to be terminated. This is likely caused by changing the set of spectral libraries used in search. It is not recommended to change the set of libraries included unless you are an advanced users. Please remove all libraries except for the default \"speclibs\" and rerun. \"Missing filename in Metadata\" - The metadata file included for networking is formatted incorrectly. Please refer to metadata formatting to correct this. Results Incorrect No attributes or groups in output Make sure the metadata file includes the appropriate columns and attributes are prefixed with ATTRIBUTE_ and that the metadata file is a tab separated text file. Library Search (Dereplication) No Results Check that the parameters are OK... Make sure you have the right format Make sure you have MS/MS spectra in your data Single Spectrum Search A common error is missing intensities for masses. Simply masses are insufficient, intensities are also required.","title":"Troubleshooting"},{"location":"troubleshooting/#overview","text":"This section addresses some common issues with the analysis workflows at GNPS. If you run into any of these common issues, hopefully this page will give you actionable steps to address them. If this page cannot help you, please refer to the forum to help answer your questions.","title":"Overview"},{"location":"troubleshooting/#molecular-networking","text":"","title":"Molecular Networking"},{"location":"troubleshooting/#failed-job","text":"\"Empty MS/MS\". - This means that your input data has no MS/MS spectra. This could mean one of several things The file format input is incorrect. Please make sure it is a supported file format for GNPS. The mass spectrometry files do not contain MS/MS spectra. These files cannot be analyzed by GNPS. The filtering criteria are too aggressive. Please use an appropriate preset for your data. \"spectral library search exceeded memory\" - This means that the spectral library search step used too much memory and had to be terminated. This is likely caused by changing the set of spectral libraries used in search. It is not recommended to change the set of libraries included unless you are an advanced users. Please remove all libraries except for the default \"speclibs\" and rerun. \"Missing filename in Metadata\" - The metadata file included for networking is formatted incorrectly. Please refer to metadata formatting to correct this.","title":"Failed Job"},{"location":"troubleshooting/#results-incorrect","text":"","title":"Results Incorrect"},{"location":"troubleshooting/#no-attributes-or-groups-in-output","text":"Make sure the metadata file includes the appropriate columns and attributes are prefixed with ATTRIBUTE_ and that the metadata file is a tab separated text file.","title":"No attributes or groups in output"},{"location":"troubleshooting/#library-search-dereplication","text":"","title":"Library Search (Dereplication)"},{"location":"troubleshooting/#no-results","text":"Check that the parameters are OK... Make sure you have the right format Make sure you have MS/MS spectra in your data","title":"No Results"},{"location":"troubleshooting/#single-spectrum-search","text":"A common error is missing intensities for masses. Simply masses are insufficient, intensities are also required.","title":"Single Spectrum Search"},{"location":"user/","text":"User Page At GNPS, since there is so much power given to the user to affect the system, it is necessary for users to keep track of their own account. Specifically, in the user summary page, users can view the datasets that they have uploaded, browse the datasets they have subscribed to, spectra they have contributed to the GNPS spectral libraries, and the spectra that have been contributed to GNPS challenge spectra. My Datasets Users are able to see all their own datasets, either public or private in a view like this: From here users can view their private datasets and make them public if they wish or simply browse their own datasets. Additionally, users can share their datasets with the world via Twitter and Facebook. My Subscriptions Users can see all datasets they are subscribed to My Library Spectra These are all the annotated MS/MS spectra you have contributed to the community GNPS library.","title":"User Page"},{"location":"user/#user-page","text":"At GNPS, since there is so much power given to the user to affect the system, it is necessary for users to keep track of their own account. Specifically, in the user summary page, users can view the datasets that they have uploaded, browse the datasets they have subscribed to, spectra they have contributed to the GNPS spectral libraries, and the spectra that have been contributed to GNPS challenge spectra.","title":"User Page"},{"location":"user/#my-datasets","text":"Users are able to see all their own datasets, either public or private in a view like this: From here users can view their private datasets and make them public if they wish or simply browse their own datasets. Additionally, users can share their datasets with the world via Twitter and Facebook.","title":"My Datasets"},{"location":"user/#my-subscriptions","text":"Users can see all datasets they are subscribed to","title":"My Subscriptions"},{"location":"user/#my-library-spectra","text":"These are all the annotated MS/MS spectra you have contributed to the community GNPS library.","title":"My Library Spectra"},{"location":"workshops/","text":"Upcoming Workshops Venue Description Dates Material Symposia of Natural Products Natural Product Dereplication using GNPS Feb 5, 2019 Check it out! Your Venue Here GNPS Beginner Workshop TBA TBA Your Venue Here GNPS Advanced Tools Workshop TBA TBA Your Venue Here GNPS Advanced Analysis Workshop TBA TBA If you would like to host a GNPS workshop together with the GNPS team, please reach out to Ming to organize the logistics! Previous Workshops Venue Description Dates Material Metabolomics 2018 GNPS Introduction, Molecular Networking - Food Analysis, `ili 3D cartography of plants, MS2LDA July 2018 Coming Soon ASP 2018 GNPS Introduction, Molecular Networking - Natural Product Discovery in bacterial extraction, `ili 3D cartography, MetBLAST - leveraging public datasets July 2018 Download EMSC Workshop 2018 This short course is aimed at explaining how to use the METASPACE and GNPS platforms for large scale data analysis in mass spectrometry (MS) based metabolomics experiments March 11, 2018 Download GNPS workshop in Grahamstown, South Africa (Rhodes University) GNPS introduction with Molecular Networking November 14, 2018 N/A CCMS School - Natural Product Training GNPS, Molecular Networking, Library Search, Quantitative Analysis, NP Database Search, De novo cyclopeptide sequencing Dec 12/13 2018 Download Host Your Own If you would like to organize your own GNPS workshop to train new users, please reach out to Ming and we'd be happy to provide you with training and promotional materials.","title":"GNPS Workshops"},{"location":"workshops/#upcoming-workshops","text":"Venue Description Dates Material Symposia of Natural Products Natural Product Dereplication using GNPS Feb 5, 2019 Check it out! Your Venue Here GNPS Beginner Workshop TBA TBA Your Venue Here GNPS Advanced Tools Workshop TBA TBA Your Venue Here GNPS Advanced Analysis Workshop TBA TBA If you would like to host a GNPS workshop together with the GNPS team, please reach out to Ming to organize the logistics!","title":"Upcoming Workshops"},{"location":"workshops/#previous-workshops","text":"Venue Description Dates Material Metabolomics 2018 GNPS Introduction, Molecular Networking - Food Analysis, `ili 3D cartography of plants, MS2LDA July 2018 Coming Soon ASP 2018 GNPS Introduction, Molecular Networking - Natural Product Discovery in bacterial extraction, `ili 3D cartography, MetBLAST - leveraging public datasets July 2018 Download EMSC Workshop 2018 This short course is aimed at explaining how to use the METASPACE and GNPS platforms for large scale data analysis in mass spectrometry (MS) based metabolomics experiments March 11, 2018 Download GNPS workshop in Grahamstown, South Africa (Rhodes University) GNPS introduction with Molecular Networking November 14, 2018 N/A CCMS School - Natural Product Training GNPS, Molecular Networking, Library Search, Quantitative Analysis, NP Database Search, De novo cyclopeptide sequencing Dec 12/13 2018 Download","title":"Previous Workshops"},{"location":"workshops/#host-your-own","text":"If you would like to organize your own GNPS workshop to train new users, please reach out to Ming and we'd be happy to provide you with training and promotional materials.","title":"Host Your Own"},{"location":"massspecbackground/identification/","text":"Overview Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/identification/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/networkingtheory/","text":"Molecular Networking Theory While there are many publications out there giving algorithmic and intuition into molecular networking, we attempt a cliff notes version here. Spectral Similarity Related to Molecular Structure Similarity A key concept in tandem mass spectrometry is that repeated MS/MS acquisitions of a molecule under the same experimental conditions (e.g. same instrument, collision energy, abundance, charge state) will yield highly similar MS/MS spectra. That is, fragmentation of molecules is consistent. This enables the identification of MS/MS spectra to libraries of reference compounds. Extending this concept, we have observed that structurally related molecules also exhibit similar fragmentation, with some caveats. Intuitively, two molecules that differ by the addition of a single chemical moiety, which does not contribute to a significant difference in molecule mass and not drastically change the bond energies of the molecule (e.g. Oxidation, methylation, glycosylation), will not drastically perturb the gas phase chemistry of fragmentation. Given that relative bond strengths between the two molecules do not drastically differ, the same bonds will undergo similar fragmentation within the collision cell of the mass spectrometer. The resulting corresponding product ions in the MS/MS spectra from the two molecules will either include the additional chemical moiety or will not. In cases fragments do not, the chemical moiety could either have Not been part of the product ion substructure Cleaved off prior to product ion formation Since corresponding product ions between structurally similar molecules can either have moiety or not, the product ions can either Appear at the exact same mass for both molecules Appear shifted by the mass of the chemical moiety Watrous et al. PNAS We consider both of these possibilities for each and every peak between two MS/MS spectra and explore how we do that below. Spectrum Alignment We will use a toy example here to demonstrate intuitively how we are able to consider an alignment between two MS/MS spectra. Given two molecules that differ by a single chemical moiety that each produce fragmentation as shown We can consider that each peak from molecule A, could align at the same mass in molecule B, or at an offset of Mass(Delta). One possible alignment is all peaks in A, align at the same mass Another, where the first peak aligns at the same mass, the second at an offset Third, where the first peak aligns at an offset, and the second aligns at the same mass Finally, where both peaks align at an offset All of these potential alignments can be explored and the best scoring alignment is determined between the two MS/MS spectra and is called the alignment score. The total number of potential alignments is exponential (2 ^ N, where N is the number of peaks) and is computationally expensive. GNPS has implemented algorithms that can efficiently approximate this alignment. Alignment of Entire Dataset So far we've investigated how to align one MS/MS spectrum to another, but have not created molecular networks across an entire dataset of MS/MS spectra. Since we do not know a priori, which MS/MS spectra will be structurally similar to any others, we must try aligning all MS/MS spectra within a dataset to all others. GNPS calculates the score between all MS/MS spectra within a dataset that provides the starting point of a molecular network. Network Filtering for Visualization The alignments between all MS/MS spectra must be filtered in order to produce molecular networks that can be visualized and interpretable. Alignment Score Filtering The most basic filter is by alignment score between MS/MS spectra. Generally, the default of cosine of 0.7 and 6 minimum matches peaks reduces the number of false positive alignments tremendously. Neighbor Top K A pathological case in Molecular Networks are promiscuous MS/MS spectra that align to many other MS/MS spectra due to a low complexity of fragmentation. To counteract this, only retain alignments between alignments between MS/MS spectra that mutually rank each other highly in the alignment score. Just like in human relationships, who wants a best friend who has a million other best friends? Connected Component Max Size Even with the above filters, the occasional false positive connections causes hairball networks that make visualization/interpretation difficult. The connected component size filter limits the maximum size of a single molecular network to a parameterized number of nodes (100 by default). This process iteratively breaks up large hairball networks by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size. Limitation of Molecular Networking Multiple Modifications Molecular networking is unable to align spectra from molecules that differ by two distinct structural modifications. We have observed that this limitation is ameliorated in biological datasets because chemical modifications are enzymatically catalyzed. In the event that two molecules differ by two distinct chemical modification which cannot be connected by molecular networking, an intermediate molecule which differs by only a single chemical modification to the respective molecules and links all three molecules into a molecular family.","title":"Molecular Networking"},{"location":"massspecbackground/networkingtheory/#molecular-networking-theory","text":"While there are many publications out there giving algorithmic and intuition into molecular networking, we attempt a cliff notes version here.","title":"Molecular Networking Theory"},{"location":"massspecbackground/networkingtheory/#spectral-similarity-related-to-molecular-structure-similarity","text":"A key concept in tandem mass spectrometry is that repeated MS/MS acquisitions of a molecule under the same experimental conditions (e.g. same instrument, collision energy, abundance, charge state) will yield highly similar MS/MS spectra. That is, fragmentation of molecules is consistent. This enables the identification of MS/MS spectra to libraries of reference compounds. Extending this concept, we have observed that structurally related molecules also exhibit similar fragmentation, with some caveats. Intuitively, two molecules that differ by the addition of a single chemical moiety, which does not contribute to a significant difference in molecule mass and not drastically change the bond energies of the molecule (e.g. Oxidation, methylation, glycosylation), will not drastically perturb the gas phase chemistry of fragmentation. Given that relative bond strengths between the two molecules do not drastically differ, the same bonds will undergo similar fragmentation within the collision cell of the mass spectrometer. The resulting corresponding product ions in the MS/MS spectra from the two molecules will either include the additional chemical moiety or will not. In cases fragments do not, the chemical moiety could either have Not been part of the product ion substructure Cleaved off prior to product ion formation Since corresponding product ions between structurally similar molecules can either have moiety or not, the product ions can either Appear at the exact same mass for both molecules Appear shifted by the mass of the chemical moiety Watrous et al. PNAS We consider both of these possibilities for each and every peak between two MS/MS spectra and explore how we do that below.","title":"Spectral Similarity Related to Molecular Structure Similarity"},{"location":"massspecbackground/networkingtheory/#spectrum-alignment","text":"We will use a toy example here to demonstrate intuitively how we are able to consider an alignment between two MS/MS spectra. Given two molecules that differ by a single chemical moiety that each produce fragmentation as shown We can consider that each peak from molecule A, could align at the same mass in molecule B, or at an offset of Mass(Delta). One possible alignment is all peaks in A, align at the same mass Another, where the first peak aligns at the same mass, the second at an offset Third, where the first peak aligns at an offset, and the second aligns at the same mass Finally, where both peaks align at an offset All of these potential alignments can be explored and the best scoring alignment is determined between the two MS/MS spectra and is called the alignment score. The total number of potential alignments is exponential (2 ^ N, where N is the number of peaks) and is computationally expensive. GNPS has implemented algorithms that can efficiently approximate this alignment.","title":"Spectrum Alignment"},{"location":"massspecbackground/networkingtheory/#alignment-of-entire-dataset","text":"So far we've investigated how to align one MS/MS spectrum to another, but have not created molecular networks across an entire dataset of MS/MS spectra. Since we do not know a priori, which MS/MS spectra will be structurally similar to any others, we must try aligning all MS/MS spectra within a dataset to all others. GNPS calculates the score between all MS/MS spectra within a dataset that provides the starting point of a molecular network.","title":"Alignment of Entire Dataset"},{"location":"massspecbackground/networkingtheory/#network-filtering-for-visualization","text":"The alignments between all MS/MS spectra must be filtered in order to produce molecular networks that can be visualized and interpretable.","title":"Network Filtering for Visualization"},{"location":"massspecbackground/networkingtheory/#alignment-score-filtering","text":"The most basic filter is by alignment score between MS/MS spectra. Generally, the default of cosine of 0.7 and 6 minimum matches peaks reduces the number of false positive alignments tremendously.","title":"Alignment Score Filtering"},{"location":"massspecbackground/networkingtheory/#neighbor-top-k","text":"A pathological case in Molecular Networks are promiscuous MS/MS spectra that align to many other MS/MS spectra due to a low complexity of fragmentation. To counteract this, only retain alignments between alignments between MS/MS spectra that mutually rank each other highly in the alignment score. Just like in human relationships, who wants a best friend who has a million other best friends?","title":"Neighbor Top K"},{"location":"massspecbackground/networkingtheory/#connected-component-max-size","text":"Even with the above filters, the occasional false positive connections causes hairball networks that make visualization/interpretation difficult. The connected component size filter limits the maximum size of a single molecular network to a parameterized number of nodes (100 by default). This process iteratively breaks up large hairball networks by removing the lowest scoring alignments (by cosine score) first until the resulting pieces fall below the maximum size.","title":"Connected Component Max Size"},{"location":"massspecbackground/networkingtheory/#limitation-of-molecular-networking","text":"","title":"Limitation of Molecular Networking"},{"location":"massspecbackground/networkingtheory/#multiple-modifications","text":"Molecular networking is unable to align spectra from molecules that differ by two distinct structural modifications. We have observed that this limitation is ameliorated in biological datasets because chemical modifications are enzymatically catalyzed. In the event that two molecules differ by two distinct chemical modification which cannot be connected by molecular networking, an intermediate molecule which differs by only a single chemical modification to the respective molecules and links all three molecules into a molecular family.","title":"Multiple Modifications"},{"location":"massspecbackground/quantification/","text":"Overview Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/quantification/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/tandemms/","text":"Overview Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/tandemms/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/targeteduntargeted/","text":"Overview Pardon our dust, this page is still under construction","title":"Overview"},{"location":"massspecbackground/targeteduntargeted/#overview","text":"Pardon our dust, this page is still under construction","title":"Overview"},{"location":"tutorials/americangutmzmine/","text":"In this tutorial we highlight how to use MZmine2 to detect features to produce files for Feature Based Molecular Networking to uncover unique metabolism of molecules found in the American Gut Project. Experimental Setup LC-MS/MS analysis of American Gut Stool samples for participants that consumed plants. Learning Objectives Learn how to download files from GNPS Datasets Run MZmine2 feature detection and output quantification and MS/MS associated with each feature. See the tutorial here Required Software Installs FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here MZMine2 for feature detection Cytocape for network visualization Data Availability LC-MS/MS data can be found in the MassIVE dataset MSV000082678 . Video Tutorial - Run MZmine2 Follow up Tutorial in GNPS Checkout the follow up tutorial on how to take the output of MZMine2 to produce a molecular network at GNPS.","title":"Feature Based Molecular Networking - MZmine2 Feature Detection - Microbiome Molecules in Fecal Samples in American Gut Project"},{"location":"tutorials/americangutmzmine/#experimental-setup","text":"LC-MS/MS analysis of American Gut Stool samples for participants that consumed plants.","title":"Experimental Setup"},{"location":"tutorials/americangutmzmine/#learning-objectives","text":"Learn how to download files from GNPS Datasets Run MZmine2 feature detection and output quantification and MS/MS associated with each feature. See the tutorial here","title":"Learning Objectives"},{"location":"tutorials/americangutmzmine/#required-software-installs","text":"FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here MZMine2 for feature detection Cytocape for network visualization","title":"Required Software Installs"},{"location":"tutorials/americangutmzmine/#data-availability","text":"LC-MS/MS data can be found in the MassIVE dataset MSV000082678 .","title":"Data Availability"},{"location":"tutorials/americangutmzmine/#video-tutorial-run-mzmine2","text":"","title":"Video Tutorial - Run MZmine2"},{"location":"tutorials/americangutmzmine/#follow-up-tutorial-in-gnps","text":"Checkout the follow up tutorial on how to take the output of MZMine2 to produce a molecular network at GNPS.","title":"Follow up Tutorial in GNPS"},{"location":"tutorials/bacterianetworking/","text":"In this tutorial, we highlight how GNPS and molecular networking can help users uncover unique molecules being produced a new strain of bacteria. Experimental Setup Microbial extracts from Streptomyces roseosporus and Streptomyces sp. DSM5940 were analyzed on an LTQ FT mass spectrometer. The mass spectrometer was operated in data dependent positive ion mode; automatically switching between full scan high resolution FT MS and low resolution LTQ MS/MS acquisitions. Full scan MS spectra were acquired in the FT and the top six most intense ions in a particular scan were fragmented using collision induced dissociation (CID) at a constant collision energy of 35eV, an activation Q of 0.25, and an activation time of 50 to 80 ms. Data Availability MS/MS data can be found in the MassIVE dataset MSV000079204 . There are a total of four mzXML mass spectrometry files that have already been converted for analysis. filename Description ccms_peak/0518_s_BuOH.mzXML S. roseosporus extract ccms_peak/15998_nBuOH_FT_test01.mzXML S. roseosporus extract ccms_peak/DSM4950_BuOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract ccms_peak/DSM4950_MeOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract Running Molecular Networking Select molecular networking analysis . Selecting Files Click \"Select Input Files\" - Help Import MSV000079204 to analyze - Help Select S. roseosporus files into Group G1 and Streptomyces sp. DSM5940 into Group G2 Updating parameters These parameters were selected to be appropriate for a small dataset and a little on the loose side. The following are the updates that deviate from the default. Advanced Network Options - Min Pairs Cos: 0.65 Advanced Network Options - Minimum Cluster Size: 1 Advanced Filtering Options - Filter Precursor Window: Don't Filter Advanced Filtering Options - Filter peaks in 50Da Window: Don't Filter Advanced Filtering Options - Filter Library: Don't Filter Pre-filled example If you want to see a pre-filled example, see here . Analyzing Results in Browser This is an example completed molecular networking analysis . Exploring Identified Compounds in Data Click the \"View All Library Hits\". This will list all library compounds that were matched. Here we can see many different antibiotics, e.g. Stenothricin, Arylomycin, Daptomycin, and Mureidomycin. Exploring Molecular Networks including Stenothricin Click the \"View All Clusters With IDs\". This brings you to a list of all MS/MS detected in your samples. We can filter on \"Stenothricin\" in the LibraryID column. Click on \"View Network\" for any of the Stenothricin compounds: Here we can see the molecular network of related compounds to Stenothricin To color the nodes by which species they came from, click the draw pies We can now see all the compounds from S. roseosporus in red and Streptomyces sp. DSM5940 in blue. Further, we can highlight the compounds where are identified (blue border of nodes) and show the actual names This network indicates to us that there are some unique compounds being produced by Streptomyces sp. DSM5940 that are related to Stenothricin. To highlight what might be different about these molecules, we can highlight the mass differences between connected (structurally related) molecules in the network. We can see the Stenothricin-GNPS 2 is a molecule which we discovered using molecular networking. We can further interrogate the similarity at the fragmentation level by clicking the edge between the two nodes to visualize the MS/MS spectra and align the peaks Analyzing Global Network with Cytoscape Click the \"Direct Cytoscape Preview/Download\" to get a preformatted cytoscape file In this preview you can even see from a high level the red and blue molecules that represent the G1 (roseosporus) and G2 (DSM5940) respectively. Download the Cytoscape file and view in cytoscape to dig further! Open network in Cytoscape ( Help ) to look at the entire network. Each molecule (node) has the pie charts already drawn with red (G1 - Rosesporus) and blue (G2 - DSM5940). Good Luck! Homework Look for putative analogs of other antibiotics such as Arylomycin and Daptomycin.","title":"Molecular Networking - Analog Discovery in Microbial Extracts"},{"location":"tutorials/bacterianetworking/#experimental-setup","text":"Microbial extracts from Streptomyces roseosporus and Streptomyces sp. DSM5940 were analyzed on an LTQ FT mass spectrometer. The mass spectrometer was operated in data dependent positive ion mode; automatically switching between full scan high resolution FT MS and low resolution LTQ MS/MS acquisitions. Full scan MS spectra were acquired in the FT and the top six most intense ions in a particular scan were fragmented using collision induced dissociation (CID) at a constant collision energy of 35eV, an activation Q of 0.25, and an activation time of 50 to 80 ms.","title":"Experimental Setup"},{"location":"tutorials/bacterianetworking/#data-availability","text":"MS/MS data can be found in the MassIVE dataset MSV000079204 . There are a total of four mzXML mass spectrometry files that have already been converted for analysis. filename Description ccms_peak/0518_s_BuOH.mzXML S. roseosporus extract ccms_peak/15998_nBuOH_FT_test01.mzXML S. roseosporus extract ccms_peak/DSM4950_BuOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract ccms_peak/DSM4950_MeOH_ziptip_data_dependent.mzXML Streptomyces sp. DSM5940 extract","title":"Data Availability"},{"location":"tutorials/bacterianetworking/#running-molecular-networking","text":"Select molecular networking analysis .","title":"Running Molecular Networking"},{"location":"tutorials/bacterianetworking/#selecting-files","text":"Click \"Select Input Files\" - Help Import MSV000079204 to analyze - Help Select S. roseosporus files into Group G1 and Streptomyces sp. DSM5940 into Group G2","title":"Selecting Files"},{"location":"tutorials/bacterianetworking/#updating-parameters","text":"These parameters were selected to be appropriate for a small dataset and a little on the loose side. The following are the updates that deviate from the default. Advanced Network Options - Min Pairs Cos: 0.65 Advanced Network Options - Minimum Cluster Size: 1 Advanced Filtering Options - Filter Precursor Window: Don't Filter Advanced Filtering Options - Filter peaks in 50Da Window: Don't Filter Advanced Filtering Options - Filter Library: Don't Filter","title":"Updating parameters"},{"location":"tutorials/bacterianetworking/#pre-filled-example","text":"If you want to see a pre-filled example, see here .","title":"Pre-filled example"},{"location":"tutorials/bacterianetworking/#analyzing-results-in-browser","text":"This is an example completed molecular networking analysis .","title":"Analyzing Results in Browser"},{"location":"tutorials/bacterianetworking/#exploring-identified-compounds-in-data","text":"Click the \"View All Library Hits\". This will list all library compounds that were matched. Here we can see many different antibiotics, e.g. Stenothricin, Arylomycin, Daptomycin, and Mureidomycin.","title":"Exploring Identified Compounds in Data"},{"location":"tutorials/bacterianetworking/#exploring-molecular-networks-including-stenothricin","text":"Click the \"View All Clusters With IDs\". This brings you to a list of all MS/MS detected in your samples. We can filter on \"Stenothricin\" in the LibraryID column. Click on \"View Network\" for any of the Stenothricin compounds: Here we can see the molecular network of related compounds to Stenothricin To color the nodes by which species they came from, click the draw pies We can now see all the compounds from S. roseosporus in red and Streptomyces sp. DSM5940 in blue. Further, we can highlight the compounds where are identified (blue border of nodes) and show the actual names This network indicates to us that there are some unique compounds being produced by Streptomyces sp. DSM5940 that are related to Stenothricin. To highlight what might be different about these molecules, we can highlight the mass differences between connected (structurally related) molecules in the network. We can see the Stenothricin-GNPS 2 is a molecule which we discovered using molecular networking. We can further interrogate the similarity at the fragmentation level by clicking the edge between the two nodes to visualize the MS/MS spectra and align the peaks","title":"Exploring Molecular Networks including Stenothricin"},{"location":"tutorials/bacterianetworking/#analyzing-global-network-with-cytoscape","text":"Click the \"Direct Cytoscape Preview/Download\" to get a preformatted cytoscape file In this preview you can even see from a high level the red and blue molecules that represent the G1 (roseosporus) and G2 (DSM5940) respectively. Download the Cytoscape file and view in cytoscape to dig further! Open network in Cytoscape ( Help ) to look at the entire network. Each molecule (node) has the pie charts already drawn with red (G1 - Rosesporus) and blue (G2 - DSM5940). Good Luck!","title":"Analyzing Global Network with Cytoscape"},{"location":"tutorials/bacterianetworking/#homework","text":"Look for putative analogs of other antibiotics such as Arylomycin and Daptomycin.","title":"Homework"},{"location":"tutorials/featurebasedgnps/","text":"In this tutorial we highlight how to take the quantification/ms2 spectra to create a molecular network at GNPS. Prerequisites If you have learned how to detect features, please checkout the MZmine2 tutorial . Experimental Setup LC-MS/MS analysis of American Gut Stool samples for participants that consumed plants. MZmine2 was used to detect features and output a quantification table and MS2 Spectra MGF file with a single MS2 representing each consensus feature across all samples. Learning Objectives Run Feature Based Molecular Networking for output from MZmine2 feature finding in GNPS. See the workflow here (Note that you must be logged in GNPS first). Explore Molecular Networking Results briefly in GNPS Export Molecular Network to Cytoscape Required Software Installs FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here Cytocape for network visualization Data Availability Full LC-MS/MS data can be found in the MassIVE dataset MSV000082678 . Files Needed for Tutorial File Type Download Link Feature Quantifications Download MS2 Spectra MGF Download Study Metadata Download Video Tutorial - Analyze Feature Based Molecular Networking in GNPS Video Tutorial - Quick MZMine2 Export to GNPS Feature Based Molecular Networking","title":"Feature Based Molecular Networking - GNPS"},{"location":"tutorials/featurebasedgnps/#prerequisites","text":"If you have learned how to detect features, please checkout the MZmine2 tutorial .","title":"Prerequisites"},{"location":"tutorials/featurebasedgnps/#experimental-setup","text":"LC-MS/MS analysis of American Gut Stool samples for participants that consumed plants. MZmine2 was used to detect features and output a quantification table and MS2 Spectra MGF file with a single MS2 representing each consensus feature across all samples.","title":"Experimental Setup"},{"location":"tutorials/featurebasedgnps/#learning-objectives","text":"Run Feature Based Molecular Networking for output from MZmine2 feature finding in GNPS. See the workflow here (Note that you must be logged in GNPS first). Explore Molecular Networking Results briefly in GNPS Export Molecular Network to Cytoscape","title":"Learning Objectives"},{"location":"tutorials/featurebasedgnps/#required-software-installs","text":"FTP Client (e.g. WinSCP, DO NOT FileZilla!) See instructions here Cytocape for network visualization","title":"Required Software Installs"},{"location":"tutorials/featurebasedgnps/#data-availability","text":"Full LC-MS/MS data can be found in the MassIVE dataset MSV000082678 .","title":"Data Availability"},{"location":"tutorials/featurebasedgnps/#files-needed-for-tutorial","text":"File Type Download Link Feature Quantifications Download MS2 Spectra MGF Download Study Metadata Download","title":"Files Needed for Tutorial"},{"location":"tutorials/featurebasedgnps/#video-tutorial-analyze-feature-based-molecular-networking-in-gnps","text":"","title":"Video Tutorial - Analyze Feature Based Molecular Networking in GNPS"},{"location":"tutorials/featurebasedgnps/#video-tutorial-quick-mzmine2-export-to-gnps-feature-based-molecular-networking","text":"","title":"Video Tutorial - Quick MZMine2 Export to GNPS Feature Based Molecular Networking"}]}